var dE=Object.defineProperty,hE=Object.defineProperties;var pE=Object.getOwnPropertyDescriptors;var Xd=Object.getOwnPropertySymbols,mE=Object.getPrototypeOf,Rv=Object.prototype.hasOwnProperty,Ev=Object.prototype.propertyIsEnumerable,gE=Reflect.get;var _a=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),fE=t=>{throw TypeError(t)},Ig=Math.pow,Cv=(t,e,n)=>e in t?dE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ke=(t,e)=>{for(var n in e||(e={}))Rv.call(e,n)&&Cv(t,n,e[n]);if(Xd)for(var n of Xd(e))Ev.call(e,n)&&Cv(t,n,e[n]);return t},We=(t,e)=>hE(t,pE(e));var Av=(t,e)=>{var n={};for(var i in t)Rv.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Xd)for(var i of Xd(t))e.indexOf(i)<0&&Ev.call(t,i)&&(n[i]=t[i]);return n};var yE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fr=(t,e,n)=>gE(mE(t),n,e);var C=(t,e,n)=>new Promise((i,o)=>{var s=c=>{try{l(n.next(c))}catch(u){o(u)}},a=c=>{try{l(n.throw(c))}catch(u){o(u)}},l=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,a);l((n=n.apply(t,e)).next())}),sr=function(t,e){this[0]=t,this[1]=e},Jd=(t,e,n)=>{var i=(a,l,c,u)=>{try{var h=n[a](l),p=(l=h.value)instanceof sr,g=h.done;Promise.resolve(p?l[0]:l).then(y=>p?i(a==="return"?a:"next",l[1]?{done:y.done,value:y.value}:y,c,u):c({value:y,done:g})).catch(y=>i("throw",y,c,u))}catch(y){u(y)}},o=a=>s[a]=l=>new Promise((c,u)=>i(a,l,c,u)),s={};return n=n.apply(t,e),s[_a("asyncIterator")]=()=>s,o("next"),o("throw"),o("return"),s},Cg=t=>{var e=t[_a("asyncIterator")],n=!1,i,o={};return e==null?(e=t[_a("iterator")](),i=s=>o[s]=a=>e[s](a)):(e=e.call(t),i=s=>o[s]=a=>{if(n){if(n=!1,s==="throw")throw a;return a}return n=!0,{done:!1,value:new sr(new Promise(l=>{var c=e[s](a);c instanceof Object||fE("Object expected"),l(c)}),1)}}),o[_a("iterator")]=()=>o,i("next"),"throw"in e?i("throw"):o.throw=s=>{throw s},"return"in e&&i("return"),o},Ia=(t,e,n)=>(e=t[_a("asyncIterator")])?e.call(t):(t=t[_a("iterator")](),e={},n=(i,o)=>(o=t[i])&&(e[i]=s=>new Promise((a,l,c)=>(s=o.call(t,s),c=s.done,Promise.resolve(s.value).then(u=>a({value:u,done:c}),l)))),n("next"),n("return"),e);var h9=yE(Zn=>{function xE(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function bE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cT={exports:{}},dm={},uT={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Symbol.for("react.element"),vE=Symbol.for("react.portal"),kE=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),SE=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),jE=Symbol.for("react.context"),_E=Symbol.for("react.forward_ref"),IE=Symbol.for("react.suspense"),CE=Symbol.for("react.memo"),RE=Symbol.for("react.lazy"),Bv=Symbol.iterator;function EE(t){return t===null||typeof t!="object"?null:(t=Bv&&t[Bv]||t["@@iterator"],typeof t=="function"?t:null)}var dT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hT=Object.assign,pT={};function Ql(t,e,n){this.props=t,this.context=e,this.refs=pT,this.updater=n||dT}Ql.prototype.isReactComponent={};Ql.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ql.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mT(){}mT.prototype=Ql.prototype;function kx(t,e,n){this.props=t,this.context=e,this.refs=pT,this.updater=n||dT}var wx=kx.prototype=new mT;wx.constructor=kx;hT(wx,Ql.prototype);wx.isPureReactComponent=!0;var Pv=Array.isArray,gT=Object.prototype.hasOwnProperty,Sx={current:null},fT={key:!0,ref:!0,__self:!0,__source:!0};function yT(t,e,n){var i,o={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)gT.call(e,i)&&!fT.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)o[i]===void 0&&(o[i]=l[i]);return{$$typeof:nd,type:t,key:s,ref:a,props:o,_owner:Sx.current}}function AE(t,e){return{$$typeof:nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tx(t){return typeof t=="object"&&t!==null&&t.$$typeof===nd}function BE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fv=/\/+/g;function Rg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BE(""+t.key):e.toString(36)}function Eh(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case nd:case vE:a=!0}}if(a)return a=t,o=o(a),t=i===""?"."+Rg(a,0):i,Pv(o)?(n="",t!=null&&(n=t.replace(Fv,"$&/")+"/"),Eh(o,e,n,"",function(u){return u})):o!=null&&(Tx(o)&&(o=AE(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Fv,"$&/")+"/")+t)),e.push(o)),1;if(a=0,i=i===""?".":i+":",Pv(t))for(var l=0;l<t.length;l++){s=t[l];var c=i+Rg(s,l);a+=Eh(s,e,n,c,o)}else if(c=EE(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=i+Rg(s,l++),a+=Eh(s,e,n,c,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zd(t,e,n){if(t==null)return t;var i=[],o=0;return Eh(t,i,"","",function(s){return e.call(n,s,o++)}),i}function PE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ni={current:null},Ah={transition:null},FE={ReactCurrentDispatcher:ni,ReactCurrentBatchConfig:Ah,ReactCurrentOwner:Sx};function xT(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:Zd,forEach:function(t,e,n){Zd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zd(t,function(){e++}),e},toArray:function(t){return Zd(t,function(e){return e})||[]},only:function(t){if(!Tx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mt.Component=Ql;mt.Fragment=kE;mt.Profiler=SE;mt.PureComponent=kx;mt.StrictMode=wE;mt.Suspense=IE;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FE;mt.act=xT;mt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=hT({},t.props),o=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Sx.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)gT.call(e,c)&&!fT.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:nd,type:t.type,key:o,ref:s,props:i,_owner:a}};mt.createContext=function(t){return t={$$typeof:jE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TE,_context:t},t.Consumer=t};mt.createElement=yT;mt.createFactory=function(t){var e=yT.bind(null,t);return e.type=t,e};mt.createRef=function(){return{current:null}};mt.forwardRef=function(t){return{$$typeof:_E,render:t}};mt.isValidElement=Tx;mt.lazy=function(t){return{$$typeof:RE,_payload:{_status:-1,_result:t},_init:PE}};mt.memo=function(t,e){return{$$typeof:CE,type:t,compare:e===void 0?null:e}};mt.startTransition=function(t){var e=Ah.transition;Ah.transition={};try{t()}finally{Ah.transition=e}};mt.unstable_act=xT;mt.useCallback=function(t,e){return ni.current.useCallback(t,e)};mt.useContext=function(t){return ni.current.useContext(t)};mt.useDebugValue=function(){};mt.useDeferredValue=function(t){return ni.current.useDeferredValue(t)};mt.useEffect=function(t,e){return ni.current.useEffect(t,e)};mt.useId=function(){return ni.current.useId()};mt.useImperativeHandle=function(t,e,n){return ni.current.useImperativeHandle(t,e,n)};mt.useInsertionEffect=function(t,e){return ni.current.useInsertionEffect(t,e)};mt.useLayoutEffect=function(t,e){return ni.current.useLayoutEffect(t,e)};mt.useMemo=function(t,e){return ni.current.useMemo(t,e)};mt.useReducer=function(t,e,n){return ni.current.useReducer(t,e,n)};mt.useRef=function(t){return ni.current.useRef(t)};mt.useState=function(t){return ni.current.useState(t)};mt.useSyncExternalStore=function(t,e,n){return ni.current.useSyncExternalStore(t,e,n)};mt.useTransition=function(){return ni.current.useTransition()};mt.version="18.3.1";uT.exports=mt;var m=uT.exports;const mn=bE(m),zE=xE({__proto__:null,default:mn},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE=m,DE=Symbol.for("react.element"),ME=Symbol.for("react.fragment"),WE=Object.prototype.hasOwnProperty,LE=NE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OE={key:!0,ref:!0,__self:!0,__source:!0};function bT(t,e,n){var i,o={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)WE.call(e,i)&&!OE.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:DE,type:t,key:s,ref:a,props:o,_owner:LE.current}}dm.Fragment=ME;dm.jsx=bT;dm.jsxs=bT;cT.exports=dm;var r=cT.exports,vT={exports:{}},Bi={},kT={exports:{}},wT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,ee){var he=V.length;V.push(ee);e:for(;0<he;){var ve=he-1>>>1,be=V[ve];if(0<o(be,ee))V[ve]=ee,V[he]=be,he=ve;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var ee=V[0],he=V.pop();if(he!==ee){V[0]=he;e:for(var ve=0,be=V.length,te=be>>>1;ve<te;){var N=2*(ve+1)-1,O=V[N],oe=N+1,ge=V[oe];if(0>o(O,he))oe<be&&0>o(ge,O)?(V[ve]=ge,V[oe]=he,ve=oe):(V[ve]=O,V[N]=he,ve=N);else if(oe<be&&0>o(ge,he))V[ve]=ge,V[oe]=he,ve=oe;else break e}}return ee}function o(V,ee){var he=V.sortIndex-ee.sortIndex;return he!==0?he:V.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,p=null,g=3,y=!1,k=!1,j=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(V){for(var ee=n(u);ee!==null;){if(ee.callback===null)i(u);else if(ee.startTime<=V)i(u),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(u)}}function z(V){if(j=!1,v(V),!k)if(n(c)!==null)k=!0,X(D);else{var ee=n(u);ee!==null&&de(z,ee.startTime-V)}}function D(V,ee){k=!1,j&&(j=!1,x(S),S=-1),y=!0;var he=g;try{for(v(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||V&&!A());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,g=p.priorityLevel;var be=ve(p.expirationTime<=ee);ee=t.unstable_now(),typeof be=="function"?p.callback=be:p===n(c)&&i(c),v(ee)}else i(c);p=n(c)}if(p!==null)var te=!0;else{var N=n(u);N!==null&&de(z,N.startTime-ee),te=!1}return te}finally{p=null,g=he,y=!1}}var P=!1,_=null,S=-1,R=5,E=-1;function A(){return!(t.unstable_now()-E<R)}function B(){if(_!==null){var V=t.unstable_now();E=V;var ee=!0;try{ee=_(!0,V)}finally{ee?I():(P=!1,_=null)}}else P=!1}var I;if(typeof b=="function")I=function(){b(B)};else if(typeof MessageChannel!="undefined"){var re=new MessageChannel,Q=re.port2;re.port1.onmessage=B,I=function(){Q.postMessage(null)}}else I=function(){T(B,0)};function X(V){_=V,P||(P=!0,I())}function de(V,ee){S=T(function(){V(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){k||y||(k=!0,X(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var he=g;g=ee;try{return V()}finally{g=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var he=g;g=V;try{return ee()}finally{g=he}},t.unstable_scheduleCallback=function(V,ee,he){var ve=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ve+he:ve):he=ve,V){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=he+be,V={id:h++,callback:ee,priorityLevel:V,startTime:he,expirationTime:be,sortIndex:-1},he>ve?(V.sortIndex=he,e(u,V),n(c)===null&&V===n(u)&&(j?(x(S),S=-1):j=!0,de(z,he-ve))):(V.sortIndex=be,e(c,V),k||y||(k=!0,X(D))),V},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(V){var ee=g;return function(){var he=g;g=ee;try{return V.apply(this,arguments)}finally{g=he}}}})(wT);kT.exports=wT;var VE=kT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE=m,Ei=VE;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ST=new Set,ku={};function ha(t,e){xl(t,e),xl(t+"Capture",e)}function xl(t,e){for(ku[t]=e,t=0;t<e.length;t++)ST.add(e[t])}var Xr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Pf=Object.prototype.hasOwnProperty,qE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},Nv={};function HE(t){return Pf.call(Nv,t)?!0:Pf.call(zv,t)?!1:qE.test(t)?Nv[t]=!0:(zv[t]=!0,!1)}function $E(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KE(t,e,n,i){if(e===null||typeof e=="undefined"||$E(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ii(t,e,n,i,o,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mn[t]=new ii(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mn[e]=new ii(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mn[t]=new ii(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mn[t]=new ii(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mn[t]=new ii(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mn[t]=new ii(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mn[t]=new ii(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mn[t]=new ii(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mn[t]=new ii(t,5,!1,t.toLowerCase(),null,!1,!1)});var jx=/[\-:]([a-z])/g;function _x(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jx,_x);Mn[e]=new ii(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jx,_x);Mn[e]=new ii(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jx,_x);Mn[e]=new ii(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mn[t]=new ii(t,1,!1,t.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mn[t]=new ii(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ix(t,e,n,i){var o=Mn.hasOwnProperty(e)?Mn[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KE(e,n,o,i)&&(n=null),i||o===null?HE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var so=UE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eh=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Ga=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),Ff=Symbol.for("react.profiler"),TT=Symbol.for("react.provider"),jT=Symbol.for("react.context"),Rx=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Nf=Symbol.for("react.suspense_list"),Ex=Symbol.for("react.memo"),wo=Symbol.for("react.lazy"),_T=Symbol.for("react.offscreen"),Dv=Symbol.iterator;function jc(t){return t===null||typeof t!="object"?null:(t=Dv&&t[Dv]||t["@@iterator"],typeof t=="function"?t:null)}var en=Object.assign,Eg;function Vc(t){if(Eg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eg=e&&e[1]||""}return`
`+Eg+t}var Ag=!1;function Bg(t,e){if(!t||Ag)return"";Ag=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=i.stack.split(`
`),a=o.length-1,l=s.length-1;1<=a&&0<=l&&o[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(o[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||o[a]!==s[l]){var c=`
`+o[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Ag=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vc(t):""}function GE(t){switch(t.tag){case 5:return Vc(t.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return t=Bg(t.type,!1),t;case 11:return t=Bg(t.type.render,!1),t;case 1:return t=Bg(t.type,!0),t;default:return""}}function Df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ga:return"Fragment";case Ka:return"Portal";case Ff:return"Profiler";case Cx:return"StrictMode";case zf:return"Suspense";case Nf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jT:return(t.displayName||"Context")+".Consumer";case TT:return(t._context.displayName||"Context")+".Provider";case Rx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ex:return e=t.displayName||null,e!==null?e:Df(t.type)||"Memo";case wo:e=t._payload,t=t._init;try{return Df(t(e))}catch(n){}}return null}function QE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Df(e);case 8:return e===Cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ko(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YE(t){var e=IT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function th(t){t._valueTracker||(t._valueTracker=YE(t))}function CT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=IT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ap(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Mf(t,e){var n=e.checked;return en({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Mv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ko(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RT(t,e){e=e.checked,e!=null&&Ix(t,"checked",e,!1)}function Wf(t,e){RT(t,e);var n=Ko(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lf(t,e.type,Ko(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lf(t,e,n){(e!=="number"||ap(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uc=Array.isArray;function ol(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ko(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Of(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return en({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(Uc(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ko(n)}}function ET(t,e){var n=Ko(e.value),i=Ko(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nh,BT=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nh=nh||document.createElement("div"),nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XE=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(t){XE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jc[e]=Jc[t]})});function PT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jc.hasOwnProperty(t)&&Jc[t]?(""+e).trim():e+"px"}function FT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=PT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var JE=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uf(t,e){if(e){if(JE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function qf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=null;function Ax(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $f=null,sl=null,al=null;function Vv(t){if(t=od(t)){if(typeof $f!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=fm(e),$f(t.stateNode,t.type,e))}}function zT(t){sl?al?al.push(t):al=[t]:sl=t}function NT(){if(sl){var t=sl,e=al;if(al=sl=null,Vv(t),e)for(t=0;t<e.length;t++)Vv(e[t])}}function DT(t,e){return t(e)}function MT(){}var Pg=!1;function WT(t,e,n){if(Pg)return t(e,n);Pg=!0;try{return DT(t,e,n)}finally{Pg=!1,(sl!==null||al!==null)&&(MT(),NT())}}function Su(t,e){var n=t.stateNode;if(n===null)return null;var i=fm(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var Kf=!1;if(Xr)try{var _c={};Object.defineProperty(_c,"passive",{get:function(){Kf=!0}}),window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch(t){Kf=!1}function ZE(t,e,n,i,o,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Zc=!1,lp=null,cp=!1,Gf=null,eA={onError:function(t){Zc=!0,lp=t}};function tA(t,e,n,i,o,s,a,l,c){Zc=!1,lp=null,ZE.apply(eA,arguments)}function nA(t,e,n,i,o,s,a,l,c){if(tA.apply(this,arguments),Zc){if(Zc){var u=lp;Zc=!1,lp=null}else throw Error(Te(198));cp||(cp=!0,Gf=u)}}function pa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uv(t){if(pa(t)!==t)throw Error(Te(188))}function iA(t){var e=t.alternate;if(!e){if(e=pa(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Uv(o),t;if(s===i)return Uv(o),e;s=s.sibling}throw Error(Te(188))}if(n.return!==i.return)n=o,i=s;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,i=s;break}if(l===i){a=!0,i=o,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=o;break}if(l===i){a=!0,i=s,n=o;break}l=l.sibling}if(!a)throw Error(Te(189))}}if(n.alternate!==i)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function OT(t){return t=iA(t),t!==null?VT(t):null}function VT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VT(t);if(e!==null)return e;t=t.sibling}return null}var UT=Ei.unstable_scheduleCallback,qv=Ei.unstable_cancelCallback,rA=Ei.unstable_shouldYield,oA=Ei.unstable_requestPaint,an=Ei.unstable_now,sA=Ei.unstable_getCurrentPriorityLevel,Bx=Ei.unstable_ImmediatePriority,qT=Ei.unstable_UserBlockingPriority,up=Ei.unstable_NormalPriority,aA=Ei.unstable_LowPriority,HT=Ei.unstable_IdlePriority,hm=null,xr=null;function lA(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(hm,t,void 0,(t.current.flags&128)===128)}catch(e){}}var Yi=Math.clz32?Math.clz32:dA,cA=Math.log,uA=Math.LN2;function dA(t){return t>>>=0,t===0?32:31-(cA(t)/uA|0)|0}var ih=64,rh=4194304;function qc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dp(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~o;l!==0?i=qc(l):(s&=a,s!==0&&(i=qc(s)))}else a=n&~o,a!==0?i=qc(a):s!==0&&(i=qc(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Yi(e),o=1<<n,i|=t[n],e&=~o;return i}function hA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Yi(s),l=1<<a,c=o[a];c===-1?(!(l&n)||l&i)&&(o[a]=hA(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Qf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $T(){var t=ih;return ih<<=1,!(ih&4194240)&&(ih=64),t}function Fg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function id(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yi(e),t[e]=n}function mA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Yi(n),s=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~s}}function Px(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Yi(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var At=0;function KT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GT,Fx,QT,YT,XT,Yf=!1,oh=[],Fo=null,zo=null,No=null,Tu=new Map,ju=new Map,To=[],gA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hv(t,e){switch(t){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":Tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(e.pointerId)}}function Ic(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=od(e),e!==null&&Fx(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function fA(t,e,n,i,o){switch(e){case"focusin":return Fo=Ic(Fo,t,e,n,i,o),!0;case"dragenter":return zo=Ic(zo,t,e,n,i,o),!0;case"mouseover":return No=Ic(No,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return Tu.set(s,Ic(Tu.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,ju.set(s,Ic(ju.get(s)||null,t,e,n,i,o)),!0}return!1}function JT(t){var e=Ps(t.target);if(e!==null){var n=pa(e);if(n!==null){if(e=n.tag,e===13){if(e=LT(n),e!==null){t.blockedOn=e,XT(t.priority,function(){QT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hf=i,n.target.dispatchEvent(i),Hf=null}else return e=od(n),e!==null&&Fx(e),t.blockedOn=n,!1;e.shift()}return!0}function $v(t,e,n){Bh(t)&&n.delete(e)}function yA(){Yf=!1,Fo!==null&&Bh(Fo)&&(Fo=null),zo!==null&&Bh(zo)&&(zo=null),No!==null&&Bh(No)&&(No=null),Tu.forEach($v),ju.forEach($v)}function Cc(t,e){t.blockedOn===e&&(t.blockedOn=null,Yf||(Yf=!0,Ei.unstable_scheduleCallback(Ei.unstable_NormalPriority,yA)))}function _u(t){function e(o){return Cc(o,t)}if(0<oh.length){Cc(oh[0],t);for(var n=1;n<oh.length;n++){var i=oh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fo!==null&&Cc(Fo,t),zo!==null&&Cc(zo,t),No!==null&&Cc(No,t),Tu.forEach(e),ju.forEach(e),n=0;n<To.length;n++)i=To[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<To.length&&(n=To[0],n.blockedOn===null);)JT(n),n.blockedOn===null&&To.shift()}var ll=so.ReactCurrentBatchConfig,hp=!0;function xA(t,e,n,i){var o=At,s=ll.transition;ll.transition=null;try{At=1,zx(t,e,n,i)}finally{At=o,ll.transition=s}}function bA(t,e,n,i){var o=At,s=ll.transition;ll.transition=null;try{At=4,zx(t,e,n,i)}finally{At=o,ll.transition=s}}function zx(t,e,n,i){if(hp){var o=Xf(t,e,n,i);if(o===null)qg(t,e,i,pp,n),Hv(t,i);else if(fA(o,t,e,n,i))i.stopPropagation();else if(Hv(t,i),e&4&&-1<gA.indexOf(t)){for(;o!==null;){var s=od(o);if(s!==null&&GT(s),s=Xf(t,e,n,i),s===null&&qg(t,e,i,pp,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else qg(t,e,i,null,n)}}var pp=null;function Xf(t,e,n,i){if(pp=null,t=Ax(i),t=Ps(t),t!==null)if(e=pa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pp=t,null}function ZT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sA()){case Bx:return 1;case qT:return 4;case up:case aA:return 16;case HT:return 536870912;default:return 16}default:return 16}}var Ro=null,Nx=null,Ph=null;function ej(){if(Ph)return Ph;var t,e=Nx,n=e.length,i,o="value"in Ro?Ro.value:Ro.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===o[s-i];i++);return Ph=o.slice(t,1<i?1-i:void 0)}function Fh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sh(){return!0}function Kv(){return!1}function Pi(t){function e(n,i,o,s,a){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sh:Kv,this.isPropagationStopped=Kv,this}return en(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sh)},persist:function(){},isPersistent:sh}),e}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dx=Pi(Yl),rd=en({},Yl,{view:0,detail:0}),vA=Pi(rd),zg,Ng,Rc,pm=en({},rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rc&&(Rc&&t.type==="mousemove"?(zg=t.screenX-Rc.screenX,Ng=t.screenY-Rc.screenY):Ng=zg=0,Rc=t),zg)},movementY:function(t){return"movementY"in t?t.movementY:Ng}}),Gv=Pi(pm),kA=en({},pm,{dataTransfer:0}),wA=Pi(kA),SA=en({},rd,{relatedTarget:0}),Dg=Pi(SA),TA=en({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),jA=Pi(TA),_A=en({},Yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IA=Pi(_A),CA=en({},Yl,{data:0}),Qv=Pi(CA),RA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AA[t])?!!e[t]:!1}function Mx(){return BA}var PA=en({},rd,{key:function(t){if(t.key){var e=RA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mx,charCode:function(t){return t.type==="keypress"?Fh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FA=Pi(PA),zA=en({},pm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yv=Pi(zA),NA=en({},rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mx}),DA=Pi(NA),MA=en({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),WA=Pi(MA),LA=en({},pm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OA=Pi(LA),VA=[9,13,27,32],Wx=Xr&&"CompositionEvent"in window,eu=null;Xr&&"documentMode"in document&&(eu=document.documentMode);var UA=Xr&&"TextEvent"in window&&!eu,tj=Xr&&(!Wx||eu&&8<eu&&11>=eu),Xv=" ",Jv=!1;function nj(t,e){switch(t){case"keyup":return VA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ij(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qa=!1;function qA(t,e){switch(t){case"compositionend":return ij(e);case"keypress":return e.which!==32?null:(Jv=!0,Xv);case"textInput":return t=e.data,t===Xv&&Jv?null:t;default:return null}}function HA(t,e){if(Qa)return t==="compositionend"||!Wx&&nj(t,e)?(t=ej(),Ph=Nx=Ro=null,Qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tj&&e.locale!=="ko"?null:e.data;default:return null}}var $A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$A[t.type]:e==="textarea"}function rj(t,e,n,i){zT(i),e=mp(e,"onChange"),0<e.length&&(n=new Dx("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tu=null,Iu=null;function KA(t){gj(t,0)}function mm(t){var e=Ja(t);if(CT(e))return t}function GA(t,e){if(t==="change")return e}var oj=!1;if(Xr){var Mg;if(Xr){var Wg="oninput"in document;if(!Wg){var ek=document.createElement("div");ek.setAttribute("oninput","return;"),Wg=typeof ek.oninput=="function"}Mg=Wg}else Mg=!1;oj=Mg&&(!document.documentMode||9<document.documentMode)}function tk(){tu&&(tu.detachEvent("onpropertychange",sj),Iu=tu=null)}function sj(t){if(t.propertyName==="value"&&mm(Iu)){var e=[];rj(e,Iu,t,Ax(t)),WT(KA,e)}}function QA(t,e,n){t==="focusin"?(tk(),tu=e,Iu=n,tu.attachEvent("onpropertychange",sj)):t==="focusout"&&tk()}function YA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mm(Iu)}function XA(t,e){if(t==="click")return mm(e)}function JA(t,e){if(t==="input"||t==="change")return mm(e)}function ZA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:ZA;function Cu(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Pf.call(e,o)||!tr(t[o],e[o]))return!1}return!0}function nk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ik(t,e){var n=nk(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nk(n)}}function aj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lj(){for(var t=window,e=ap();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(i){n=!1}if(n)t=e.contentWindow;else break;e=ap(t.document)}return e}function Lx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eB(t){var e=lj(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aj(n.ownerDocument.documentElement,n)){if(i!==null&&Lx(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!t.extend&&s>i&&(o=i,i=s,s=o),o=ik(n,s);var a=ik(n,i);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tB=Xr&&"documentMode"in document&&11>=document.documentMode,Ya=null,Jf=null,nu=null,Zf=!1;function rk(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zf||Ya==null||Ya!==ap(i)||(i=Ya,"selectionStart"in i&&Lx(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nu&&Cu(nu,i)||(nu=i,i=mp(Jf,"onSelect"),0<i.length&&(e=new Dx("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ya)))}function ah(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xa={animationend:ah("Animation","AnimationEnd"),animationiteration:ah("Animation","AnimationIteration"),animationstart:ah("Animation","AnimationStart"),transitionend:ah("Transition","TransitionEnd")},Lg={},cj={};Xr&&(cj=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function gm(t){if(Lg[t])return Lg[t];if(!Xa[t])return t;var e=Xa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cj)return Lg[t]=e[n];return t}var uj=gm("animationend"),dj=gm("animationiteration"),hj=gm("animationstart"),pj=gm("transitionend"),mj=new Map,ok="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){mj.set(t,e),ha(e,[t])}for(var Og=0;Og<ok.length;Og++){var Vg=ok[Og],nB=Vg.toLowerCase(),iB=Vg[0].toUpperCase()+Vg.slice(1);rs(nB,"on"+iB)}rs(uj,"onAnimationEnd");rs(dj,"onAnimationIteration");rs(hj,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(pj,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function sk(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,nA(i,e,void 0,t),t.currentTarget=null}function gj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;sk(o,l,u),s=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;sk(o,l,u),s=c}}}if(cp)throw t=Gf,cp=!1,Gf=null,t}function Ot(t,e){var n=e[ry];n===void 0&&(n=e[ry]=new Set);var i=t+"__bubble";n.has(i)||(fj(e,t,2,!1),n.add(i))}function Ug(t,e,n){var i=0;e&&(i|=4),fj(n,t,i,e)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[lh]){t[lh]=!0,ST.forEach(function(n){n!=="selectionchange"&&(rB.has(n)||Ug(n,!1,t),Ug(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lh]||(e[lh]=!0,Ug("selectionchange",!1,e))}}function fj(t,e,n,i){switch(ZT(e)){case 1:var o=xA;break;case 4:o=bA;break;default:o=zx}n=o.bind(null,e,n,t),o=void 0,!Kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function qg(t,e,n,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;l!==null;){if(a=Ps(l),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}l=l.parentNode}}i=i.return}WT(function(){var u=s,h=Ax(n),p=[];e:{var g=mj.get(t);if(g!==void 0){var y=Dx,k=t;switch(t){case"keypress":if(Fh(n)===0)break e;case"keydown":case"keyup":y=FA;break;case"focusin":k="focus",y=Dg;break;case"focusout":k="blur",y=Dg;break;case"beforeblur":case"afterblur":y=Dg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Gv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=wA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=DA;break;case uj:case dj:case hj:y=jA;break;case pj:y=WA;break;case"scroll":y=vA;break;case"wheel":y=OA;break;case"copy":case"cut":case"paste":y=IA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Yv}var j=(e&4)!==0,T=!j&&t==="scroll",x=j?g!==null?g+"Capture":null:g;j=[];for(var b=u,v;b!==null;){v=b;var z=v.stateNode;if(v.tag===5&&z!==null&&(v=z,x!==null&&(z=Su(b,x),z!=null&&j.push(Eu(b,z,v)))),T)break;b=b.return}0<j.length&&(g=new y(g,k,null,n,h),p.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Hf&&(k=n.relatedTarget||n.fromElement)&&(Ps(k)||k[Jr]))break e;if((y||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,y?(k=n.relatedTarget||n.toElement,y=u,k=k?Ps(k):null,k!==null&&(T=pa(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(y=null,k=u),y!==k)){if(j=Gv,z="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(j=Yv,z="onPointerLeave",x="onPointerEnter",b="pointer"),T=y==null?g:Ja(y),v=k==null?g:Ja(k),g=new j(z,b+"leave",y,n,h),g.target=T,g.relatedTarget=v,z=null,Ps(h)===u&&(j=new j(x,b+"enter",k,n,h),j.target=v,j.relatedTarget=T,z=j),T=z,y&&k)t:{for(j=y,x=k,b=0,v=j;v;v=Ca(v))b++;for(v=0,z=x;z;z=Ca(z))v++;for(;0<b-v;)j=Ca(j),b--;for(;0<v-b;)x=Ca(x),v--;for(;b--;){if(j===x||x!==null&&j===x.alternate)break t;j=Ca(j),x=Ca(x)}j=null}else j=null;y!==null&&ak(p,g,y,j,!1),k!==null&&T!==null&&ak(p,T,k,j,!0)}}e:{if(g=u?Ja(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var D=GA;else if(Zv(g))if(oj)D=JA;else{D=YA;var P=QA}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=XA);if(D&&(D=D(t,u))){rj(p,D,n,h);break e}P&&P(t,g,u),t==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&Lf(g,"number",g.value)}switch(P=u?Ja(u):window,t){case"focusin":(Zv(P)||P.contentEditable==="true")&&(Ya=P,Jf=u,nu=null);break;case"focusout":nu=Jf=Ya=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,rk(p,n,h);break;case"selectionchange":if(tB)break;case"keydown":case"keyup":rk(p,n,h)}var _;if(Wx)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Qa?nj(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(tj&&n.locale!=="ko"&&(Qa||S!=="onCompositionStart"?S==="onCompositionEnd"&&Qa&&(_=ej()):(Ro=h,Nx="value"in Ro?Ro.value:Ro.textContent,Qa=!0)),P=mp(u,S),0<P.length&&(S=new Qv(S,t,null,n,h),p.push({event:S,listeners:P}),_?S.data=_:(_=ij(n),_!==null&&(S.data=_)))),(_=UA?qA(t,n):HA(t,n))&&(u=mp(u,"onBeforeInput"),0<u.length&&(h=new Qv("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=_))}gj(p,e)})}function Eu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mp(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Su(t,n),s!=null&&i.unshift(Eu(t,s,o)),s=Su(t,e),s!=null&&i.push(Eu(t,s,o))),t=t.return}return i}function Ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ak(t,e,n,i,o){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,o?(c=Su(n,s),c!=null&&a.unshift(Eu(n,c,l))):o||(c=Su(n,s),c!=null&&a.push(Eu(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var oB=/\r\n?/g,sB=/\u0000|\uFFFD/g;function lk(t){return(typeof t=="string"?t:""+t).replace(oB,`
`).replace(sB,"")}function ch(t,e,n){if(e=lk(e),lk(t)!==e&&n)throw Error(Te(425))}function gp(){}var ey=null,ty=null;function ny(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iy=typeof setTimeout=="function"?setTimeout:void 0,aB=typeof clearTimeout=="function"?clearTimeout:void 0,ck=typeof Promise=="function"?Promise:void 0,lB=typeof queueMicrotask=="function"?queueMicrotask:typeof ck!="undefined"?function(t){return ck.resolve(null).then(t).catch(cB)}:iy;function cB(t){setTimeout(function(){throw t})}function Hg(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),_u(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);_u(e)}function Do(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xl=Math.random().toString(36).slice(2),pr="__reactFiber$"+Xl,Au="__reactProps$"+Xl,Jr="__reactContainer$"+Xl,ry="__reactEvents$"+Xl,uB="__reactListeners$"+Xl,dB="__reactHandles$"+Xl;function Ps(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uk(t);t!==null;){if(n=t[pr])return n;t=uk(t)}return e}t=n,n=t.parentNode}return null}function od(t){return t=t[pr]||t[Jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ja(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function fm(t){return t[Au]||null}var oy=[],Za=-1;function os(t){return{current:t}}function qt(t){0>Za||(t.current=oy[Za],oy[Za]=null,Za--)}function Mt(t,e){Za++,oy[Za]=t.current,t.current=e}var Go={},Qn=os(Go),pi=os(!1),Gs=Go;function bl(t,e){var n=t.type.contextTypes;if(!n)return Go;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function mi(t){return t=t.childContextTypes,t!=null}function fp(){qt(pi),qt(Qn)}function dk(t,e,n){if(Qn.current!==Go)throw Error(Te(168));Mt(Qn,e),Mt(pi,n)}function yj(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(Te(108,QE(t)||"Unknown",o));return en({},n,i)}function yp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Go,Gs=Qn.current,Mt(Qn,t),Mt(pi,pi.current),!0}function hk(t,e,n){var i=t.stateNode;if(!i)throw Error(Te(169));n?(t=yj(t,e,Gs),i.__reactInternalMemoizedMergedChildContext=t,qt(pi),qt(Qn),Mt(Qn,t)):qt(pi),Mt(pi,n)}var Mr=null,ym=!1,$g=!1;function xj(t){Mr===null?Mr=[t]:Mr.push(t)}function hB(t){ym=!0,xj(t)}function ss(){if(!$g&&Mr!==null){$g=!0;var t=0,e=At;try{var n=Mr;for(At=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Mr=null,ym=!1}catch(o){throw Mr!==null&&(Mr=Mr.slice(t+1)),UT(Bx,ss),o}finally{At=e,$g=!1}}return null}var el=[],tl=0,xp=null,bp=0,zi=[],Ni=0,Qs=null,Vr=1,Ur="";function Ss(t,e){el[tl++]=bp,el[tl++]=xp,xp=t,bp=e}function bj(t,e,n){zi[Ni++]=Vr,zi[Ni++]=Ur,zi[Ni++]=Qs,Qs=t;var i=Vr;t=Ur;var o=32-Yi(i)-1;i&=~(1<<o),n+=1;var s=32-Yi(e)+o;if(30<s){var a=o-o%5;s=(i&(1<<a)-1).toString(32),i>>=a,o-=a,Vr=1<<32-Yi(e)+o|n<<o|i,Ur=s+t}else Vr=1<<s|n<<o|i,Ur=t}function Ox(t){t.return!==null&&(Ss(t,1),bj(t,1,0))}function Vx(t){for(;t===xp;)xp=el[--tl],el[tl]=null,bp=el[--tl],el[tl]=null;for(;t===Qs;)Qs=zi[--Ni],zi[Ni]=null,Ur=zi[--Ni],zi[Ni]=null,Vr=zi[--Ni],zi[Ni]=null}var Ri=null,_i=null,Qt=!1,Gi=null;function vj(t,e){var n=Di(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ri=t,_i=Do(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ri=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qs!==null?{id:Vr,overflow:Ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Di(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ri=t,_i=null,!0):!1;default:return!1}}function sy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ay(t){if(Qt){var e=_i;if(e){var n=e;if(!pk(t,e)){if(sy(t))throw Error(Te(418));e=Do(n.nextSibling);var i=Ri;e&&pk(t,e)?vj(i,n):(t.flags=t.flags&-4097|2,Qt=!1,Ri=t)}}else{if(sy(t))throw Error(Te(418));t.flags=t.flags&-4097|2,Qt=!1,Ri=t}}}function mk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ri=t}function uh(t){if(t!==Ri)return!1;if(!Qt)return mk(t),Qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ny(t.type,t.memoizedProps)),e&&(e=_i)){if(sy(t))throw kj(),Error(Te(418));for(;e;)vj(t,e),e=Do(e.nextSibling)}if(mk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=Do(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Ri?Do(t.stateNode.nextSibling):null;return!0}function kj(){for(var t=_i;t;)t=Do(t.nextSibling)}function vl(){_i=Ri=null,Qt=!1}function Ux(t){Gi===null?Gi=[t]:Gi.push(t)}var pB=so.ReactCurrentBatchConfig;function Ec(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var i=n.stateNode}if(!i)throw Error(Te(147,t));var o=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=o.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function dh(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gk(t){var e=t._init;return e(t._payload)}function wj(t){function e(x,b){if(t){var v=x.deletions;v===null?(x.deletions=[b],x.flags|=16):v.push(b)}}function n(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function i(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function o(x,b){return x=Oo(x,b),x.index=0,x.sibling=null,x}function s(x,b,v){return x.index=v,t?(v=x.alternate,v!==null?(v=v.index,v<b?(x.flags|=2,b):v):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,b,v,z){return b===null||b.tag!==6?(b=Zg(v,x.mode,z),b.return=x,b):(b=o(b,v),b.return=x,b)}function c(x,b,v,z){var D=v.type;return D===Ga?h(x,b,v.props.children,z,v.key):b!==null&&(b.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===wo&&gk(D)===b.type)?(z=o(b,v.props),z.ref=Ec(x,b,v),z.return=x,z):(z=Oh(v.type,v.key,v.props,null,x.mode,z),z.ref=Ec(x,b,v),z.return=x,z)}function u(x,b,v,z){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=ef(v,x.mode,z),b.return=x,b):(b=o(b,v.children||[]),b.return=x,b)}function h(x,b,v,z,D){return b===null||b.tag!==7?(b=Ls(v,x.mode,z,D),b.return=x,b):(b=o(b,v),b.return=x,b)}function p(x,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Zg(""+b,x.mode,v),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eh:return v=Oh(b.type,b.key,b.props,null,x.mode,v),v.ref=Ec(x,null,b),v.return=x,v;case Ka:return b=ef(b,x.mode,v),b.return=x,b;case wo:var z=b._init;return p(x,z(b._payload),v)}if(Uc(b)||jc(b))return b=Ls(b,x.mode,v,null),b.return=x,b;dh(x,b)}return null}function g(x,b,v,z){var D=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:l(x,b,""+v,z);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case eh:return v.key===D?c(x,b,v,z):null;case Ka:return v.key===D?u(x,b,v,z):null;case wo:return D=v._init,g(x,b,D(v._payload),z)}if(Uc(v)||jc(v))return D!==null?null:h(x,b,v,z,null);dh(x,v)}return null}function y(x,b,v,z,D){if(typeof z=="string"&&z!==""||typeof z=="number")return x=x.get(v)||null,l(b,x,""+z,D);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case eh:return x=x.get(z.key===null?v:z.key)||null,c(b,x,z,D);case Ka:return x=x.get(z.key===null?v:z.key)||null,u(b,x,z,D);case wo:var P=z._init;return y(x,b,v,P(z._payload),D)}if(Uc(z)||jc(z))return x=x.get(v)||null,h(b,x,z,D,null);dh(b,z)}return null}function k(x,b,v,z){for(var D=null,P=null,_=b,S=b=0,R=null;_!==null&&S<v.length;S++){_.index>S?(R=_,_=null):R=_.sibling;var E=g(x,_,v[S],z);if(E===null){_===null&&(_=R);break}t&&_&&E.alternate===null&&e(x,_),b=s(E,b,S),P===null?D=E:P.sibling=E,P=E,_=R}if(S===v.length)return n(x,_),Qt&&Ss(x,S),D;if(_===null){for(;S<v.length;S++)_=p(x,v[S],z),_!==null&&(b=s(_,b,S),P===null?D=_:P.sibling=_,P=_);return Qt&&Ss(x,S),D}for(_=i(x,_);S<v.length;S++)R=y(_,x,S,v[S],z),R!==null&&(t&&R.alternate!==null&&_.delete(R.key===null?S:R.key),b=s(R,b,S),P===null?D=R:P.sibling=R,P=R);return t&&_.forEach(function(A){return e(x,A)}),Qt&&Ss(x,S),D}function j(x,b,v,z){var D=jc(v);if(typeof D!="function")throw Error(Te(150));if(v=D.call(v),v==null)throw Error(Te(151));for(var P=D=null,_=b,S=b=0,R=null,E=v.next();_!==null&&!E.done;S++,E=v.next()){_.index>S?(R=_,_=null):R=_.sibling;var A=g(x,_,E.value,z);if(A===null){_===null&&(_=R);break}t&&_&&A.alternate===null&&e(x,_),b=s(A,b,S),P===null?D=A:P.sibling=A,P=A,_=R}if(E.done)return n(x,_),Qt&&Ss(x,S),D;if(_===null){for(;!E.done;S++,E=v.next())E=p(x,E.value,z),E!==null&&(b=s(E,b,S),P===null?D=E:P.sibling=E,P=E);return Qt&&Ss(x,S),D}for(_=i(x,_);!E.done;S++,E=v.next())E=y(_,x,S,E.value,z),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?S:E.key),b=s(E,b,S),P===null?D=E:P.sibling=E,P=E);return t&&_.forEach(function(B){return e(x,B)}),Qt&&Ss(x,S),D}function T(x,b,v,z){if(typeof v=="object"&&v!==null&&v.type===Ga&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case eh:e:{for(var D=v.key,P=b;P!==null;){if(P.key===D){if(D=v.type,D===Ga){if(P.tag===7){n(x,P.sibling),b=o(P,v.props.children),b.return=x,x=b;break e}}else if(P.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===wo&&gk(D)===P.type){n(x,P.sibling),b=o(P,v.props),b.ref=Ec(x,P,v),b.return=x,x=b;break e}n(x,P);break}else e(x,P);P=P.sibling}v.type===Ga?(b=Ls(v.props.children,x.mode,z,v.key),b.return=x,x=b):(z=Oh(v.type,v.key,v.props,null,x.mode,z),z.ref=Ec(x,b,v),z.return=x,x=z)}return a(x);case Ka:e:{for(P=v.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(x,b.sibling),b=o(b,v.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else e(x,b);b=b.sibling}b=ef(v,x.mode,z),b.return=x,x=b}return a(x);case wo:return P=v._init,T(x,b,P(v._payload),z)}if(Uc(v))return k(x,b,v,z);if(jc(v))return j(x,b,v,z);dh(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(x,b.sibling),b=o(b,v),b.return=x,x=b):(n(x,b),b=Zg(v,x.mode,z),b.return=x,x=b),a(x)):n(x,b)}return T}var kl=wj(!0),Sj=wj(!1),vp=os(null),kp=null,nl=null,qx=null;function Hx(){qx=nl=kp=null}function $x(t){var e=vp.current;qt(vp),t._currentValue=e}function ly(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function cl(t,e){kp=t,qx=nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ci=!0),t.firstContext=null)}function Li(t){var e=t._currentValue;if(qx!==t)if(t={context:t,memoizedValue:e,next:null},nl===null){if(kp===null)throw Error(Te(308));nl=t,kp.dependencies={lanes:0,firstContext:t}}else nl=nl.next=t;return e}var Fs=null;function Kx(t){Fs===null?Fs=[t]:Fs.push(t)}function Tj(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,Kx(e)):(n.next=o.next,o.next=n),e.interleaved=n,Zr(t,i)}function Zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var So=!1;function Gx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,vt&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Zr(t,n)}return o=i.interleaved,o===null?(e.next=e,Kx(i)):(e.next=o.next,o.next=e),i.interleaved=e,Zr(t,n)}function zh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Px(t,n)}}function fk(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wp(t,e,n,i){var o=t.updateQueue;So=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(s!==null){var p=o.baseState;a=0,h=u=c=null,l=s;do{var g=l.lane,y=l.eventTime;if((i&g)===g){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,j=l;switch(g=e,y=n,j.tag){case 1:if(k=j.payload,typeof k=="function"){p=k.call(y,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=j.payload,g=typeof k=="function"?k.call(y,p,g):k,g==null)break e;p=en({},p,g);break e;case 2:So=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=o.effects,g===null?o.effects=[l]:g.push(l))}else y={eventTime:y,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=p):h=h.next=y,a|=g;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;g=l,l=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(!0);if(h===null&&(c=p),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Xs|=a,t.lanes=a,t.memoizedState=p}}function yk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(Te(191,o));o.call(i)}}}var sd={},br=os(sd),Bu=os(sd),Pu=os(sd);function zs(t){if(t===sd)throw Error(Te(174));return t}function Qx(t,e){switch(Mt(Pu,e),Mt(Bu,t),Mt(br,sd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}qt(br),Mt(br,e)}function wl(){qt(br),qt(Bu),qt(Pu)}function _j(t){zs(Pu.current);var e=zs(br.current),n=Vf(e,t.type);e!==n&&(Mt(Bu,t),Mt(br,n))}function Yx(t){Bu.current===t&&(qt(br),qt(Bu))}var Jt=os(0);function Sp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kg=[];function Xx(){for(var t=0;t<Kg.length;t++)Kg[t]._workInProgressVersionPrimary=null;Kg.length=0}var Nh=so.ReactCurrentDispatcher,Gg=so.ReactCurrentBatchConfig,Ys=0,Zt=null,yn=null,In=null,Tp=!1,iu=!1,Fu=0,mB=0;function On(){throw Error(Te(321))}function Jx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function Zx(t,e,n,i,o,s){if(Ys=s,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nh.current=t===null||t.memoizedState===null?xB:bB,t=n(i,o),iu){s=0;do{if(iu=!1,Fu=0,25<=s)throw Error(Te(301));s+=1,In=yn=null,e.updateQueue=null,Nh.current=vB,t=n(i,o)}while(iu)}if(Nh.current=jp,e=yn!==null&&yn.next!==null,Ys=0,In=yn=Zt=null,Tp=!1,e)throw Error(Te(300));return t}function e0(){var t=Fu!==0;return Fu=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Zt.memoizedState=In=t:In=In.next=t,In}function Oi(){if(yn===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=In===null?Zt.memoizedState:In.next;if(e!==null)In=e,yn=t;else{if(t===null)throw Error(Te(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},In===null?Zt.memoizedState=In=t:In=In.next=t}return In}function zu(t,e){return typeof e=="function"?e(t):e}function Qg(t){var e=Oi(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var i=yn,o=i.baseQueue,s=n.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}i.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,i=i.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((Ys&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,a=i):c=c.next=p,Zt.lanes|=h,Xs|=h}u=u.next}while(u!==null&&u!==s);c===null?a=i:c.next=l,tr(i,e.memoizedState)||(ci=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do s=o.lane,Zt.lanes|=s,Xs|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yg(t){var e=Oi(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do s=t(s,a.action),a=a.next;while(a!==o);tr(s,e.memoizedState)||(ci=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Ij(){}function Cj(t,e){var n=Zt,i=Oi(),o=e(),s=!tr(i.memoizedState,o);if(s&&(i.memoizedState=o,ci=!0),i=i.queue,t0(Aj.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,Nu(9,Ej.bind(null,n,i,o,e),void 0,null),Rn===null)throw Error(Te(349));Ys&30||Rj(n,e,o)}return o}function Rj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ej(t,e,n,i){e.value=n,e.getSnapshot=i,Bj(e)&&Pj(t)}function Aj(t,e,n){return n(function(){Bj(e)&&Pj(t)})}function Bj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch(i){return!0}}function Pj(t){var e=Zr(t,1);e!==null&&Xi(e,t,1,-1)}function xk(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:t},e.queue=t,t=t.dispatch=yB.bind(null,Zt,t),[e.memoizedState,t]}function Nu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Fj(){return Oi().memoizedState}function Dh(t,e,n,i){var o=ur();Zt.flags|=t,o.memoizedState=Nu(1|e,n,void 0,i===void 0?null:i)}function xm(t,e,n,i){var o=Oi();i=i===void 0?null:i;var s=void 0;if(yn!==null){var a=yn.memoizedState;if(s=a.destroy,i!==null&&Jx(i,a.deps)){o.memoizedState=Nu(e,n,s,i);return}}Zt.flags|=t,o.memoizedState=Nu(1|e,n,s,i)}function bk(t,e){return Dh(8390656,8,t,e)}function t0(t,e){return xm(2048,8,t,e)}function zj(t,e){return xm(4,2,t,e)}function Nj(t,e){return xm(4,4,t,e)}function Dj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mj(t,e,n){return n=n!=null?n.concat([t]):null,xm(4,4,Dj.bind(null,e,t),n)}function n0(){}function Wj(t,e){var n=Oi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Jx(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Lj(t,e){var n=Oi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Jx(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Oj(t,e,n){return Ys&21?(tr(n,e)||(n=$T(),Zt.lanes|=n,Xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ci=!0),t.memoizedState=n)}function gB(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var i=Gg.transition;Gg.transition={};try{t(!1),e()}finally{At=n,Gg.transition=i}}function Vj(){return Oi().memoizedState}function fB(t,e,n){var i=Lo(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Uj(t))qj(e,n);else if(n=Tj(t,e,n,i),n!==null){var o=ti();Xi(n,t,i,o),Hj(n,e,i)}}function yB(t,e,n){var i=Lo(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uj(t))qj(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(o.hasEagerState=!0,o.eagerState=l,tr(l,a)){var c=e.interleaved;c===null?(o.next=o,Kx(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch(u){}finally{}n=Tj(t,e,o,i),n!==null&&(o=ti(),Xi(n,t,i,o),Hj(n,e,i))}}function Uj(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function qj(t,e){iu=Tp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hj(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Px(t,n)}}var jp={readContext:Li,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},xB={readContext:Li,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Li,useEffect:bk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dh(4194308,4,Dj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dh(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ur();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=fB.bind(null,Zt,t),[i.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:xk,useDebugValue:n0,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=xk(!1),e=t[0];return t=gB.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Zt,o=ur();if(Qt){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),Rn===null)throw Error(Te(349));Ys&30||Rj(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,bk(Aj.bind(null,i,s,t),[t]),i.flags|=2048,Nu(9,Ej.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ur(),e=Rn.identifierPrefix;if(Qt){var n=Ur,i=Vr;n=(i&~(1<<32-Yi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bB={readContext:Li,useCallback:Wj,useContext:Li,useEffect:t0,useImperativeHandle:Mj,useInsertionEffect:zj,useLayoutEffect:Nj,useMemo:Lj,useReducer:Qg,useRef:Fj,useState:function(){return Qg(zu)},useDebugValue:n0,useDeferredValue:function(t){var e=Oi();return Oj(e,yn.memoizedState,t)},useTransition:function(){var t=Qg(zu)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:Ij,useSyncExternalStore:Cj,useId:Vj,unstable_isNewReconciler:!1},vB={readContext:Li,useCallback:Wj,useContext:Li,useEffect:t0,useImperativeHandle:Mj,useInsertionEffect:zj,useLayoutEffect:Nj,useMemo:Lj,useReducer:Yg,useRef:Fj,useState:function(){return Yg(zu)},useDebugValue:n0,useDeferredValue:function(t){var e=Oi();return yn===null?e.memoizedState=t:Oj(e,yn.memoizedState,t)},useTransition:function(){var t=Yg(zu)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:Ij,useSyncExternalStore:Cj,useId:Vj,unstable_isNewReconciler:!1};function Hi(t,e){if(t&&t.defaultProps){e=en({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cy(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:en({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bm={isMounted:function(t){return(t=t._reactInternals)?pa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ti(),o=Lo(t),s=Gr(i,o);s.payload=e,n!=null&&(s.callback=n),e=Mo(t,s,o),e!==null&&(Xi(e,t,o,i),zh(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ti(),o=Lo(t),s=Gr(i,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mo(t,s,o),e!==null&&(Xi(e,t,o,i),zh(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ti(),i=Lo(t),o=Gr(n,i);o.tag=2,e!=null&&(o.callback=e),e=Mo(t,o,i),e!==null&&(Xi(e,t,i,n),zh(e,t,i))}};function vk(t,e,n,i,o,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Cu(n,i)||!Cu(o,s):!0}function $j(t,e,n){var i=!1,o=Go,s=e.contextType;return typeof s=="object"&&s!==null?s=Li(s):(o=mi(e)?Gs:Qn.current,i=e.contextTypes,s=(i=i!=null)?bl(t,o):Go),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bm,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function kk(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&bm.enqueueReplaceState(e,e.state,null)}function uy(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Gx(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Li(s):(s=mi(e)?Gs:Qn.current,o.context=bl(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cy(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&bm.enqueueReplaceState(o,o.state,null),wp(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Sl(t,e){try{var n="",i=e;do n+=GE(i),i=i.return;while(i);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function Xg(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function dy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kB=typeof WeakMap=="function"?WeakMap:Map;function Kj(t,e,n){n=Gr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ip||(Ip=!0,ky=i),dy(t,e)},n}function Gj(t,e,n){n=Gr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){dy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){dy(t,e),typeof i!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function wk(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new kB;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=zB.bind(null,t,e,n),e.then(t,t))}function Sk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tk(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gr(-1,1),e.tag=2,Mo(n,e,1))),n.lanes|=1),t)}var wB=so.ReactCurrentOwner,ci=!1;function Jn(t,e,n,i){e.child=t===null?Sj(e,null,n,i):kl(e,t.child,n,i)}function jk(t,e,n,i,o){n=n.render;var s=e.ref;return cl(e,o),i=Zx(t,e,n,i,s,o),n=e0(),t!==null&&!ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,eo(t,e,o)):(Qt&&n&&Ox(e),e.flags|=1,Jn(t,e,i,o),e.child)}function _k(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!u0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Qj(t,e,s,i,o)):(t=Oh(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cu,n(a,i)&&t.ref===e.ref)return eo(t,e,o)}return e.flags|=1,t=Oo(s,i),t.ref=e.ref,t.return=e,e.child=t}function Qj(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(Cu(s,i)&&t.ref===e.ref)if(ci=!1,e.pendingProps=i=s,(t.lanes&o)!==0)t.flags&131072&&(ci=!0);else return e.lanes=t.lanes,eo(t,e,o)}return hy(t,e,n,i,o)}function Yj(t,e,n){var i=e.pendingProps,o=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(rl,Ti),Ti|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mt(rl,Ti),Ti|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Mt(rl,Ti),Ti|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Mt(rl,Ti),Ti|=i;return Jn(t,e,o,n),e.child}function Xj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hy(t,e,n,i,o){var s=mi(n)?Gs:Qn.current;return s=bl(e,s),cl(e,o),n=Zx(t,e,n,i,s,o),i=e0(),t!==null&&!ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,eo(t,e,o)):(Qt&&i&&Ox(e),e.flags|=1,Jn(t,e,n,o),e.child)}function Ik(t,e,n,i,o){if(mi(n)){var s=!0;yp(e)}else s=!1;if(cl(e,o),e.stateNode===null)Mh(t,e),$j(e,n,i),uy(e,n,i,o),i=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Li(u):(u=mi(n)?Gs:Qn.current,u=bl(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==u)&&kk(e,a,i,u),So=!1;var g=e.memoizedState;a.state=g,wp(e,i,a,o),c=e.memoizedState,l!==i||g!==c||pi.current||So?(typeof h=="function"&&(cy(e,n,h,i),c=e.memoizedState),(l=So||vk(e,n,l,i,g,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,jj(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Hi(e.type,l),a.props=u,p=e.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Li(c):(c=mi(n)?Gs:Qn.current,c=bl(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||g!==c)&&kk(e,a,i,c),So=!1,g=e.memoizedState,a.state=g,wp(e,i,a,o);var k=e.memoizedState;l!==p||g!==k||pi.current||So?(typeof y=="function"&&(cy(e,n,y,i),k=e.memoizedState),(u=So||vk(e,n,u,i,g,k,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return py(t,e,n,i,s,o)}function py(t,e,n,i,o,s){Xj(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return o&&hk(e,n,!1),eo(t,e,s);i=e.stateNode,wB.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=kl(e,t.child,null,s),e.child=kl(e,null,l,s)):Jn(t,e,l,s),e.memoizedState=i.state,o&&hk(e,n,!0),e.child}function Jj(t){var e=t.stateNode;e.pendingContext?dk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dk(t,e.context,!1),Qx(t,e.containerInfo)}function Ck(t,e,n,i,o){return vl(),Ux(o),e.flags|=256,Jn(t,e,n,i),e.child}var my={dehydrated:null,treeContext:null,retryLane:0};function gy(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zj(t,e,n){var i=e.pendingProps,o=Jt.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Mt(Jt,o&1),t===null)return ay(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=wm(a,i,0,null),t=Ls(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gy(n),e.memoizedState=my,t):i0(e,a));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return SB(t,e,a,i,l,o,n);if(s){s=i.fallback,a=e.mode,o=t.child,l=o.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Oo(o,c),i.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Oo(l,s):(s=Ls(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?gy(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=my,i}return s=t.child,t=s.sibling,i=Oo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function i0(t,e){return e=wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hh(t,e,n,i){return i!==null&&Ux(i),kl(e,t.child,null,n),t=i0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SB(t,e,n,i,o,s,a){if(n)return e.flags&256?(e.flags&=-257,i=Xg(Error(Te(422))),hh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=wm({mode:"visible",children:i.children},o,0,null),s=Ls(s,o,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&kl(e,t.child,null,a),e.child.memoizedState=gy(a),e.memoizedState=my,s);if(!(e.mode&1))return hh(t,e,a,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(Te(419)),i=Xg(s,i,void 0),hh(t,e,a,i)}if(l=(a&t.childLanes)!==0,ci||l){if(i=Rn,i!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Zr(t,o),Xi(i,t,o,-1))}return c0(),i=Xg(Error(Te(421))),hh(t,e,a,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=NB.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,_i=Do(o.nextSibling),Ri=e,Qt=!0,Gi=null,t!==null&&(zi[Ni++]=Vr,zi[Ni++]=Ur,zi[Ni++]=Qs,Vr=t.id,Ur=t.overflow,Qs=e),e=i0(e,i.children),e.flags|=4096,e)}function Rk(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ly(t.return,e,n)}function Jg(t,e,n,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o)}function e2(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;if(Jn(t,e,i.children,n),i=Jt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rk(t,n,e);else if(t.tag===19)Rk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Mt(Jt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Sp(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Jg(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Sp(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Jg(e,!0,n,null,s);break;case"together":Jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function eo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=Oo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TB(t,e,n){switch(e.tag){case 3:Jj(e),vl();break;case 5:_j(e);break;case 1:mi(e.type)&&yp(e);break;case 4:Qx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;Mt(vp,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Mt(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?Zj(t,e,n):(Mt(Jt,Jt.current&1),t=eo(t,e,n),t!==null?t.sibling:null);Mt(Jt,Jt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return e2(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Mt(Jt,Jt.current),i)break;return null;case 22:case 23:return e.lanes=0,Yj(t,e,n)}return eo(t,e,n)}var t2,fy,n2,i2;t2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fy=function(){};n2=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,zs(br.current);var s=null;switch(n){case"input":o=Mf(t,o),i=Mf(t,i),s=[];break;case"select":o=en({},o,{value:void 0}),i=en({},i,{value:void 0}),s=[];break;case"textarea":o=Of(t,o),i=Of(t,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=gp)}Uf(n,i);var a;n=null;for(u in o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ku.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=o!=null?o[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ku.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ot("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};i2=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ac(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function jB(t,e,n){var i=e.pendingProps;switch(Vx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(e),null;case 1:return mi(e.type)&&fp(),Vn(e),null;case 3:return i=e.stateNode,wl(),qt(pi),qt(Qn),Xx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(uh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gi!==null&&(Ty(Gi),Gi=null))),fy(t,e),Vn(e),null;case 5:Yx(e);var o=zs(Pu.current);if(n=e.type,t!==null&&e.stateNode!=null)n2(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Te(166));return Vn(e),null}if(t=zs(br.current),uh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[pr]=e,i[Au]=s,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(o=0;o<Hc.length;o++)Ot(Hc[o],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Mv(i,s),Ot("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ot("invalid",i);break;case"textarea":Lv(i,s),Ot("invalid",i)}Uf(n,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&ch(i.textContent,l,t),o=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ch(i.textContent,l,t),o=["children",""+l]):ku.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ot("scroll",i)}switch(n){case"input":th(i),Wv(i,s,!0);break;case"textarea":th(i),Ov(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=gp)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[pr]=e,t[Au]=i,t2(t,e,!1,!1),e.stateNode=t;e:{switch(a=qf(n,i),n){case"dialog":Ot("cancel",t),Ot("close",t),o=i;break;case"iframe":case"object":case"embed":Ot("load",t),o=i;break;case"video":case"audio":for(o=0;o<Hc.length;o++)Ot(Hc[o],t);o=i;break;case"source":Ot("error",t),o=i;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),o=i;break;case"details":Ot("toggle",t),o=i;break;case"input":Mv(t,i),o=Mf(t,i),Ot("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=en({},i,{value:void 0}),Ot("invalid",t);break;case"textarea":Lv(t,i),o=Of(t,i),Ot("invalid",t);break;default:o=i}Uf(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?FT(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&BT(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wu(t,c):typeof c=="number"&&wu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ku.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ot("scroll",t):c!=null&&Ix(t,s,c,a))}switch(n){case"input":th(t),Wv(t,i,!1);break;case"textarea":th(t),Ov(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ko(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ol(t,!!i.multiple,s,!1):i.defaultValue!=null&&ol(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=gp)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vn(e),null;case 6:if(t&&e.stateNode!=null)i2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Te(166));if(n=zs(Pu.current),zs(br.current),uh(e)){if(i=e.stateNode,n=e.memoizedProps,i[pr]=e,(s=i.nodeValue!==n)&&(t=Ri,t!==null))switch(t.tag){case 3:ch(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ch(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[pr]=e,e.stateNode=i}return Vn(e),null;case 13:if(qt(Jt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qt&&_i!==null&&e.mode&1&&!(e.flags&128))kj(),vl(),e.flags|=98560,s=!1;else if(s=uh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Te(317));s[pr]=e}else vl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vn(e),s=!1}else Gi!==null&&(Ty(Gi),Gi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?vn===0&&(vn=3):c0())),e.updateQueue!==null&&(e.flags|=4),Vn(e),null);case 4:return wl(),fy(t,e),t===null&&Ru(e.stateNode.containerInfo),Vn(e),null;case 10:return $x(e.type._context),Vn(e),null;case 17:return mi(e.type)&&fp(),Vn(e),null;case 19:if(qt(Jt),s=e.memoizedState,s===null)return Vn(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Ac(s,!1);else{if(vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Sp(t),a!==null){for(e.flags|=128,Ac(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mt(Jt,Jt.current&1|2),e.child}t=t.sibling}s.tail!==null&&an()>Tl&&(e.flags|=128,i=!0,Ac(s,!1),e.lanes=4194304)}else{if(!i)if(t=Sp(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ac(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Qt)return Vn(e),null}else 2*an()-s.renderingStartTime>Tl&&n!==1073741824&&(e.flags|=128,i=!0,Ac(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=an(),e.sibling=null,n=Jt.current,Mt(Jt,i?n&1|2:n&1),e):(Vn(e),null);case 22:case 23:return l0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ti&1073741824&&(Vn(e),e.subtreeFlags&6&&(e.flags|=8192)):Vn(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function _B(t,e){switch(Vx(e),e.tag){case 1:return mi(e.type)&&fp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wl(),qt(pi),qt(Qn),Xx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yx(e),null;case 13:if(qt(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));vl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qt(Jt),null;case 4:return wl(),null;case 10:return $x(e.type._context),null;case 22:case 23:return l0(),null;case 24:return null;default:return null}}var ph=!1,Hn=!1,IB=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function il(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){sn(t,e,i)}else n.current=null}function yy(t,e,n){try{n()}catch(i){sn(t,e,i)}}var Ek=!1;function CB(t,e){if(ey=hp,t=lj(),Lx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(z){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,p=t,g=null;t:for(;;){for(var y;p!==n||o!==0&&p.nodeType!==3||(l=a+o),p!==s||i!==0&&p.nodeType!==3||(c=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===n&&++u===o&&(l=a),g===s&&++h===i&&(c=a),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ty={focusedElem:t,selectionRange:n},hp=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var j=k.memoizedProps,T=k.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?j:Hi(e.type,j),T);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(z){sn(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return k=Ek,Ek=!1,k}function ru(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&yy(e,n,s)}o=o.next}while(o!==i)}}function vm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function xy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r2(t){var e=t.alternate;e!==null&&(t.alternate=null,r2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[Au],delete e[ry],delete e[uB],delete e[dB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o2(t){return t.tag===5||t.tag===3||t.tag===4}function Ak(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function by(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gp));else if(i!==4&&(t=t.child,t!==null))for(by(t,e,n),t=t.sibling;t!==null;)by(t,e,n),t=t.sibling}function vy(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(vy(t,e,n),t=t.sibling;t!==null;)vy(t,e,n),t=t.sibling}var Pn=null,$i=!1;function yo(t,e,n){for(n=n.child;n!==null;)s2(t,e,n),n=n.sibling}function s2(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(hm,n)}catch(l){}switch(n.tag){case 5:Hn||il(n,e);case 6:var i=Pn,o=$i;Pn=null,yo(t,e,n),Pn=i,$i=o,Pn!==null&&($i?(t=Pn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pn.removeChild(n.stateNode));break;case 18:Pn!==null&&($i?(t=Pn,n=n.stateNode,t.nodeType===8?Hg(t.parentNode,n):t.nodeType===1&&Hg(t,n),_u(t)):Hg(Pn,n.stateNode));break;case 4:i=Pn,o=$i,Pn=n.stateNode.containerInfo,$i=!0,yo(t,e,n),Pn=i,$i=o;break;case 0:case 11:case 14:case 15:if(!Hn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&yy(n,e,a),o=o.next}while(o!==i)}yo(t,e,n);break;case 1:if(!Hn&&(il(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){sn(n,e,l)}yo(t,e,n);break;case 21:yo(t,e,n);break;case 22:n.mode&1?(Hn=(i=Hn)||n.memoizedState!==null,yo(t,e,n),Hn=i):yo(t,e,n);break;default:yo(t,e,n)}}function Bk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IB),e.forEach(function(i){var o=DB.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function qi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Pn=l.stateNode,$i=!1;break e;case 3:Pn=l.stateNode.containerInfo,$i=!0;break e;case 4:Pn=l.stateNode.containerInfo,$i=!0;break e}l=l.return}if(Pn===null)throw Error(Te(160));s2(s,a,o),Pn=null,$i=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){sn(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a2(e,t),e=e.sibling}function a2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qi(e,t),ar(t),i&4){try{ru(3,t,t.return),vm(3,t)}catch(j){sn(t,t.return,j)}try{ru(5,t,t.return)}catch(j){sn(t,t.return,j)}}break;case 1:qi(e,t),ar(t),i&512&&n!==null&&il(n,n.return);break;case 5:if(qi(e,t),ar(t),i&512&&n!==null&&il(n,n.return),t.flags&32){var o=t.stateNode;try{wu(o,"")}catch(j){sn(t,t.return,j)}}if(i&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&RT(o,s),qf(l,a);var u=qf(l,s);for(a=0;a<c.length;a+=2){var h=c[a],p=c[a+1];h==="style"?FT(o,p):h==="dangerouslySetInnerHTML"?BT(o,p):h==="children"?wu(o,p):Ix(o,h,p,u)}switch(l){case"input":Wf(o,s);break;case"textarea":ET(o,s);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?ol(o,!!s.multiple,y,!1):g!==!!s.multiple&&(s.defaultValue!=null?ol(o,!!s.multiple,s.defaultValue,!0):ol(o,!!s.multiple,s.multiple?[]:"",!1))}o[Au]=s}catch(j){sn(t,t.return,j)}}break;case 6:if(qi(e,t),ar(t),i&4){if(t.stateNode===null)throw Error(Te(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(j){sn(t,t.return,j)}}break;case 3:if(qi(e,t),ar(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(j){sn(t,t.return,j)}break;case 4:qi(e,t),ar(t);break;case 13:qi(e,t),ar(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(s0=an())),i&4&&Bk(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Hn=(u=Hn)||h,qi(e,t),Hn=u):qi(e,t),ar(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Oe=t,h=t.child;h!==null;){for(p=Oe=h;Oe!==null;){switch(g=Oe,y=g.child,g.tag){case 0:case 11:case 14:case 15:ru(4,g,g.return);break;case 1:il(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){i=g,n=g.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(j){sn(i,n,j)}}break;case 5:il(g,g.return);break;case 22:if(g.memoizedState!==null){Fk(p);continue}}y!==null?(y.return=g,Oe=y):Fk(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{o=p.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=PT("display",a))}catch(j){sn(t,t.return,j)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(j){sn(t,t.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:qi(e,t),ar(t),i&4&&Bk(t);break;case 21:break;default:qi(e,t),ar(t)}}function ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(o2(n)){var i=n;break e}n=n.return}throw Error(Te(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(wu(o,""),i.flags&=-33);var s=Ak(t);vy(t,s,o);break;case 3:case 4:var a=i.stateNode.containerInfo,l=Ak(t);by(t,l,a);break;default:throw Error(Te(161))}}catch(c){sn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RB(t,e,n){Oe=t,l2(t)}function l2(t,e,n){for(var i=(t.mode&1)!==0;Oe!==null;){var o=Oe,s=o.child;if(o.tag===22&&i){var a=o.memoizedState!==null||ph;if(!a){var l=o.alternate,c=l!==null&&l.memoizedState!==null||Hn;l=ph;var u=Hn;if(ph=a,(Hn=c)&&!u)for(Oe=o;Oe!==null;)a=Oe,c=a.child,a.tag===22&&a.memoizedState!==null?zk(o):c!==null?(c.return=a,Oe=c):zk(o);for(;s!==null;)Oe=s,l2(s),s=s.sibling;Oe=o,ph=l,Hn=u}Pk(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Oe=s):Pk(t)}}function Pk(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||vm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Hn)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Hi(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yk(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yk(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&_u(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Hn||e.flags&512&&xy(e)}catch(g){sn(e,e.return,g)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function Fk(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function zk(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vm(4,e)}catch(c){sn(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(c){sn(e,o,c)}}var s=e.return;try{xy(e)}catch(c){sn(e,s,c)}break;case 5:var a=e.return;try{xy(e)}catch(c){sn(e,a,c)}}}catch(c){sn(e,e.return,c)}if(e===t){Oe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Oe=l;break}Oe=e.return}}var EB=Math.ceil,_p=so.ReactCurrentDispatcher,r0=so.ReactCurrentOwner,Mi=so.ReactCurrentBatchConfig,vt=0,Rn=null,pn=null,Nn=0,Ti=0,rl=os(0),vn=0,Du=null,Xs=0,km=0,o0=0,ou=null,si=null,s0=0,Tl=1/0,Dr=null,Ip=!1,ky=null,Wo=null,mh=!1,Eo=null,Cp=0,su=0,wy=null,Wh=-1,Lh=0;function ti(){return vt&6?an():Wh!==-1?Wh:Wh=an()}function Lo(t){return t.mode&1?vt&2&&Nn!==0?Nn&-Nn:pB.transition!==null?(Lh===0&&(Lh=$T()),Lh):(t=At,t!==0||(t=window.event,t=t===void 0?16:ZT(t.type)),t):1}function Xi(t,e,n,i){if(50<su)throw su=0,wy=null,Error(Te(185));id(t,n,i),(!(vt&2)||t!==Rn)&&(t===Rn&&(!(vt&2)&&(km|=n),vn===4&&jo(t,Nn)),gi(t,i),n===1&&vt===0&&!(e.mode&1)&&(Tl=an()+500,ym&&ss()))}function gi(t,e){var n=t.callbackNode;pA(t,e);var i=dp(t,t===Rn?Nn:0);if(i===0)n!==null&&qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&qv(n),e===1)t.tag===0?hB(Nk.bind(null,t)):xj(Nk.bind(null,t)),lB(function(){!(vt&6)&&ss()}),n=null;else{switch(KT(i)){case 1:n=Bx;break;case 4:n=qT;break;case 16:n=up;break;case 536870912:n=HT;break;default:n=up}n=f2(n,c2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c2(t,e){if(Wh=-1,Lh=0,vt&6)throw Error(Te(327));var n=t.callbackNode;if(ul()&&t.callbackNode!==n)return null;var i=dp(t,t===Rn?Nn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Rp(t,i);else{e=i;var o=vt;vt|=2;var s=d2();(Rn!==t||Nn!==e)&&(Dr=null,Tl=an()+500,Ws(t,e));do try{PB();break}catch(l){u2(t,l)}while(!0);Hx(),_p.current=s,vt=o,pn!==null?e=0:(Rn=null,Nn=0,e=vn)}if(e!==0){if(e===2&&(o=Qf(t),o!==0&&(i=o,e=Sy(t,o))),e===1)throw n=Du,Ws(t,0),jo(t,i),gi(t,an()),n;if(e===6)jo(t,i);else{if(o=t.current.alternate,!(i&30)&&!AB(o)&&(e=Rp(t,i),e===2&&(s=Qf(t),s!==0&&(i=s,e=Sy(t,s))),e===1))throw n=Du,Ws(t,0),jo(t,i),gi(t,an()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(Te(345));case 2:Ts(t,si,Dr);break;case 3:if(jo(t,i),(i&130023424)===i&&(e=s0+500-an(),10<e)){if(dp(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){ti(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=iy(Ts.bind(null,t,si,Dr),e);break}Ts(t,si,Dr);break;case 4:if(jo(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var a=31-Yi(i);s=1<<a,a=e[a],a>o&&(o=a),i&=~s}if(i=o,i=an()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*EB(i/1960))-i,10<i){t.timeoutHandle=iy(Ts.bind(null,t,si,Dr),i);break}Ts(t,si,Dr);break;case 5:Ts(t,si,Dr);break;default:throw Error(Te(329))}}}return gi(t,an()),t.callbackNode===n?c2.bind(null,t):null}function Sy(t,e){var n=ou;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=Rp(t,e),t!==2&&(e=si,si=n,e!==null&&Ty(e)),t}function Ty(t){si===null?si=t:si.push.apply(si,t)}function AB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!tr(s(),o))return!1}catch(a){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jo(t,e){for(e&=~o0,e&=~km,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yi(e),i=1<<n;t[n]=-1,e&=~i}}function Nk(t){if(vt&6)throw Error(Te(327));ul();var e=dp(t,0);if(!(e&1))return gi(t,an()),null;var n=Rp(t,e);if(t.tag!==0&&n===2){var i=Qf(t);i!==0&&(e=i,n=Sy(t,i))}if(n===1)throw n=Du,Ws(t,0),jo(t,e),gi(t,an()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ts(t,si,Dr),gi(t,an()),null}function a0(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Tl=an()+500,ym&&ss())}}function Js(t){Eo!==null&&Eo.tag===0&&!(vt&6)&&ul();var e=vt;vt|=1;var n=Mi.transition,i=At;try{if(Mi.transition=null,At=1,t)return t()}finally{At=i,Mi.transition=n,vt=e,!(vt&6)&&ss()}}function l0(){Ti=rl.current,qt(rl)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aB(n)),pn!==null)for(n=pn.return;n!==null;){var i=n;switch(Vx(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fp();break;case 3:wl(),qt(pi),qt(Qn),Xx();break;case 5:Yx(i);break;case 4:wl();break;case 13:qt(Jt);break;case 19:qt(Jt);break;case 10:$x(i.type._context);break;case 22:case 23:l0()}n=n.return}if(Rn=t,pn=t=Oo(t.current,null),Nn=Ti=e,vn=0,Du=null,o0=km=Xs=0,si=ou=null,Fs!==null){for(e=0;e<Fs.length;e++)if(n=Fs[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=o,i.next=a}n.pending=i}Fs=null}return t}function u2(t,e){do{var n=pn;try{if(Hx(),Nh.current=jp,Tp){for(var i=Zt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Tp=!1}if(Ys=0,In=yn=Zt=null,iu=!1,Fu=0,r0.current=null,n===null||n.return===null){vn=1,Du=e,pn=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=Nn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Sk(a);if(y!==null){y.flags&=-257,Tk(y,a,l,s,e),y.mode&1&&wk(s,u,e),e=y,c=u;var k=e.updateQueue;if(k===null){var j=new Set;j.add(c),e.updateQueue=j}else k.add(c);break e}else{if(!(e&1)){wk(s,u,e),c0();break e}c=Error(Te(426))}}else if(Qt&&l.mode&1){var T=Sk(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Tk(T,a,l,s,e),Ux(Sl(c,l));break e}}s=c=Sl(c,l),vn!==4&&(vn=2),ou===null?ou=[s]:ou.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Kj(s,c,e);fk(s,x);break e;case 1:l=c;var b=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wo===null||!Wo.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var z=Gj(s,l,e);fk(s,z);break e}}s=s.return}while(s!==null)}p2(n)}catch(D){e=D,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function d2(){var t=_p.current;return _p.current=jp,t===null?jp:t}function c0(){(vn===0||vn===3||vn===2)&&(vn=4),Rn===null||!(Xs&268435455)&&!(km&268435455)||jo(Rn,Nn)}function Rp(t,e){var n=vt;vt|=2;var i=d2();(Rn!==t||Nn!==e)&&(Dr=null,Ws(t,e));do try{BB();break}catch(o){u2(t,o)}while(!0);if(Hx(),vt=n,_p.current=i,pn!==null)throw Error(Te(261));return Rn=null,Nn=0,vn}function BB(){for(;pn!==null;)h2(pn)}function PB(){for(;pn!==null&&!rA();)h2(pn)}function h2(t){var e=g2(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?p2(t):pn=e,r0.current=null}function p2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_B(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vn=6,pn=null;return}}else if(n=jB(n,e,Ti),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);vn===0&&(vn=5)}function Ts(t,e,n){var i=At,o=Mi.transition;try{Mi.transition=null,At=1,FB(t,e,n,i)}finally{Mi.transition=o,At=i}return null}function FB(t,e,n,i){do ul();while(Eo!==null);if(vt&6)throw Error(Te(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mA(t,s),t===Rn&&(pn=Rn=null,Nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mh||(mh=!0,f2(up,function(){return ul(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mi.transition,Mi.transition=null;var a=At;At=1;var l=vt;vt|=4,r0.current=null,CB(t,n),a2(n,t),eB(ty),hp=!!ey,ty=ey=null,t.current=n,RB(n),oA(),vt=l,At=a,Mi.transition=s}else t.current=n;if(mh&&(mh=!1,Eo=t,Cp=o),s=t.pendingLanes,s===0&&(Wo=null),lA(n.stateNode),gi(t,an()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Ip)throw Ip=!1,t=ky,ky=null,t;return Cp&1&&t.tag!==0&&ul(),s=t.pendingLanes,s&1?t===wy?su++:(su=0,wy=t):su=0,ss(),null}function ul(){if(Eo!==null){var t=KT(Cp),e=Mi.transition,n=At;try{if(Mi.transition=null,At=16>t?16:t,Eo===null)var i=!1;else{if(t=Eo,Eo=null,Cp=0,vt&6)throw Error(Te(331));var o=vt;for(vt|=4,Oe=t.current;Oe!==null;){var s=Oe,a=s.child;if(Oe.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Oe=u;Oe!==null;){var h=Oe;switch(h.tag){case 0:case 11:case 15:ru(8,h,s)}var p=h.child;if(p!==null)p.return=h,Oe=p;else for(;Oe!==null;){h=Oe;var g=h.sibling,y=h.return;if(r2(h),h===u){Oe=null;break}if(g!==null){g.return=y,Oe=g;break}Oe=y}}}var k=s.alternate;if(k!==null){var j=k.child;if(j!==null){k.child=null;do{var T=j.sibling;j.sibling=null,j=T}while(j!==null)}}Oe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Oe=a;else e:for(;Oe!==null;){if(s=Oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Oe=x;break e}Oe=s.return}}var b=t.current;for(Oe=b;Oe!==null;){a=Oe;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Oe=v;else e:for(a=b;Oe!==null;){if(l=Oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vm(9,l)}}catch(D){sn(l,l.return,D)}if(l===a){Oe=null;break e}var z=l.sibling;if(z!==null){z.return=l.return,Oe=z;break e}Oe=l.return}}if(vt=o,ss(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(hm,t)}catch(D){}i=!0}return i}finally{At=n,Mi.transition=e}}return!1}function Dk(t,e,n){e=Sl(n,e),e=Kj(t,e,1),t=Mo(t,e,1),e=ti(),t!==null&&(id(t,1,e),gi(t,e))}function sn(t,e,n){if(t.tag===3)Dk(t,t,n);else for(;e!==null;){if(e.tag===3){Dk(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wo===null||!Wo.has(i))){t=Sl(n,t),t=Gj(e,t,1),e=Mo(e,t,1),t=ti(),e!==null&&(id(e,1,t),gi(e,t));break}}e=e.return}}function zB(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ti(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Nn&n)===n&&(vn===4||vn===3&&(Nn&130023424)===Nn&&500>an()-s0?Ws(t,0):o0|=n),gi(t,e)}function m2(t,e){e===0&&(t.mode&1?(e=rh,rh<<=1,!(rh&130023424)&&(rh=4194304)):e=1);var n=ti();t=Zr(t,e),t!==null&&(id(t,e,n),gi(t,n))}function NB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m2(t,n)}function DB(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Te(314))}i!==null&&i.delete(e),m2(t,n)}var g2;g2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pi.current)ci=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ci=!1,TB(t,e,n);ci=!!(t.flags&131072)}else ci=!1,Qt&&e.flags&1048576&&bj(e,bp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Mh(t,e),t=e.pendingProps;var o=bl(e,Qn.current);cl(e,n),o=Zx(null,e,i,t,o,n);var s=e0();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(i)?(s=!0,yp(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Gx(e),o.updater=bm,e.stateNode=o,o._reactInternals=e,uy(e,i,t,n),e=py(null,e,i,!0,s,n)):(e.tag=0,Qt&&s&&Ox(e),Jn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Mh(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=WB(i),t=Hi(i,t),o){case 0:e=hy(null,e,i,t,n);break e;case 1:e=Ik(null,e,i,t,n);break e;case 11:e=jk(null,e,i,t,n);break e;case 14:e=_k(null,e,i,Hi(i.type,t),n);break e}throw Error(Te(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Hi(i,o),hy(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Hi(i,o),Ik(t,e,i,o,n);case 3:e:{if(Jj(e),t===null)throw Error(Te(387));i=e.pendingProps,s=e.memoizedState,o=s.element,jj(t,e),wp(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Sl(Error(Te(423)),e),e=Ck(t,e,i,n,o);break e}else if(i!==o){o=Sl(Error(Te(424)),e),e=Ck(t,e,i,n,o);break e}else for(_i=Do(e.stateNode.containerInfo.firstChild),Ri=e,Qt=!0,Gi=null,n=Sj(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vl(),i===o){e=eo(t,e,n);break e}Jn(t,e,i,n)}e=e.child}return e;case 5:return _j(e),t===null&&ay(e),i=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,a=o.children,ny(i,o)?a=null:s!==null&&ny(i,s)&&(e.flags|=32),Xj(t,e),Jn(t,e,a,n),e.child;case 6:return t===null&&ay(e),null;case 13:return Zj(t,e,n);case 4:return Qx(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=kl(e,null,i,n):Jn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Hi(i,o),jk(t,e,i,o,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,Mt(vp,i._currentValue),i._currentValue=a,s!==null)if(tr(s.value,a)){if(s.children===o.children&&!pi.current){e=eo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Gr(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),ly(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Te(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ly(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Jn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,cl(e,n),o=Li(o),i=i(o),e.flags|=1,Jn(t,e,i,n),e.child;case 14:return i=e.type,o=Hi(i,e.pendingProps),o=Hi(i.type,o),_k(t,e,i,o,n);case 15:return Qj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Hi(i,o),Mh(t,e),e.tag=1,mi(i)?(t=!0,yp(e)):t=!1,cl(e,n),$j(e,i,o),uy(e,i,o,n),py(null,e,i,!0,t,n);case 19:return e2(t,e,n);case 22:return Yj(t,e,n)}throw Error(Te(156,e.tag))};function f2(t,e){return UT(t,e)}function MB(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(t,e,n,i){return new MB(t,e,n,i)}function u0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WB(t){if(typeof t=="function")return u0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rx)return 11;if(t===Ex)return 14}return 2}function Oo(t,e){var n=t.alternate;return n===null?(n=Di(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oh(t,e,n,i,o,s){var a=2;if(i=t,typeof t=="function")u0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ga:return Ls(n.children,o,s,e);case Cx:a=8,o|=8;break;case Ff:return t=Di(12,n,e,o|2),t.elementType=Ff,t.lanes=s,t;case zf:return t=Di(13,n,e,o),t.elementType=zf,t.lanes=s,t;case Nf:return t=Di(19,n,e,o),t.elementType=Nf,t.lanes=s,t;case _T:return wm(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TT:a=10;break e;case jT:a=9;break e;case Rx:a=11;break e;case Ex:a=14;break e;case wo:a=16,i=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=Di(a,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function Ls(t,e,n,i){return t=Di(7,t,i,e),t.lanes=n,t}function wm(t,e,n,i){return t=Di(22,t,i,e),t.elementType=_T,t.lanes=n,t.stateNode={isHidden:!1},t}function Zg(t,e,n){return t=Di(6,t,null,e),t.lanes=n,t}function ef(t,e,n){return e=Di(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LB(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fg(0),this.expirationTimes=Fg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fg(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function d0(t,e,n,i,o,s,a,l,c){return t=new LB(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Di(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gx(s),t}function OB(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function y2(t){if(!t)return Go;t=t._reactInternals;e:{if(pa(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(mi(n))return yj(t,n,e)}return e}function x2(t,e,n,i,o,s,a,l,c){return t=d0(n,i,!0,t,o,s,a,l,c),t.context=y2(null),n=t.current,i=ti(),o=Lo(n),s=Gr(i,o),s.callback=e!=null?e:null,Mo(n,s,o),t.current.lanes=o,id(t,o,i),gi(t,i),t}function Sm(t,e,n,i){var o=e.current,s=ti(),a=Lo(o);return n=y2(n),e.context===null?e.context=n:e.pendingContext=n,e=Gr(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Mo(o,e,a),t!==null&&(Xi(t,o,a,s),zh(t,o,a)),a}function Ep(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function h0(t,e){Mk(t,e),(t=t.alternate)&&Mk(t,e)}function VB(){return null}var b2=typeof reportError=="function"?reportError:function(t){console.error(t)};function p0(t){this._internalRoot=t}Tm.prototype.render=p0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));Sm(t,e,null,null)};Tm.prototype.unmount=p0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Js(function(){Sm(null,t,null,null)}),e[Jr]=null}};function Tm(t){this._internalRoot=t}Tm.prototype.unstable_scheduleHydration=function(t){if(t){var e=YT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<To.length&&e!==0&&e<To[n].priority;n++);To.splice(n,0,t),n===0&&JT(t)}};function m0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wk(){}function UB(t,e,n,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var u=Ep(a);s.call(u)}}var a=x2(e,i,t,0,null,!1,!1,"",Wk);return t._reactRootContainer=a,t[Jr]=a.current,Ru(t.nodeType===8?t.parentNode:t),Js(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var l=i;i=function(){var u=Ep(c);l.call(u)}}var c=d0(t,0,!1,null,null,!1,!1,"",Wk);return t._reactRootContainer=c,t[Jr]=c.current,Ru(t.nodeType===8?t.parentNode:t),Js(function(){Sm(e,c,n,i)}),c}function _m(t,e,n,i,o){var s=n._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var l=o;o=function(){var c=Ep(a);l.call(c)}}Sm(e,a,t,o)}else a=UB(n,e,t,o,i);return Ep(a)}GT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qc(e.pendingLanes);n!==0&&(Px(e,n|1),gi(e,an()),!(vt&6)&&(Tl=an()+500,ss()))}break;case 13:Js(function(){var i=Zr(t,1);if(i!==null){var o=ti();Xi(i,t,1,o)}}),h0(t,1)}};Fx=function(t){if(t.tag===13){var e=Zr(t,134217728);if(e!==null){var n=ti();Xi(e,t,134217728,n)}h0(t,134217728)}};QT=function(t){if(t.tag===13){var e=Lo(t),n=Zr(t,e);if(n!==null){var i=ti();Xi(n,t,e,i)}h0(t,e)}};YT=function(){return At};XT=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};$f=function(t,e,n){switch(e){case"input":if(Wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=fm(i);if(!o)throw Error(Te(90));CT(i),Wf(i,o)}}}break;case"textarea":ET(t,n);break;case"select":e=n.value,e!=null&&ol(t,!!n.multiple,e,!1)}};DT=a0;MT=Js;var qB={usingClientEntryPoint:!1,Events:[od,Ja,fm,zT,NT,a0]},Bc={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HB={bundleType:Bc.bundleType,version:Bc.version,rendererPackageName:Bc.rendererPackageName,rendererConfig:Bc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:so.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OT(t),t===null?null:t.stateNode},findFiberByHostInstance:Bc.findFiberByHostInstance||VB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{hm=gh.inject(HB),xr=gh}catch(t){}}Bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qB;Bi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m0(e))throw Error(Te(200));return OB(t,e,null,n)};Bi.createRoot=function(t,e){if(!m0(t))throw Error(Te(299));var n=!1,i="",o=b2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=d0(t,1,!1,null,null,n,!1,i,o),t[Jr]=e.current,Ru(t.nodeType===8?t.parentNode:t),new p0(e)};Bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=OT(e),t=t===null?null:t.stateNode,t};Bi.flushSync=function(t){return Js(t)};Bi.hydrate=function(t,e,n){if(!jm(e))throw Error(Te(200));return _m(null,t,e,!0,n)};Bi.hydrateRoot=function(t,e,n){if(!m0(t))throw Error(Te(405));var i=n!=null&&n.hydratedSources||null,o=!1,s="",a=b2;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=x2(e,null,t,1,n!=null?n:null,o,!1,s,a),t[Jr]=e.current,Ru(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Tm(e)};Bi.render=function(t,e,n){if(!jm(e))throw Error(Te(200));return _m(null,t,e,!1,n)};Bi.unmountComponentAtNode=function(t){if(!jm(t))throw Error(Te(40));return t._reactRootContainer?(Js(function(){_m(null,null,t,!1,function(){t._reactRootContainer=null,t[Jr]=null})}),!0):!1};Bi.unstable_batchedUpdates=a0;Bi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!jm(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return _m(t,e,n,!1,i)};Bi.version="18.3.1-next-f1338f8080-20240426";function v2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v2)}catch(t){console.error(t)}}v2(),vT.exports=Bi;var $B=vT.exports,k2,Lk=$B;k2=Lk.createRoot,Lk.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mu.apply(this,arguments)}var Ao;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ao||(Ao={}));const Ok="popstate";function KB(t){t===void 0&&(t={});function e(i,o){let{pathname:s,search:a,hash:l}=i.location;return jy("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:S2(o)}return QB(e,n,null,t)}function wn(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function w2(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function GB(){return Math.random().toString(36).substr(2,8)}function Vk(t,e){return{usr:t.state,key:t.key,idx:e}}function jy(t,e,n,i){return n===void 0&&(n=null),Mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jl(e):e,{state:n,key:e&&e.key||i||GB()})}function S2(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Jl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function QB(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,l=Ao.Pop,c=null,u=h();u==null&&(u=0,a.replaceState(Mu({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function p(){l=Ao.Pop;let T=h(),x=T==null?null:T-u;u=T,c&&c({action:l,location:j.location,delta:x})}function g(T,x){l=Ao.Push;let b=jy(j.location,T,x);u=h()+1;let v=Vk(b,u),z=j.createHref(b);try{a.pushState(v,"",z)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;o.location.assign(z)}s&&c&&c({action:l,location:j.location,delta:1})}function y(T,x){l=Ao.Replace;let b=jy(j.location,T,x);u=h();let v=Vk(b,u),z=j.createHref(b);a.replaceState(v,"",z),s&&c&&c({action:l,location:j.location,delta:0})}function k(T){let x=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof T=="string"?T:S2(T);return b=b.replace(/ $/,"%20"),wn(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let j={get action(){return l},get location(){return t(o,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(Ok,p),c=T,()=>{o.removeEventListener(Ok,p),c=null}},createHref(T){return e(o,T)},createURL:k,encodeLocation(T){let x=k(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:y,go(T){return a.go(T)}};return j}var Uk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uk||(Uk={}));function YB(t,e,n){return n===void 0&&(n="/"),XB(t,e,n)}function XB(t,e,n,i){let o=typeof e=="string"?Jl(e):e,s=_2(o.pathname||"/",n);if(s==null)return null;let a=T2(t);JB(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=uP(s);l=aP(a[c],u)}return l}function T2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(wn(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let u=Os([i,c.relativePath]),h=n.concat(c);s.children&&s.children.length>0&&(wn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),T2(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:oP(u,s.index),routesMeta:h})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))o(s,a);else for(let c of j2(s.path))o(s,a,c)}),e}function j2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return o?[s,""]:[s];let a=j2(i.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),o&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function JB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const ZB=/^:[\w-]+$/,eP=3,tP=2,nP=1,iP=10,rP=-2,qk=t=>t==="*";function oP(t,e){let n=t.split("/"),i=n.length;return n.some(qk)&&(i+=rP),e&&(i+=tP),n.filter(o=>!qk(o)).reduce((o,s)=>o+(ZB.test(s)?eP:s===""?nP:iP),i)}function sP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function aP(t,e,n){let{routesMeta:i}=t,o={},s="/",a=[];for(let l=0;l<i.length;++l){let c=i[l],u=l===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=lP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),g=c.route;if(!p)return null;Object.assign(o,p.params),a.push({params:o,pathname:Os([s,p.pathname]),pathnameBase:fP(Os([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Os([s,p.pathnameBase]))}return a}function lP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=cP(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],a=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:i.reduce((u,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let j=l[p]||"";a=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const k=l[p];return y&&!k?u[g]=void 0:u[g]=(k||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function cP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),w2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function uP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return w2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function dP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?Jl(t):t;return{pathname:n?n.startsWith("/")?n:hP(n,e):e,search:yP(i),hash:xP(o)}}function hP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function tf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mP(t,e){let n=pP(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function gP(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=Jl(t):(o=Mu({},t),wn(!o.pathname||!o.pathname.includes("?"),tf("?","pathname","search",o)),wn(!o.pathname||!o.pathname.includes("#"),tf("#","pathname","hash",o)),wn(!o.search||!o.search.includes("#"),tf("#","search","hash",o)));let s=t===""||o.pathname==="",a=s?"/":o.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!i&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;o.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=dP(o,l),u=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Os=t=>t.join("/").replace(/\/\/+/g,"/"),fP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const I2=["post","put","patch","delete"];new Set(I2);const vP=["get",...I2];new Set(vP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wu.apply(this,arguments)}const g0=m.createContext(null),kP=m.createContext(null),Im=m.createContext(null),Cm=m.createContext(null),ma=m.createContext({outlet:null,matches:[],isDataRoute:!1}),C2=m.createContext(null);function Rm(){return m.useContext(Cm)!=null}function ad(){return Rm()||wn(!1),m.useContext(Cm).location}function R2(t){m.useContext(Im).static||m.useLayoutEffect(t)}function tt(){let{isDataRoute:t}=m.useContext(ma);return t?zP():wP()}function wP(){Rm()||wn(!1);let t=m.useContext(g0),{basename:e,future:n,navigator:i}=m.useContext(Im),{matches:o}=m.useContext(ma),{pathname:s}=ad(),a=JSON.stringify(mP(o,n.v7_relativeSplatPath)),l=m.useRef(!1);return R2(()=>{l.current=!0}),m.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){i.go(u);return}let p=gP(u,JSON.parse(a),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Os([e,p.pathname])),(h.replace?i.replace:i.push)(p,h.state,h)},[e,i,a,s,t])}function SP(){let{matches:t}=m.useContext(ma),e=t[t.length-1];return e?e.params:{}}function TP(t,e){return jP(t,e)}function jP(t,e,n,i){Rm()||wn(!1);let{navigator:o}=m.useContext(Im),{matches:s}=m.useContext(ma),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ad(),h;if(e){var p;let T=typeof e=="string"?Jl(e):e;c==="/"||(p=T.pathname)!=null&&p.startsWith(c)||wn(!1),h=T}else h=u;let g=h.pathname||"/",y=g;if(c!=="/"){let T=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let k=YB(t,{pathname:y}),j=EP(k&&k.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Os([c,o.encodeLocation?o.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Os([c,o.encodeLocation?o.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,i);return e&&j?m.createElement(Cm.Provider,{value:{location:Wu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ao.Pop}},j):j}function _P(){let t=FP(),e=bP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:o},n):null,null)}const IP=m.createElement(_P,null);class CP extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(ma.Provider,{value:this.props.routeContext},m.createElement(C2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RP(t){let{routeContext:e,match:n,children:i}=t,o=m.useContext(g0);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(ma.Provider,{value:e},i)}function EP(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(o=n)==null?void 0:o.errors;if(l!=null){let h=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||wn(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:y}=n,k=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||k){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let y,k=!1,j=null,T=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,j=p.route.errorElement||IP,c&&(u<0&&g===0?(NP("route-fallback"),k=!0,T=null):u===g&&(k=!0,T=p.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,g+1)),b=()=>{let v;return y?v=j:k?v=T:p.route.Component?v=m.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=h,m.createElement(RP,{match:p,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?m.createElement(CP,{location:n.location,revalidation:n.revalidation,component:j,error:y,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var E2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(E2||{}),A2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(A2||{});function AP(t){let e=m.useContext(g0);return e||wn(!1),e}function BP(t){let e=m.useContext(kP);return e||wn(!1),e}function PP(t){let e=m.useContext(ma);return e||wn(!1),e}function B2(t){let e=PP(),n=e.matches[e.matches.length-1];return n.route.id||wn(!1),n.route.id}function FP(){var t;let e=m.useContext(C2),n=BP(),i=B2();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function zP(){let{router:t}=AP(E2.UseNavigateStable),e=B2(A2.UseNavigateStable),n=m.useRef(!1);return R2(()=>{n.current=!0}),m.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Wu({fromRouteId:e},s)))},[t,e])}const Hk={};function NP(t,e,n){Hk[t]||(Hk[t]=!0)}function DP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function et(t){wn(!1)}function MP(t){let{basename:e="/",children:n=null,location:i,navigationType:o=Ao.Pop,navigator:s,static:a=!1,future:l}=t;Rm()&&wn(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:s,static:a,future:Wu({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof i=="string"&&(i=Jl(i));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:k="default"}=i,j=m.useMemo(()=>{let T=_2(h,c);return T==null?null:{location:{pathname:T,search:p,hash:g,state:y,key:k},navigationType:o}},[c,h,p,g,y,k,o]);return j==null?null:m.createElement(Im.Provider,{value:u},m.createElement(Cm.Provider,{children:n,value:j}))}function WP(t){let{children:e,location:n}=t;return TP(_y(e),n)}new Promise(()=>{});function _y(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(i,o)=>{if(!m.isValidElement(i))return;let s=[...e,o];if(i.type===m.Fragment){n.push.apply(n,_y(i.props.children,s));return}i.type!==et&&wn(!1),!i.props.index||!i.props.children||wn(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=_y(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function LP(t,e){let n=Iy(t);return e&&e.forEach((i,o)=>{n.has(o)||e.getAll(o).forEach(s=>{n.append(o,s)})}),n}const OP="6";try{window.__reactRouterVersion=OP}catch(t){}const VP="startTransition",$k=zE[VP];function UP(t){let{basename:e,children:n,future:i,window:o}=t,s=m.useRef();s.current==null&&(s.current=KB({window:o,v5Compat:!0}));let a=s.current,[l,c]=m.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},h=m.useCallback(p=>{u&&$k?$k(()=>c(p)):c(p)},[c,u]);return m.useLayoutEffect(()=>a.listen(h),[a,h]),m.useEffect(()=>DP(i),[i]),m.createElement(MP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:i})}var Kk;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Kk||(Kk={}));var Gk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gk||(Gk={}));function P2(t){let e=m.useRef(Iy(t)),n=m.useRef(!1),i=ad(),o=m.useMemo(()=>LP(i.search,n.current?null:e.current),[i.search]),s=tt(),a=m.useCallback((l,c)=>{const u=Iy(typeof l=="function"?l(o):l);n.current=!0,s("?"+u,c)},[s,o]);return[o,a]}const qP=()=>{const[t,e]=m.useState(!0),[n,i]=m.useState(0),[o,s]=m.useState(!1),[a,l]=m.useState(!1),c=tt();return m.useEffect(()=>{C(Zn,null,function*(){i(1),s(!0),l(!0),yield new Promise(h=>setTimeout(h,2e3)),yield new Promise(h=>setTimeout(h,500)),i(0),yield new Promise(h=>setTimeout(h,400)),c("/home")})},[c]),r.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"radial-gradient(ellipse 80% 60% at 50% 50%, #fff 0%, #e3eafc 70%, #b3c6f7 100%)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,opacity:t?1:0,transition:"opacity 0.5s ease-in-out",overflow:"hidden"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:n,transition:"opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[r.jsx("div",{style:{position:"absolute",width:320,height:220,borderRadius:"50% / 40%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1,pointerEvents:"none",animation:o?"halo-rotate 2.5s linear forwards":"none",opacity:.85,background:"conic-gradient(from 0deg, #fff 0deg, #ffd700 60deg, #b3c6f7 180deg, #fff 300deg, #fff 360deg)",filter:"blur(2px)"}}),r.jsx("div",{style:{position:"absolute",width:260,height:260,borderRadius:"50%",background:"radial-gradient(circle, #fff 0%, rgba(255,255,255,0.7) 50%, transparent 80%)",zIndex:2,top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"}}),r.jsx("img",{src:"/ctx-logo.png",alt:"CTX Logo",style:{width:"200px",height:"200px",filter:"drop-shadow(0 8px 32px rgba(40, 40, 40, 0.35)) drop-shadow(0 2px 8px #fff)",zIndex:3,animation:a?"logo-scale-rotate 2.5s cubic-bezier(0.4,0,0.2,1) forwards":"none",transformOrigin:"50% 50%",transform:a?void 0:"scale(1) rotate(0deg)",opacity:a?void 0:1}}),r.jsx("div",{style:{marginTop:"20px",color:"#232946",fontSize:"24px",fontWeight:"bold",textAlign:"center",textShadow:"0 2px 8px rgba(255,255,255,0.5)",zIndex:3},children:"Restarter"}),r.jsx("div",{style:{marginTop:"8px",color:"#ffd700",fontSize:"16px",textAlign:"center",textShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",zIndex:3},children:""})]}),r.jsx("style",{children:`
        @keyframes halo-rotate {
          0% { transform: translate(-50%, -50%) rotate(0deg); }
          100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        @keyframes logo-scale-rotate {
          0% { transform: scale(0.1) rotate(-180deg); opacity: 0.2; }
          20% { opacity: 1; }
          100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
      `})]})},HP=()=>{};var Qk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},$P=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=t[n++];e[i++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=t[n++],a=t[n++],l=t[n++],c=((o&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(s&63)<<6|a&63)}}return e.join("")},z2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const s=t[o],a=o+1<t.length,l=a?t[o+1]:0,c=o+2<t.length,u=c?t[o+2]:0,h=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|u>>6,y=u&63;c||(y=64,a||(g=64)),i.push(n[h],n[p],n[g],n[y])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$P(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const s=n[t.charAt(o++)],l=o<t.length?n[t.charAt(o)]:0;++o;const u=o<t.length?n[t.charAt(o)]:64;++o;const p=o<t.length?n[t.charAt(o)]:64;if(++o,s==null||l==null||u==null||p==null)throw new KP;const g=s<<2|l>>4;if(i.push(g),u!==64){const y=l<<4&240|u>>2;if(i.push(y),p!==64){const k=u<<6&192|p;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GP=function(t){const e=F2(t);return z2.encodeByteArray(e,!0)},Ap=function(t){return GP(t).replace(/\./g,"")},N2=function(t){try{return z2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=()=>D2().__FIREBASE_DEFAULTS__,YP=()=>{if(typeof process=="undefined"||typeof Qk=="undefined")return;const t=Qk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XP=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&N2(t[1]);return e&&JSON.parse(e)},Em=()=>{try{return HP()||QP()||YP()||XP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M2=t=>{var e,n;return(n=(e=Em())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},W2=t=>{const e=M2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},L2=()=>{var t;return(t=Em())===null||t===void 0?void 0:t.config},O2=t=>{var e;return(e=Em())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function Am(t){return C(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ap(JSON.stringify(n)),Ap(JSON.stringify(a)),""].join(".")}const au={};function ZP(){const t={prod:[],emulator:[]};for(const e of Object.keys(au))au[e]?t.emulator.push(e):t.prod.push(e);return t}function e5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yk=!1;function f0(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!ao(window.location.host)||au[t]===e||au[t]||Yk)return;au[t]=e;function n(g){return`__firebase__banner__${g}`}const i="__firebase__banner",s=ZP().prod.length>0;function a(){const g=document.getElementById(i);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Yk=!0,a()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=e5(i),y=n("text"),k=document.getElementById(y)||document.createElement("span"),j=n("learnmore"),T=document.getElementById(j)||document.createElement("a"),x=n("preprendIcon"),b=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const v=g.element;l(v),h(T,j);const z=u();c(b,x),v.append(b,k,T,z),document.body.appendChild(v)}s?(k.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t5(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function U2(){var t;const e=(t=Em())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function n5(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function i5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function r5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o5(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function q2(){return!U2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H2(){return!U2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function $2(){try{return typeof indexedDB=="object"}catch(t){return!1}}function s5(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;e(((s=o.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="FirebaseError";class Cr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=a5,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ld.prototype.create)}}class ld{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,s=this.errors[e],a=s?l5(s,i):"Error",l=`${this.serviceName}: ${a} (${o}).`;return new Cr(o,l,i)}}function l5(t,e){return t.replace(c5,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const c5=/\{\$([^}]+)}/g;function u5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const s=t[o],a=e[o];if(Xk(s)&&Xk(a)){if(!nr(s,a))return!1}else if(s!==a)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Xk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,s]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(s)}}),e}function Kc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function d5(t,e){const n=new h5(t,e);return n.subscribe.bind(n)}class h5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");p5(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=nf),o.error===void 0&&(o.error=nf),o.complete===void 0&&(o.complete=nf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(a){}}),this.observers.push(o),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Qo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new JP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch(o){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f5(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch(n){}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch(s){}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(o,s);const a=this.instances.get(o);return a&&e(a,o),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:g5(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(o){}return i||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g5(t){return t===js?void 0:t}function f5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const x5={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},b5=ft.INFO,v5={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},k5=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=v5[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y0{constructor(e){this.name=e,this._logLevel=b5,this._logHandler=k5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const w5=(t,e)=>e.some(n=>t instanceof n);let Jk,Zk;function S5(){return Jk||(Jk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T5(){return Zk||(Zk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K2=new WeakMap,Cy=new WeakMap,G2=new WeakMap,rf=new WeakMap,x0=new WeakMap;function j5(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Vo(t.result)),o()},a=()=>{i(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&K2.set(n,t)}).catch(()=>{}),x0.set(e,t),e}function _5(t){if(Cy.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),o()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Cy.set(t,e)}let Ry={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I5(t){Ry=t(Ry)}function C5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(of(this),e,...n);return G2.set(i,e.sort?e.sort():[e]),Vo(i)}:T5().includes(t)?function(...e){return t.apply(of(this),e),Vo(K2.get(this))}:function(...e){return Vo(t.apply(of(this),e))}}function R5(t){return typeof t=="function"?C5(t):(t instanceof IDBTransaction&&_5(t),w5(t,S5())?new Proxy(t,Ry):t)}function Vo(t){if(t instanceof IDBRequest)return j5(t);if(rf.has(t))return rf.get(t);const e=R5(t);return e!==t&&(rf.set(t,e),x0.set(e,t)),e}const of=t=>x0.get(t);function E5(t,e,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const a=indexedDB.open(t,e),l=Vo(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Vo(a.result),c.oldVersion,c.newVersion,Vo(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),o&&c.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const A5=["get","getKey","getAll","getAllKeys","count"],B5=["put","add","delete","clear"],sf=new Map;function e1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sf.get(e))return sf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=B5.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||A5.includes(n)))return;const s=function(a,...l){return C(this,null,function*(){const c=this.transaction(a,o?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),o&&c.done]))[0]})};return sf.set(e,s),s}I5(t=>We(ke({},t),{get:(e,n,i)=>e1(e,n)||t.get(e,n,i),has:(e,n)=>!!e1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F5(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function F5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ey="@firebase/app",t1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new y0("@firebase/app"),z5="@firebase/app-compat",N5="@firebase/analytics-compat",D5="@firebase/analytics",M5="@firebase/app-check-compat",W5="@firebase/app-check",L5="@firebase/auth",O5="@firebase/auth-compat",V5="@firebase/database",U5="@firebase/data-connect",q5="@firebase/database-compat",H5="@firebase/functions",$5="@firebase/functions-compat",K5="@firebase/installations",G5="@firebase/installations-compat",Q5="@firebase/messaging",Y5="@firebase/messaging-compat",X5="@firebase/performance",J5="@firebase/performance-compat",Z5="@firebase/remote-config",eF="@firebase/remote-config-compat",tF="@firebase/storage",nF="@firebase/storage-compat",iF="@firebase/firestore",rF="@firebase/ai",oF="@firebase/firestore-compat",sF="firebase",aF="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="[DEFAULT]",lF={[Ey]:"fire-core",[z5]:"fire-core-compat",[D5]:"fire-analytics",[N5]:"fire-analytics-compat",[W5]:"fire-app-check",[M5]:"fire-app-check-compat",[L5]:"fire-auth",[O5]:"fire-auth-compat",[V5]:"fire-rtdb",[U5]:"fire-data-connect",[q5]:"fire-rtdb-compat",[H5]:"fire-fn",[$5]:"fire-fn-compat",[K5]:"fire-iid",[G5]:"fire-iid-compat",[Q5]:"fire-fcm",[Y5]:"fire-fcm-compat",[X5]:"fire-perf",[J5]:"fire-perf-compat",[Z5]:"fire-rc",[eF]:"fire-rc-compat",[tF]:"fire-gcs",[nF]:"fire-gcs-compat",[iF]:"fire-fst",[oF]:"fire-fst-compat",[rF]:"fire-vertex","fire-js":"fire-js",[sF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new Map,cF=new Map,Ay=new Map;function n1(t,e){try{t.container.addComponent(e)}catch(n){to.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){const e=t.name;if(Ay.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,t);for(const n of Pp.values())n1(n,t);for(const n of cF.values())n1(n,t);return!0}function Zl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function uF(t,e,n=Bp){Zl(t,e).clearInstance(n)}function ai(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uo=new ld("app","Firebase",dF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=aF;function Q2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Uo.create("bad-app-name",{appName:String(o)});if(n||(n=L2()),!n)throw Uo.create("no-options");const s=Pp.get(o);if(s){if(nr(n,s.options)&&nr(i,s.config))return s;throw Uo.create("duplicate-app",{appName:o})}const a=new y5(o);for(const c of Ay.values())a.addComponent(c);const l=new hF(n,i,a);return Pp.set(o,l),l}function b0(t=Bp){const e=Pp.get(t);if(!e&&t===Bp&&L2())return Q2();if(!e)throw Uo.create("no-app",{appName:t});return e}function vr(t,e,n){var i;let o=(i=lF[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const s=o.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${o}" with version "${e}":`];s&&l.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(l.join(" "));return}Zs(new Qo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="firebase-heartbeat-database",mF=1,Lu="firebase-heartbeat-store";let af=null;function Y2(){return af||(af=E5(pF,mF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Uo.create("idb-open",{originalErrorMessage:t.message})})),af}function gF(t){return C(this,null,function*(){try{const n=(yield Y2()).transaction(Lu),i=yield n.objectStore(Lu).get(X2(t));return yield n.done,i}catch(e){if(e instanceof Cr)to.warn(e.message);else{const n=Uo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(n.message)}}})}function i1(t,e){return C(this,null,function*(){try{const i=(yield Y2()).transaction(Lu,"readwrite");yield i.objectStore(Lu).put(e,X2(t)),yield i.done}catch(n){if(n instanceof Cr)to.warn(n.message);else{const i=Uo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});to.warn(i.message)}}})}function X2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=1024,yF=30;class xF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return C(this,null,function*(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=r1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats.length>yF){const a=kF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){to.warn(i)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r1(),{heartbeatsToSend:i,unsentEntries:o}=bF(this._heartbeatsCache.heartbeats),s=Ap(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return to.warn(n),""}})}}function r1(){return new Date().toISOString().substring(0,10)}function bF(t,e=fF){const n=[];let i=t.slice();for(const o of t){const s=n.find(a=>a.agent===o.agent);if(s){if(s.dates.push(o.date),o1(n)>e){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),o1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return $2()?s5().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){const n=yield gF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const o=yield this.read();return i1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const o=yield this.read();return i1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return})}}function o1(t){return Ap(JSON.stringify({version:2,heartbeats:t})).length}function kF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t){Zs(new Qo("platform-logger",e=>new P5(e),"PRIVATE")),Zs(new Qo("heartbeat",e=>new xF(e),"PRIVATE")),vr(Ey,t1,t),vr(Ey,t1,"esm2017"),vr("fire-js","")}wF("");var SF="firebase",TF="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(SF,TF,"app");var s1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qo,J2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,S){function R(){}R.prototype=S.prototype,_.D=S.prototype,_.prototype=new R,_.prototype.constructor=_,_.C=function(E,A,B){for(var I=Array(arguments.length-2),re=2;re<arguments.length;re++)I[re-2]=arguments[re];return S.prototype[A].apply(E,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(_,S,R){R||(R=0);var E=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)E[A]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(A=0;16>A;++A)E[A]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=_.g[0],R=_.g[1],A=_.g[2];var B=_.g[3],I=S+(B^R&(A^B))+E[0]+3614090360&4294967295;S=R+(I<<7&4294967295|I>>>25),I=B+(A^S&(R^A))+E[1]+3905402710&4294967295,B=S+(I<<12&4294967295|I>>>20),I=A+(R^B&(S^R))+E[2]+606105819&4294967295,A=B+(I<<17&4294967295|I>>>15),I=R+(S^A&(B^S))+E[3]+3250441966&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(B^R&(A^B))+E[4]+4118548399&4294967295,S=R+(I<<7&4294967295|I>>>25),I=B+(A^S&(R^A))+E[5]+1200080426&4294967295,B=S+(I<<12&4294967295|I>>>20),I=A+(R^B&(S^R))+E[6]+2821735955&4294967295,A=B+(I<<17&4294967295|I>>>15),I=R+(S^A&(B^S))+E[7]+4249261313&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(B^R&(A^B))+E[8]+1770035416&4294967295,S=R+(I<<7&4294967295|I>>>25),I=B+(A^S&(R^A))+E[9]+2336552879&4294967295,B=S+(I<<12&4294967295|I>>>20),I=A+(R^B&(S^R))+E[10]+4294925233&4294967295,A=B+(I<<17&4294967295|I>>>15),I=R+(S^A&(B^S))+E[11]+2304563134&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(B^R&(A^B))+E[12]+1804603682&4294967295,S=R+(I<<7&4294967295|I>>>25),I=B+(A^S&(R^A))+E[13]+4254626195&4294967295,B=S+(I<<12&4294967295|I>>>20),I=A+(R^B&(S^R))+E[14]+2792965006&4294967295,A=B+(I<<17&4294967295|I>>>15),I=R+(S^A&(B^S))+E[15]+1236535329&4294967295,R=A+(I<<22&4294967295|I>>>10),I=S+(A^B&(R^A))+E[1]+4129170786&4294967295,S=R+(I<<5&4294967295|I>>>27),I=B+(R^A&(S^R))+E[6]+3225465664&4294967295,B=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(B^S))+E[11]+643717713&4294967295,A=B+(I<<14&4294967295|I>>>18),I=R+(B^S&(A^B))+E[0]+3921069994&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(A^B&(R^A))+E[5]+3593408605&4294967295,S=R+(I<<5&4294967295|I>>>27),I=B+(R^A&(S^R))+E[10]+38016083&4294967295,B=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(B^S))+E[15]+3634488961&4294967295,A=B+(I<<14&4294967295|I>>>18),I=R+(B^S&(A^B))+E[4]+3889429448&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(A^B&(R^A))+E[9]+568446438&4294967295,S=R+(I<<5&4294967295|I>>>27),I=B+(R^A&(S^R))+E[14]+3275163606&4294967295,B=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(B^S))+E[3]+4107603335&4294967295,A=B+(I<<14&4294967295|I>>>18),I=R+(B^S&(A^B))+E[8]+1163531501&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(A^B&(R^A))+E[13]+2850285829&4294967295,S=R+(I<<5&4294967295|I>>>27),I=B+(R^A&(S^R))+E[2]+4243563512&4294967295,B=S+(I<<9&4294967295|I>>>23),I=A+(S^R&(B^S))+E[7]+1735328473&4294967295,A=B+(I<<14&4294967295|I>>>18),I=R+(B^S&(A^B))+E[12]+2368359562&4294967295,R=A+(I<<20&4294967295|I>>>12),I=S+(R^A^B)+E[5]+4294588738&4294967295,S=R+(I<<4&4294967295|I>>>28),I=B+(S^R^A)+E[8]+2272392833&4294967295,B=S+(I<<11&4294967295|I>>>21),I=A+(B^S^R)+E[11]+1839030562&4294967295,A=B+(I<<16&4294967295|I>>>16),I=R+(A^B^S)+E[14]+4259657740&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(R^A^B)+E[1]+2763975236&4294967295,S=R+(I<<4&4294967295|I>>>28),I=B+(S^R^A)+E[4]+1272893353&4294967295,B=S+(I<<11&4294967295|I>>>21),I=A+(B^S^R)+E[7]+4139469664&4294967295,A=B+(I<<16&4294967295|I>>>16),I=R+(A^B^S)+E[10]+3200236656&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(R^A^B)+E[13]+681279174&4294967295,S=R+(I<<4&4294967295|I>>>28),I=B+(S^R^A)+E[0]+3936430074&4294967295,B=S+(I<<11&4294967295|I>>>21),I=A+(B^S^R)+E[3]+3572445317&4294967295,A=B+(I<<16&4294967295|I>>>16),I=R+(A^B^S)+E[6]+76029189&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(R^A^B)+E[9]+3654602809&4294967295,S=R+(I<<4&4294967295|I>>>28),I=B+(S^R^A)+E[12]+3873151461&4294967295,B=S+(I<<11&4294967295|I>>>21),I=A+(B^S^R)+E[15]+530742520&4294967295,A=B+(I<<16&4294967295|I>>>16),I=R+(A^B^S)+E[2]+3299628645&4294967295,R=A+(I<<23&4294967295|I>>>9),I=S+(A^(R|~B))+E[0]+4096336452&4294967295,S=R+(I<<6&4294967295|I>>>26),I=B+(R^(S|~A))+E[7]+1126891415&4294967295,B=S+(I<<10&4294967295|I>>>22),I=A+(S^(B|~R))+E[14]+2878612391&4294967295,A=B+(I<<15&4294967295|I>>>17),I=R+(B^(A|~S))+E[5]+4237533241&4294967295,R=A+(I<<21&4294967295|I>>>11),I=S+(A^(R|~B))+E[12]+1700485571&4294967295,S=R+(I<<6&4294967295|I>>>26),I=B+(R^(S|~A))+E[3]+2399980690&4294967295,B=S+(I<<10&4294967295|I>>>22),I=A+(S^(B|~R))+E[10]+4293915773&4294967295,A=B+(I<<15&4294967295|I>>>17),I=R+(B^(A|~S))+E[1]+2240044497&4294967295,R=A+(I<<21&4294967295|I>>>11),I=S+(A^(R|~B))+E[8]+1873313359&4294967295,S=R+(I<<6&4294967295|I>>>26),I=B+(R^(S|~A))+E[15]+4264355552&4294967295,B=S+(I<<10&4294967295|I>>>22),I=A+(S^(B|~R))+E[6]+2734768916&4294967295,A=B+(I<<15&4294967295|I>>>17),I=R+(B^(A|~S))+E[13]+1309151649&4294967295,R=A+(I<<21&4294967295|I>>>11),I=S+(A^(R|~B))+E[4]+4149444226&4294967295,S=R+(I<<6&4294967295|I>>>26),I=B+(R^(S|~A))+E[11]+3174756917&4294967295,B=S+(I<<10&4294967295|I>>>22),I=A+(S^(B|~R))+E[2]+718787259&4294967295,A=B+(I<<15&4294967295|I>>>17),I=R+(B^(A|~S))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+B&4294967295}i.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var R=S-this.blockSize,E=this.B,A=this.h,B=0;B<S;){if(A==0)for(;B<=R;)o(this,_,B),B+=this.blockSize;if(typeof _=="string"){for(;B<S;)if(E[A++]=_.charCodeAt(B++),A==this.blockSize){o(this,E),A=0;break}}else for(;B<S;)if(E[A++]=_[B++],A==this.blockSize){o(this,E),A=0;break}}this.h=A,this.o+=S},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var R=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=R&255,R/=256;for(this.u(_),_=Array(16),S=R=0;4>S;++S)for(var E=0;32>E;E+=8)_[R++]=this.g[S]>>>E&255;return _};function s(_,S){var R=l;return Object.prototype.hasOwnProperty.call(R,_)?R[_]:R[_]=S(_)}function a(_,S){this.h=S;for(var R=[],E=!0,A=_.length-1;0<=A;A--){var B=_[A]|0;E&&B==S||(R[A]=B,E=!1)}this.g=R}var l={};function c(_){return-128<=_&&128>_?s(_,function(S){return new a([S|0],0>S?-1:0)}):new a([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return T(u(-_));for(var S=[],R=1,E=0;_>=R;E++)S[E]=_/R|0,R*=4294967296;return new a(S,0)}function h(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return T(h(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(S,8)),E=p,A=0;A<_.length;A+=8){var B=Math.min(8,_.length-A),I=parseInt(_.substring(A,A+B),S);8>B?(B=u(Math.pow(S,B)),E=E.j(B).add(u(I))):(E=E.j(R),E=E.add(u(I)))}return E}var p=c(0),g=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(j(this))return-T(this).m();for(var _=0,S=1,R=0;R<this.g.length;R++){var E=this.i(R);_+=(0<=E?E:4294967296+E)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(j(this))return"-"+T(this).toString(_);for(var S=u(Math.pow(_,6)),R=this,E="";;){var A=z(R,S).g;R=x(R,A.j(S));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(_);if(R=A,k(R))return B+E;for(;6>B.length;)B="0"+B;E=B+E}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function j(_){return _.h==-1}t.l=function(_){return _=x(this,_),j(_)?-1:k(_)?0:1};function T(_){for(var S=_.g.length,R=[],E=0;E<S;E++)R[E]=~_.g[E];return new a(R,~_.h).add(g)}t.abs=function(){return j(this)?T(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),R=[],E=0,A=0;A<=S;A++){var B=E+(this.i(A)&65535)+(_.i(A)&65535),I=(B>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);E=I>>>16,B&=65535,I&=65535,R[A]=I<<16|B}return new a(R,R[R.length-1]&-2147483648?-1:0)};function x(_,S){return _.add(T(S))}t.j=function(_){if(k(this)||k(_))return p;if(j(this))return j(_)?T(this).j(T(_)):T(T(this).j(_));if(j(_))return T(this.j(T(_)));if(0>this.l(y)&&0>_.l(y))return u(this.m()*_.m());for(var S=this.g.length+_.g.length,R=[],E=0;E<2*S;E++)R[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<_.g.length;A++){var B=this.i(E)>>>16,I=this.i(E)&65535,re=_.i(A)>>>16,Q=_.i(A)&65535;R[2*E+2*A]+=I*Q,b(R,2*E+2*A),R[2*E+2*A+1]+=B*Q,b(R,2*E+2*A+1),R[2*E+2*A+1]+=I*re,b(R,2*E+2*A+1),R[2*E+2*A+2]+=B*re,b(R,2*E+2*A+2)}for(E=0;E<S;E++)R[E]=R[2*E+1]<<16|R[2*E];for(E=S;E<2*S;E++)R[E]=0;return new a(R,0)};function b(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function v(_,S){this.g=_,this.h=S}function z(_,S){if(k(S))throw Error("division by zero");if(k(_))return new v(p,p);if(j(_))return S=z(T(_),S),new v(T(S.g),T(S.h));if(j(S))return S=z(_,T(S)),new v(T(S.g),S.h);if(30<_.g.length){if(j(_)||j(S))throw Error("slowDivide_ only works with positive integers.");for(var R=g,E=S;0>=E.l(_);)R=D(R),E=D(E);var A=P(R,1),B=P(E,1);for(E=P(E,2),R=P(R,2);!k(E);){var I=B.add(E);0>=I.l(_)&&(A=A.add(R),B=I),E=P(E,1),R=P(R,1)}return S=x(_,A.j(S)),new v(A,S)}for(A=p;0<=_.l(S);){for(R=Math.max(1,Math.floor(_.m()/S.m())),E=Math.ceil(Math.log(R)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),B=u(R),I=B.j(S);j(I)||0<I.l(_);)R-=E,B=u(R),I=B.j(S);k(B)&&(B=g),A=A.add(B),_=x(_,I)}return new v(A,_)}t.A=function(_){return z(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),R=[],E=0;E<S;E++)R[E]=this.i(E)&_.i(E);return new a(R,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),R=[],E=0;E<S;E++)R[E]=this.i(E)|_.i(E);return new a(R,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),R=[],E=0;E<S;E++)R[E]=this.i(E)^_.i(E);return new a(R,this.h^_.h)};function D(_){for(var S=_.g.length+1,R=[],E=0;E<S;E++)R[E]=_.i(E)<<1|_.i(E-1)>>>31;return new a(R,_.h)}function P(_,S){var R=S>>5;S%=32;for(var E=_.g.length-R,A=[],B=0;B<E;B++)A[B]=0<S?_.i(B+R)>>>S|_.i(B+R+1)<<32-S:_.i(B+R);return new a(A,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,J2=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,qo=a}).apply(typeof s1!="undefined"?s1:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var fh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z2,Gc,e_,Vh,By,t_,n_,i_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,f,w){return d==Array.prototype||d==Object.prototype||(d[f]=w.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var f=0;f<d.length;++f){var w=d[f];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function o(d,f){if(f)e:{var w=i;d=d.split(".");for(var F=0;F<d.length-1;F++){var ne=d[F];if(!(ne in w))break e;w=w[ne]}d=d[d.length-1],F=w[d],f=f(F),f!=F&&f!=null&&e(w,d,{configurable:!0,writable:!0,value:f})}}function s(d,f){d instanceof String&&(d+="");var w=0,F=!1,ne={next:function(){if(!F&&w<d.length){var ue=w++;return{value:f(ue,d[ue]),done:!1}}return F=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}o("Array.prototype.values",function(d){return d||function(){return s(this,function(f,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(d){var f=typeof d;return f=f!="object"?f:d?Array.isArray(d)?"array":f:"null",f=="array"||f=="object"&&typeof d.length=="number"}function u(d){var f=typeof d;return f=="object"&&d!=null||f=="function"}function h(d,f,w){return d.call.apply(d.bind,arguments)}function p(d,f,w){if(!d)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,F),d.apply(f,ne)}}return function(){return d.apply(f,arguments)}}function g(d,f,w){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(d,f){var w=Array.prototype.slice.call(arguments,1);return function(){var F=w.slice();return F.push.apply(F,arguments),d.apply(this,F)}}function k(d,f){function w(){}w.prototype=f.prototype,d.aa=f.prototype,d.prototype=new w,d.prototype.constructor=d,d.Qb=function(F,ne,ue){for(var Be=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)Be[zt-2]=arguments[zt];return f.prototype[ne].apply(F,Be)}}function j(d){const f=d.length;if(0<f){const w=Array(f);for(let F=0;F<f;F++)w[F]=d[F];return w}return[]}function T(d,f){for(let w=1;w<arguments.length;w++){const F=arguments[w];if(c(F)){const ne=d.length||0,ue=F.length||0;d.length=ne+ue;for(let Be=0;Be<ue;Be++)d[ne+Be]=F[Be]}else d.push(F)}}class x{constructor(f,w){this.i=f,this.j=w,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function b(d){return/^[\s\xa0]*$/.test(d)}function v(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function z(d){return z[" "](d),d}z[" "]=function(){};var D=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function P(d,f,w){for(const F in d)f.call(w,d[F],F,d)}function _(d,f){for(const w in d)f.call(void 0,d[w],w,d)}function S(d){const f={};for(const w in d)f[w]=d[w];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(d,f){let w,F;for(let ne=1;ne<arguments.length;ne++){F=arguments[ne];for(w in F)d[w]=F[w];for(let ue=0;ue<R.length;ue++)w=R[ue],Object.prototype.hasOwnProperty.call(F,w)&&(d[w]=F[w])}}function A(d){var f=1;d=d.split(":");const w=[];for(;0<f&&d.length;)w.push(d.shift()),f--;return d.length&&w.push(d.join(":")),w}function B(d){l.setTimeout(()=>{throw d},0)}function I(){var d=ee;let f=null;return d.g&&(f=d.g,d.g=d.g.next,d.g||(d.h=null),f.next=null),f}class re{constructor(){this.h=this.g=null}add(f,w){const F=Q.get();F.set(f,w),this.h?this.h.next=F:this.g=F,this.h=F}}var Q=new x(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(f,w){this.h=f,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let de,V=!1,ee=new re,he=()=>{const d=l.Promise.resolve(void 0);de=()=>{d.then(ve)}};var ve=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(w){B(w)}var f=Q;f.j(d),100>f.h&&(f.h++,d.next=f.g,f.g=d)}V=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(d,f){this.type=d,this.g=this.target=f,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,f=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};l.addEventListener("test",w,f),l.removeEventListener("test",w,f)}catch(w){}return d}();function O(d,f){if(te.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var w=this.type=d.type,F=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=f,f=d.relatedTarget){if(D){e:{try{z(f.nodeName);var ne=!0;break e}catch(ue){}ne=!1}ne||(f=null)}}else w=="mouseover"?f=d.fromElement:w=="mouseout"&&(f=d.toElement);this.relatedTarget=f,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:oe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&O.aa.h.call(this)}}k(O,te);var oe={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),je=0;function Ce(d,f,w,F,ne){this.listener=d,this.proxy=null,this.src=f,this.type=w,this.capture=!!F,this.ha=ne,this.key=++je,this.da=this.fa=!1}function He(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function J(d){this.src=d,this.g={},this.h=0}J.prototype.add=function(d,f,w,F,ne){var ue=d.toString();d=this.g[ue],d||(d=this.g[ue]=[],this.h++);var Be=Le(d,f,F,ne);return-1<Be?(f=d[Be],w||(f.fa=!1)):(f=new Ce(f,this.src,ue,!!F,ne),f.fa=w,d.push(f)),f};function H(d,f){var w=f.type;if(w in d.g){var F=d.g[w],ne=Array.prototype.indexOf.call(F,f,void 0),ue;(ue=0<=ne)&&Array.prototype.splice.call(F,ne,1),ue&&(He(f),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Le(d,f,w,F){for(var ne=0;ne<d.length;++ne){var ue=d[ne];if(!ue.da&&ue.listener==f&&ue.capture==!!w&&ue.ha==F)return ne}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),ae={};function Ie(d,f,w,F,ne){if(Array.isArray(f)){for(var ue=0;ue<f.length;ue++)Ie(d,f[ue],w,F,ne);return null}return w=U(w),d&&d[ge]?d.K(f,w,u(F)?!!F.capture:!1,ne):xe(d,f,w,!1,F,ne)}function xe(d,f,w,F,ne,ue){if(!f)throw Error("Invalid event type");var Be=u(ne)?!!ne.capture:!!ne,zt=St(d);if(zt||(d[Y]=zt=new J(d)),w=zt.add(f,w,F,Be,ue),w.proxy)return w;if(F=_e(),w.proxy=F,F.src=d,F.listener=w,d.addEventListener)N||(ne=Be),ne===void 0&&(ne=!1),d.addEventListener(f.toString(),F,ne);else if(d.attachEvent)d.attachEvent(gt(f.toString()),F);else if(d.addListener&&d.removeListener)d.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return w}function _e(){function d(w){return f.call(d.src,d.listener,w)}const f=ht;return d}function we(d,f,w,F,ne){if(Array.isArray(f))for(var ue=0;ue<f.length;ue++)we(d,f[ue],w,F,ne);else F=u(F)?!!F.capture:!!F,w=U(w),d&&d[ge]?(d=d.i,f=String(f).toString(),f in d.g&&(ue=d.g[f],w=Le(ue,w,F,ne),-1<w&&(He(ue[w]),Array.prototype.splice.call(ue,w,1),ue.length==0&&(delete d.g[f],d.h--)))):d&&(d=St(d))&&(f=d.g[f.toString()],d=-1,f&&(d=Le(f,w,F,ne)),(w=-1<d?f[d]:null)&&qe(w))}function qe(d){if(typeof d!="number"&&d&&!d.da){var f=d.src;if(f&&f[ge])H(f.i,d);else{var w=d.type,F=d.proxy;f.removeEventListener?f.removeEventListener(w,F,d.capture):f.detachEvent?f.detachEvent(gt(w),F):f.addListener&&f.removeListener&&f.removeListener(F),(w=St(f))?(H(w,d),w.h==0&&(w.src=null,f[Y]=null)):He(d)}}}function gt(d){return d in ae?ae[d]:ae[d]="on"+d}function ht(d,f){if(d.da)d=!0;else{f=new O(f,this);var w=d.listener,F=d.ha||d.src;d.fa&&qe(d),d=w.call(F,f)}return d}function St(d){return d=d[Y],d instanceof J?d:null}var _t="__closure_events_fn_"+(1e9*Math.random()>>>0);function U(d){return typeof d=="function"?d:(d[_t]||(d[_t]=function(f){return d.handleEvent(f)}),d[_t])}function L(){be.call(this),this.i=new J(this),this.M=this,this.F=null}k(L,be),L.prototype[ge]=!0,L.prototype.removeEventListener=function(d,f,w,F){we(this,d,f,w,F)};function W(d,f){var w,F=d.F;if(F)for(w=[];F;F=F.F)w.push(F);if(d=d.M,F=f.type||f,typeof f=="string")f=new te(f,d);else if(f instanceof te)f.target=f.target||d;else{var ne=f;f=new te(F,d),E(f,ne)}if(ne=!0,w)for(var ue=w.length-1;0<=ue;ue--){var Be=f.g=w[ue];ne=Qe(Be,F,!0,f)&&ne}if(Be=f.g=d,ne=Qe(Be,F,!0,f)&&ne,ne=Qe(Be,F,!1,f)&&ne,w)for(ue=0;ue<w.length;ue++)Be=f.g=w[ue],ne=Qe(Be,F,!1,f)&&ne}L.prototype.N=function(){if(L.aa.N.call(this),this.i){var d=this.i,f;for(f in d.g){for(var w=d.g[f],F=0;F<w.length;F++)He(w[F]);delete d.g[f],d.h--}}this.F=null},L.prototype.K=function(d,f,w,F){return this.i.add(String(d),f,!1,w,F)},L.prototype.L=function(d,f,w,F){return this.i.add(String(d),f,!0,w,F)};function Qe(d,f,w,F){if(f=d.i.g[String(f)],!f)return!0;f=f.concat();for(var ne=!0,ue=0;ue<f.length;++ue){var Be=f[ue];if(Be&&!Be.da&&Be.capture==w){var zt=Be.listener,An=Be.ha||Be.src;Be.fa&&H(d.i,Be),ne=zt.call(An,F)!==!1&&ne}}return ne&&!F.defaultPrevented}function at(d,f,w){if(typeof d=="function")w&&(d=g(d,w));else if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(d,f||0)}function M(d){d.g=at(()=>{d.g=null,d.i&&(d.i=!1,M(d))},d.l);const f=d.h;d.h=null,d.m.apply(null,f)}class Se extends be{constructor(f,w){super(),this.m=f,this.l=w,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:M(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(d){be.call(this),this.h=d,this.g={}}k(Pe,be);var $e=[];function G(d){P(d.g,function(f,w){this.g.hasOwnProperty(w)&&qe(f)},d),d.g={}}Pe.prototype.N=function(){Pe.aa.N.call(this),G(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fe=l.JSON.stringify,De=l.JSON.parse,q=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function le(){}le.prototype.h=null;function rt(d){return d.h||(d.h=d.i())}function $(){}var pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nt(){te.call(this,"d")}k(nt,te);function pt(){te.call(this,"c")}k(pt,te);var it={},K=null;function ce(){return K=K||new L}it.La="serverreachability";function Ve(d){te.call(this,it.La,d)}k(Ve,te);function Ke(d){const f=ce();W(f,new Ve(f))}it.STAT_EVENT="statevent";function me(d,f){te.call(this,it.STAT_EVENT,d),this.stat=f}k(me,te);function Ee(d){const f=ce();W(f,new me(f,d))}it.Ma="timingevent";function Me(d,f){te.call(this,it.Ma,d),this.size=f}k(Me,te);function Tt(d,f){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},f)}function lt(){this.g=!0}lt.prototype.xa=function(){this.g=!1};function un(d,f,w,F,ne,ue){d.info(function(){if(d.g)if(ue)for(var Be="",zt=ue.split("&"),An=0;An<zt.length;An++){var wt=zt[An].split("=");if(1<wt.length){var Wn=wt[0];wt=wt[1];var Ln=Wn.split("_");Be=2<=Ln.length&&Ln[1]=="type"?Be+(Wn+"="+wt+"&"):Be+(Wn+"=redacted&")}}else Be=null;else Be=ue;return"XMLHTTP REQ ("+F+") [attempt "+ne+"]: "+f+`
`+w+`
`+Be})}function fn(d,f,w,F,ne,ue,Be){d.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ne+"]: "+f+`
`+w+`
`+ue+" "+Be})}function Ye(d,f,w,F){d.info(function(){return"XMLHTTP TEXT ("+f+"): "+ys(d,w)+(F?" "+F:"")})}function or(d,f){d.info(function(){return"TIMEOUT: "+f})}lt.prototype.info=function(){};function ys(d,f){if(!d.g)return f;if(!f)return null;try{var w=JSON.parse(f);if(w){for(d=0;d<w.length;d++)if(Array.isArray(w[d])){var F=w[d];if(!(2>F.length)){var ne=F[1];if(Array.isArray(ne)&&!(1>ne.length)){var ue=ne[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var Be=1;Be<ne.length;Be++)ne[Be]=""}}}}return Fe(w)}catch(zt){return f}}var $t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mo;function dn(){}k(dn,le),dn.prototype.g=function(){return new XMLHttpRequest},dn.prototype.i=function(){return{}},mo=new dn;function Pt(d,f,w,F){this.j=d,this.i=f,this.l=w,this.R=F||1,this.U=new Pe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kt}function Kt(){this.i=null,this.g="",this.h=!1}var vi={},ki={};function wi(d,f,w){d.L=1,d.v=Vd(Br(f)),d.m=w,d.P=!0,wa(d,null)}function wa(d,f){d.F=Date.now(),Wd(d),d.A=Br(d.v);var w=d.A,F=d.R;Array.isArray(F)||(F=[String(F)]),sv(w.i,"t",F),d.C=0,w=d.j.J,d.h=new Kt,d.g=Tv(d.j,w?f:null,!d.m),0<d.O&&(d.M=new Se(g(d.Y,d,d.g),d.O)),f=d.U,w=d.g,F=d.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&($e[0]=ne.toString()),ne=$e);for(var ue=0;ue<ne.length;ue++){var Be=Ie(w,ne[ue],F||f.handleEvent,!1,f.h||f);if(!Be)break;f.g[Be.key]=Be}f=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,f)):(d.u="GET",d.g.ea(d.A,d.u,null,f)),Ke(),un(d.i,d.u,d.A,d.l,d.R,d.m)}Pt.prototype.ca=function(d){d=d.target;const f=this.M;f&&Pr(d)==3?f.j():this.Y(d)},Pt.prototype.Y=function(d){try{if(d==this.g)e:{const Ln=Pr(this.g);var f=this.g.Ba();const ja=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||pv(this.g)))){this.J||Ln!=4||f==7||(f==8||0>=ja?Ke(3):Ke(2)),xg(this);var w=this.g.Z();this.X=w;t:if(Kb(this)){var F=pv(this.g);d="";var ne=F.length,ue=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){xs(this),yc(this);var Be="";break t}this.h.i=new l.TextDecoder}for(f=0;f<ne;f++)this.h.h=!0,d+=this.h.i.decode(F[f],{stream:!(ue&&f==ne-1)});F.length=0,this.h.g+=d,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=w==200,fn(this.i,this.u,this.A,this.l,this.R,Ln,w),this.o){if(this.T&&!this.K){t:{if(this.g){var zt,An=this.g;if((zt=An.g?An.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(zt)){var wt=zt;break t}}wt=null}if(w=wt)Ye(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bg(this,w);else{this.o=!1,this.s=3,Ee(12),xs(this),yc(this);break e}}if(this.P){w=!0;let Ui;for(;!this.J&&this.C<Be.length;)if(Ui=$6(this,Be),Ui==ki){Ln==4&&(this.s=4,Ee(14),w=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(Ui==vi){this.s=4,Ee(15),Ye(this.i,this.l,Be,"[Invalid Chunk]"),w=!1;break}else Ye(this.i,this.l,Ui,null),bg(this,Ui);if(Kb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||Be.length!=0||this.h.h||(this.s=1,Ee(16),w=!1),this.o=this.o&&w,!w)Ye(this.i,this.l,Be,"[Invalid Chunked Response]"),xs(this),yc(this);else if(0<Be.length&&!this.W){this.W=!0;var Wn=this.j;Wn.g==this&&Wn.ba&&!Wn.M&&(Wn.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),jg(Wn),Wn.M=!0,Ee(11))}}else Ye(this.i,this.l,Be,null),bg(this,Be);Ln==4&&xs(this),this.o&&!this.J&&(Ln==4?vv(this.j,this):(this.o=!1,Wd(this)))}else cE(this.g),w==400&&0<Be.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),xs(this),yc(this)}}}catch(Ln){}finally{}};function Kb(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function $6(d,f){var w=d.C,F=f.indexOf(`
`,w);return F==-1?ki:(w=Number(f.substring(w,F)),isNaN(w)?vi:(F+=1,F+w>f.length?ki:(f=f.slice(F,F+w),d.C=F+w,f)))}Pt.prototype.cancel=function(){this.J=!0,xs(this)};function Wd(d){d.S=Date.now()+d.I,Gb(d,d.I)}function Gb(d,f){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Tt(g(d.ba,d),f)}function xg(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Pt.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(or(this.i,this.A),this.L!=2&&(Ke(),Ee(17)),xs(this),this.s=2,yc(this)):Gb(this,this.S-d)};function yc(d){d.j.G==0||d.J||vv(d.j,d)}function xs(d){xg(d);var f=d.M;f&&typeof f.ma=="function"&&f.ma(),d.M=null,G(d.U),d.g&&(f=d.g,d.g=null,f.abort(),f.ma())}function bg(d,f){try{var w=d.j;if(w.G!=0&&(w.g==d||vg(w.h,d))){if(!d.K&&vg(w.h,d)&&w.G==3){try{var F=w.Da.g.parse(f)}catch(wt){F=null}if(Array.isArray(F)&&F.length==3){var ne=F;if(ne[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<d.F)Gd(w),$d(w);else break e;Tg(w),Ee(18)}}else w.za=ne[1],0<w.za-w.T&&37500>ne[2]&&w.F&&w.v==0&&!w.C&&(w.C=Tt(g(w.Za,w),6e3));if(1>=Xb(w.h)&&w.ca){try{w.ca()}catch(wt){}w.ca=void 0}}else vs(w,11)}else if((d.K||w.g==d)&&Gd(w),!b(f))for(ne=w.Da.g.parse(f),f=0;f<ne.length;f++){let wt=ne[f];if(w.T=wt[0],wt=wt[1],w.G==2)if(wt[0]=="c"){w.K=wt[1],w.ia=wt[2];const Wn=wt[3];Wn!=null&&(w.la=Wn,w.j.info("VER="+w.la));const Ln=wt[4];Ln!=null&&(w.Aa=Ln,w.j.info("SVER="+w.Aa));const ja=wt[5];ja!=null&&typeof ja=="number"&&0<ja&&(F=1.5*ja,w.L=F,w.j.info("backChannelRequestTimeoutMs_="+F)),F=w;const Ui=d.g;if(Ui){const Yd=Ui.g?Ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yd){var ue=F.h;ue.g||Yd.indexOf("spdy")==-1&&Yd.indexOf("quic")==-1&&Yd.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(kg(ue,ue.h),ue.h=null))}if(F.D){const _g=Ui.g?Ui.g.getResponseHeader("X-HTTP-Session-Id"):null;_g&&(F.ya=_g,Lt(F.I,F.D,_g))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-d.F,w.j.info("Handshake RTT: "+w.R+"ms")),F=w;var Be=d;if(F.qa=Sv(F,F.J?F.ia:null,F.W),Be.K){Jb(F.h,Be);var zt=Be,An=F.L;An&&(zt.I=An),zt.B&&(xg(zt),Wd(zt)),F.g=Be}else xv(F);0<w.i.length&&Kd(w)}else wt[0]!="stop"&&wt[0]!="close"||vs(w,7);else w.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?vs(w,7):Sg(w):wt[0]!="noop"&&w.l&&w.l.ta(wt),w.v=0)}}Ke(4)}catch(wt){}}var K6=class{constructor(d,f){this.g=d,this.map=f}};function Qb(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yb(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Xb(d){return d.h?1:d.g?d.g.size:0}function vg(d,f){return d.h?d.h==f:d.g?d.g.has(f):!1}function kg(d,f){d.g?d.g.add(f):d.h=f}function Jb(d,f){d.h&&d.h==f?d.h=null:d.g&&d.g.has(f)&&d.g.delete(f)}Qb.prototype.cancel=function(){if(this.i=Zb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zb(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let f=d.i;for(const w of d.g.values())f=f.concat(w.D);return f}return j(d.i)}function G6(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map!="undefined"&&d instanceof Map||typeof Set!="undefined"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var f=[],w=d.length,F=0;F<w;F++)f.push(d[F]);return f}f=[],w=0;for(F in d)f[w++]=d[F];return f}function Q6(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map!="undefined"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set!="undefined"&&d instanceof Set)){if(c(d)||typeof d=="string"){var f=[];d=d.length;for(var w=0;w<d;w++)f.push(w);return f}f=[],w=0;for(const F in d)f[w++]=F;return f}}}function ev(d,f){if(d.forEach&&typeof d.forEach=="function")d.forEach(f,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,f,void 0);else for(var w=Q6(d),F=G6(d),ne=F.length,ue=0;ue<ne;ue++)f.call(void 0,F[ue],w&&w[ue],d)}var tv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y6(d,f){if(d){d=d.split("&");for(var w=0;w<d.length;w++){var F=d[w].indexOf("="),ne=null;if(0<=F){var ue=d[w].substring(0,F);ne=d[w].substring(F+1)}else ue=d[w];f(ue,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function bs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof bs){this.h=d.h,Ld(this,d.j),this.o=d.o,this.g=d.g,Od(this,d.s),this.l=d.l;var f=d.i,w=new vc;w.i=f.i,f.g&&(w.g=new Map(f.g),w.h=f.h),nv(this,w),this.m=d.m}else d&&(f=String(d).match(tv))?(this.h=!1,Ld(this,f[1]||"",!0),this.o=xc(f[2]||""),this.g=xc(f[3]||"",!0),Od(this,f[4]),this.l=xc(f[5]||"",!0),nv(this,f[6]||"",!0),this.m=xc(f[7]||"")):(this.h=!1,this.i=new vc(null,this.h))}bs.prototype.toString=function(){var d=[],f=this.j;f&&d.push(bc(f,iv,!0),":");var w=this.g;return(w||f=="file")&&(d.push("//"),(f=this.o)&&d.push(bc(f,iv,!0),"@"),d.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&d.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(bc(w,w.charAt(0)=="/"?Z6:J6,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",bc(w,tE)),d.join("")};function Br(d){return new bs(d)}function Ld(d,f,w){d.j=w?xc(f,!0):f,d.j&&(d.j=d.j.replace(/:$/,""))}function Od(d,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);d.s=f}else d.s=null}function nv(d,f,w){f instanceof vc?(d.i=f,nE(d.i,d.h)):(w||(f=bc(f,eE)),d.i=new vc(f,d.h))}function Lt(d,f,w){d.i.set(f,w)}function Vd(d){return Lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function xc(d,f){return d?f?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function bc(d,f,w){return typeof d=="string"?(d=encodeURI(d).replace(f,X6),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function X6(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var iv=/[#\/\?@]/g,J6=/[#\?:]/g,Z6=/[#\?]/g,eE=/[#\?@]/g,tE=/#/g;function vc(d,f){this.h=this.g=null,this.i=d||null,this.j=!!f}function go(d){d.g||(d.g=new Map,d.h=0,d.i&&Y6(d.i,function(f,w){d.add(decodeURIComponent(f.replace(/\+/g," ")),w)}))}t=vc.prototype,t.add=function(d,f){go(this),this.i=null,d=Sa(this,d);var w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(f),this.h+=1,this};function rv(d,f){go(d),f=Sa(d,f),d.g.has(f)&&(d.i=null,d.h-=d.g.get(f).length,d.g.delete(f))}function ov(d,f){return go(d),f=Sa(d,f),d.g.has(f)}t.forEach=function(d,f){go(this),this.g.forEach(function(w,F){w.forEach(function(ne){d.call(f,ne,F,this)},this)},this)},t.na=function(){go(this);const d=Array.from(this.g.values()),f=Array.from(this.g.keys()),w=[];for(let F=0;F<f.length;F++){const ne=d[F];for(let ue=0;ue<ne.length;ue++)w.push(f[F])}return w},t.V=function(d){go(this);let f=[];if(typeof d=="string")ov(this,d)&&(f=f.concat(this.g.get(Sa(this,d))));else{d=Array.from(this.g.values());for(let w=0;w<d.length;w++)f=f.concat(d[w])}return f},t.set=function(d,f){return go(this),this.i=null,d=Sa(this,d),ov(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[f]),this.h+=1,this},t.get=function(d,f){return d?(d=this.V(d),0<d.length?String(d[0]):f):f};function sv(d,f,w){rv(d,f),0<w.length&&(d.i=null,d.g.set(Sa(d,f),j(w)),d.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],f=Array.from(this.g.keys());for(var w=0;w<f.length;w++){var F=f[w];const ue=encodeURIComponent(String(F)),Be=this.V(F);for(F=0;F<Be.length;F++){var ne=ue;Be[F]!==""&&(ne+="="+encodeURIComponent(String(Be[F]))),d.push(ne)}}return this.i=d.join("&")};function Sa(d,f){return f=String(f),d.j&&(f=f.toLowerCase()),f}function nE(d,f){f&&!d.j&&(go(d),d.i=null,d.g.forEach(function(w,F){var ne=F.toLowerCase();F!=ne&&(rv(this,F),sv(this,ne,w))},d)),d.j=f}function iE(d,f){const w=new lt;if(l.Image){const F=new Image;F.onload=y(fo,w,"TestLoadImage: loaded",!0,f,F),F.onerror=y(fo,w,"TestLoadImage: error",!1,f,F),F.onabort=y(fo,w,"TestLoadImage: abort",!1,f,F),F.ontimeout=y(fo,w,"TestLoadImage: timeout",!1,f,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=d}else f(!1)}function rE(d,f){const w=new lt,F=new AbortController,ne=setTimeout(()=>{F.abort(),fo(w,"TestPingServer: timeout",!1,f)},1e4);fetch(d,{signal:F.signal}).then(ue=>{clearTimeout(ne),ue.ok?fo(w,"TestPingServer: ok",!0,f):fo(w,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(ne),fo(w,"TestPingServer: error",!1,f)})}function fo(d,f,w,F,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),F(w)}catch(ue){}}function oE(){this.g=new q}function sE(d,f,w){const F=w||"";try{ev(d,function(ne,ue){let Be=ne;u(ne)&&(Be=Fe(ne)),f.push(F+ue+"="+encodeURIComponent(Be))})}catch(ne){throw f.push(F+"type="+encodeURIComponent("_badmap")),ne}}function Ud(d){this.l=d.Ub||null,this.j=d.eb||!1}k(Ud,le),Ud.prototype.g=function(){return new qd(this.l,this.j)},Ud.prototype.i=function(d){return function(){return d}}({});function qd(d,f){L.call(this),this.D=d,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(qd,L),t=qd.prototype,t.open=function(d,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=f,this.readyState=1,wc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(f.body=d),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,wc(this)),this.g&&(this.readyState=3,wc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream!="undefined"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;av(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function av(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var f=d.value?d.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!d.done}))&&(this.response=this.responseText+=f)}d.done?kc(this):wc(this),this.readyState==3&&av(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,kc(this))},t.Qa=function(d){this.g&&(this.response=d,kc(this))},t.ga=function(){this.g&&kc(this)};function kc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,wc(d)}t.setRequestHeader=function(d,f){this.u.append(d,f)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],f=this.h.entries();for(var w=f.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=f.next();return d.join(`\r
`)};function wc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(qd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function lv(d){let f="";return P(d,function(w,F){f+=F,f+=":",f+=w,f+=`\r
`}),f}function wg(d,f,w){e:{for(F in w){var F=!1;break e}F=!0}F||(w=lv(w),typeof d=="string"?w!=null&&encodeURIComponent(String(w)):Lt(d,f,w))}function on(d){L.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(on,L);var aE=/^https?$/i,lE=["POST","PUT"];t=on.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,f,w,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);f=f?f.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mo.g(),this.v=this.o?rt(this.o):rt(mo),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(d),!0),this.B=!1}catch(ue){cv(this,ue);return}if(d=w||"",w=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ne in F)w.set(ne,F[ne]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ue of F.keys())w.set(ue,F.get(ue));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(w.keys()).find(ue=>ue.toLowerCase()=="content-type"),ne=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(lE,f,void 0))||F||ne||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Be]of w)this.g.setRequestHeader(ue,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hv(this),this.u=!0,this.g.send(d),this.u=!1}catch(ue){cv(this,ue)}};function cv(d,f){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=f,d.m=5,uv(d),Hd(d)}function uv(d){d.A||(d.A=!0,W(d,"complete"),W(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,W(this,"complete"),W(this,"abort"),Hd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hd(this,!0)),on.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dv(this):this.bb())},t.bb=function(){dv(this)};function dv(d){if(d.h&&typeof a!="undefined"&&(!d.v[1]||Pr(d)!=4||d.Z()!=2)){if(d.u&&Pr(d)==4)at(d.Ea,0,d);else if(W(d,"readystatechange"),Pr(d)==4){d.h=!1;try{const Be=d.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var w;if(!(w=f)){var F;if(F=Be===0){var ne=String(d.D).match(tv)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),F=!aE.test(ne?ne.toLowerCase():"")}w=F}if(w)W(d,"complete"),W(d,"success");else{d.m=6;try{var ue=2<Pr(d)?d.g.statusText:""}catch(zt){ue=""}d.l=ue+" ["+d.Z()+"]",uv(d)}}finally{Hd(d)}}}}function Hd(d,f){if(d.g){hv(d);const w=d.g,F=d.v[0]?()=>{}:null;d.g=null,d.v=null,f||W(d,"ready");try{w.onreadystatechange=F}catch(ne){}}}function hv(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Pr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Pr(this)?this.g.status:-1}catch(d){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(d){return""}},t.Oa=function(d){if(this.g){var f=this.g.responseText;return d&&f.indexOf(d)==0&&(f=f.substring(d.length)),De(f)}};function pv(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch(f){return null}}function cE(d){const f={};d=(d.g&&2<=Pr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<d.length;F++){if(b(d[F]))continue;var w=A(d[F]);const ne=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ue=f[ne]||[];f[ne]=ue,ue.push(w)}_(f,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sc(d,f,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||f}function mv(d){this.Aa=0,this.i=[],this.j=new lt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sc("baseRetryDelayMs",5e3,d),this.cb=Sc("retryDelaySeedMs",1e4,d),this.Wa=Sc("forwardChannelMaxRetries",2,d),this.wa=Sc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qb(d&&d.concurrentRequestLimit),this.Da=new oE,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mv.prototype,t.la=8,t.G=1,t.connect=function(d,f,w,F){Ee(0),this.W=d,this.H=f||{},w&&F!==void 0&&(this.H.OSID=w,this.H.OAID=F),this.F=this.X,this.I=Sv(this,null,this.W),Kd(this)};function Sg(d){if(gv(d),d.G==3){var f=d.U++,w=Br(d.I);if(Lt(w,"SID",d.K),Lt(w,"RID",f),Lt(w,"TYPE","terminate"),Tc(d,w),f=new Pt(d,d.j,f),f.L=2,f.v=Vd(Br(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(f.v.toString(),"")}catch(F){}!w&&l.Image&&(new Image().src=f.v,w=!0),w||(f.g=Tv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Wd(f)}wv(d)}function $d(d){d.g&&(jg(d),d.g.cancel(),d.g=null)}function gv(d){$d(d),d.u&&(l.clearTimeout(d.u),d.u=null),Gd(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Kd(d){if(!Yb(d.h)&&!d.s){d.s=!0;var f=d.Ga;de||he(),V||(de(),V=!0),ee.add(f,d),d.B=0}}function uE(d,f){return Xb(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=f.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Tt(g(d.Ga,d,f),kv(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const ne=new Pt(this,this.j,d);let ue=this.o;if(this.S&&(ue?(ue=S(ue),E(ue,this.S)):ue=this.S),this.m!==null||this.O||(ne.H=ue,ue=null),this.P)e:{for(var f=0,w=0;w<this.i.length;w++){t:{var F=this.i[w];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(f+=F,4096<f){f=w;break e}if(f===4096||w===this.i.length-1){f=w+1;break e}}f=1e3}else f=1e3;f=yv(this,ne,f),w=Br(this.I),Lt(w,"RID",d),Lt(w,"CVER",22),this.D&&Lt(w,"X-HTTP-Session-Id",this.D),Tc(this,w),ue&&(this.O?f="headers="+encodeURIComponent(String(lv(ue)))+"&"+f:this.m&&wg(w,this.m,ue)),kg(this.h,ne),this.Ua&&Lt(w,"TYPE","init"),this.P?(Lt(w,"$req",f),Lt(w,"SID","null"),ne.T=!0,wi(ne,w,null)):wi(ne,w,f),this.G=2}}else this.G==3&&(d?fv(this,d):this.i.length==0||Yb(this.h)||fv(this))};function fv(d,f){var w;f?w=f.l:w=d.U++;const F=Br(d.I);Lt(F,"SID",d.K),Lt(F,"RID",w),Lt(F,"AID",d.T),Tc(d,F),d.m&&d.o&&wg(F,d.m,d.o),w=new Pt(d,d.j,w,d.B+1),d.m===null&&(w.H=d.o),f&&(d.i=f.D.concat(d.i)),f=yv(d,w,1e3),w.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),kg(d.h,w),wi(w,F,f)}function Tc(d,f){d.H&&P(d.H,function(w,F){Lt(f,F,w)}),d.l&&ev({},function(w,F){Lt(f,F,w)})}function yv(d,f,w){w=Math.min(d.i.length,w);var F=d.l?g(d.l.Na,d.l,d):null;e:{var ne=d.i;let ue=-1;for(;;){const Be=["count="+w];ue==-1?0<w?(ue=ne[0].g,Be.push("ofs="+ue)):ue=0:Be.push("ofs="+ue);let zt=!0;for(let An=0;An<w;An++){let wt=ne[An].g;const Wn=ne[An].map;if(wt-=ue,0>wt)ue=Math.max(0,ne[An].g-100),zt=!1;else try{sE(Wn,Be,"req"+wt+"_")}catch(Ln){F&&F(Wn)}}if(zt){F=Be.join("&");break e}}}return d=d.i.splice(0,w),f.D=d,F}function xv(d){if(!d.g&&!d.u){d.Y=1;var f=d.Fa;de||he(),V||(de(),V=!0),ee.add(f,d),d.v=0}}function Tg(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Tt(g(d.Fa,d),kv(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,bv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Tt(g(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),$d(this),bv(this))};function jg(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function bv(d){d.g=new Pt(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var f=Br(d.qa);Lt(f,"RID","rpc"),Lt(f,"SID",d.K),Lt(f,"AID",d.T),Lt(f,"CI",d.F?"0":"1"),!d.F&&d.ja&&Lt(f,"TO",d.ja),Lt(f,"TYPE","xmlhttp"),Tc(d,f),d.m&&d.o&&wg(f,d.m,d.o),d.L&&(d.g.I=d.L);var w=d.g;d=d.ia,w.L=1,w.v=Vd(Br(f)),w.m=null,w.P=!0,wa(w,d)}t.Za=function(){this.C!=null&&(this.C=null,$d(this),Tg(this),Ee(19))};function Gd(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function vv(d,f){var w=null;if(d.g==f){Gd(d),jg(d),d.g=null;var F=2}else if(vg(d.h,f))w=f.D,Jb(d.h,f),F=1;else return;if(d.G!=0){if(f.o)if(F==1){w=f.m?f.m.length:0,f=Date.now()-f.F;var ne=d.B;F=ce(),W(F,new Me(F,w)),Kd(d)}else xv(d);else if(ne=f.s,ne==3||ne==0&&0<f.X||!(F==1&&uE(d,f)||F==2&&Tg(d)))switch(w&&0<w.length&&(f=d.h,f.i=f.i.concat(w)),ne){case 1:vs(d,5);break;case 4:vs(d,10);break;case 3:vs(d,6);break;default:vs(d,2)}}}function kv(d,f){let w=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(w*=2),w*f}function vs(d,f){if(d.j.info("Error code "+f),f==2){var w=g(d.fb,d),F=d.Xa;const ne=!F;F=new bs(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ld(F,"https"),Vd(F),ne?iE(F.toString(),w):rE(F.toString(),w)}else Ee(2);d.G=0,d.l&&d.l.sa(f),wv(d),gv(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function wv(d){if(d.G=0,d.ka=[],d.l){const f=Zb(d.h);(f.length!=0||d.i.length!=0)&&(T(d.ka,f),T(d.ka,d.i),d.h.i.length=0,j(d.i),d.i.length=0),d.l.ra()}}function Sv(d,f,w){var F=w instanceof bs?Br(w):new bs(w);if(F.g!="")f&&(F.g=f+"."+F.g),Od(F,F.s);else{var ne=l.location;F=ne.protocol,f=f?f+"."+ne.hostname:ne.hostname,ne=+ne.port;var ue=new bs(null);F&&Ld(ue,F),f&&(ue.g=f),ne&&Od(ue,ne),w&&(ue.l=w),F=ue}return w=d.D,f=d.ya,w&&f&&Lt(F,w,f),Lt(F,"VER",d.la),Tc(d,F),F}function Tv(d,f,w){if(f&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=d.Ca&&!d.pa?new on(new Ud({eb:w})):new on(d.pa),f.Ha(d.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jv(){}t=jv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qd(){}Qd.prototype.g=function(d,f){return new Si(d,f)};function Si(d,f){L.call(this),this.g=new mv(f),this.l=d,this.h=f&&f.messageUrlParams||null,d=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(d?d["X-WebChannel-Content-Type"]=f.messageContentType:d={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(d?d["X-WebChannel-Client-Profile"]=f.va:d={"X-WebChannel-Client-Profile":f.va}),this.g.S=d,(d=f&&f.Sb)&&!b(d)&&(this.g.m=d),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!b(f)&&(this.g.D=f,d=this.h,d!==null&&f in d&&(d=this.h,f in d&&delete d[f])),this.j=new Ta(this)}k(Si,L),Si.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Si.prototype.close=function(){Sg(this.g)},Si.prototype.o=function(d){var f=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.u&&(w={},w.__data__=Fe(d),d=w);f.i.push(new K6(f.Ya++,d)),f.G==3&&Kd(f)},Si.prototype.N=function(){this.g.l=null,delete this.j,Sg(this.g),delete this.g,Si.aa.N.call(this)};function _v(d){nt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var f=d.__sm__;if(f){e:{for(const w in f){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,f=f!==null&&d in f?f[d]:void 0),this.data=f}else this.data=d}k(_v,nt);function Iv(){pt.call(this),this.status=1}k(Iv,pt);function Ta(d){this.g=d}k(Ta,jv),Ta.prototype.ua=function(){W(this.g,"a")},Ta.prototype.ta=function(d){W(this.g,new _v(d))},Ta.prototype.sa=function(d){W(this.g,new Iv)},Ta.prototype.ra=function(){W(this.g,"b")},Qd.prototype.createWebChannel=Qd.prototype.g,Si.prototype.send=Si.prototype.o,Si.prototype.open=Si.prototype.m,Si.prototype.close=Si.prototype.close,i_=function(){return new Qd},n_=function(){return ce()},t_=it,By={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$t.NO_ERROR=0,$t.TIMEOUT=8,$t.HTTP_ERROR=6,Vh=$t,Fi.COMPLETE="complete",e_=Fi,$.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",L.prototype.listen=L.prototype.K,Gc=$,on.prototype.listenOnce=on.prototype.L,on.prototype.getLastError=on.prototype.Ka,on.prototype.getLastErrorCode=on.prototype.Ba,on.prototype.getStatus=on.prototype.Z,on.prototype.getResponseJson=on.prototype.Oa,on.prototype.getResponseText=on.prototype.oa,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Ha,Z2=on}).apply(typeof fh!="undefined"?fh:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const a1="@firebase/firestore",l1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new y0("@firebase/firestore");function Va(){return Yo.logLevel}function jF(t){Yo.setLogLevel(t)}function ye(t,...e){if(Yo.logLevel<=ft.DEBUG){const n=e.map(v0);Yo.debug(`Firestore (${ec}): ${t}`,...n)}}function ln(t,...e){if(Yo.logLevel<=ft.ERROR){const n=e.map(v0);Yo.error(`Firestore (${ec}): ${t}`,...n)}}function Yn(t,...e){if(Yo.logLevel<=ft.WARN){const n=e.map(v0);Yo.warn(`Firestore (${ec}): ${t}`,...n)}}function v0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,r_(t,i,n)}function r_(t,e,n){let i=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(o){i+=" CONTEXT: "+n}throw ln(i),new Error(i)}function Ue(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||r_(e,o,i)}function _F(t,e){t||Ne(57014,e)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class IF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CF{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let i=this.i;const o=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new En;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new En,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield o(this.currentUser)}))},l=c=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new En)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new o_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class RF{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EF{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new RF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Py{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const i=s=>{s.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const o=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?o(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Py(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Py(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class BF{getToken(){return Promise.resolve(new Py(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=PF(40);for(let s=0;s<o.length;++s)i.length<20&&o[s]<n&&(i+=e.charAt(o[s]%62))}return i}}function Xe(t,e){return t<e?-1:t>e?1:0}function Fy(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),o=e.codePointAt(n);if(i!==o){if(i<128&&o<128)return Xe(i,o);{const s=k0(),a=FF(s.encode(c1(t,n)),s.encode(c1(e,n)));return a!==0?a:Xe(i,o)}}n+=i>65535?2:1}return Xe(t.length,e.length)}function c1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function FF(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Xe(t[n],e[n]);return Xe(t.length,e.length)}function jl(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}function a_(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="__name__";class dr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ne(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const s=dr.compareSegments(e.get(o),n.get(o));if(s!==0)return s}return Xe(e.length,n.length)}static compareSegments(e,n){const i=dr.isNumericId(e),o=dr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?dr.extractNumericId(e).compare(dr.extractNumericId(n)):Fy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qo.fromString(e.substring(4,e.length-2))}}class ct extends dr{construct(e,n,i){return new ct(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const zF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends dr{construct(e,n,i){return new Ut(e,n,i)}static isValidIdentifier(e){return zF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zy}static keyField(){return new Ut([zy])}static fromServerFormat(e){const n=[];let i="",o=0;const s=()=>{if(i.length===0)throw new fe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;o<e.length;){const l=e[o];if(l==="\\"){if(o+1===e.length)throw new fe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[o+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,o+=2}else l==="`"?(a=!a,o++):l!=="."||a?(i+=l,o++):(s(),o++)}if(s(),a)throw new fe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(ct.fromString(e))}static fromName(e){return new Re(ct.fromString(e).popFirst(5))}static empty(){return new Re(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e,n){if(!n)throw new fe(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function l_(t,e,n,i){if(e===!0&&i===!0)throw new fe(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u1(t){if(!Re.isDocumentKey(t))throw new fe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d1(t){if(Re.isDocumentKey(t))throw new fe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function c_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pm(t);throw new fe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function u_(t,e){if(e<=0)throw new fe(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,e){const n={typeString:t};return e&&(n.value=e),n}function fa(t,e){if(!c_(t))throw new fe(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(o&&typeof a!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new fe(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=-62135596800,p1=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*p1);return new bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<h1)throw new fe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p1}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fa(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:gn("string",bt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new bt(0,0))}static max(){return new Ge(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=-1;class Il{constructor(e,n,i,o){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=o}}function Ny(t){return t.fields.find(e=>e.kind===2)}function _s(t){return t.fields.filter(e=>e.kind!==2)}function NF(t,e){let n=Xe(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let i=0;i<Math.min(t.fields.length,e.fields.length);++i)if(n=DF(t.fields[i],e.fields[i]),n!==0)return n;return Xe(t.fields.length,e.fields.length)}Il.UNKNOWN_ID=-1;class Vs{constructor(e,n){this.fieldPath=e,this.kind=n}}function DF(t,e){const n=Ut.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Xe(t.kind,e.kind)}class Cl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Cl(0,Ai.min())}}function d_(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Ge.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new Ai(o,Re.empty(),e)}function h_(t){return new Ai(t.readTime,t.key,_l)}class Ai{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ai(Ge.min(),Re.empty(),_l)}static max(){return new Ai(Ge.max(),Re.empty(),_l)}}function S0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return C(this,null,function*(){if(t.code!==ie.FAILED_PRECONDITION||t.message!==p_)throw t;ye("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,o)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,o)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let o=0,s=0,a=!1;e.forEach(l=>{++o,l.next(()=>{++s,a&&s===o&&n()},c=>i(c))}),a=!0,s===o&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(o=>o?Z.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,s)=>{i.push(n.call(this,o,s))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,o)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++l,l===s&&i(a)},h=>o(h))}})}static doWhile(e,n){return new Z((i,o)=>{const s=()=>{e()===!0?n().next(()=>{s()},o):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="SimpleDb";class Fm{static open(e,n,i,o){try{return new Fm(n,e.transaction(o,i))}catch(s){throw new lu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new En,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new lu(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const o=T0(i.target.error);this.S.reject(new lu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ye(ji,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new WF(n)}}class kr{static delete(e){return ye(ji,"Removing database:",e),Rs(D2().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!$2())return!1;if(kr.F())return!0;const e=Sn(),n=kr.M(e),i=0<n&&n<10,o=g_(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.B=i,this.L=null,kr.M(Sn())===12.2&&ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return C(this,null,function*(){return this.db||(ye(ji,"Opening database:",this.name),this.db=yield new Promise((n,i)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=s=>{const a=s.target.result;n(a)},o.onblocked=()=>{i(new lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new fe(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new fe(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new lu(e,a))},o.onupgradeneeded=s=>{ye(ji,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;if(this.L!==null&&this.L!==s.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${s.oldVersion}, event.newVersion=${s.newVersion}, db.version=${a.version}`);this.B.q(a,o.transaction,s.oldVersion,this.version).next(()=>{ye(ji,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const i=n.target;this.L=i.version},{passive:!0})),this.db.addEventListener("versionchange",n=>{var i;n.newVersion===null&&(Yn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(i=this.databaseDeletedListener)===null||i===void 0||i.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,n,i,o){return C(this,null,function*(){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=yield this.k(e);const l=Fm.open(this.db,e,s?"readonly":"readwrite",i),c=o(l).next(u=>(l.v(),u)).catch(u=>(l.abort(u),Z.reject(u))).toPromise();return c.catch(()=>{}),yield l.D,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&a<3;if(ye(ji,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}}function g_(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class MF{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Rs(this.$.delete())}}class lu extends fe{constructor(e,n){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ls(t){return t.name==="IndexedDbTransactionError"}class WF{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(ye(ji,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(ye(ji,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Rs(i)}add(e){return ye(ji,"ADD",this.store.name,e,e),Rs(this.store.add(e))}get(e){return Rs(this.store.get(e)).next(n=>(n===void 0&&(n=null),ye(ji,"GET",this.store.name,e,n),n))}delete(e){return ye(ji,"DELETE",this.store.name,e),Rs(this.store.delete(e))}count(){return ye(ji,"COUNT",this.store.name),Rs(this.store.count())}j(e,n){const i=this.options(e,n),o=i.index?this.store.index(i.index):this.store;if(typeof o.getAll=="function"){const s=o.getAll(i.range);return new Z((a,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{a(c.target.result)}})}{const s=this.cursor(i),a=[];return this.J(s,(l,c)=>{a.push(c)}).next(()=>a)}}H(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new Z((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}Y(e,n){ye(ji,"DELETE ALL",this.store.name);const i=this.options(e,n);i.Z=!1;const o=this.cursor(i);return this.J(o,(s,a,l)=>l.delete())}X(e,n){let i;n?i=e:(i={},n=e);const o=this.cursor(i);return this.J(o,n)}ee(e){const n=this.cursor({});return new Z((i,o)=>{n.onerror=s=>{const a=T0(s.target.error);o(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(l=>{l?a.continue():i()}):i()}})}J(e,n){const i=[];return new Z((o,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const l=a.target.result;if(!l)return void o();const c=new MF(l),u=n(l.primaryKey,l.value,c);if(u instanceof Z){const h=u.catch(p=>(c.done(),Z.reject(p)));i.push(h)}c.isDone?o():c.W===null?l.continue():l.continue(c.W)}}).next(()=>Z.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.Z?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Rs(t){return new Z((e,n)=>{t.onsuccess=i=>{const o=i.target.result;e(o)},t.onerror=i=>{const o=T0(i.target.error);n(o)}})}let m1=!1;function T0(t){const e=kr.M(Sn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m1||(m1=!0,setTimeout(()=>{throw i},0)),i}}return t}const cu="IndexBackfiller";class LF{constructor(e,n){this.asyncQueue=e,this.te=n,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ye(cu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>C(this,null,function*(){this.task=null;try{const n=yield this.te.re();ye(cu,`Documents written: ${n}`)}catch(n){ls(n)?ye(cu,"Ignoring IndexedDB error during index backfill: ",n):yield as(n)}yield this.ne(6e4)}))}}class OF{constructor(e,n){this.localStore=e,this.persistence=n}re(e=50){return C(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ie(n,e))})}ie(e,n){const i=new Set;let o=n,s=!0;return Z.doWhile(()=>s===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return ye(cu,`Processing collection: ${a}`),this.se(e,a,o).next(l=>{o-=l,i.add(a)});s=!1})).next(()=>n-o)}se(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(o=>this.localStore.localDocuments.getNextDocuments(e,n,o,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.oe(o,s)).next(l=>(ye(cu,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>a.size)}))}oe(e,n){let i=e;return n.changes.forEach((o,s)=>{const a=h_(s);S0(a,i)>0&&(i=a)}),new Ai(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ui.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=-1;function ud(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function f_(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="";function Kn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g1(e)),e=VF(t.get(n),e);return g1(e)}function VF(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const s=t.charAt(o);switch(s){case"\0":n+="";break;case Fp:n+="";break;default:n+=s}}return n}function g1(t){return t+Fp+""}function gr(t){const e=t.length;if(Ue(e>=2,64408,{path:t}),e===2)return Ue(t.charAt(0)===Fp&&t.charAt(1)==="",56145,{path:t}),ct.emptyPath();const n=e-2,i=[];let o="";for(let s=0;s<e;){const a=t.indexOf(Fp,s);switch((a<0||a>n)&&Ne(50515,{path:t}),t.charAt(a+1)){case"":const l=t.substring(s,a);let c;o.length===0?c=l:(o+=l,c=o,o=""),i.push(c);break;case"":o+=t.substring(s,a),o+="\0";break;case"":o+=t.substring(s,a+1);break;default:Ne(61167,{path:t})}s=a+2}return new ct(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="remoteDocuments",dd="owner",Ra="owner",Vu="mutationQueues",UF="userId",Ki="mutations",f1="batchId",Ns="userMutationsIndex",y1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e){return[t,Kn(e)]}function y_(t,e,n){return[t,Kn(e),n]}const qF={},Rl="documentMutations",zp="remoteDocumentsV14",HF=["prefixPath","collectionGroup","readTime","documentId"],qh="documentKeyIndex",$F=["prefixPath","collectionGroup","documentId"],x_="collectionGroupIndex",KF=["collectionGroup","readTime","prefixPath","documentId"],Uu="remoteDocumentGlobal",Dy="remoteDocumentGlobalKey",El="targets",b_="queryTargetsIndex",GF=["canonicalId","targetId"],Al="targetDocuments",QF=["targetId","path"],j0="documentTargetsIndex",YF=["path","targetId"],Np="targetGlobalKey",Us="targetGlobal",qu="collectionParents",XF=["collectionId","parent"],Bl="clientMetadata",JF="clientId",zm="bundles",ZF="bundleId",Nm="namedQueries",ez="name",_0="indexConfiguration",tz="indexId",My="collectionGroupIndex",nz="collectionGroup",uu="indexState",iz=["indexId","uid"],v_="sequenceNumberIndex",rz=["uid","sequenceNumber"],du="indexEntries",oz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k_="documentKeyIndex",sz=["indexId","uid","orderedDocumentKey"],Dm="documentOverlays",az=["userId","collectionPath","documentId"],Wy="collectionPathOverlayIndex",lz=["userId","collectionPath","largestBatchId"],w_="collectionGroupOverlayIndex",cz=["userId","collectionGroup","largestBatchId"],I0="globals",uz="name",S_=[Vu,Ki,Rl,Is,El,dd,Us,Al,Bl,Uu,qu,zm,Nm],dz=[...S_,Dm],T_=[Vu,Ki,Rl,zp,El,dd,Us,Al,Bl,Uu,qu,zm,Nm,Dm],j_=T_,C0=[...j_,_0,uu,du],hz=C0,__=[...C0,I0],pz=__;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends m_{constructor(e,n){super(),this.ce=e,this.currentSequenceNumber=n}}function jn(t,e){const n=Ae(t);return kr.N(n.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I_(t,e){const n=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e(t[i],i,t));return n}function C_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,i,o,s){this.key=e,this.value=n,this.color=i!=null?i:Fn.RED,this.left=o!=null?o:Fn.EMPTY,this.right=s!=null?s:Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,s){return new Fn(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,o!=null?o:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const s=i(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,n,i),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Fn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,i,o,s){return this}insert(e,n,i){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b1(this.data.getIterator())}getIteratorFrom(e){return new b1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class b1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ea(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new di([])}unionWith(e){let n=new Bt(Ut.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new R_("Invalid base64 string: "+s):s}}(e);return new tn(n)}static fromUint8Array(e){const n=function(o){let s="";for(let a=0;a<o.length;++a)s+=String.fromCharCode(o[a]);return s}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const gz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=gz.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="server_timestamp",A_="__type__",B_="__previous_value__",P_="__local_write_time__";function Mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[A_])===null||n===void 0?void 0:n.stringValue)===E_}function Wm(t){const e=t.mapValue.fields[B_];return Mm(e)?Wm(e):e}function Hu(t){const e=no(t.mapValue.fields[P_].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n,i,o,s,a,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const $u="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||$u}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===$u}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="__type__",F_="__max__",Bo={mapValue:{fields:{__type__:{stringValue:F_}}}},E0="__vector__",Pl="value",Hh={nullValue:"NULL_VALUE"};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mm(t)?4:z_(t)?9007199254740991:Lm(t)?10:11:Ne(28295,{value:t})}function jr(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hu(t).isEqual(Hu(e));case 3:return function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const a=no(o.timestampValue),l=no(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,s){return io(o.bytesValue).isEqual(io(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,s){return Gt(o.geoPointValue.latitude)===Gt(s.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(s.geoPointValue.longitude)}(t,e);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return Gt(o.integerValue)===Gt(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const a=Gt(o.doubleValue),l=Gt(s.doubleValue);return a===l?Ou(a)===Ou(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return jl(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(o,s){const a=o.mapValue.fields||{},l=s.mapValue.fields||{};if(x1(a)!==x1(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!jr(a[c],l[c])))return!1;return!0}(t,e);default:return Ne(52216,{left:t})}}function Ku(t,e){return(t.values||[]).find(n=>jr(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;const n=Jo(t),i=Jo(e);if(n!==i)return Xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Gt(s.integerValue||s.doubleValue),c=Gt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return v1(t.timestampValue,e.timestampValue);case 4:return v1(Hu(t),Hu(e));case 5:return Fy(t.stringValue,e.stringValue);case 6:return function(s,a){const l=io(s),c=io(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Xe(l[u],c[u]);if(h!==0)return h}return Xe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=Xe(Gt(s.latitude),Gt(a.latitude));return l!==0?l:Xe(Gt(s.longitude),Gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k1(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,u,h;const p=s.fields||{},g=a.fields||{},y=(l=p[Pl])===null||l===void 0?void 0:l.arrayValue,k=(c=g[Pl])===null||c===void 0?void 0:c.arrayValue,j=Xe(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0);return j!==0?j:k1(y,k)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Bo.mapValue&&a===Bo.mapValue)return 0;if(s===Bo.mapValue)return 1;if(a===Bo.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const g=Fy(c[p],h[p]);if(g!==0)return g;const y=Zo(l[c[p]],u[h[p]]);if(y!==0)return y}return Xe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ne(23264,{le:n})}}function v1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=no(t),i=no(e),o=Xe(n.seconds,i.seconds);return o!==0?o:Xe(n.nanos,i.nanos)}function k1(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const s=Zo(n[o],i[o]);if(s)return s}return Xe(n.length,i.length)}function Fl(t){return Oy(t)}function Oy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=no(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return io(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const s of n.values||[])o?o=!1:i+=",",i+=Oy(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",s=!0;for(const a of i)s?s=!1:o+=",",o+=`${a}:${Oy(n.fields[a])}`;return o+"}"}(t.mapValue):Ne(61005,{value:t})}function $h(t){switch(Jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wm(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return io(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,s)=>o+$h(s),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return cs(i.fields,(s,a)=>{o+=s.length+$h(a)}),o}(t.mapValue);default:throw Ne(13486,{value:t})}}function ea(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vy(t){return!!t&&"integerValue"in t}function Gu(t){return!!t&&"arrayValue"in t}function w1(t){return!!t&&"nullValue"in t}function S1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kh(t){return!!t&&"mapValue"in t}function Lm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[R0])===null||n===void 0?void 0:n.stringValue)===E0}function hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=hu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z_(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===F_}const N_={mapValue:{fields:{[R0]:{stringValue:E0},[Pl]:{arrayValue:{}}}}};function yz(t){return"nullValue"in t?Hh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ea(Xo.empty(),Re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Lm(t)?N_:{mapValue:{}}:Ne(35942,{value:t})}function xz(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ea(Xo.empty(),Re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?N_:"mapValue"in t?Lm(t)?{mapValue:{}}:Bo:Ne(61959,{value:t})}function T1(t,e){const n=Zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function j1(t,e){const n=Zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(n)}setAll(e){let n=Ut.emptyPath(),i={},o=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,o),i={},o=[],n=l.popLast()}a?i[l.lastSegment()]=hu(a):o.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,o)}delete(e){const n=this.field(e.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Kh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){cs(n,(o,s)=>e[o]=s);for(const o of i)delete e[o]}clone(){return new zn(hu(this.value))}}function D_(t){const e=[];return cs(t.fields,(n,i)=>{const o=new Ut([n]);if(Kh(i)){const s=D_(i.mapValue).fields;if(s.length===0)e.push(o);else for(const a of s)e.push(o.child(a))}else e.push(o)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,i,o,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,Ge.min(),Ge.min(),Ge.min(),zn.empty(),0)}static newFoundDocument(e,n,i,o){return new Vt(e,1,n,Ge.min(),i,o,0)}static newNoDocument(e,n){return new Vt(e,2,n,Ge.min(),Ge.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,Ge.min(),Ge.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.position=e,this.inclusive=n}}function _1(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const s=e[o],a=t.position[o];if(s.field.isKeyField()?i=Re.comparator(Re.fromName(a.referenceValue),n.key):i=Zo(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function I1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function bz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{}class yt extends M_{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vz(e,n,i):n==="array-contains"?new Sz(e,i):n==="in"?new q_(e,i):n==="not-in"?new Tz(e,i):n==="array-contains-any"?new jz(e,i):new yt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new kz(e,i):new wz(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zo(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rt extends M_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Rt(e,n)}matches(e){return zl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function zl(t){return t.op==="and"}function Uy(t){return t.op==="or"}function A0(t){return W_(t)&&zl(t)}function W_(t){for(const e of t.filters)if(e instanceof Rt)return!1;return!0}function qy(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+Fl(t.value);if(A0(t))return t.filters.map(e=>qy(e)).join(",");{const e=t.filters.map(n=>qy(n)).join(",");return`${t.op}(${e})`}}function L_(t,e){return t instanceof yt?function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&jr(i.value,o.value)}(t,e):t instanceof Rt?function(i,o){return o instanceof Rt&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((s,a,l)=>s&&L_(a,o.filters[l]),!0):!1}(t,e):void Ne(19439)}function O_(t,e){const n=t.filters.concat(e);return Rt.create(n,t.op)}function V_(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${Fl(n.value)}`}(t):t instanceof Rt?function(n){return n.op.toString()+" {"+n.getFilters().map(V_).join(" ,")+"}"}(t):"Filter"}class vz extends yt{constructor(e,n,i){super(e,n,i),this.key=Re.fromName(i.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class kz extends yt{constructor(e,n){super(e,"in",n),this.keys=U_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wz extends yt{constructor(e,n){super(e,"not-in",n),this.keys=U_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function U_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Re.fromName(i.referenceValue))}class Sz extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gu(n)&&Ku(n.arrayValue,this.value)}}class q_ extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}}class Tz extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ku(this.value.arrayValue,n)}}class jz extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ku(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,n=null,i=[],o=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=s,this.startAt=a,this.endAt=l,this.Pe=null}}function Hy(t,e=null,n=[],i=[],o=null,s=null,a=null){return new _z(t,e,n,i,o,s,a)}function ta(t){const e=Ae(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>qy(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ud(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fl(i)).join(",")),e.Pe=n}return e.Pe}function hd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!L_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I1(t.startAt,e.startAt)&&I1(t.endAt,e.endAt)}function Dp(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mp(t,e){return t.filters.filter(n=>n instanceof yt&&n.field.isEqual(e))}function C1(t,e,n){let i=Hh,o=!0;for(const s of Mp(t,e)){let a=Hh,l=!0;switch(s.op){case"<":case"<=":a=yz(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,l=!1;break;case"!=":case"not-in":a=Hh}T1({value:i,inclusive:o},{value:a,inclusive:l})<0&&(i=a,o=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];T1({value:i,inclusive:o},{value:a,inclusive:n.inclusive})<0&&(i=a,o=n.inclusive);break}}return{value:i,inclusive:o}}function R1(t,e,n){let i=Bo,o=!0;for(const s of Mp(t,e)){let a=Bo,l=!0;switch(s.op){case">=":case">":a=xz(s.value),l=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,l=!1;break;case"!=":case"not-in":a=Bo}j1({value:i,inclusive:o},{value:a,inclusive:l})>0&&(i=a,o=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];j1({value:i,inclusive:o},{value:a,inclusive:n.inclusive})>0&&(i=a,o=n.inclusive);break}}return{value:i,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n=null,i=[],o=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function H_(t,e,n,i,o,s,a,l){return new lo(t,e,n,i,o,s,a,l)}function tc(t){return new lo(t)}function E1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B0(t){return t.collectionGroup!==null}function dl(t){const e=Ae(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Bt(Ut.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Qu(s,i))}),n.has(Ut.keyField().canonicalString())||e.Te.push(new Qu(Ut.keyField(),i))}return e.Te}function Gn(t){const e=Ae(t);return e.Ie||(e.Ie=K_(e,dl(t))),e.Ie}function $_(t){const e=Ae(t);return e.de||(e.de=K_(e,t.explicitOrderBy)),e.de}function K_(t,e){if(t.limitType==="F")return Hy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const s=o.dir==="desc"?"asc":"desc";return new Qu(o.field,s)});const n=t.endAt?new es(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new es(t.startAt.position,t.startAt.inclusive):null;return Hy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function $y(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wp(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pd(t,e){return hd(Gn(t),Gn(e))&&t.limitType===e.limitType}function G_(t){return`${ta(Gn(t))}|lt:${t.limitType}`}function Ua(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>V_(o)).join(", ")}]`),ud(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>Fl(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>Fl(o)).join(",")),`Target(${i})`}(Gn(t))}; limitType=${t.limitType})`}function md(t,e){return e.isFoundDocument()&&function(i,o){const s=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Re.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,o){for(const s of dl(i))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const s of i.filters)if(!s.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(a,l,c){const u=_1(a,l,c);return a.inclusive?u<=0:u<0}(i.startAt,dl(i),o)||i.endAt&&!function(a,l,c){const u=_1(a,l,c);return a.inclusive?u>=0:u>0}(i.endAt,dl(i),o))}(t,e)}function Q_(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y_(t){return(e,n)=>{let i=!1;for(const o of dl(t)){const s=Iz(o,e,n);if(s!==0)return s;i=i||o.field.isKeyField()}return 0}}function Iz(t,e,n){const i=t.field.isKeyField()?Re.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),u=l.data.field(s);return c!==null&&u!==null?Zo(c,u):Ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,s]of i)if(this.equalsFn(o,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,i)=>{for(const[o,s]of i)e(o,s)})}isEmpty(){return C_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=new Wt(Re.comparator);function hi(){return Cz}const X_=new Wt(Re.comparator);function Qc(...t){let e=X_;for(const n of t)e=e.insert(n.key,n);return e}function J_(t){let e=X_;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function fr(){return pu()}function Z_(){return pu()}function pu(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const Rz=new Wt(Re.comparator),Ez=new Bt(Re.comparator);function ot(...t){let e=Ez;for(const n of t)e=e.add(n);return e}const Az=new Bt(Xe);function P0(){return Az}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function eI(t){return{integerValue:""+t}}function tI(t,e){return f_(e)?eI(e):F0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this._=void 0}}function Bz(t,e,n){return t instanceof Nl?function(o,s){const a={fields:{[A_]:{stringValue:E_},[P_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&Mm(s)&&(s=Wm(s)),s&&(a.fields[B_]=s),{mapValue:a}}(n,e):t instanceof na?iI(t,e):t instanceof ia?rI(t,e):function(o,s){const a=nI(o,s),l=A1(a)+A1(o.Ee);return Vy(a)&&Vy(o.Ee)?eI(l):F0(o.serializer,l)}(t,e)}function Pz(t,e,n){return t instanceof na?iI(t,e):t instanceof ia?rI(t,e):n}function nI(t,e){return t instanceof Dl?function(i){return Vy(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Nl extends Om{}class na extends Om{constructor(e){super(),this.elements=e}}function iI(t,e){const n=oI(e);for(const i of t.elements)n.some(o=>jr(o,i))||n.push(i);return{arrayValue:{values:n}}}class ia extends Om{constructor(e){super(),this.elements=e}}function rI(t,e){let n=oI(e);for(const i of t.elements)n=n.filter(o=>!jr(o,i));return{arrayValue:{values:n}}}class Dl extends Om{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function A1(t){return Gt(t.integerValue||t.doubleValue)}function oI(t){return Gu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.field=e,this.transform=n}}function Fz(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof na&&o instanceof na||i instanceof ia&&o instanceof ia?jl(i.elements,o.elements,jr):i instanceof Dl&&o instanceof Dl?jr(i.Ee,o.Ee):i instanceof Nl&&o instanceof Nl}(t.transform,e.transform)}class zz{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vm{}function sI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ic(t.key,Yt.none()):new nc(t.key,t.data,Yt.none());{const n=t.data,i=zn.empty();let o=new Bt(Ut.comparator);for(let s of e.fields)if(!o.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),o=o.add(s)}return new uo(t.key,i,new di(o.toArray()),Yt.none())}}function Nz(t,e,n){t instanceof nc?function(o,s,a){const l=o.value.clone(),c=P1(o.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof uo?function(o,s,a){if(!Gh(o.precondition,s))return void s.convertToUnknownDocument(a.version);const l=P1(o.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(aI(o)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(o,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,i){return t instanceof nc?function(s,a,l,c){if(!Gh(s.precondition,a))return l;const u=s.value.clone(),h=F1(s.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof uo?function(s,a,l,c){if(!Gh(s.precondition,a))return l;const u=F1(s.fieldTransforms,c,a),h=a.data;return h.setAll(aI(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(s,a,l){return Gh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function Dz(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),s=nI(i.transform,o||null);s!=null&&(n===null&&(n=zn.empty()),n.set(i.field,s))}return n||null}function B1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&jl(i,o,(s,a)=>Fz(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nc extends Vm{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uo extends Vm{constructor(e,n,i,o,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function P1(t,e,n){const i=new Map;Ue(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let o=0;o<n.length;o++){const s=t[o],a=s.transform,l=e.data.field(s.field);i.set(s.field,Pz(a,l,n[o]))}return i}function F1(t,e,n){const i=new Map;for(const o of t){const s=o.transform,a=n.data.field(o.field);i.set(o.field,Bz(s,a,e))}return i}class ic extends Vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z0 extends Vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(e.key)&&Nz(s,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Z_();return this.mutations.forEach(o=>{const s=e.get(o.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(o.key)?null:l;const c=sI(a,l);c!==null&&i.set(o.key,c),a.isValidDocument()||a.convertToNoDocument(Ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ot())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,(n,i)=>B1(n,i))&&jl(this.baseMutations,e.baseMutations,(n,i)=>B1(n,i))}}class D0{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ue(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=function(){return Rz}();const s=e.mutations;for(let a=0;a<s.length;a++)o=o.insert(s[a].key,i[a].version);return new D0(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,i){this.alias=e,this.aggregateType=n,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,xt;function cI(t){switch(t){case ie.OK:return Ne(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function uI(t){if(t===void 0)return ln("GRPC error has no .code"),ie.UNKNOWN;switch(t){case hn.OK:return ie.OK;case hn.CANCELLED:return ie.CANCELLED;case hn.UNKNOWN:return ie.UNKNOWN;case hn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case hn.INTERNAL:return ie.INTERNAL;case hn.UNAVAILABLE:return ie.UNAVAILABLE;case hn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case hn.NOT_FOUND:return ie.NOT_FOUND;case hn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case hn.ABORTED:return ie.ABORTED;case hn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case hn.DATA_LOSS:return ie.DATA_LOSS;default:return Ne(39323,{code:t})}}(xt=hn||(hn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp=null;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=new qo([4294967295,4294967295],0);function z1(t){const e=k0().encode(t),n=new J2;return n.update(e),new Uint8Array(n.digest())}function N1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qo([n,i],0),new qo([o,s],0)]}class W0{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Yc(`Invalid padding: ${n}`);if(i<0)throw new Yc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Yc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=qo.fromNumber(this.fe)}pe(e,n,i){let o=e.add(n.multiply(qo.fromNumber(i)));return o.compare(Wz)===1&&(o=new qo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=z1(e),[i,o]=N1(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,o,s);if(!this.ye(a))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new W0(s,o,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=z1(e),[i,o]=N1(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,o,s);this.we(a)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i,o,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fd(Ge.min(),o,new Wt(Xe),hi(),ot())}}class yd{constructor(e,n,i,o,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new yd(i,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,i,o){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=o}}class dI{constructor(e,n){this.targetId=e,this.De=n}}class hI{constructor(e,n,i=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class D1{constructor(){this.ve=0,this.Ce=M1(),this.Fe=tn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ot(),n=ot(),i=ot();return this.Ce.forEach((o,s)=>{switch(s){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:s})}}),new yd(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=M1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Lz{constructor(e){this.We=e,this.Ge=new Map,this.ze=hi(),this.je=xh(),this.Je=xh(),this.He=new Wt(Xe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,i=e.De.count,o=this.st(n);if(o){const s=o.target;if(Dp(s))if(i===0){const a=new Re(s.path);this.Xe(n,a,Vt.newNoDocument(a,Ge.min()))}else Ue(i===1,20013,{expectedCount:i});else{const a=this.ot(n);if(a!==i){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}Lp==null||Lp.ct(function(h,p,g,y,k){var j,T,x,b,v,z;const D={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},P=p.unchangedNames;return P&&(D.bloomFilter={applied:k===0,hashCount:(j=P==null?void 0:P.hashCount)!==null&&j!==void 0?j:0,bitmapLength:(b=(x=(T=P==null?void 0:P.bits)===null||T===void 0?void 0:T.bitmap)===null||x===void 0?void 0:x.length)!==null&&b!==void 0?b:0,padding:(z=(v=P==null?void 0:P.bits)===null||v===void 0?void 0:v.padding)!==null&&z!==void 0?z:0,mightContain:_=>{var S;return(S=y==null?void 0:y.mightContain(_))!==null&&S!==void 0&&S}}),D}(a,e.De,this.We.lt(),l,c))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let a,l;try{a=io(i).toUint8Array()}catch(c){if(c instanceof R_)return Yn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new W0(a,o,s)}catch(c){return Yn(c instanceof Yc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let o=0;return i.forEach(s=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const l=this.st(a);if(l){if(s.current&&Dp(l.target)){const c=new Re(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Vt.newNoDocument(c,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let i=ot();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const o=new fd(e,n,this.He,this.ze,i);return this.ze=hi(),this.je=xh(),this.Je=xh(),this.He=new Wt(Xe),o}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new D1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Bt(Xe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Bt(Xe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new D1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function xh(){return new Wt(Re.comparator)}function M1(){return new Wt(Re.comparator)}const Oz={asc:"ASCENDING",desc:"DESCENDING"},Vz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uz={and:"AND",or:"OR"};class qz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ky(t,e){return t.useProto3Json||ud(e)?e:{value:e}}function Ml(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hz(t,e){return Ml(t,e.toTimestamp())}function cn(t){return Ue(!!t,49232),Ge.fromTimestamp(function(n){const i=no(n);return new bt(i.seconds,i.nanos)}(t))}function L0(t,e){return Gy(t,e).canonicalString()}function Gy(t,e){const n=function(o){return new ct(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mI(t){const e=ct.fromString(t);return Ue(SI(e),10190,{key:e.toString()}),e}function Yu(t,e){return L0(t.databaseId,e.path)}function wr(t,e){const n=mI(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(yI(n))}function gI(t,e){return L0(t.databaseId,e)}function fI(t){const e=mI(t);return e.length===4?ct.emptyPath():yI(e)}function Qy(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function W1(t,e,n){return{name:Yu(t,e),fields:n.value.mapValue.fields}}function Um(t,e,n){const i=wr(t,e.name),o=cn(e.updateTime),s=e.createTime?cn(e.createTime):Ge.min(),a=new zn({mapValue:{fields:e.fields}}),l=Vt.newFoundDocument(i,o,s,a);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function $z(t,e){return"found"in e?function(i,o){Ue(!!o.found,43571),o.found.name,o.found.updateTime;const s=wr(i,o.found.name),a=cn(o.found.updateTime),l=o.found.createTime?cn(o.found.createTime):Ge.min(),c=new zn({mapValue:{fields:o.found.fields}});return Vt.newFoundDocument(s,a,l,c)}(t,e):"missing"in e?function(i,o){Ue(!!o.missing,3894),Ue(!!o.readTime,22933);const s=wr(i,o.missing),a=cn(o.readTime);return Vt.newNoDocument(s,a)}(t,e):Ne(7234,{result:e})}function Kz(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),tn.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),tn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?ie.UNKNOWN:uI(u.code);return new fe(h,u.message||"")}(a);n=new hI(i,o,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=wr(t,i.document.name),s=cn(i.document.updateTime),a=i.document.createTime?cn(i.document.createTime):Ge.min(),l=new zn({mapValue:{fields:i.document.fields}}),c=Vt.newFoundDocument(o,s,a,l),u=i.targetIds||[],h=i.removedTargetIds||[];n=new Qh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=wr(t,i.document),s=i.readTime?cn(i.readTime):Ge.min(),a=Vt.newNoDocument(o,s),l=i.removedTargetIds||[];n=new Qh([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=wr(t,i.document),s=i.removedTargetIds||[];n=new Qh([],s,o,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:s}=i,a=new Mz(o,s),l=i.targetId;n=new dI(l,a)}}return n}function Xu(t,e){let n;if(e instanceof nc)n={update:W1(t,e.key,e.value)};else if(e instanceof ic)n={delete:Yu(t,e.key)};else if(e instanceof uo)n={update:W1(t,e.key,e.data),updateMask:Zz(e.fieldMask)};else{if(!(e instanceof z0))return Ne(16599,{Rt:e.type});n={verify:Yu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Nl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof na)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ia)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Dl)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw Ne(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,s){return s.updateTime!==void 0?{updateTime:Hz(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ne(27497)}(t,e.precondition)),n}function Yy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Yt.updateTime(cn(s.updateTime)):s.exists!==void 0?Yt.exists(s.exists):Yt.none()}(e.currentDocument):Yt.none(),i=e.updateTransforms?e.updateTransforms.map(o=>function(a,l){let c=null;if("setToServerValue"in l)Ue(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new Nl;else if("appendMissingElements"in l){const h=l.appendMissingElements.values||[];c=new na(h)}else if("removeAllFromArray"in l){const h=l.removeAllFromArray.values||[];c=new ia(h)}else"increment"in l?c=new Dl(a,l.increment):Ne(16584,{proto:l});const u=Ut.fromServerFormat(l.fieldPath);return new gd(u,c)}(t,o)):[];if(e.update){e.update.name;const o=wr(t,e.update.name),s=new zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new di(u.map(h=>Ut.fromServerFormat(h)))}(e.updateMask);return new uo(o,s,a,n,i)}return new nc(o,s,n,i)}if(e.delete){const o=wr(t,e.delete);return new ic(o,n)}if(e.verify){const o=wr(t,e.verify);return new z0(o,n)}return Ne(1463,{proto:e})}function Gz(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(o,s){let a=o.updateTime?cn(o.updateTime):cn(s);return a.isEqual(Ge.min())&&(a=cn(s)),new zz(a,o.transformResults||[])}(n,e))):[]}function xI(t,e){return{documents:[gI(t,e.path)]}}function qm(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gI(t,o);const s=function(u){if(u.length!==0)return wI(Rt.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:_o(g.field),direction:Yz(g.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ky(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:o}}function bI(t,e,n,i){const{Vt:o,parent:s}=qm(t,e),a={},l=[];let c=0;return n.forEach(u=>{const h=i?u.alias:"aggregate_"+c++;a[h]=u.alias,u.aggregateType==="count"?l.push({alias:h,count:{}}):u.aggregateType==="avg"?l.push({alias:h,avg:{field:_o(u.fieldPath)}}):u.aggregateType==="sum"&&l.push({alias:h,sum:{field:_o(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:o.structuredQuery},parent:o.parent},ft:a,parent:s}}function vI(t){let e=fI(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ue(i===1,65062);const h=n.from[0];h.allDescendants?o=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const g=kI(p);return g instanceof Rt&&A0(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(k){return new Qu(qa(k.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,ud(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new es(y,g)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const g=!p.before,y=p.values||[];return new es(y,g)}(n.endAt)),H_(e,o,a,s,l,"F",c,u)}function Qz(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=qa(n.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=qa(n.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qa(n.unaryFilter.field);return yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qa(n.unaryFilter.field);return yt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return yt.create(qa(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rt.create(n.compositeFilter.filters.map(i=>kI(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}}(n.compositeFilter.op))}(t):Ne(30097,{filter:t})}function Yz(t){return Oz[t]}function Xz(t){return Vz[t]}function Jz(t){return Uz[t]}function _o(t){return{fieldPath:t.canonicalString()}}function qa(t){return Ut.fromServerFormat(t.fieldPath)}function wI(t){return t instanceof yt?function(n){if(n.op==="=="){if(S1(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(w1(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S1(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(w1(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:Xz(n.op),value:n.value}}}(t):t instanceof Rt?function(n){const i=n.getFilters().map(o=>wI(o));return i.length===1?i[0]:{compositeFilter:{op:Jz(n.op),filters:i}}}(t):Ne(54877,{filter:t})}function Zz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n,i,o,s=Ge.min(),a=Ge.min(),l=tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.gt=e}}function e4(t,e){let n;if(e.document)n=Um(t.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Re.fromSegments(e.noDocument.path),o=oa(e.noDocument.readTime);n=Vt.newNoDocument(i,o),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne(56709);{const i=Re.fromSegments(e.unknownDocument.path),o=oa(e.unknownDocument.version);n=Vt.newUnknownDocument(i,o)}}return e.readTime&&n.setReadTime(function(o){const s=new bt(o[0],o[1]);return Ge.fromTimestamp(s)}(e.readTime)),n}function L1(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Op(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Yu(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Ml(s,a.version.toTimestamp()),createTime:Ml(s,a.createTime.toTimestamp())}}(t.gt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:ra(e.version)};else{if(!e.isUnknownDocument())return Ne(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:ra(e.version)}}return i}function Op(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ra(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oa(t){const e=new bt(t.seconds,t.nanoseconds);return Ge.fromTimestamp(e)}function Es(t,e){const n=(e.baseMutations||[]).map(s=>Yy(t.gt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];a.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>Yy(t.gt,s)),o=bt.fromMillis(e.localWriteTimeMs);return new N0(e.batchId,o,n,i)}function Xc(t){const e=oa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?oa(t.lastLimboFreeSnapshotVersion):Ge.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return Ue(a===1,1966,{count:a}),Gn(tc(fI(s.documents[0])))}(t.query):function(s){return Gn(vI(s))}(t.query),new qr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,tn.fromBase64String(t.resumeToken))}function jI(t,e){const n=ra(e.snapshotVersion),i=ra(e.lastLimboFreeSnapshotVersion);let o;o=Dp(e.target)?xI(t.gt,e.target):qm(t.gt,e.target).Vt;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ta(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:o}}function Hm(t){const e=vI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wp(e,e.limit,"L"):e}function lf(t,e){return new M0(e.largestBatchId,Yy(t.gt,e.overlayMutation))}function O1(t,e){const n=e.path.lastSegment();return[t,Kn(e.path.popLast()),n]}function V1(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:ra(i.readTime),documentKey:Kn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{getBundleMetadata(e,n){return U1(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:oa(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return U1(e).put(function(o){return{bundleId:o.id,createTime:ra(cn(o.createTime)),version:o.version}}(n))}getNamedQuery(e,n){return q1(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Hm(s.bundledQuery),readTime:oa(s.readTime)}}(i)})}saveNamedQuery(e,n){return q1(e).put(function(o){return{name:o.name,readTime:ra(cn(o.readTime)),bundledQuery:o.bundledQuery}}(n))}}function U1(t){return jn(t,zm)}function q1(t){return jn(t,Nm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.serializer=e,this.userId=n}static yt(e,n){const i=n.uid||"";return new $m(e,i)}getOverlay(e,n){return Pc(e).get(O1(this.userId,n)).next(i=>i?lf(this.serializer,i):null)}getOverlays(e,n){const i=fr();return Z.forEach(n,o=>this.getOverlay(e,o).next(s=>{s!==null&&i.set(o,s)})).next(()=>i)}saveOverlays(e,n,i){const o=[];return i.forEach((s,a)=>{const l=new M0(n,a);o.push(this.wt(e,l))}),Z.waitFor(o)}removeOverlaysForBatchId(e,n,i){const o=new Set;n.forEach(a=>o.add(Kn(a.getCollectionPath())));const s=[];return o.forEach(a=>{const l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(Pc(e).Y(Wy,l))}),Z.waitFor(s)}getOverlaysForCollection(e,n,i){const o=fr(),s=Kn(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pc(e).j(Wy,a).next(l=>{for(const c of l){const u=lf(this.serializer,c);o.set(u.getKey(),u)}return o})}getOverlaysForCollectionGroup(e,n,i,o){const s=fr();let a;const l=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Pc(e).X({index:w_,range:l},(c,u,h)=>{const p=lf(this.serializer,u);s.size()<o||p.largestBatchId===a?(s.set(p.getKey(),p),a=p.largestBatchId):h.done()}).next(()=>s)}wt(e,n){return Pc(e).put(function(o,s,a){const[l,c,u]=O1(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Xu(o.gt,a.mutation)}}(this.serializer,this.userId,n))}}function Pc(t){return jn(t,Dm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{St(e){return jn(e,I0)}getSessionToken(e){return this.St(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?tn.fromUint8Array(i):tn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Gt(e.integerValue));else if("doubleValue"in e){const i=Gt(e.doubleValue);isNaN(i)?this.Ct(n,13):(this.Ct(n,15),Ou(i)?n.Ft(0):n.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(n,20),typeof i=="string"&&(i=no(i)),n.Mt(`${i.seconds||""}`),n.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(io(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ct(n,45),n.Ft(i.latitude||0),n.Ft(i.longitude||0)}else"mapValue"in e?z_(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Lm(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Ne(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const i=e.fields||{};this.Ct(n,55);for(const o of Object.keys(i))this.xt(o,n),this.Dt(i[o],n)}Lt(e,n){var i,o;const s=e.fields||{};this.Ct(n,53);const a=Pl,l=((o=(i=s[a].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.length)||0;this.Ct(n,15),n.Ft(Gt(l)),this.xt(a,n),this.Dt(s[a],n)}qt(e,n){const i=e.values||[];this.Ct(n,50);for(const o of i)this.Dt(o,n)}Bt(e,n){this.Ct(n,37),Re.fromName(e).path.forEach(i=>{this.Ct(n,60),this.$t(i,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}As.Ut=new As;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=255;function i4(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function H1(t){const e=64-function(i){let o=0;for(let s=0;s<8;++s){const a=i4(255&i[s]);if(o+=a,a!==8)break}return o}(t);return Math.ceil(e/8)}class r4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Wt(i.value),i=n.next();this.Gt()}zt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.jt(i.value),i=n.next();this.Jt()}Ht(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Wt(i);else if(i<2048)this.Wt(960|i>>>6),this.Wt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Wt(480|i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i);else{const o=n.codePointAt(0);this.Wt(240|o>>>18),this.Wt(128|63&o>>>12),this.Wt(128|63&o>>>6),this.Wt(128|63&o)}}this.Gt()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.jt(i);else if(i<2048)this.jt(960|i>>>6),this.jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.jt(480|i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i);else{const o=n.codePointAt(0);this.jt(240|o>>>18),this.jt(128|63&o>>>12),this.jt(128|63&o>>>6),this.jt(128|63&o)}}this.Jt()}Zt(e){const n=this.Xt(e),i=H1(n);this.en(1+i),this.buffer[this.position++]=255&i;for(let o=n.length-i;o<n.length;++o)this.buffer[this.position++]=255&n[o]}tn(e){const n=this.Xt(e),i=H1(n);this.en(1+i),this.buffer[this.position++]=~(255&i);for(let o=n.length-i;o<n.length;++o)this.buffer[this.position++]=~(255&n[o])}nn(){this.rn(Aa),this.rn(255)}sn(){this._n(Aa),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let o=1;o<n.length;++o)n[o]^=i?255:0;return n}Wt(e){const n=255&e;n===0?(this.rn(0),this.rn(255)):n===Aa?(this.rn(Aa),this.rn(0)):this.rn(n)}jt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===Aa?(this._n(Aa),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const o=new Uint8Array(i);o.set(this.buffer),this.buffer=o}}class o4{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class s4{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Fc{constructor(){this.un=new r4,this.cn=new o4(this.un),this.ln=new s4(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,i,o){this.Pn=e,this.Tn=n,this.In=i,this.dn=o}En(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Bs(this.Pn,this.Tn,this.In,i)}An(e,n,i){return{indexId:this.Pn,uid:e,arrayValue:Yh(this.In),directionalValue:Yh(this.dn),orderedDocumentKey:Yh(n),documentKey:i.path.toArray()}}Rn(e,n,i){const o=this.An(e,n,i);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function xo(t,e){let n=t.Pn-e.Pn;return n!==0?n:(n=$1(t.In,e.In),n!==0?n:(n=$1(t.dn,e.dn),n!==0?n:Re.comparator(t.Tn,e.Tn)))}function $1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Yh(t){return H2()?function(n){let i="";for(let o=0;o<n.length;o++)i+=String.fromCharCode(n[o]);return i}(t):t}function K1(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(t)}class G1{constructor(e){this.Vn=new Bt((n,i)=>Ut.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const n of e.filters){const i=n;i.isInequality()?this.Vn=this.Vn.add(i):this.fn.push(i)}}get gn(){return this.Vn.size>1}pn(e){if(Ue(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const n=Ny(e);if(n!==void 0&&!this.yn(n))return!1;const i=_s(e);let o=new Set,s=0,a=0;for(;s<i.length&&this.yn(i[s]);++s)o=o.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Vn.size>0){const l=this.Vn.getIterator().getNext();if(!o.has(l.field.canonicalString())){const c=i[s];if(!this.wn(l,c)||!this.Sn(this.mn[a++],c))return!1}++s}for(;s<i.length;++s){const l=i[s];if(a>=this.mn.length||!this.Sn(this.mn[a++],l))return!1}return!0}bn(){if(this.gn)return null;let e=new Bt(Ut.comparator);const n=[];for(const i of this.fn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Vs(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Vs(i.field,0))}for(const i of this.mn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Vs(i.field,i.dir==="asc"?0:1)));return new Il(Il.UNKNOWN_ID,this.collectionId,n,Cl.empty())}yn(e){for(const n of this.fn)if(this.wn(n,e))return!0;return!1}wn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}Sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){var e,n;if(Ue(t instanceof yt||t instanceof Rt,20012),t instanceof yt){if(t instanceof q_){const o=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>yt.create(t.field,"==",s)))||[];return Rt.create(o,"or")}return t}const i=t.filters.map(o=>_I(o));return Rt.create(i,t.op)}function a4(t){if(t.getFilters().length===0)return[];const e=Zy(_I(t));return Ue(II(e),7391),Xy(e)||Jy(e)?[e]:e.getFilters()}function Xy(t){return t instanceof yt}function Jy(t){return t instanceof Rt&&A0(t)}function II(t){return Xy(t)||Jy(t)||function(n){if(n instanceof Rt&&Uy(n)){for(const i of n.getFilters())if(!Xy(i)&&!Jy(i))return!1;return!0}return!1}(t)}function Zy(t){if(Ue(t instanceof yt||t instanceof Rt,34018),t instanceof yt)return t;if(t.filters.length===1)return Zy(t.filters[0]);const e=t.filters.map(i=>Zy(i));let n=Rt.create(e,t.op);return n=Vp(n),II(n)?n:(Ue(n instanceof Rt,64498),Ue(zl(n),40251),Ue(n.filters.length>1,57927),n.filters.reduce((i,o)=>O0(i,o)))}function O0(t,e){let n;return Ue(t instanceof yt||t instanceof Rt,38388),Ue(e instanceof yt||e instanceof Rt,25473),n=t instanceof yt?e instanceof yt?function(o,s){return Rt.create([o,s],"and")}(t,e):Q1(t,e):e instanceof yt?Q1(e,t):function(o,s){if(Ue(o.filters.length>0&&s.filters.length>0,48005),zl(o)&&zl(s))return O_(o,s.getFilters());const a=Uy(o)?o:s,l=Uy(o)?s:o,c=a.filters.map(u=>O0(u,l));return Rt.create(c,"or")}(t,e),Vp(n)}function Q1(t,e){if(zl(e))return O_(e,t.getFilters());{const n=e.filters.map(i=>O0(t,i));return Rt.create(n,"or")}}function Vp(t){if(Ue(t instanceof yt||t instanceof Rt,11850),t instanceof yt)return t;const e=t.getFilters();if(e.length===1)return Vp(e[0]);if(W_(t))return t;const n=e.map(o=>Vp(o)),i=[];return n.forEach(o=>{o instanceof yt?i.push(o):o instanceof Rt&&(o.op===t.op?i.push(...o.filters):i.push(o))}),i.length===1?i[0]:Rt.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.Dn=new V0}addToCollectionParentIndex(e,n){return this.Dn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Ai.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class V0{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Bt(ct.comparator),s=!o.has(i);return this.index[n]=o.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="IndexedDbIndexManager",bh=new Uint8Array(0);class c4{constructor(e,n){this.databaseId=n,this.vn=new V0,this.Cn=new co(i=>ta(i),(i,o)=>hd(i,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),o=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:Kn(o)};return X1(e).put(s)}return Z.resolve()}getCollectionParents(e,n){const i=[],o=IDBKeyRange.bound([n,""],[a_(n),""],!1,!0);return X1(e).j(o).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(gr(a.parent))}return i})}addFieldIndex(e,n){const i=zc(e),o=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete o.indexId;const s=i.add(o);if(n.indexState){const a=Pa(e);return s.next(l=>{a.put(V1(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=zc(e),o=Pa(e),s=Ba(e);return i.delete(n.indexId).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=zc(e),i=Ba(e),o=Pa(e);return n.Y().next(()=>i.Y()).next(()=>o.Y())}createTargetIndexes(e,n){return Z.forEach(this.Fn(n),i=>this.getIndexType(e,i).next(o=>{if(o===0||o===1){const s=new G1(i).bn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=Ba(e);let o=!0;const s=new Map;return Z.forEach(this.Fn(n),a=>this.Mn(e,a).next(l=>{o&&(o=!!l),s.set(a,l)})).next(()=>{if(o){let a=ot();const l=[];return Z.forEach(s,(c,u)=>{ye(Y1,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(c)} to execute ${ta(n)}`);const h=function(v,z){const D=Ny(z);if(D===void 0)return null;for(const P of Mp(v,D.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(u,c),p=function(v,z){const D=new Map;for(const P of _s(z))for(const _ of Mp(v,P.fieldPath))switch(_.op){case"==":case"in":D.set(P.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return D.set(P.fieldPath.canonicalString(),_.value),Array.from(D.values())}return null}(u,c),g=function(v,z){const D=[];let P=!0;for(const _ of _s(z)){const S=_.kind===0?C1(v,_.fieldPath,v.startAt):R1(v,_.fieldPath,v.startAt);D.push(S.value),P&&(P=S.inclusive)}return new es(D,P)}(u,c),y=function(v,z){const D=[];let P=!0;for(const _ of _s(z)){const S=_.kind===0?R1(v,_.fieldPath,v.endAt):C1(v,_.fieldPath,v.endAt);D.push(S.value),P&&(P=S.inclusive)}return new es(D,P)}(u,c),k=this.xn(c,u,g),j=this.xn(c,u,y),T=this.On(c,u,p),x=this.Nn(c.indexId,h,k,g.inclusive,j,y.inclusive,T);return Z.forEach(x,b=>i.H(b,n.limit).next(v=>{v.forEach(z=>{const D=Re.fromSegments(z.documentKey);a.has(D)||(a=a.add(D),l.push(D))})}))}).next(()=>l)}return Z.resolve(null)})}Fn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=a4(Rt.create(e.filters,"and")).map(i=>Hy(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,n),n)}Nn(e,n,i,o,s,a,l){const c=(n!=null?n.length:1)*Math.max(i.length,s.length),u=c/(n!=null?n.length:1),h=[];for(let p=0;p<c;++p){const g=n?this.Bn(n[p/u]):bh,y=this.Ln(e,g,i[p%u],o),k=this.kn(e,g,s[p%u],a),j=l.map(T=>this.Ln(e,g,T,!0));h.push(...this.createRange(y,k,j))}return h}Ln(e,n,i,o){const s=new Bs(e,Re.empty(),n,i);return o?s:s.En()}kn(e,n,i,o){const s=new Bs(e,Re.empty(),n,i);return o?s.En():s}Mn(e,n){const i=new G1(n),o=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,o).next(s=>{let a=null;for(const l of s)i.pn(l)&&(!a||l.fields.length>a.fields.length)&&(a=l);return a})}getIndexType(e,n){let i=2;const o=this.Fn(n);return Z.forEach(o,s=>this.Mn(e,s).next(a=>{a?i!==0&&a.fields.length<function(c){let u=new Bt(Ut.comparator),h=!1;for(const p of c.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:u=u.add(g.field));for(const p of c.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&o.length>1&&i===2?1:i)}qn(e,n){const i=new Fc;for(const o of _s(e)){const s=n.data.field(o.fieldPath);if(s==null)return null;const a=i.hn(o.kind);As.Ut.bt(s,a)}return i.an()}Bn(e){const n=new Fc;return As.Ut.bt(e,n.hn(0)),n.an()}Qn(e,n){const i=new Fc;return As.Ut.bt(ea(this.databaseId,n),i.hn(function(s){const a=_s(s);return a.length===0?0:a[a.length-1].kind}(e))),i.an()}On(e,n,i){if(i===null)return[];let o=[];o.push(new Fc);let s=0;for(const a of _s(e)){const l=i[s++];for(const c of o)if(this.$n(n,a.fieldPath)&&Gu(l))o=this.Un(o,a,l);else{const u=c.hn(a.kind);As.Ut.bt(l,u)}}return this.Kn(o)}xn(e,n,i){return this.On(e,n,i.position)}Kn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].an();return n}Un(e,n,i){const o=[...e],s=[];for(const a of i.arrayValue.values||[])for(const l of o){const c=new Fc;c.seed(l.an()),As.Ut.bt(a,c.hn(n.kind)),s.push(c)}return s}$n(e,n){return!!e.filters.find(i=>i instanceof yt&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=zc(e),o=Pa(e);return(n?i.j(My,IDBKeyRange.bound(n,n)):i.j()).next(s=>{const a=[];return Z.forEach(s,l=>o.get([l.indexId,this.uid]).next(c=>{a.push(function(h,p){const g=p?new Cl(p.sequenceNumber,new Ai(oa(p.readTime),new Re(gr(p.documentKey)),p.largestBatchId)):Cl.empty(),y=h.fields.map(([k,j])=>new Vs(Ut.fromServerFormat(k),j));return new Il(h.indexId,h.collectionGroup,y,g)}(l,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,o)=>{const s=i.indexState.sequenceNumber-o.indexState.sequenceNumber;return s!==0?s:Xe(i.collectionGroup,o.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const o=zc(e),s=Pa(e);return this.Wn(e).next(a=>o.j(My,IDBKeyRange.bound(n,n)).next(l=>Z.forEach(l,c=>s.put(V1(c.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return Z.forEach(n,(o,s)=>{const a=i.get(o.collectionGroup);return(a?Z.resolve(a):this.getFieldIndexes(e,o.collectionGroup)).next(l=>(i.set(o.collectionGroup,l),Z.forEach(l,c=>this.Gn(e,o,c).next(u=>{const h=this.zn(s,c);return u.isEqual(h)?Z.resolve():this.jn(e,s,c,u,h)}))))})}Jn(e,n,i,o){return Ba(e).put(o.An(this.uid,this.Qn(i,n.key),n.key))}Hn(e,n,i,o){return Ba(e).delete(o.Rn(this.uid,this.Qn(i,n.key),n.key))}Gn(e,n,i){const o=Ba(e);let s=new Bt(xo);return o.X({index:k_,range:IDBKeyRange.only([i.indexId,this.uid,Yh(this.Qn(i,n))])},(a,l)=>{s=s.add(new Bs(i.indexId,n,K1(l.arrayValue),K1(l.directionalValue)))}).next(()=>s)}zn(e,n){let i=new Bt(xo);const o=this.qn(n,e);if(o==null)return i;const s=Ny(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Gu(a))for(const l of a.arrayValue.values||[])i=i.add(new Bs(n.indexId,e.key,this.Bn(l),o))}else i=i.add(new Bs(n.indexId,e.key,bh,o));return i}jn(e,n,i,o,s){ye(Y1,"Updating index entries for document '%s'",n.key);const a=[];return function(c,u,h,p,g){const y=c.getIterator(),k=u.getIterator();let j=Ea(y),T=Ea(k);for(;j||T;){let x=!1,b=!1;if(j&&T){const v=h(j,T);v<0?b=!0:v>0&&(x=!0)}else j!=null?b=!0:x=!0;x?(p(T),T=Ea(k)):b?(g(j),j=Ea(y)):(j=Ea(y),T=Ea(k))}}(o,s,xo,l=>{a.push(this.Jn(e,n,i,l))},l=>{a.push(this.Hn(e,n,i,l))}),Z.waitFor(a)}Wn(e){let n=1;return Pa(e).X({index:v_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,o,s)=>{s.done(),n=o.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,l)=>xo(a,l)).filter((a,l,c)=>!l||xo(a,c[l-1])!==0);const o=[];o.push(e);for(const a of i){const l=xo(a,e),c=xo(a,n);if(l===0)o[0]=e.En();else if(l>0&&c<0)o.push(a),o.push(a.En());else if(c>0)break}o.push(n);const s=[];for(let a=0;a<o.length;a+=2){if(this.Yn(o[a],o[a+1]))return[];const l=o[a].Rn(this.uid,bh,Re.empty()),c=o[a+1].Rn(this.uid,bh,Re.empty());s.push(IDBKeyRange.bound(l,c))}return s}Yn(e,n){return xo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(J1)}getMinOffset(e,n){return Z.mapArray(this.Fn(n),i=>this.Mn(e,i).next(o=>o||Ne(44426))).next(J1)}}function X1(t){return jn(t,qu)}function Ba(t){return jn(t,du)}function zc(t){return jn(t,_0)}function Pa(t){return jn(t,uu)}function J1(t){Ue(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const o=t[i].indexState.offset;S0(o,e)<0&&(e=o),n<o.largestBatchId&&(n=o.largestBatchId)}return new Ai(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CI=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e,n){const i=t.store(Ki),o=t.store(Rl),s=[],a=IDBKeyRange.only(n.batchId);let l=0;const c=i.X({range:a},(h,p,g)=>(l++,g.delete()));s.push(c.next(()=>{Ue(l===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const p=y_(e,h.key.path,n.batchId);s.push(o.delete(p)),u.push(h.key)}return Z.waitFor(s).next(()=>u)}function Up(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(CI,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class Km{constructor(e,n,i,o){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=o,this.Zn={}}static yt(e,n,i,o){Ue(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Km(s,n,i,o)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bo(e).X({index:Ns,range:i},(o,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,o){const s=Ha(e),a=bo(e);return a.add({}).next(l=>{Ue(typeof l=="number",49019);const c=new N0(l,n,i,o),u=function(y,k,j){const T=j.baseMutations.map(b=>Xu(y.gt,b)),x=j.mutations.map(b=>Xu(y.gt,b));return{userId:k,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:T,mutations:x}}(this.serializer,this.userId,c),h=[];let p=new Bt((g,y)=>Xe(g.canonicalString(),y.canonicalString()));for(const g of o){const y=y_(this.userId,g.key.path,l);p=p.add(g.key.path.popLast()),h.push(a.put(u)),h.push(s.put(y,qF))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Zn[l]=c.keys()}),Z.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return bo(e).get(n).next(i=>i?(Ue(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),Es(this.serializer,i)):null)}Xn(e,n){return this.Zn[n]?Z.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const o=i.keys();return this.Zn[n]=o,o}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return bo(e).X({index:Ns,range:o},(a,l,c)=>{l.userId===this.userId&&(Ue(l.batchId>=i,47524,{er:i}),s=Es(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ho;return bo(e).X({index:Ns,range:n,reverse:!0},(o,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ho],[this.userId,Number.POSITIVE_INFINITY]);return bo(e).j(Ns,n).next(i=>i.map(o=>Es(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Uh(this.userId,n.path),o=IDBKeyRange.lowerBound(i),s=[];return Ha(e).X({range:o},(a,l,c)=>{const[u,h,p]=a,g=gr(h);if(u===this.userId&&n.path.isEqual(g))return bo(e).get(p).next(y=>{if(!y)throw Ne(61480,{tr:a,batchId:p});Ue(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),s.push(Es(this.serializer,y))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Bt(Xe);const o=[];return n.forEach(s=>{const a=Uh(this.userId,s.path),l=IDBKeyRange.lowerBound(a),c=Ha(e).X({range:l},(u,h,p)=>{const[g,y,k]=u,j=gr(y);g===this.userId&&s.path.isEqual(j)?i=i.add(k):p.done()});o.push(c)}),Z.waitFor(o).next(()=>this.nr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1,s=Uh(this.userId,i),a=IDBKeyRange.lowerBound(s);let l=new Bt(Xe);return Ha(e).X({range:a},(c,u,h)=>{const[p,g,y]=c,k=gr(g);p===this.userId&&i.isPrefixOf(k)?k.length===o&&(l=l.add(y)):h.done()}).next(()=>this.nr(e,l))}nr(e,n){const i=[],o=[];return n.forEach(s=>{o.push(bo(e).get(s).next(a=>{if(a===null)throw Ne(35274,{batchId:s});Ue(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(Es(this.serializer,a))}))}),Z.waitFor(o).next(()=>i)}removeMutationBatch(e,n){return RI(e.ce,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.rr(n.batchId)}),Z.forEach(i,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Z.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),o=[];return Ha(e).X({range:i},(s,a,l)=>{if(s[0]===this.userId){const c=gr(s[1]);o.push(c)}else l.done()}).next(()=>{Ue(o.length===0,56720,{ir:o.map(s=>s.canonicalString())})})})}containsKey(e,n){return EI(e,this.userId,n)}sr(e){return AI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ho,lastStreamToken:""})}}function EI(t,e,n){const i=Uh(e,n.path),o=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Ha(t).X({range:s,Z:!0},(l,c,u)=>{const[h,p,g]=l;h===e&&p===o&&(a=!0),u.done()}).next(()=>a)}function bo(t){return jn(t,Ki)}function Ha(t){return jn(t,Rl)}function AI(t){return jn(t,Vu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new sa(0)}static ur(){return new sa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.cr(e).next(n=>{const i=new sa(n.highestTargetId);return n.highestTargetId=i.next(),this.lr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(n=>Ge.fromTimestamp(new bt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.cr(e).next(o=>(o.highestListenSequenceNumber=n,i&&(o.lastRemoteSnapshotVersion=i.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),this.lr(e,o)))}addTargetData(e,n){return this.hr(e,n).next(()=>this.cr(e).next(i=>(i.targetCount+=1,this.Pr(n,i),this.lr(e,i))))}updateTargetData(e,n){return this.hr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fa(e).delete(n.targetId)).next(()=>this.cr(e)).next(i=>(Ue(i.targetCount>0,8065),i.targetCount-=1,this.lr(e,i)))}removeTargets(e,n,i){let o=0;const s=[];return Fa(e).X((a,l)=>{const c=Xc(l);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(o++,s.push(this.removeTargetData(e,c)))}).next(()=>Z.waitFor(s)).next(()=>o)}forEachTarget(e,n){return Fa(e).X((i,o)=>{const s=Xc(o);n(s)})}cr(e){return ew(e).get(Np).next(n=>(Ue(n!==null,2888),n))}lr(e,n){return ew(e).put(Np,n)}hr(e,n){return Fa(e).put(jI(this.serializer,n))}Pr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.cr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=ta(n),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Fa(e).X({range:o,index:b_},(a,l,c)=>{const u=Xc(l);hd(n,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){const o=[],s=Io(e);return n.forEach(a=>{const l=Kn(a.path);o.push(s.put({targetId:i,path:l})),o.push(this.referenceDelegate.addReference(e,i,a))}),Z.waitFor(o)}removeMatchingKeys(e,n,i){const o=Io(e);return Z.forEach(n,s=>{const a=Kn(s.path);return Z.waitFor([o.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=Io(e),o=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(o)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),o=Io(e);let s=ot();return o.X({range:i,Z:!0},(a,l,c)=>{const u=gr(a[1]),h=new Re(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=Kn(n.path),o=IDBKeyRange.bound([i],[a_(i)],!1,!0);let s=0;return Io(e).X({index:j0,Z:!0,range:o},([a,l],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}Et(e,n){return Fa(e).get(n).next(i=>i?Xc(i):null)}}function Fa(t){return jn(t,El)}function ew(t){return jn(t,Us)}function Io(t){return jn(t,Al)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="LruGarbageCollector",BI=1048576;function nw([t,e],[n,i]){const o=Xe(t,n);return o===0?Xe(e,i):o}class d4{constructor(e){this.Tr=e,this.buffer=new Bt(nw),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();nw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ye(tw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ls(n)?ye(tw,"Ignoring IndexedDB error during garbage collection: ",n):yield as(n)}yield this.Rr(3e5)}))}}class h4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(ui.ue);const i=new d4(n);return this.Vr.forEachTarget(e,o=>i.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>i.Er(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Z1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,o,s,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),o=this.params.maximumSequenceNumbersToCollect):o=p,a=Date.now(),this.nthSequenceNumber(e,o))).next(p=>(i=p,l=Date.now(),this.removeTargets(e,i,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(u=Date.now(),Va()<=ft.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${o} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:p})))}}function FI(t,e){return new h4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n){this.db=e,this.garbageCollector=FI(this,n)}mr(e){const n=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}gr(e,n){return this.wr(e,(i,o)=>n(o))}addReference(e,n,i){return vh(e,i)}removeReference(e,n,i){return vh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return vh(e,n)}Sr(e,n){return function(o,s){let a=!1;return AI(o).ee(l=>EI(o,l,s).next(c=>(c&&(a=!0),Z.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let s=0;return this.wr(e,(a,l)=>{if(l<=n){const c=this.Sr(e,a).next(u=>{if(!u)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,Ge.min()),Io(e).delete(function(p){return[0,Kn(p.path)]}(a))))});o.push(c)}}).next(()=>Z.waitFor(o)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return vh(e,n)}wr(e,n){const i=Io(e);let o,s=ui.ue;return i.X({index:j0},([a,l],{path:c,sequenceNumber:u})=>{a===0?(s!==ui.ue&&n(new Re(gr(o)),s),s=u,o=c):s=ui.ue}).next(()=>{s!==ui.ue&&n(new Re(gr(o)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vh(t,e){return Io(t).put(function(i,o){return{targetId:0,path:Kn(i.path),sequenceNumber:o}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return ks(e).put(i)}removeEntry(e,n,i){return ks(e).delete(function(s,a){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Op(a),l[l.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.br(e,i)))}getEntry(e,n){let i=Vt.newInvalidDocument(n);return ks(e).X({index:qh,range:IDBKeyRange.only(Nc(n))},(o,s)=>{i=this.Dr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:Vt.newInvalidDocument(n)};return ks(e).X({index:qh,range:IDBKeyRange.only(Nc(n))},(o,s)=>{i={document:this.Dr(n,s),size:Up(s)}}).next(()=>i)}getEntries(e,n){let i=hi();return this.Cr(e,n,(o,s)=>{const a=this.Dr(o,s);i=i.insert(o,a)}).next(()=>i)}Fr(e,n){let i=hi(),o=new Wt(Re.comparator);return this.Cr(e,n,(s,a)=>{const l=this.Dr(s,a);i=i.insert(s,l),o=o.insert(s,Up(a))}).next(()=>({documents:i,Mr:o}))}Cr(e,n,i){if(n.isEmpty())return Z.resolve();let o=new Bt(ow);n.forEach(c=>o=o.add(c));const s=IDBKeyRange.bound(Nc(o.first()),Nc(o.last())),a=o.getIterator();let l=a.getNext();return ks(e).X({index:qh,range:s},(c,u,h)=>{const p=Re.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&ow(l,p)<0;)i(l,null),l=a.getNext();l&&l.isEqual(p)&&(i(l,u),l=a.hasNext()?a.getNext():null),l?h.G(Nc(l)):h.done()}).next(()=>{for(;l;)i(l,null),l=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,o,s){const a=n.path,l=[a.popLast().toArray(),a.lastSegment(),Op(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ks(e).j(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=hi();for(const p of u){const g=this.Dr(Re.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(md(n,g)||o.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,n,i,o){let s=hi();const a=rw(n,i),l=rw(n,Ai.max());return ks(e).X({index:x_,range:IDBKeyRange.bound(a,l,!0)},(c,u,h)=>{const p=this.Dr(Re.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(p.key,p),s.size===o&&h.done()}).next(()=>s)}newChangeBuffer(e){return new g4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return iw(e).get(Dy).next(n=>(Ue(!!n,20021),n))}br(e,n){return iw(e).put(Dy,n)}Dr(e,n){if(n){const i=e4(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(Ge.min())))return i}return Vt.newInvalidDocument(e)}}function NI(t){return new m4(t)}class g4 extends zI{constructor(e,n){super(),this.Or=e,this.trackRemovals=n,this.Nr=new co(i=>i.toString(),(i,o)=>i.isEqual(o))}applyChanges(e){const n=[];let i=0,o=new Bt((s,a)=>Xe(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const l=this.Nr.get(s);if(n.push(this.Or.removeEntry(e,s,l.readTime)),a.isValidDocument()){const c=L1(this.Or.serializer,a);o=o.add(s.path.popLast());const u=Up(c);i+=u-l.size,n.push(this.Or.addEntry(e,s,c))}else if(i-=l.size,this.trackRemovals){const c=L1(this.Or.serializer,a.convertToNoDocument(Ge.min()));n.push(this.Or.addEntry(e,s,c))}}),o.forEach(s=>{n.push(this.Or.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Or.updateMetadata(e,i)),Z.waitFor(n)}getFromCache(e,n){return this.Or.vr(e,n).next(i=>(this.Nr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Or.Fr(e,n).next(({documents:i,Mr:o})=>(o.forEach((s,a)=>{this.Nr.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function iw(t){return jn(t,Uu)}function ks(t){return jn(t,zp)}function Nc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rw(t,e){const n=e.documentKey.path.toArray();return[t,Op(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ow(t,e){const n=t.path.toArray(),i=e.path.toArray();let o=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(o=Xe(n[s],i[s]),o)return o;return o=Xe(n.length,i.length),o||(o=Xe(n[n.length-2],i[i.length-2]),o||Xe(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&mu(i.mutation,o,di.empty(),bt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ot()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ot()){const o=fr();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(s=>{let a=Qc();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=fr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ot()))}populateOverlays(e,n,i){const o=[];return i.forEach(s=>{n.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(e,o).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,o){let s=hi();const a=pu(),l=function(){return pu()}();return n.forEach((c,u)=>{const h=i.get(u.key);o.has(u.key)&&(h===void 0||h.mutation instanceof uo)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),mu(h.mutation,u,h.mutation.getFieldMask(),bt.now())):a.set(u.key,di.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>{var p;return l.set(u,new f4(h,(p=a.get(u))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const i=pu();let o=new Wt((a,l)=>a-l),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=i.get(c)||di.empty();h=l.applyToLocalView(u,h),i.set(c,h);const p=(o.get(l.batchId)||ot()).add(c);o=o.insert(l.batchId,p)})}).next(()=>{const a=[],l=o.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,p=Z_();h.forEach(g=>{if(!s.has(g)){const y=sI(n.get(g),i.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(a){return Re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(s=>{const a=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-s.size):Z.resolve(fr());let l=_l,c=s;return a.next(u=>Z.forEach(u,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ot())).next(h=>({batchId:l,changes:J_(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(i=>{let o=Qc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const s=n.collectionGroup;let a=Qc();return this.indexManager.getCollectionParents(e,s).next(l=>Z.forEach(l,c=>{const u=function(p,g){return new lo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,o).next(h=>{h.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,o){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,o))).next(a=>{s.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,Vt.newInvalidDocument(h)))});let l=Qc();return a.forEach((c,u)=>{const h=s.get(c);h!==void 0&&mu(h.mutation,u,di.empty(),bt.now()),md(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:cn(o.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:Hm(o.bundledQuery),readTime:cn(o.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.overlays=new Wt(Re.comparator),this.kr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=fr();return Z.forEach(n,o=>this.getOverlay(e,o).next(s=>{s!==null&&i.set(o,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,s)=>{this.wt(e,n,s)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const o=fr(),s=n.length+1,a=new Re(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>i&&o.set(c.getKey(),c)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let s=new Wt((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=fr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=fr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=o)););return Z.resolve(l)}wt(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const a=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new M0(n,i));let s=this.kr.get(n);s===void 0&&(s=ot(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.qr=new Bt(_n.Qr),this.$r=new Bt(_n.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new _n(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new _n(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new Re(new ct([])),i=new _n(n,e),o=new _n(n,e+1),s=[];return this.$r.forEachInRange([i,o],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Re(new ct([])),i=new _n(n,e),o=new _n(n,e+1);let s=ot();return this.$r.forEachInRange([i,o],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new _n(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class _n{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Re.comparator(e.key,n.key)||Xe(e.Hr,n.Hr)}static Ur(e,n){return Xe(e.Hr,n.Hr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Bt(_n.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new N0(s,n,i,o);this.mutationQueue.push(a);for(const l of o)this.Yr=this.Yr.add(new _n(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.Xr(i),s=o<0?0:o;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Ho:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new _n(n,0),o=new _n(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,o],a=>{const l=this.Zr(a.Hr);s.push(l)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Bt(Xe);return n.forEach(o=>{const s=new _n(o,0),a=new _n(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],l=>{i=i.add(l.Hr)})}),Z.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let s=i;Re.isDocumentKey(s)||(s=s.child(""));const a=new _n(new Re(s),0);let l=new Bt(Xe);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===o&&(l=l.add(c.Hr)),!0)},a),Z.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(i=>{const o=this.Zr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ue(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Z.forEach(n.mutations,o=>{const s=new _n(o.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new _n(n,0),o=this.Yr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.ni=e,this.docs=function(){return new Wt(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),s=o?o.size:0,a=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let i=hi();return n.forEach(o=>{const s=this.docs.get(o);i=i.insert(o,s?s.document.mutableCopy():Vt.newInvalidDocument(o))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let s=hi();const a=n.path,l=new Re(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||S0(h_(h),i)<=0||(o.has(h.key)||md(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,n,i,o){Ne(9500)}ri(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new w4(this)}getSize(e){return Z.resolve(this.size)}}class w4 extends zI{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.persistence=e,this.ii=new co(n=>ta(n),hd),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new U0,this.targetCount=0,this._i=sa.ar()}forEachTarget(e,n){return this.ii.forEach((i,o)=>n(o)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),Z.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new sa(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.hr(n),Z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let o=0;const s=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),o++)}),Z.waitFor(s).next(()=>o)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(a=>{s.push(o.markPotentiallyOrphaned(e,a))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n){this.ai={},this.overlays={},this.ui=new ui(0),this.ci=!1,this.ci=!0,this.li=new b4,this.referenceDelegate=e(this),this.hi=new S4(this),this.indexManager=new l4,this.remoteDocumentCache=function(o){return new k4(o)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new TI(n),this.Ti=new y4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new v4(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ye("MemoryPersistence","Starting transaction:",e);const o=new T4(this.ui.next());return this.referenceDelegate.Ii(),i(o).next(s=>this.referenceDelegate.di(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Ei(e,n){return Z.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class T4 extends m_{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.Ai=new U0,this.Ri=null}static Vi(e){return new Gm(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,i=>{const o=Re.fromPath(i);return this.fi(e,o).next(s=>{s||n.removeEntry(o,Ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Z.or([()=>Z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class qp{constructor(e,n){this.persistence=e,this.gi=new co(i=>Kn(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=FI(this,n)}static Vi(e,n){return new qp(e,n)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return Z.forEach(this.gi,(i,o)=>this.Sr(e,i,o).next(s=>s?Z.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),s=o.newChangeBuffer();return o.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(i++,s.removeEntry(a,Ge.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}Sr(e,n,i){return Z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return Z.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.serializer=e}q(e,n,i,o){const s=new Fm("createOrUpgrade",n);i<1&&o>=1&&(function(c){c.createObjectStore(dd)}(e),function(c){c.createObjectStore(Vu,{keyPath:UF}),c.createObjectStore(Ki,{keyPath:f1,autoIncrement:!0}).createIndex(Ns,y1,{unique:!0}),c.createObjectStore(Rl)}(e),sw(e),function(c){c.createObjectStore(Is)}(e));let a=Z.resolve();return i<3&&o>=3&&(i!==0&&(function(c){c.deleteObjectStore(Al),c.deleteObjectStore(El),c.deleteObjectStore(Us)}(e),sw(e)),a=a.next(()=>function(c){const u=c.store(Us),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ge.min().toTimestamp(),targetCount:0};return u.put(Np,h)}(s))),i<4&&o>=4&&(i!==0&&(a=a.next(()=>function(c,u){return u.store(Ki).j().next(p=>{c.deleteObjectStore(Ki),c.createObjectStore(Ki,{keyPath:f1,autoIncrement:!0}).createIndex(Ns,y1,{unique:!0});const g=u.store(Ki),y=p.map(k=>g.put(k));return Z.waitFor(y)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore(Bl,{keyPath:JF})})(e)})),i<5&&o>=5&&(a=a.next(()=>this.pi(s))),i<6&&o>=6&&(a=a.next(()=>(function(c){c.createObjectStore(Uu)}(e),this.yi(s)))),i<7&&o>=7&&(a=a.next(()=>this.wi(s))),i<8&&o>=8&&(a=a.next(()=>this.Si(e,s))),i<9&&o>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&o>=10&&(a=a.next(()=>this.bi(s))),i<11&&o>=11&&(a=a.next(()=>{(function(c){c.createObjectStore(zm,{keyPath:ZF})})(e),function(c){c.createObjectStore(Nm,{keyPath:ez})}(e)})),i<12&&o>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore(Dm,{keyPath:az});u.createIndex(Wy,lz,{unique:!1}),u.createIndex(w_,cz,{unique:!1})})(e)})),i<13&&o>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore(zp,{keyPath:HF});u.createIndex(qh,$F),u.createIndex(x_,KF)}(e)).next(()=>this.Di(e,s)).next(()=>e.deleteObjectStore(Is))),i<14&&o>=14&&(a=a.next(()=>this.Ci(e,s))),i<15&&o>=15&&(a=a.next(()=>function(c){c.createObjectStore(_0,{keyPath:tz,autoIncrement:!0}).createIndex(My,nz,{unique:!1}),c.createObjectStore(uu,{keyPath:iz}).createIndex(v_,rz,{unique:!1}),c.createObjectStore(du,{keyPath:oz}).createIndex(k_,sz,{unique:!1})}(e))),i<16&&o>=16&&(a=a.next(()=>{n.objectStore(uu).clear()}).next(()=>{n.objectStore(du).clear()})),i<17&&o>=17&&(a=a.next(()=>{(function(c){c.createObjectStore(I0,{keyPath:uz})})(e)})),i<18&&o>=18&&H2()&&(a=a.next(()=>{n.objectStore(uu).clear()}).next(()=>{n.objectStore(du).clear()})),a}yi(e){let n=0;return e.store(Is).X((i,o)=>{n+=Up(o)}).next(()=>{const i={byteSize:n};return e.store(Uu).put(Dy,i)})}pi(e){const n=e.store(Vu),i=e.store(Ki);return n.j().next(o=>Z.forEach(o,s=>{const a=IDBKeyRange.bound([s.userId,Ho],[s.userId,s.lastAcknowledgedBatchId]);return i.j(Ns,a).next(l=>Z.forEach(l,c=>{Ue(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Es(this.serializer,c);return RI(e,s.userId,u).next(()=>{})}))}))}wi(e){const n=e.store(Al),i=e.store(Is);return e.store(Us).get(Np).next(o=>{const s=[];return i.X((a,l)=>{const c=new ct(a),u=function(p){return[0,Kn(p)]}(c);s.push(n.get(u).next(h=>h?Z.resolve():(p=>n.put({targetId:0,path:Kn(p),sequenceNumber:o.highestListenSequenceNumber}))(c)))}).next(()=>Z.waitFor(s))})}Si(e,n){e.createObjectStore(qu,{keyPath:XF});const i=n.store(qu),o=new V0,s=a=>{if(o.add(a)){const l=a.lastSegment(),c=a.popLast();return i.put({collectionId:l,parent:Kn(c)})}};return n.store(Is).X({Z:!0},(a,l)=>{const c=new ct(a);return s(c.popLast())}).next(()=>n.store(Rl).X({Z:!0},([a,l,c],u)=>{const h=gr(l);return s(h.popLast())}))}bi(e){const n=e.store(El);return n.X((i,o)=>{const s=Xc(o),a=jI(this.serializer,s);return n.put(a)})}Di(e,n){const i=n.store(Is),o=[];return i.X((s,a)=>{const l=n.store(zp),c=function(p){return p.document?new Re(ct.fromString(p.document.name).popFirst(5)):p.noDocument?Re.fromSegments(p.noDocument.path):p.unknownDocument?Re.fromSegments(p.unknownDocument.path):Ne(36783)}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};o.push(l.put(u))}).next(()=>Z.waitFor(o))}Ci(e,n){const i=n.store(Ki),o=NI(this.serializer),s=new q0(Gm.Vi,this.serializer.gt);return i.j().next(a=>{const l=new Map;return a.forEach(c=>{var u;let h=(u=l.get(c.userId))!==null&&u!==void 0?u:ot();Es(this.serializer,c).keys().forEach(p=>h=h.add(p)),l.set(c.userId,h)}),Z.forEach(l,(c,u)=>{const h=new Cn(u),p=$m.yt(this.serializer,h),g=s.getIndexManager(h),y=Km.yt(h,this.serializer,g,s.referenceDelegate);return new DI(o,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new Ly(n,ui.ue),c).next()})})}}function sw(t){t.createObjectStore(Al,{keyPath:QF}).createIndex(j0,YF,{unique:!0}),t.createObjectStore(El,{keyPath:"targetId"}).createIndex(b_,GF,{unique:!0}),t.createObjectStore(Us)}const vo="IndexedDbPersistence",cf=18e5,uf=5e3,df="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",MI="main";class H0{constructor(e,n,i,o,s,a,l,c,u,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Fi=s,this.window=a,this.document=l,this.Mi=u,this.xi=h,this.Oi=p,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=g=>Promise.resolve(),!H0.C())throw new fe(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p4(this,o),this.Qi=n+MI,this.serializer=new TI(c),this.$i=new kr(this.Qi,this.Oi,new j4(this.serializer)),this.li=new n4,this.hi=new u4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NI(this.serializer),this.Ti=new t4,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&ln(vo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(ie.FAILED_PRECONDITION,df);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new ui(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=n=>C(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>C(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(n=>{n||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(n=>this.isPrimary&&!n?this.Yi(e).next(()=>!1):!!n&&this.Zi(e).next(()=>!0))).catch(e=>{if(ls(e))return ye(vo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye(vo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return Dc(e).get(Ra).next(n=>Z.resolve(this.Xi(n)))}es(e){return kh(e).delete(this.clientId)}ts(){return C(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,cf)){this.ki=Date.now();const e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=jn(n,Bl);return i.j().next(o=>{const s=this.rs(o,cf),a=o.filter(l=>s.indexOf(l)===-1);return Z.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ui)for(const n of e)this.Ui.removeItem(this.ss(n.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?Z.resolve(!0):Dc(e).get(Ra).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,uf)&&!this._s(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new fe(ie.FAILED_PRECONDITION,df);return!1}}return!(!this.networkEnabled||!this.inForeground)||kh(e).j().next(i=>this.rs(i,uf).find(o=>{if(this.clientId!==o.clientId){const s=!this.networkEnabled&&o.networkEnabled,a=!this.inForeground&&o.inForeground,l=this.networkEnabled===o.networkEnabled;if(s||a&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ye(vo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return C(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[dd,Bl],e=>{const n=new Ly(e,ui.ue);return this.Yi(n).next(()=>this.es(n))}),this.$i.close(),this.hs()})}rs(e,n){return e.filter(i=>this.ns(i.updateTimeMs,n)&&!this._s(i.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>kh(e).j().next(n=>this.rs(n,cf).map(i=>i.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,n){return Km.yt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new c4(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return $m.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,n,i){ye(vo,"Starting transaction:",e);const o=n==="readonly"?"readonly":"readwrite",s=function(c){return c===18?pz:c===17?__:c===16?hz:c===15?C0:c===14?j_:c===13?T_:c===12?dz:c===11?S_:void Ne(60245)}(this.Oi);let a;return this.$i.runTransaction(e,o,s,l=>(a=new Ly(l,this.ui?this.ui.next():ui.ue),n==="readwrite-primary"?this.Ji(a).next(c=>!!c||this.Hi(a)).next(c=>{if(!c)throw ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new fe(ie.FAILED_PRECONDITION,p_);return i(a)}).next(c=>this.Zi(a).next(()=>c)):this.Ts(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Ts(e){return Dc(e).get(Ra).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,uf)&&!this._s(n.ownerId)&&!this.Xi(n)&&!(this.xi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new fe(ie.FAILED_PRECONDITION,df)})}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dc(e).put(Ra,n)}static C(){return kr.C()}Yi(e){const n=Dc(e);return n.get(Ra).next(i=>this.Xi(i)?(ye(vo,"Releasing primary lease."),n.delete(Ra)):Z.resolve())}ns(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(ln(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const n=/(?:Version|Mobile)\/1[456]/;q2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var n;try{const i=((n=this.Ui)===null||n===void 0?void 0:n.getItem(this.ss(e)))!==null;return ye(vo,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ln(vo,"Failed to get zombied client id.",i),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){ln("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch(e){}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dc(t){return jn(t,dd)}function kh(t){return jn(t,Bl)}function $0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=o}static Es(e,n){let i=ot(),o=ot();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new K0(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return q2()?8:g_(Sn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,o){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,o,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new _4;return this.ws(e,n,a).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>s.result)}Ss(e,n,i,o){return i.documentReadCount<this.Vs?(Va()<=ft.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ua(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Va()<=ft.DEBUG&&ye("QueryEngine","Query:",Ua(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Va()<=ft.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ua(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):Z.resolve())}ps(e,n){if(E1(n))return Z.resolve(null);let i=Gn(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Wp(n,null,"F"),i=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ot(...s);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const u=this.bs(n,l);return this.Ds(n,u,a,c.readTime)?this.ps(e,Wp(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,i,o){return E1(n)||o.isEqual(Ge.min())?Z.resolve(null):this.gs.getDocuments(e,i).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,i,o)?Z.resolve(null):(Va()<=ft.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ua(n)),this.vs(e,a,n,d_(o,_l)).next(l=>l))})}bs(e,n){let i=new Bt(Y_(e));return n.forEach((o,s)=>{md(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}ws(e,n,i){return Va()<=ft.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ua(n)),this.gs.getDocumentsMatchingQuery(e,n,Ai.min(),i)}vs(e,n,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="LocalStore",I4=3e8;class C4{constructor(e,n,i,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new Wt(Xe),this.Ms=new co(s=>ta(s),hd),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function LI(t,e,n,i){return new C4(t,e,n,i)}function OI(t,e){return C(this,null,function*(){const n=Ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(s=>(o=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let c=ot();for(const u of o){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of s){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(i,c).next(u=>({Bs:u,removedBatchIds:a,addedBatchIds:l}))})})})}function R4(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const p=u.batch,g=p.keys();let y=Z.resolve();return g.forEach(k=>{y=y.next(()=>h.getEntry(c,k)).next(j=>{const T=u.docVersions.get(k);Ue(T!==null,48541),j.version.compareTo(T)<0&&(p.applyToRemoteDocument(j,u),j.isValidDocument()&&(j.setReadTime(u.commitVersion),h.addEntry(j)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=ot();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function VI(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function E4(t,e){const n=Ae(t),i=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const l=[];e.targetChanges.forEach((h,p)=>{const g=o.get(p);if(!g)return;l.push(n.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(tn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,i)),o=o.insert(p,y),function(j,T,x){return j.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=I4?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,y,h)&&l.push(n.hi.updateTargetData(s,y))});let c=hi(),u=ot();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(UI(s,a,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!i.isEqual(Ge.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(h)}return Z.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.Fs=o,s))}function UI(t,e,n){let i=ot(),o=ot();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=hi();return n.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(o=o.add(l)),c.isNoDocument()&&c.version.isEqual(Ge.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ye(G0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:a,ks:o}})}function A4(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ho),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Wl(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.hi.getTargetData(i,e).next(s=>s?(o=s,Z.resolve(o)):n.hi.allocateTargetId(i).next(a=>(o=new qr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}function Ll(t,e,n){return C(this,null,function*(){const i=Ae(t),o=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,o)))}catch(a){if(!ls(a))throw a;ye(G0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)})}function Hp(t,e,n){const i=Ae(t);let o=Ge.min(),s=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const p=Ae(c),g=p.Ms.get(h);return g!==void 0?Z.resolve(p.Fs.get(g)):p.hi.getTargetData(u,h)}(i,a,Gn(e)).next(l=>{if(l)return o=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?o:Ge.min(),n?s:ot())).next(l=>($I(i,Q_(e),l),{documents:l,qs:s})))}function qI(t,e){const n=Ae(t),i=Ae(n.hi),o=n.Fs.get(e);return o?Promise.resolve(o.target):n.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,e).next(a=>a?a.target:null))}function HI(t,e){const n=Ae(t),i=n.xs.get(e)||Ge.min();return n.persistence.runTransaction("Get new document changes","readonly",o=>n.Os.getAllFromCollectionGroup(o,e,d_(i,_l),Number.MAX_SAFE_INTEGER)).then(o=>($I(n,e,o),o))}function $I(t,e,n){let i=t.xs.get(e)||Ge.min();n.forEach((o,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}function B4(t,e,n,i){return C(this,null,function*(){const o=Ae(t);let s=ot(),a=hi();for(const u of n){const h=e.Qs(u.metadata.name);u.document&&(s=s.add(h));const p=e.$s(u);p.setReadTime(e.Us(u.metadata.readTime)),a=a.insert(h,p)}const l=o.Os.newChangeBuffer({trackRemovals:!0}),c=yield Wl(o,function(h){return Gn(tc(ct.fromString(`__bundle__/docs/${h}`)))}(i));return o.persistence.runTransaction("Apply bundle documents","readwrite",u=>UI(u,l,a).next(h=>(l.apply(u),h)).next(h=>o.hi.removeMatchingKeysForTargetId(u,c.targetId).next(()=>o.hi.addMatchingKeys(u,s,c.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(u,h.Ls,h.ks)).next(()=>h.Ls)))})}function P4(i,o){return C(this,arguments,function*(t,e,n=ot()){const s=yield Wl(t,Gn(Hm(e.bundledQuery))),a=Ae(t);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=cn(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return a.Ti.saveNamedQuery(l,e);const u=s.withResumeToken(tn.EMPTY_BYTE_STRING,c);return a.Fs=a.Fs.insert(u.targetId,u),a.hi.updateTargetData(l,u).next(()=>a.hi.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.hi.addMatchingKeys(l,n,s.targetId)).next(()=>a.Ti.saveNamedQuery(l,e))})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firestore_clients";function aw(t,e){return`${KI}_${t}_${e}`}const GI="firestore_mutations";function lw(t,e,n){let i=`${GI}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const QI="firestore_targets";function hf(t,e){return`${QI}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="SharedClientState";class $p{constructor(e,n,i,o){this.user=e,this.batchId=n,this.state=i,this.error=o}static Ks(e,n,i){const o=JSON.parse(i);let s,a=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return a&&o.error&&(a=typeof o.error.message=="string"&&typeof o.error.code=="string",a&&(s=new fe(o.error.code,o.error.message))),a?new $p(e,n,o.state,s):(ln(hr,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gu{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ks(e,n){const i=JSON.parse(n);let o,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new fe(i.error.code,i.error.message))),s?new gu(e,i.state,o):(ln(hr,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ks(e,n){const i=JSON.parse(n);let o=typeof i=="object"&&i.activeTargetIds instanceof Array,s=P0();for(let a=0;o&&a<i.activeTargetIds.length;++a)o=f_(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return o?new Kp(e,s):(ln(hr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Q0{constructor(e,n){this.clientId=e,this.onlineState=n}static Ks(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Q0(n.clientId,n.onlineState):(ln(hr,`Failed to parse online state: ${e}`),null)}}class ex{constructor(){this.activeTargetIds=P0()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pf{constructor(e,n,i,o,s){this.window=e,this.Fi=n,this.persistenceKey=i,this.js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Wt(Xe),this.started=!1,this.Zs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Xs=aw(this.persistenceKey,this.js),this.eo=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new ex),this.no=new RegExp(`^${KI}_${a}_([^_]*)$`),this.ro=new RegExp(`^${GI}_${a}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${QI}_${a}_(\\d+)$`),this.so=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.oo=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return C(this,null,function*(){const e=yield this.syncEngine.Ps();for(const i of e){if(i===this.js)continue;const o=this.getItem(aw(this.persistenceKey,i));if(o){const s=Kp.Ks(i,o);s&&(this.Ys=this.Ys.insert(s.clientId,s))}}this._o();const n=this.storage.getItem(this.so);if(n){const i=this.ao(n);i&&this.uo(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let n=!1;return this.Ys.forEach((i,o)=>{o.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,n,i){this.lo(e,n,i),this.ho(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(hf(this.persistenceKey,e));if(o){const s=gu.Ks(e,o);s&&(i=s.state)}}return n&&this.Po.Gs(e),this._o(),i}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hf(this.persistenceKey,e))}updateQueryState(e,n,i){this.To(e,n,i)}handleUserChange(e,n,i){n.forEach(o=>{this.ho(o)}),this.currentUser=e,i.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ye(hr,"READ",e,n),n}setItem(e,n){ye(hr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ye(hr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(ye(hr,"EVENT",n.key,n.newValue),n.key===this.Xs)return void ln("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>C(this,null,function*(){if(this.started){if(n.key!==null){if(this.no.test(n.key)){if(n.newValue==null){const i=this.Ao(n.key);return this.Ro(i,null)}{const i=this.Vo(n.key,n.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const i=this.mo(n.key,n.newValue);if(i)return this.fo(i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.po(n.key,n.newValue);if(i)return this.yo(i)}}else if(n.key===this.so){if(n.newValue!==null){const i=this.ao(n.newValue);if(i)return this.uo(i)}}else if(n.key===this.eo){const i=function(s){let a=ui.ue;if(s!=null)try{const l=JSON.parse(s);Ue(typeof l=="number",30636,{wo:s}),a=l}catch(l){ln(hr,"Failed to read sequence number from WebStorage",l)}return a}(n.newValue);i!==ui.ue&&this.sequenceNumberHandler(i)}else if(n.key===this.oo){const i=this.So(n.newValue);yield Promise.all(i.map(o=>this.syncEngine.bo(o)))}}}else this.Zs.push(n)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,n,i){const o=new $p(this.currentUser,e,n,i),s=lw(this.persistenceKey,this.currentUser,e);this.setItem(s,o.Ws())}ho(e){const n=lw(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Io(e){const n={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(n))}To(e,n,i){const o=hf(this.persistenceKey,e),s=new gu(e,n,i);this.setItem(o,s.Ws())}Eo(e){const n=JSON.stringify(Array.from(e));this.setItem(this.oo,n)}Ao(e){const n=this.no.exec(e);return n?n[1]:null}Vo(e,n){const i=this.Ao(e);return Kp.Ks(i,n)}mo(e,n){const i=this.ro.exec(e),o=Number(i[1]),s=i[2]!==void 0?i[2]:null;return $p.Ks(new Cn(s),o,n)}po(e,n){const i=this.io.exec(e),o=Number(i[1]);return gu.Ks(o,n)}ao(e){return Q0.Ks(e)}So(e){return JSON.parse(e)}fo(e){return C(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);ye(hr,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,n){const i=n?this.Ys.insert(e,n):this.Ys.remove(e),o=this.co(this.Ys),s=this.co(i),a=[],l=[];return s.forEach(c=>{o.has(c)||a.push(c)}),o.forEach(c=>{s.has(c)||l.push(c)}),this.syncEngine.Co(a,l).then(()=>{this.Ys=i})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let n=P0();return e.forEach((i,o)=>{n=n.unionWith(o.activeTargetIds)}),n}}class YI{constructor(){this.Fo=new ex,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ex,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="ConnectivityMonitor";class uw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ye(cw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ye(cw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function tx(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="RestConnection",z4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===$u?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,n,i,o,s){const a=tx(),l=this.Go(e,n.toUriEncodedString());ye(mf,`Sending RPC '${e}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,o,s);const{host:u}=new URL(l),h=ao(u);return this.jo(e,l,c,i,h).then(p=>(ye(mf,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Yn(mf,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Jo(e,n,i,o,s,a){return this.Wo(e,n,i,o,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ec}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>e[s]=o),i&&i.headers.forEach((o,s)=>e[s]=o)}Go(e,n){const i=z4[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class M4 extends N4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,o,s){const a=tx();return new Promise((l,c)=>{const u=new Z2;u.setWithCredentials(!0),u.listenOnce(e_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vh.NO_ERROR:const p=u.getResponseJson();ye(Un,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Vh.TIMEOUT:ye(Un,`RPC '${e}' ${a} timed out`),c(new fe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const g=u.getStatus();if(ye(Un,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const k=y==null?void 0:y.error;if(k&&k.status&&k.message){const j=function(x){const b=x.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(b)>=0?b:ie.UNKNOWN}(k.status);c(new fe(j,k.message))}else c(new fe(ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new fe(ie.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:a,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ye(Un,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(o);ye(Un,`RPC '${e}' ${a} sending request:`,o),u.send(n,"POST",h,i,15)})}P_(e,n,i){const o=tx(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=i_(),l=n_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const h=s.join("");ye(Un,`Creating RPC '${e}' stream ${o}: ${h}`,c);const p=a.createWebChannel(h,c);this.T_(p);let g=!1,y=!1;const k=new D4({Ho:T=>{y?ye(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,T):(g||(ye(Un,`Opening RPC '${e}' stream ${o} transport.`),p.open(),g=!0),ye(Un,`RPC '${e}' stream ${o} sending:`,T),p.send(T))},Yo:()=>p.close()}),j=(T,x,b)=>{T.listen(x,v=>{try{b(v)}catch(z){setTimeout(()=>{throw z},0)}})};return j(p,Gc.EventType.OPEN,()=>{y||(ye(Un,`RPC '${e}' stream ${o} transport opened.`),k.s_())}),j(p,Gc.EventType.CLOSE,()=>{y||(y=!0,ye(Un,`RPC '${e}' stream ${o} transport closed`),k.__(),this.I_(p))}),j(p,Gc.EventType.ERROR,T=>{y||(y=!0,Yn(Un,`RPC '${e}' stream ${o} transport errored. Name:`,T.name,"Message:",T.message),k.__(new fe(ie.UNAVAILABLE,"The operation could not be completed")))}),j(p,Gc.EventType.MESSAGE,T=>{var x;if(!y){const b=T.data[0];Ue(!!b,16349);const v=b,z=(v==null?void 0:v.error)||((x=v[0])===null||x===void 0?void 0:x.error);if(z){ye(Un,`RPC '${e}' stream ${o} received error:`,z);const D=z.status;let P=function(R){const E=hn[R];if(E!==void 0)return uI(E)}(D),_=z.message;P===void 0&&(P=ie.INTERNAL,_="Unknown error status: "+D+" with message "+z.message),y=!0,k.__(new fe(P,_)),p.close()}else ye(Un,`RPC '${e}' stream ${o} received:`,b),k.a_(b)}}),j(l,t_.STAT_EVENT,T=>{T.stat===By.PROXY?ye(Un,`RPC '${e}' stream ${o} detected buffering proxy`):T.stat===By.NOPROXY&&ye(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return typeof window!="undefined"?window:null}function Xh(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){return new qz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n,i=1e3,o=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=o,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="PersistentStream";class JI{constructor(e,n,i,o,s,a,l,c){this.Fi=e,this.w_=i,this.S_=o,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Y0(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(ln(n.toString()),ln("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.b_===n&&this.W_(i,o)},i=>{e(()=>{const o=new fe(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{i(()=>this.G_(o))}),this.stream.onMessage(o=>{i(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return ye(dw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ye(dw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W4 extends JI{constructor(e,n,i,o,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Kz(this.serializer,e),i=function(s){if(!("targetChange"in s))return Ge.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ge.min():a.readTime?cn(a.readTime):Ge.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Qy(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Dp(c)?{documents:xI(s,c)}:{query:qm(s,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=pI(s,a.resumeToken);const u=Ky(s,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(Ge.min())>0){l.readTime=Ml(s,a.snapshotVersion.toTimestamp());const u=Ky(s,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const i=Qz(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Qy(this.serializer),n.removeTarget=e,this.k_(n)}}class L4 extends JI{constructor(e,n,i,o,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Gz(e.writeResults,e.commitTime),i=cn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Qy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Xu(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{}class V4 extends O4{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new fe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Gy(n,i),o,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ie.UNKNOWN,s.toString())})}Jo(e,n,i,o,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,Gy(n,i),o,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(ie.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class U4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ln(n),this._a=!1):ye("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="RemoteStore";class q4{constructor(e,n,i,o,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{i.enqueueAndForget(()=>C(this,null,function*(){us(this)&&(ye(aa,"Restarting streams for network reachability change."),yield function(c){return C(this,null,function*(){const u=Ae(c);u.Ia.add(4),yield rc(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield xd(u)})}(this))}))}),this.Aa=new U4(i,o)}}function xd(t){return C(this,null,function*(){if(us(t))for(const e of t.da)yield e(!0)})}function rc(t){return C(this,null,function*(){for(const e of t.da)yield e(!1)})}function Qm(t,e){const n=Ae(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Z0(n)?J0(n):sc(n).x_()&&X0(n,e))}function Ol(t,e){const n=Ae(t),i=sc(n);n.Ta.delete(e),i.x_()&&ZI(n,e),n.Ta.size===0&&(i.x_()?i.B_():us(n)&&n.Aa.set("Unknown"))}function X0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sc(t).H_(e)}function ZI(t,e){t.Ra.$e(e),sc(t).Y_(e)}function J0(t){t.Ra=new Lz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),sc(t).start(),t.Aa.aa()}function Z0(t){return us(t)&&!sc(t).M_()&&t.Ta.size>0}function us(t){return Ae(t).Ia.size===0}function eC(t){t.Ra=void 0}function H4(t){return C(this,null,function*(){t.Aa.set("Online")})}function $4(t){return C(this,null,function*(){t.Ta.forEach((e,n)=>{X0(t,e)})})}function K4(t,e){return C(this,null,function*(){eC(t),Z0(t)?(t.Aa.la(e),J0(t)):t.Aa.set("Unknown")})}function G4(t,e,n){return C(this,null,function*(){if(t.Aa.set("Online"),e instanceof hI&&e.state===2&&e.cause)try{yield function(o,s){return C(this,null,function*(){const a=s.cause;for(const l of s.targetIds)o.Ta.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.Ta.delete(l),o.Ra.removeTarget(l))})}(t,e)}catch(i){ye(aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Gp(t,i)}else if(e instanceof Qh?t.Ra.Ye(e):e instanceof dI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ge.min()))try{const i=yield VI(t.localStore);n.compareTo(i)>=0&&(yield function(s,a){const l=s.Ra.Pt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ta.get(u);h&&s.Ta.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(tn.EMPTY_BYTE_STRING,h.snapshotVersion)),ZI(s,c);const p=new qr(h.target,c,u,h.sequenceNumber);X0(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n))}catch(i){ye(aa,"Failed to raise snapshot:",i),yield Gp(t,i)}})}function Gp(t,e,n){return C(this,null,function*(){if(!ls(e))throw e;t.Ia.add(1),yield rc(t),t.Aa.set("Offline"),n||(n=()=>VI(t.localStore)),t.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){ye(aa,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield xd(t)}))})}function tC(t,e){return e().catch(n=>Gp(t,n,e))}function oc(t){return C(this,null,function*(){const e=Ae(t),n=ts(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ho;for(;Q4(e);)try{const o=yield A4(e.localStore,i);if(o===null){e.Pa.length===0&&n.B_();break}i=o.batchId,Y4(e,o)}catch(o){yield Gp(e,o)}nC(e)&&iC(e)})}function Q4(t){return us(t)&&t.Pa.length<10}function Y4(t,e){t.Pa.push(e);const n=ts(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function nC(t){return us(t)&&!ts(t).M_()&&t.Pa.length>0}function iC(t){ts(t).start()}function X4(t){return C(this,null,function*(){ts(t).na()})}function J4(t){return C(this,null,function*(){const e=ts(t);for(const n of t.Pa)e.X_(n.mutations)})}function Z4(t,e,n){return C(this,null,function*(){const i=t.Pa.shift(),o=D0.from(i,e,n);yield tC(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),yield oc(t)})}function e8(t,e){return C(this,null,function*(){e&&ts(t).Z_&&(yield function(i,o){return C(this,null,function*(){if(function(a){return cI(a)&&a!==ie.ABORTED}(o.code)){const s=i.Pa.shift();ts(i).N_(),yield tC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield oc(i)}})}(t,e)),nC(t)&&iC(t)})}function hw(t,e){return C(this,null,function*(){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),ye(aa,"RemoteStore received new credentials");const i=us(n);n.Ia.add(3),yield rc(n),i&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield xd(n)})}function nx(t,e){return C(this,null,function*(){const n=Ae(t);e?(n.Ia.delete(2),yield xd(n)):e||(n.Ia.add(2),yield rc(n),n.Aa.set("Unknown"))})}function sc(t){return t.Va||(t.Va=function(n,i,o){const s=Ae(n);return s.ia(),new W4(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Zo:H4.bind(null,t),e_:$4.bind(null,t),n_:K4.bind(null,t),J_:G4.bind(null,t)}),t.da.push(e=>C(this,null,function*(){e?(t.Va.N_(),Z0(t)?J0(t):t.Aa.set("Unknown")):(yield t.Va.stop(),eC(t))}))),t.Va}function ts(t){return t.ma||(t.ma=function(n,i,o){const s=Ae(n);return s.ia(),new L4(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:X4.bind(null,t),n_:e8.bind(null,t),ea:J4.bind(null,t),ta:Z4.bind(null,t)}),t.da.push(e=>C(this,null,function*(){e?(t.ma.N_(),yield oc(t)):(yield t.ma.stop(),t.Pa.length>0&&(ye(aa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,i,o,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=s,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,s){const a=Date.now()+i,l=new eb(e,n,a,o,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ac(t,e){if(ln("AsyncQueue",`${e}: ${t}`),ls(t))return new fe(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{static emptySet(e){return new qs(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Re.comparator(n.key,i.key):(n,i)=>Re.comparator(n.key,i.key),this.keyedMap=Qc(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new qs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.fa=new Wt(Re.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class la{constructor(e,n,i,o,s,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,o,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new la(e,n,qs.emptySet(n),a,i,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class n8{constructor(){this.queries=mw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const o=Ae(n),s=o.queries;o.queries=mw(),s.forEach((a,l)=>{for(const c of l.wa)c.onError(i)})})(this,new fe(ie.ABORTED,"Firestore shutting down"))}}function mw(){return new co(t=>G_(t),pd)}function tb(t,e){return C(this,null,function*(){const n=Ae(t);let i=3;const o=e.query;let s=n.queries.get(o);s?!s.Sa()&&e.ba()&&(i=2):(s=new t8,i=e.ba()?0:1);try{switch(i){case 0:s.ya=yield n.onListen(o,!0);break;case 1:s.ya=yield n.onListen(o,!1);break;case 2:yield n.onFirstRemoteStoreListen(o)}}catch(a){const l=ac(a,`Initialization of query '${Ua(e.query)}' failed`);return void e.onError(l)}n.queries.set(o,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&ib(n)})}function nb(t,e){return C(this,null,function*(){const n=Ae(t),i=e.query;let o=3;const s=n.queries.get(i);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?o=e.ba()?0:1:!s.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function i8(t,e){const n=Ae(t);let i=!1;for(const o of e){const s=o.query,a=n.queries.get(s);if(a){for(const l of a.wa)l.Ca(o)&&(i=!0);a.ya=o}}i&&ib(n)}function r8(t,e,n){const i=Ae(t),o=i.queries.get(e);if(o)for(const s of o.wa)s.onError(n);i.queries.delete(e)}function ib(t){t.Da.forEach(e=>{e.next()})}var ix,gw;(gw=ix||(ix={})).Fa="default",gw.Cache="cache";class rb{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new la(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ix.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.qa=e,this.byteLength=n}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.serializer=e}Qs(e){return wr(this.serializer,e)}$s(e){return e.metadata.exists?Um(this.serializer,e.document,!1):Vt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return cn(e)}}class ob{constructor(e,n){this.$a=e,this.serializer=n,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=oC(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const i=ct.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ga(e){const n=new Map,i=new fw(this.serializer);for(const o of e)if(o.metadata.queries){const s=i.Qs(o.metadata.name);for(const a of o.metadata.queries){const l=(n.get(a)||ot()).add(s);n.set(a,l)}}return n}za(e){return C(this,null,function*(){const n=yield B4(e,new fw(this.serializer),this.Ka,this.$a.id),i=this.Ga(this.documents);for(const o of this.Ua)yield P4(e,o,i.get(o.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:n}})}}function oC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.key=e}}class aC{constructor(e){this.key=e}}class lC{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ot(),this.mutatedKeys=ot(),this.Xa=Y_(e),this.eu=new qs(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new pw,o=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=o,l=!1;const c=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,u=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((h,p)=>{const g=o.get(h),y=md(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),j=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;g&&y?g.data.isEqual(y.data)?k!==j&&(i.track({type:3,doc:y}),T=!0):this.iu(g,y)||(i.track({type:2,doc:y}),T=!0,(c&&this.Xa(y,c)>0||u&&this.Xa(y,u)<0)&&(l=!0)):!g&&y?(i.track({type:0,doc:y}),T=!0):g&&!y&&(i.track({type:1,doc:g}),T=!0,(c||u)&&(l=!0)),T&&(y?(a=a.add(y),s=j?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{eu:a,ru:i,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,p)=>function(y,k){const j=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:T})}};return j(y)-j(k)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(i),o=o!=null&&o;const l=n&&!o?this.ou():[],c=this.Za.size===0&&this.current&&!o?1:0,u=c!==this.Ya;return this.Ya=c,a.length!==0||u?{snapshot:new la(this.query,e.eu,s,a,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new pw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ot(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new aC(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new sC(i))}),n}uu(e){this.Ha=e.qs,this.Za=ot();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return la.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ds="SyncEngine";class o8{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class s8{constructor(e){this.key=e,this.lu=!1}}class a8{constructor(e,n,i,o,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new co(l=>G_(l),pd),this.Tu=new Map,this.Iu=new Set,this.du=new Wt(Re.comparator),this.Eu=new Map,this.Au=new U0,this.Ru={},this.Vu=new Map,this.mu=sa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}function l8(t,e,n=!0){return C(this,null,function*(){const i=Ym(t);let o;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.cu()):o=yield cC(i,e,n,!0),o})}function c8(t,e){return C(this,null,function*(){const n=Ym(t);yield cC(n,e,!0,!1)})}function cC(t,e,n,i){return C(this,null,function*(){const o=yield Wl(t.localStore,Gn(e)),s=o.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=yield sb(t,e,s,a==="current",o.resumeToken)),t.isPrimaryClient&&n&&Qm(t.remoteStore,o),l})}function sb(t,e,n,i,o){return C(this,null,function*(){t.gu=(p,g,y)=>function(j,T,x,b){return C(this,null,function*(){let v=T.view.nu(x);v.Ds&&(v=yield Hp(j.localStore,T.query,!1).then(({documents:_})=>T.view.nu(_,v)));const z=b&&b.targetChanges.get(T.targetId),D=b&&b.targetMismatches.get(T.targetId)!=null,P=T.view.applyChanges(v,j.isPrimaryClient,z,D);return rx(j,T.targetId,P._u),P.snapshot})}(t,p,g,y);const s=yield Hp(t.localStore,e,!0),a=new lC(e,s.qs),l=a.nu(s.documents),c=yd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),u=a.applyChanges(l,t.isPrimaryClient,c);rx(t,n,u._u);const h=new o8(e,n,a);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot})}function u8(t,e,n){return C(this,null,function*(){const i=Ae(t),o=i.Pu.get(e),s=i.Tu.get(o.targetId);if(s.length>1)return i.Tu.set(o.targetId,s.filter(a=>!pd(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Ll(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Ol(i.remoteStore,o.targetId),Vl(i,o.targetId)}).catch(as))):(Vl(i,o.targetId),yield Ll(i.localStore,o.targetId,!0))})}function d8(t,e){return C(this,null,function*(){const n=Ae(t),i=n.Pu.get(e),o=n.Tu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ol(n.remoteStore,i.targetId))})}function h8(t,e,n){return C(this,null,function*(){const i=ub(t);try{const o=yield function(a,l){const c=Ae(a),u=bt.now(),h=l.reduce((y,k)=>y.add(k.key),ot());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let k=hi(),j=ot();return c.Os.getEntries(y,h).next(T=>{k=T,k.forEach((x,b)=>{b.isValidDocument()||(j=j.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,k)).next(T=>{p=T;const x=[];for(const b of l){const v=Dz(b,p.get(b.key).overlayedDocument);v!=null&&x.push(new uo(b.key,v,D_(v.value.mapValue),Yt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,x,l)}).next(T=>{g=T;const x=T.applyToLocalDocumentSet(p,j);return c.documentOverlayCache.saveOverlays(y,T.batchId,x)})}).then(()=>({batchId:g.batchId,changes:J_(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(a,l,c){let u=a.Ru[a.currentUser.toKey()];u||(u=new Wt(Xe)),u=u.insert(l,c),a.Ru[a.currentUser.toKey()]=u}(i,o.batchId,n),yield ho(i,o.changes),yield oc(i.remoteStore)}catch(o){const s=ac(o,"Failed to persist write");n.reject(s)}})}function uC(t,e){return C(this,null,function*(){const n=Ae(t);try{const i=yield E4(n.localStore,e);e.targetChanges.forEach((o,s)=>{const a=n.Eu.get(s);a&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?a.lu=!0:o.modifiedDocuments.size>0?Ue(a.lu,14607):o.removedDocuments.size>0&&(Ue(a.lu,42227),a.lu=!1))}),yield ho(n,i,e)}catch(i){yield as(i)}})}function yw(t,e,n){const i=Ae(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Pu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&o.push(l.snapshot)}),function(a,l){const c=Ae(a);c.onlineState=l;let u=!1;c.queries.forEach((h,p)=>{for(const g of p.wa)g.va(l)&&(u=!0)}),u&&ib(c)}(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function p8(t,e,n){return C(this,null,function*(){const i=Ae(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Eu.get(e),s=o&&o.key;if(s){let a=new Wt(Re.comparator);a=a.insert(s,Vt.newNoDocument(s,Ge.min()));const l=ot().add(s),c=new fd(Ge.min(),new Map,new Wt(Xe),a,l);yield uC(i,c),i.du=i.du.remove(s),i.Eu.delete(e),cb(i)}else yield Ll(i.localStore,e,!1).then(()=>Vl(i,e,n)).catch(as)})}function m8(t,e){return C(this,null,function*(){const n=Ae(t),i=e.batch.batchId;try{const o=yield R4(n.localStore,e);lb(n,i,null),ab(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ho(n,o)}catch(o){yield as(o)}})}function g8(t,e,n){return C(this,null,function*(){const i=Ae(t);try{const o=yield function(a,l){const c=Ae(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(Ue(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(i.localStore,e);lb(i,e,n),ab(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield ho(i,o)}catch(o){yield as(o)}})}function f8(t,e){return C(this,null,function*(){const n=Ae(t);us(n.remoteStore)||ye(ds,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(a){const l=Ae(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===Ho)return void e.resolve();const o=n.Vu.get(i)||[];o.push(e),n.Vu.set(i,o)}catch(i){const o=ac(i,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})}function ab(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function lb(t,e,n){const i=Ae(t);let o=i.Ru[i.currentUser.toKey()];if(o){const s=o.get(e);s&&(n?s.reject(n):s.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Vl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||dC(t,i)})}function dC(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ol(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),cb(t))}function rx(t,e,n){for(const i of n)i instanceof sC?(t.Au.addReference(i.key,e),y8(t,i)):i instanceof aC?(ye(ds,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||dC(t,i.key)):Ne(19791,{yu:i})}function y8(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(ye(ds,"New document in limbo: "+n),t.Iu.add(i),cb(t))}function cb(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Re(ct.fromString(e)),i=t.mu.next();t.Eu.set(i,new s8(n)),t.du=t.du.insert(n,i),Qm(t.remoteStore,new qr(Gn(tc(n.path)),i,"TargetPurposeLimboResolution",ui.ue))}}function ho(t,e,n){return C(this,null,function*(){const i=Ae(t),o=[],s=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((l,c)=>{a.push(i.gu(c,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){o.push(u);const p=K0.Es(c.targetId,u);s.push(p)}}))}),yield Promise.all(a),i.hu.J_(o),yield function(c,u){return C(this,null,function*(){const h=Ae(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Z.forEach(u,g=>Z.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Z.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ls(p))throw p;ye(G0,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const y=h.Fs.get(g),k=y.snapshotVersion,j=y.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(g,j)}}})}(i.localStore,s))})}function x8(t,e){return C(this,null,function*(){const n=Ae(t);if(!n.currentUser.isEqual(e)){ye(ds,"User change. New user:",e.toKey());const i=yield OI(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(l=>{l.forEach(c=>{c.reject(new fe(ie.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ho(n,i.Bs)}})}function b8(t,e){const n=Ae(t),i=n.Eu.get(e);if(i&&i.lu)return ot().add(i.key);{let o=ot();const s=n.Tu.get(e);if(!s)return o;for(const a of s){const l=n.Pu.get(a);o=o.unionWith(l.view.tu)}return o}}function v8(t,e){return C(this,null,function*(){const n=Ae(t),i=yield Hp(n.localStore,e.query,!0),o=e.view.uu(i);return n.isPrimaryClient&&rx(n,e.targetId,o._u),o})}function k8(t,e){return C(this,null,function*(){const n=Ae(t);return HI(n.localStore,e).then(i=>ho(n,i))})}function w8(t,e,n,i){return C(this,null,function*(){const o=Ae(t),s=yield function(l,c){const u=Ae(l),h=Ae(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Xn(p,c).next(g=>g?u.localDocuments.getDocuments(p,g):Z.resolve(null)))}(o.localStore,e);s!==null?(n==="pending"?yield oc(o.remoteStore):n==="acknowledged"||n==="rejected"?(lb(o,e,i||null),ab(o,e),function(l,c){Ae(Ae(l).mutationQueue).rr(c)}(o.localStore,e)):Ne(6720,"Unknown batchState",{wu:n}),yield ho(o,s)):ye(ds,"Cannot apply mutation batch with id: "+e)})}function S8(t,e){return C(this,null,function*(){const n=Ae(t);if(Ym(n),ub(n),e===!0&&n.fu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),o=yield xw(n,i.toArray());n.fu=!0,yield nx(n.remoteStore,!0);for(const s of o)Qm(n.remoteStore,s)}else if(e===!1&&n.fu!==!1){const i=[];let o=Promise.resolve();n.Tu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):o=o.then(()=>(Vl(n,a),Ll(n.localStore,a,!0))),Ol(n.remoteStore,a)}),yield o,yield xw(n,i),function(a){const l=Ae(a);l.Eu.forEach((c,u)=>{Ol(l.remoteStore,u)}),l.Au.jr(),l.Eu=new Map,l.du=new Wt(Re.comparator)}(n),n.fu=!1,yield nx(n.remoteStore,!1)}})}function xw(t,e,n){return C(this,null,function*(){const i=Ae(t),o=[],s=[];for(const a of e){let l;const c=i.Tu.get(a);if(c&&c.length!==0){l=yield Wl(i.localStore,Gn(c[0]));for(const u of c){const h=i.Pu.get(u),p=yield v8(i,h);p.snapshot&&s.push(p.snapshot)}}else{const u=yield qI(i.localStore,a);l=yield Wl(i.localStore,u),yield sb(i,hC(u),a,!1,l.resumeToken)}o.push(l)}return i.hu.J_(s),o})}function hC(t){return H_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function T8(t){return function(n){return Ae(Ae(n).persistence).Ps()}(Ae(t).localStore)}function j8(t,e,n,i){return C(this,null,function*(){const o=Ae(t);if(o.fu)return void ye(ds,"Ignoring unexpected query state notification.");const s=o.Tu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=yield HI(o.localStore,Q_(s[0])),l=fd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",tn.EMPTY_BYTE_STRING);yield ho(o,a,l);break}case"rejected":yield Ll(o.localStore,e,!0),Vl(o,e,i);break;default:Ne(64155,n)}})}function _8(t,e,n){return C(this,null,function*(){const i=Ym(t);if(i.fu){for(const o of e){if(i.Tu.has(o)&&i.sharedClientState.isActiveQueryTarget(o)){ye(ds,"Adding an already active target "+o);continue}const s=yield qI(i.localStore,o),a=yield Wl(i.localStore,s);yield sb(i,hC(s),a.targetId,!1,a.resumeToken),Qm(i.remoteStore,a)}for(const o of n)i.Tu.has(o)&&(yield Ll(i.localStore,o,!1).then(()=>{Ol(i.remoteStore,o),Vl(i,o)}).catch(as))}})}function Ym(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p8.bind(null,e),e.hu.J_=i8.bind(null,e.eventManager),e.hu.pu=r8.bind(null,e.eventManager),e}function ub(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g8.bind(null,e),e}function I8(t,e,n){const i=Ae(t);(function(s,a,l){return C(this,null,function*(){try{const c=yield a.getMetadata();if(yield function(y,k){const j=Ae(y),T=cn(k.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",x=>j.Ti.getBundleMetadata(x,k.id)).then(x=>!!x&&x.createTime.compareTo(T)>=0)}(s.localStore,c))return yield a.close(),l._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);l._updateProgress(oC(c));const u=new ob(c,a.serializer);let h=yield a.Su();for(;h;){const g=yield u.Wa(h);g&&l._updateProgress(g),h=yield a.Su()}const p=yield u.za(s.localStore);return yield ho(s,p.Ja,void 0),yield function(y,k){const j=Ae(y);return j.persistence.runTransaction("Save bundle","readwrite",T=>j.Ti.saveBundleMetadata(T,k))}(s.localStore,c),l._completeWith(p.progress),Promise.resolve(p.ja)}catch(c){return Yn(ds,`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(o=>{i.sharedClientState.notifyBundleLoaded(o)})}class Ul{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){this.serializer=ya(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),yield this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)})}Cu(e,n){return null}Fu(e,n){return null}vu(e){return LI(this.persistence,new WI,e.initialUser,this.serializer)}Du(e){return new q0(Gm.Vi,this.serializer)}bu(e){return new YI}terminate(){return C(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}Ul.provider={build:()=>new Ul};class db extends Ul{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ue(this.persistence.referenceDelegate instanceof qp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new PI(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new q0(i=>qp.Vi(i,n),this.serializer)}}class bd extends Ul{constructor(e,n,i){super(),this.Mu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){yield Fr(bd.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield ub(this.Mu.syncEngine),yield oc(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return LI(this.persistence,new WI,e.initialUser,this.serializer)}Cu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new PI(i,e.asyncQueue,n)}Fu(e,n){const i=new OF(n,this.persistence);return new LF(e.asyncQueue,i)}Du(e){const n=$0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new H0(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,XI(),Xh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new YI}}class Xm extends bd{constructor(e,n){super(e,n,!1),this.Mu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return C(this,null,function*(){yield Fr(Xm.prototype,this,"initialize").call(this,e);const n=this.Mu.syncEngine;this.sharedClientState instanceof pf&&(this.sharedClientState.syncEngine={Do:w8.bind(null,n),vo:j8.bind(null,n),Co:_8.bind(null,n),Ps:T8.bind(null,n),bo:k8.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.ji(i=>C(this,null,function*(){yield S8(this.Mu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}bu(e){const n=XI();if(!pf.C(n))throw new fe(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=$0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pf(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class ns{initialize(e,n){return C(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x8.bind(null,this.syncEngine),yield nx(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new n8}()}createDatastore(e){const n=ya(e.databaseInfo.databaseId),i=function(s){return new M4(s)}(e.databaseInfo);return function(s,a,l,c){return new V4(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,s,a,l){return new q4(i,o,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>yw(this.syncEngine,n,0),function(){return uw.C()?new uw:new F4}())}createSyncEngine(e,n){return function(o,s,a,l,c,u,h){const p=new a8(o,s,a,l,c,u);return h&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return C(this,null,function*(){var e,n;yield function(o){return C(this,null,function*(){const s=Ae(o);ye(aa,"RemoteStore shutting down."),s.Ia.add(5),yield rc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}}ns.provider={build:()=>new ns};function bw(t,e=10240){let n=0;return{read(){return C(this,null,function*(){if(n<t.byteLength){const o={value:t.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})},cancel(){return C(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ln("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n){this.Nu=e,this.serializer=n,this.metadata=new En,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(i=>{i&&i.Qa()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.qa)}`))},i=>this.metadata.reject(i))}close(){return this.Nu.cancel()}getMetadata(){return C(this,null,function*(){return this.metadata.promise})}Su(){return C(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return C(this,null,function*(){const e=yield this.ku();if(e===null)return null;const n=this.Bu.decode(e),i=Number(n);isNaN(i)&&this.qu(`length string (${n}) is not valid number`);const o=yield this.Qu(i);return new rC(JSON.parse(o),e.length+i)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return C(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Qu(e){return C(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");const n=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return C(this,null,function*(){const e=yield this.Nu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let i=this.Su();if(!i||!i.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(i==null?void 0:i.qa)}`);this.metadata=i;do i=this.Su(),i!==null&&this.elements.push(i);while(i!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.ku(),n=this.Qu(e);return new rC(JSON.parse(n),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new fe(ie.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return C(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new fe(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=yield function(o,s){return C(this,null,function*(){const a=Ae(o),l={documents:s.map(p=>Yu(a.serializer,p))},c=yield a.Jo("BatchGetDocuments",a.serializer.databaseId,ct.emptyPath(),l,s.length),u=new Map;c.forEach(p=>{const g=$z(a.serializer,p);u.set(g.key.toString(),g)});const h=[];return s.forEach(p=>{const g=u.get(p.toString());Ue(!!g,55234,{key:p}),h.push(g)}),h})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ic(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return C(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const o=Re.fromPath(i);this.mutations.push(new z0(o,this.precondition(o)))}),yield function(i,o){return C(this,null,function*(){const s=Ae(i),a={writes:o.map(l=>Xu(s.serializer,l))};yield s.Wo("Commit",s.serializer.databaseId,ct.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Wu:e.constructor.name});n=Ge.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new fe(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ge.min())?Yt.exists(!1):Yt.updateTime(n):Yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ge.min()))throw new fe(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(n)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,n,i,o,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=o,this.deferred=s,this.Gu=i.maxAttempts,this.F_=new Y0(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>C(this,null,function*(){const e=new E8(this.datastore),n=this.Ju(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(o=>{this.Hu(o)}))}).catch(i=>{this.Hu(i)})}))}Ju(e){try{const n=this.updateFunction(e);return!ud(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!cI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="FirestoreClient";class B8{constructor(e,n,i,o,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Cn.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,a=>C(this,null,function*(){ye(is,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(ye(is,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ac(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function gf(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),ye(is,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(o=>C(this,null,function*(){i.isEqual(o)||(yield OI(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener(()=>{Yn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ye("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Yn("Terminating Firestore due to IndexedDb database deletion failed",o)})}),t._offlineComponents=e})}function vw(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress();const n=yield hb(t);ye(is,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>hw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>hw(e.remoteStore,o)),t._onlineComponents=e})}function hb(t){return C(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(is,"Using user provided OfflineComponentProvider");try{yield gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Yn("Error using user provided cache. Falling back to memory cache: "+n),yield gf(t,new Ul)}}else ye(is,"Using default OfflineComponentProvider"),yield gf(t,new db(void 0));return t._offlineComponents})}function Zm(t){return C(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(is,"Using user provided OnlineComponentProvider"),yield vw(t,t._uninitializedComponentsProvider._online)):(ye(is,"Using default OnlineComponentProvider"),yield vw(t,new ns))),t._onlineComponents})}function pC(t){return hb(t).then(e=>e.persistence)}function lc(t){return hb(t).then(e=>e.localStore)}function mC(t){return Zm(t).then(e=>e.remoteStore)}function pb(t){return Zm(t).then(e=>e.syncEngine)}function gC(t){return Zm(t).then(e=>e.datastore)}function ql(t){return C(this,null,function*(){const e=yield Zm(t),n=e.eventManager;return n.onListen=l8.bind(null,e.syncEngine),n.onUnlisten=u8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=d8.bind(null,e.syncEngine),n})}function P8(t){return t.asyncQueue.enqueue(()=>C(this,null,function*(){const e=yield pC(t),n=yield mC(t);return e.setNetworkEnabled(!0),function(o){const s=Ae(o);return s.Ia.delete(0),xd(s)}(n)}))}function F8(t){return t.asyncQueue.enqueue(()=>C(this,null,function*(){const e=yield pC(t),n=yield mC(t);return e.setNetworkEnabled(!1),function(o){return C(this,null,function*(){const s=Ae(o);s.Ia.add(0),yield rc(s),s.Aa.set("Offline")})}(n)}))}function z8(t,e){const n=new En;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(o,s,a){return C(this,null,function*(){try{const l=yield function(u,h){const p=Ae(u);return p.persistence.runTransaction("read document","readonly",g=>p.localDocuments.getDocument(g,h))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new fe(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=ac(l,`Failed to get document '${s} from cache`);a.reject(c)}})}(yield lc(t),e,n)})),n.promise}function fC(t,e,n={}){const i=new En;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,a,l,c,u){const h=new Jm({next:g=>{h.Ou(),a.enqueueAndForget(()=>nb(s,p));const y=g.docs.has(l);!y&&g.fromCache?u.reject(new fe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?u.reject(new fe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new rb(tc(l.path),h,{includeMetadataChanges:!0,ka:!0});return tb(s,p)}(yield ql(t),t.asyncQueue,e,n,i)})),i.promise}function N8(t,e){const n=new En;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(o,s,a){return C(this,null,function*(){try{const l=yield Hp(o,s,!0),c=new lC(s,l.qs),u=c.nu(l.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(l){const c=ac(l,`Failed to execute query '${s} against cache`);a.reject(c)}})}(yield lc(t),e,n)})),n.promise}function yC(t,e,n={}){const i=new En;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,a,l,c,u){const h=new Jm({next:g=>{h.Ou(),a.enqueueAndForget(()=>nb(s,p)),g.fromCache&&c.source==="server"?u.reject(new fe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new rb(l,h,{includeMetadataChanges:!0,ka:!0});return tb(s,p)}(yield ql(t),t.asyncQueue,e,n,i)})),i.promise}function D8(t,e,n){const i=new En;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){try{const o=yield gC(t);i.resolve(function(a,l,c){return C(this,null,function*(){var u;const h=Ae(a),{request:p,ft:g,parent:y}=bI(h.serializer,$_(l),c);h.connection.Qo||delete p.parent;const k=(yield h.Jo("RunAggregationQuery",h.serializer.databaseId,y,p,1)).filter(T=>!!T.result);Ue(k.length===1,64727);const j=(u=k[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(j).reduce((T,x)=>(T[g[x]]=j[x],T),{})})}(o,e,n))}catch(o){i.reject(o)}})),i.promise}function M8(t,e){const n=new Jm(e);return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(o,s){Ae(o).Da.add(s),s.next()}(yield ql(t),n)})),()=>{n.Ou(),t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(o,s){Ae(o).Da.delete(s)}(yield ql(t),n)}))}}function W8(t,e,n,i){const o=function(a,l){let c;return c=typeof a=="string"?k0().encode(a):a,function(h,p){return new C8(h,p)}(function(h,p){if(h instanceof Uint8Array)return bw(h,p);if(h instanceof ArrayBuffer)return bw(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),l)}(n,ya(e));t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){I8(yield pb(t),o,i)}))}function L8(t,e){return t.asyncQueue.enqueue(()=>C(this,null,function*(){return function(i,o){const s=Ae(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ti.getNamedQuery(a,o))}(yield lc(t),e)}))}function xC(t,e){return function(i,o){return new R8(i,o)}(t,e)}function O8(t,e){return t.asyncQueue.enqueue(()=>C(this,null,function*(){return function(i,o){return C(this,null,function*(){const s=Ae(i),a=s.indexManager,l=[];return s.persistence.runTransaction("Configure indexes","readwrite",c=>a.getFieldIndexes(c).next(u=>function(p,g,y,k,j){p=[...p],g=[...g],p.sort(y),g.sort(y);const T=p.length,x=g.length;let b=0,v=0;for(;b<x&&v<T;){const z=y(p[v],g[b]);z<0?j(p[v++]):z>0?k(g[b++]):(b++,v++)}for(;b<x;)k(g[b++]);for(;v<T;)j(p[v++])}(u,o,NF,h=>{l.push(a.addFieldIndex(c,h))},h=>{l.push(a.deleteFieldIndex(c,h))})).next(()=>Z.waitFor(l)))})}(yield lc(t),e)}))}function V8(t,e){return t.asyncQueue.enqueue(()=>C(this,null,function*(){return function(i,o){Ae(i).Cs.Rs=o}(yield lc(t),e)}))}function U8(t){return t.asyncQueue.enqueue(()=>C(this,null,function*(){return function(n){const i=Ae(n),o=i.indexManager;return i.persistence.runTransaction("Delete All Indexes","readwrite",s=>o.deleteAllFieldIndexes(s))}(yield lc(t))}))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firestore.googleapis.com",ww=!0;class Sw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vC,this.ssl=ww}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ww;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BI)throw new fe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new s_;switch(i.type){case"firstParty":return new EF(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=kw.get(n);i&&(ye("ComponentProvider","Removing Datastore"),kw.delete(n),i.terminate())}(this),Promise.resolve()}}function kC(t,e,n,i={}){var o;t=ut(t,vd);const s=ao(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(Am(`https://${c}`),f0("Firestore",!0)),a.host!==vC&&a.host!==c&&Yn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:s,emulatorOptions:i});if(!nr(u,l)&&(t._setSettings(u),i.mockUserToken)){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=Cn.MOCK_USER;else{h=V2(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new fe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Cn(g)}t._authCredentials=new IF(new o_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tn(this.firestore,e,this._query)}}class Et{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(fa(n,Et._jsonSchema))return new Et(e,i||null,new Re(ct.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:gn("string",Et._jsonSchemaVersion),referencePath:gn("string")};class Ji extends Tn{constructor(e,n,i){super(e,n,tc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Re(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function xn(t,e,...n){if(t=kt(t),w0("collection","path",e),t instanceof vd){const i=ct.fromString(e,...n);return d1(i),new Ji(t,null,i)}{if(!(t instanceof Et||t instanceof Ji))throw new fe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ct.fromString(e,...n));return d1(i),new Ji(t.firestore,null,i)}}function q8(t,e){if(t=ut(t,vd),w0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fe(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Tn(t,null,function(i){return new lo(ct.emptyPath(),i)}(e))}function kn(t,e,...n){if(t=kt(t),arguments.length===1&&(e=Bm.newId()),w0("doc","path",e),t instanceof vd){const i=ct.fromString(e,...n);return u1(i),new Et(t,null,new Re(i))}{if(!(t instanceof Et||t instanceof Ji))throw new fe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ct.fromString(e,...n));return u1(i),new Et(t.firestore,t instanceof Ji?t.converter:null,new Re(i))}}function H8(t,e){return t=kt(t),e=kt(e),(t instanceof Et||t instanceof Ji)&&(e instanceof Et||e instanceof Ji)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function mb(t,e){return t=kt(t),e=kt(e),t instanceof Tn&&e instanceof Tn&&t.firestore===e.firestore&&pd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="AsyncQueue";class jw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Y0(this,"async_queue_retry"),this.oc=()=>{const i=Xh();i&&ye(Tw,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new En;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ls(e))throw e;ye(Tw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,ln("INTERNAL UNHANDLED ERROR: ",_w(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=eb.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(o),o}ac(){this.tc&&Ne(47125,{hc:_w(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function _w(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const s of i)if(s in o&&typeof o[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wC{constructor(){this._progressObserver={},this._taskCompletionResolver=new En,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=-1;class Ft extends vd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new jw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jw(e),this._firestoreClient=void 0,yield e}})}}function K8(t,e,n){n||(n=$u);const i=Zl(t,"firestore");if(i.isInitialized(n)){const o=i.getImmediate({identifier:n}),s=i.getOptions(n);if(nr(s,e))return o;throw new fe(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BI)throw new fe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ao(e.host)&&Am(e.host),i.initialize({options:e,instanceIdentifier:n})}function kd(t,e){const n=typeof t=="object"?t:b0(),i=typeof t=="string"?t:e||$u,o=Zl(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const s=W2("firestore");s&&kC(o,...s)}return o}function Xt(t){if(t._terminated)throw new fe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SC(t),t._firestoreClient}function SC(t){var e,n,i;const o=t._freezeSettings(),s=function(l,c,u,h){return new fz(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,bC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new B8(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function G8(t,e){Yn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return TC(t,ns.provider,{build:i=>new bd(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function Q8(t){return C(this,null,function*(){Yn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();TC(t,ns.provider,{build:n=>new Xm(n,e.cacheSizeBytes)})})}function TC(t,e,n){if((t=ut(t,Ft))._firestoreClient||t._terminated)throw new fe(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new fe(ie.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},SC(t)}function Y8(t){if(t._initialized&&!t._terminated)throw new fe(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new En;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{yield function(i){return C(this,null,function*(){if(!kr.C())return Promise.resolve();const o=i+MI;yield kr.delete(o)})}($0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function X8(t){return function(n){const i=new En;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return f8(yield pb(n),i)})),i.promise}(Xt(t=ut(t,Ft)))}function J8(t){return P8(Xt(t=ut(t,Ft)))}function Z8(t){return F8(Xt(t=ut(t,Ft)))}function eN(t){return uF(t.app,"firestore",t._databaseId.database),t._delete()}function ox(t,e){const n=Xt(t=ut(t,Ft)),i=new wC;return W8(n,t._databaseId,e,i),i}function jC(t,e){return L8(Xt(t=ut(t,Ft)),e).then(n=>n?new Tn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class _C{constructor(e,n,i){this._userDataWriter=n,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(tn.fromBase64String(e))}catch(n){throw new fe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new li(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fa(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:gn("string",li._jsonSchemaVersion),bytes:gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function tN(){return new hs(zy)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(fa(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:gn("string",Zi._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==o[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fa(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Wi(e.vectorValues);throw new fe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:gn("string",Wi._jsonSchemaVersion),vectorValues:gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^__.*__$/;class iN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new nc(e,this.data,n,this.fieldTransforms)}}class IC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new uo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:t})}}class eg{constructor(e,n,i,o,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Qp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CC(this.Ec)&&nN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class rN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ya(e)}Dc(e,n,i,o=!1){return new eg({Ec:e,methodName:n,bc:i,path:Ut.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xa(t){const e=t._freezeSettings(),n=ya(t._databaseId);return new rN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tg(t,e,n,i,o,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,o);kb("Data must be an object, but it was:",a,i);const l=AC(i,a);let c,u;if(s.merge)c=new di(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=Ju(e,p,n);if(!a.contains(g))throw new fe(ie.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);PC(h,g)||h.push(g)}c=new di(h),u=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=a.fieldTransforms;return new iN(new zn(l),c,u)}class wd extends ps{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function RC(t,e,n){return new eg({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gb extends ps{_toFieldTransform(e){return new gd(e.path,new Nl)}isEqual(e){return e instanceof gb}}class fb extends ps{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RC(this,e,!0),i=this.vc.map(s=>ba(s,n)),o=new na(i);return new gd(e.path,o)}isEqual(e){return e instanceof fb&&nr(this.vc,e.vc)}}class yb extends ps{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RC(this,e,!0),i=this.vc.map(s=>ba(s,n)),o=new ia(i);return new gd(e.path,o)}isEqual(e){return e instanceof yb&&nr(this.vc,e.vc)}}class xb extends ps{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new Dl(e.serializer,tI(e.serializer,this.Cc));return new gd(e.path,n)}isEqual(e){return e instanceof xb&&this.Cc===e.Cc}}function bb(t,e,n,i){const o=t.Dc(1,e,n);kb("Data must be an object, but it was:",o,i);const s=[],a=zn.empty();cs(i,(c,u)=>{const h=ng(e,c,n);u=kt(u);const p=o.gc(h);if(u instanceof wd)s.push(h);else{const g=ba(u,p);g!=null&&(s.push(h),a.set(h,g))}});const l=new di(s);return new IC(a,l,o.fieldTransforms)}function vb(t,e,n,i,o,s){const a=t.Dc(1,e,n),l=[Ju(e,i,n)],c=[o];if(s.length%2!=0)throw new fe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Ju(e,s[g])),c.push(s[g+1]);const u=[],h=zn.empty();for(let g=l.length-1;g>=0;--g)if(!PC(u,l[g])){const y=l[g];let k=c[g];k=kt(k);const j=a.gc(y);if(k instanceof wd)u.push(y);else{const T=ba(k,j);T!=null&&(u.push(y),h.set(y,T))}}const p=new di(u);return new IC(h,p,a.fieldTransforms)}function EC(t,e,n,i=!1){return ba(n,t.Dc(i?4:3,e))}function ba(t,e){if(BC(t=kt(t)))return kb("Unsupported field value:",e,t),AC(t,e);if(t instanceof ps)return function(i,o){if(!CC(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,o){const s=[];let a=0;for(const l of i){let c=ba(l,o.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=bt.fromDate(i);return{timestampValue:Ml(o.serializer,s)}}if(i instanceof bt){const s=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ml(o.serializer,s)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof li)return{bytesValue:pI(o.serializer,i._byteString)};if(i instanceof Et){const s=o.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw o.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:L0(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Wi)return function(a,l){return{mapValue:{fields:{[R0]:{stringValue:E0},[Pl]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return F0(l.serializer,u)})}}}}}}(i,o);throw o.wc(`Unsupported field value: ${Pm(i)}`)}(t,e)}function AC(t,e){const n={};return C_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(i,o)=>{const s=ba(o,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function BC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof Zi||t instanceof li||t instanceof Et||t instanceof ps||t instanceof Wi)}function kb(t,e,n){if(!BC(n)||!c_(n)){const i=Pm(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Ju(t,e,n){if((e=kt(e))instanceof hs)return e._internalPath;if(typeof e=="string")return ng(t,e);throw Qp("Field path arguments must be of type string or ",t,!1,void 0,n)}const oN=new RegExp("[~\\*/\\[\\]]");function ng(t,e,n){if(e.search(oN)>=0)throw Qp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hs(...e.split("."))._internalPath}catch(i){throw Qp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qp(t,e,n,i,o){const s=i&&!i.isEmpty(),a=o!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${o}`),c+=")"),new fe(ie.INVALID_ARGUMENT,l+t+c)}function PC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,i,o,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sN extends Zu{data(){return super.data()}}function ig(t,e){return typeof e=="string"?ng(t,e):e instanceof hs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wb{}class cc extends wb{}function ei(t,e,...n){let i=[];e instanceof wb&&i.push(e),i=i.concat(n),function(s){const a=s.filter(c=>c instanceof va).length,l=s.filter(c=>c instanceof uc).length;if(a>1||a>0&&l>0)throw new fe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)t=o._apply(t);return t}class uc extends cc{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new uc(e,n,i)}_apply(e){const n=this._parse(e);return NC(e._query,n),new Tn(e.firestore,e.converter,$y(e._query,n))}_parse(e){const n=xa(e.firestore);return function(s,a,l,c,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new fe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cw(p,h);const k=[];for(const j of p)k.push(Iw(c,s,j));g={arrayValue:{values:k}}}else g=Iw(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cw(p,h),g=EC(l,a,p,h==="in"||h==="not-in");return yt.create(u,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bn(t,e,n){const i=e,o=ig("where",t);return uc._create(o,i,n)}class va extends wb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new va(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Rt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,s){let a=o;const l=s.getFlattenedFilters();for(const c of l)NC(a,c),a=$y(a,c)}(e._query,n),new Tn(e.firestore,e.converter,$y(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function aN(...t){return t.forEach(e=>DC("or",e)),va._create("or",t)}function lN(...t){return t.forEach(e=>DC("and",e)),va._create("and",t)}class rg extends cc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rg(e,n)}_apply(e){const n=function(o,s,a){if(o.startAt!==null)throw new fe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(s,a)}(e._query,this._field,this._direction);return new Tn(e.firestore,e.converter,function(o,s){const a=o.explicitOrderBy.concat([s]);return new lo(o.path,o.collectionGroup,a,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Yp(t,e="asc"){const n=e,i=ig("orderBy",t);return rg._create(i,n)}class Sd extends cc{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Sd(e,n,i)}_apply(e){return new Tn(e.firestore,e.converter,Wp(e._query,this._limit,this._limitType))}}function cN(t){return u_("limit",t),Sd._create("limit",t,"F")}function uN(t){return u_("limitToLast",t),Sd._create("limitToLast",t,"L")}class Td extends cc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Td(e,n,i)}_apply(e){const n=zC(e,this.type,this._docOrFields,this._inclusive);return new Tn(e.firestore,e.converter,function(o,s){return new lo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,s,o.endAt)}(e._query,n))}}function dN(...t){return Td._create("startAt",t,!0)}function hN(...t){return Td._create("startAfter",t,!1)}class jd extends cc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new jd(e,n,i)}_apply(e){const n=zC(e,this.type,this._docOrFields,this._inclusive);return new Tn(e.firestore,e.converter,function(o,s){return new lo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,s)}(e._query,n))}}function pN(...t){return jd._create("endBefore",t,!1)}function mN(...t){return jd._create("endAt",t,!0)}function zC(t,e,n,i){if(n[0]=kt(n[0]),n[0]instanceof Zu)return function(s,a,l,c,u){if(!c)throw new fe(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const p of dl(s))if(p.field.isKeyField())h.push(ea(a,c.key));else{const g=c.data.field(p.field);if(Mm(g))throw new fe(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const y=p.field.canonicalString();throw new fe(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new es(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const o=xa(t.firestore);return function(a,l,c,u,h,p){const g=a.explicitOrderBy;if(h.length>g.length)throw new fe(ie.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let k=0;k<h.length;k++){const j=h[k];if(g[k].field.isKeyField()){if(typeof j!="string")throw new fe(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof j}`);if(!B0(a)&&j.indexOf("/")!==-1)throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${j}' contains a slash.`);const T=a.path.child(ct.fromString(j));if(!Re.isDocumentKey(T))throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const x=new Re(T);y.push(ea(l,x))}else{const T=EC(c,u,j);y.push(T)}}return new es(y,p)}(t._query,t.firestore._databaseId,o,e,n,i)}}function Iw(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new fe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B0(e)&&n.indexOf("/")!==-1)throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ct.fromString(n));if(!Re.isDocumentKey(i))throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ea(t,new Re(i))}if(n instanceof Et)return ea(t,n._key);throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pm(n)}.`)}function Cw(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NC(t,e){const n=function(o,s){for(const a of o)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function DC(t,e){if(!(e instanceof uc||e instanceof va))throw new fe(ie.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Sb{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return cs(e,(o,s)=>{i[o]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,o;const s=(o=(i=(n=e.fields)===null||n===void 0?void 0:n[Pl].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(a=>Gt(a.doubleValue));return new Wi(s)}convertGeoPoint(e){return new Zi(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Wm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const n=no(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ct.fromString(e);Ue(SI(i),9688,{name:e});const o=new Xo(i.get(1),i.get(3)),s=new Re(i.popFirst(5));return o.isEqual(n)||ln(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Tb extends Sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){return new Hl("sum",Ju("sum",t))}function fN(t){return new Hl("avg",Ju("average",t))}function MC(){return new Hl("count")}function yN(t,e){var n,i;return t instanceof Hl&&e instanceof Hl&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((i=e._internalFieldPath)===null||i===void 0?void 0:i.canonicalString())}function xN(t,e){return mb(t.query,e.query)&&nr(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="NOT SUPPORTED";class Hr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fi extends Zu{constructor(e,n,i,o,s,a){super(e,n,i,o,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ig("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function bN(t,e,n){if(fa(e,fi._jsonSchema)){if(e.bundle===WC)throw new fe(ie.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const i=ya(t._databaseId),o=xC(e.bundle,i),s=o.Ku(),a=new ob(o.getMetadata(),i);for(const h of s)a.Wa(h);const l=a.documents;if(l.length!==1)throw new fe(ie.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${l.length} documents.`);const c=Um(i,l[0].document),u=new Re(ct.fromString(e.bundleName));return new fi(t,new Tb(t),u,c,new Hr(!1,!1),n||null)}}fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",fi._jsonSchema={type:gn("string",fi._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class fu extends fi{data(e={}){return super.data(e)}}class yi{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Hr(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new fu(this._firestore,this._userDataWriter,i.key,i,new Hr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,s){if(o._snapshot.oldDocs.isEmpty()){let a=0;return o._snapshot.docChanges.map(l=>{const c=new fu(o._firestore,o._userDataWriter,l.doc.key,l.doc,new Hr(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new fu(o._firestore,o._userDataWriter,l.doc.key,l.doc,new Hr(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:kN(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),o.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vN(t,e,n){if(fa(e,yi._jsonSchema)){if(e.bundle===WC)throw new fe(ie.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const i=ya(t._databaseId),o=xC(e.bundle,i),s=o.Ku(),a=new ob(o.getMetadata(),i);for(const g of s)a.Wa(g);if(a.queries.length!==1)throw new fe(ie.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${a.queries.length} queries.`);const l=Hm(a.queries[0].bundledQuery),c=a.documents;let u=new qs;c.map(g=>{const y=Um(i,g.document);u=u.add(y)});const h=la.fromInitialDocuments(l,u,ot(),!1,!1),p=new Tn(t,n||null,l);return new yi(t,new Tb(t),p,h)}}function kN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}function wN(t,e){return t instanceof fi&&e instanceof fi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof yi&&e instanceof yi&&t._firestore===e._firestore&&mb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){t=ut(t,Et);const e=ut(t.firestore,Ft);return fC(Xt(e),t._key).then(n=>jb(e,t,n))}yi._jsonSchemaVersion="firestore/querySnapshot/1.0",yi._jsonSchema={type:gn("string",yi._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class ms extends Sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function SN(t){t=ut(t,Et);const e=ut(t.firestore,Ft),n=Xt(e),i=new ms(e);return z8(n,t._key).then(o=>new fi(e,i,t._key,o,new Hr(o!==null&&o.hasLocalMutations,!0),t.converter))}function TN(t){t=ut(t,Et);const e=ut(t.firestore,Ft);return fC(Xt(e),t._key,{source:"server"}).then(n=>jb(e,t,n))}function Ii(t){t=ut(t,Tn);const e=ut(t.firestore,Ft),n=Xt(e),i=new ms(e);return FC(t._query),yC(n,t._query).then(o=>new yi(e,i,t,o))}function jN(t){t=ut(t,Tn);const e=ut(t.firestore,Ft),n=Xt(e),i=new ms(e);return N8(n,t._query).then(o=>new yi(e,i,t,o))}function _N(t){t=ut(t,Tn);const e=ut(t.firestore,Ft),n=Xt(e),i=new ms(e);return yC(n,t._query,{source:"server"}).then(o=>new yi(e,i,t,o))}function _d(t,e,n){t=ut(t,Et);const i=ut(t.firestore,Ft),o=og(t.converter,e,n);return dc(i,[tg(xa(i),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Yt.none())])}function Xp(t,e,n,...i){t=ut(t,Et);const o=ut(t.firestore,Ft),s=xa(o);let a;return a=typeof(e=kt(e))=="string"||e instanceof hs?vb(s,"updateDoc",t._key,e,n,i):bb(s,"updateDoc",t._key,e),dc(o,[a.toMutation(t._key,Yt.exists(!0))])}function Jp(t){return dc(ut(t.firestore,Ft),[new ic(t._key,Yt.none())])}function $o(t,e){const n=ut(t.firestore,Ft),i=kn(t),o=og(t.converter,e);return dc(n,[tg(xa(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,Yt.exists(!1))]).then(()=>i)}function ed(t,...e){var n,i,o;t=kt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||hl(e[a])||(s=e[a++]);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(hl(e[a])){const p=e[a];e[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[a+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[a+2]=(o=p.complete)===null||o===void 0?void 0:o.bind(p)}let c,u,h;if(t instanceof Et)u=ut(t.firestore,Ft),h=tc(t._key.path),c={next:p=>{e[a]&&e[a](jb(u,t,p))},error:e[a+1],complete:e[a+2]};else{const p=ut(t,Tn);u=ut(p.firestore,Ft),h=p._query;const g=new ms(u);c={next:y=>{e[a]&&e[a](new yi(u,g,p,y))},error:e[a+1],complete:e[a+2]},FC(t._query)}return function(g,y,k,j){const T=new Jm(j),x=new rb(y,T,k);return g.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return tb(yield ql(g),x)})),()=>{T.Ou(),g.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return nb(yield ql(g),x)}))}}(Xt(u),h,l,c)}function IN(t,e,...n){const i=kt(t),o=function(c){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const p of h){if(!(p in c)){u.error=`snapshotJson missing required field: ${p}`;break}const g=c[p];if(typeof g!="string"){u.error=`snapshotJson field '${p}' must be a string.`;break}if(g.length===0){u.error=`snapshotJson field '${p}' cannot be an empty string.`;break}p==="bundle"?u.bundle=g:p==="bundleName"?u.bundleName=g:p==="bundleSource"&&(u.bundleSource=g)}return u}(e);if(o.error)throw new fe(ie.INVALID_ARGUMENT,o.error);let s,a=0;if(typeof n[a]!="object"||hl(n[a])||(s=n[a++]),o.bundleSource==="QuerySnapshot"){let l=null;if(typeof n[a]=="object"&&hl(n[a])){const c=n[a++];l={next:c.next,error:c.error,complete:c.complete}}else l={next:n[a++],error:n[a++],complete:n[a++]};return function(u,h,p,g,y){let k,j=!1;return ox(u,h.bundle).then(()=>jC(u,h.bundleName)).then(x=>{x&&!j&&(y&&x.withConverter(y),k=ed(x,p||{},g))}).catch(x=>(g.error&&g.error(x),()=>{})),()=>{j||(j=!0,k&&k())}}(i,o,s,l,n[a])}if(o.bundleSource==="DocumentSnapshot"){let l=null;if(typeof n[a]=="object"&&hl(n[a])){const c=n[a++];l={next:c.next,error:c.error,complete:c.complete}}else l={next:n[a++],error:n[a++],complete:n[a++]};return function(u,h,p,g,y){let k,j=!1;return ox(u,h.bundle).then(()=>{if(!j){const x=new Et(u,y||null,Re.fromPath(h.bundleName));k=ed(x,p||{},g)}}).catch(x=>(g.error&&g.error(x),()=>{})),()=>{j||(j=!0,k&&k())}}(i,o,s,l,n[a])}throw new fe(ie.INVALID_ARGUMENT,`unsupported bundle source: ${o.bundleSource}`)}function CN(t,e){return M8(Xt(t=ut(t,Ft)),hl(e)?e:{next:e})}function dc(t,e){return function(i,o){const s=new En;return i.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return h8(yield pb(i),o,s)})),s.promise}(Xt(t),e)}function jb(t,e,n){const i=n.docs.get(e._key),o=new ms(t);return new fi(t,o,e._key,i,new Hr(n.hasPendingWrites,n.fromCache),e.converter)}function RN(t){return LC(t,{count:MC()})}function LC(t,e){const n=ut(t.firestore,Ft),i=Xt(n),o=I_(e,(s,a)=>new lI(a,s.aggregateType,s._internalFieldPath));return D8(i,t._query,o).then(s=>function(l,c,u){const h=new ms(l);return new _C(c,h,u)}(n,t,s))}class EN{constructor(e){this.kind="memory",this._onlineComponentProvider=ns.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new db(void 0)}}toJSON(){return{kind:this.kind}}}class AN{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=OC(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class BN{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Ul.provider}toJSON(){return{kind:this.kind}}}class PN{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new db(e)}}toJSON(){return{kind:this.kind}}}function FN(){return new BN}function zN(t){return new PN(t==null?void 0:t.cacheSizeBytes)}function NN(t){return new EN(t)}function DN(t){return new AN(t)}class MN{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ns.provider,this._offlineComponentProvider={build:n=>new bd(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class WN{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ns.provider,this._offlineComponentProvider={build:n=>new Xm(n,e==null?void 0:e.cacheSizeBytes)}}}function OC(t){return new MN(t==null?void 0:t.forceOwnership)}function LN(){return new WN}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xa(e)}set(e,n,i){this._verifyNotCommitted();const o=Po(e,this._firestore),s=og(o.converter,n,i),a=tg(this._dataReader,"WriteBatch.set",o._key,s,o.converter!==null,i);return this._mutations.push(a.toMutation(o._key,Yt.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const s=Po(e,this._firestore);let a;return a=typeof(n=kt(n))=="string"||n instanceof hs?vb(this._dataReader,"WriteBatch.update",s._key,n,i,o):bb(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Po(e,this._firestore);return this._mutations=this._mutations.concat(new ic(n._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Po(t,e){if((t=kt(t)).firestore!==e)throw new fe(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=xa(e)}get(e){const n=Po(e,this._firestore),i=new Tb(this._firestore);return this._transaction.lookup([n._key]).then(o=>{if(!o||o.length!==1)return Ne(24041);const s=o[0];if(s.isFoundDocument())return new Zu(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Zu(this._firestore,i,n._key,null,n.converter);throw Ne(18433,{doc:s})})}set(e,n,i){const o=Po(e,this._firestore),s=og(o.converter,n,i),a=tg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(e,n,i,...o){const s=Po(e,this._firestore);let a;return a=typeof(n=kt(n))=="string"||n instanceof hs?vb(this._dataReader,"Transaction.update",s._key,n,i,o):bb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=Po(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC extends VN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Po(e,this._firestore),i=new ms(this._firestore);return super.get(e).then(o=>new fi(this._firestore,i,n._key,o._document,new Hr(!1,!1),n.converter))}}function UN(t,e,n){t=ut(t,Ft);const i=Object.assign(Object.assign({},ON),n);return function(s){if(s.maxAttempts<1)throw new fe(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const c=new En;return s.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){const u=yield gC(s);new A8(s.asyncQueue,u,l,a,c).zu()})),c.promise}(Xt(t),o=>e(new UC(t,o)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return new wd("deleteField")}function _b(){return new gb("serverTimestamp")}function HN(...t){return new fb("arrayUnion",t)}function $N(...t){return new yb("arrayRemove",t)}function KN(t){return new xb("increment",t)}function GN(t){return new Wi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){return Xt(t=ut(t,Ft)),new VC(t,e=>dc(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e){const n=Xt(t=ut(t,Ft));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Yn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(s){const a=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(h){throw new fe(ie.INVALID_ARGUMENT,"Failed to parse JSON: "+(h==null?void 0:h.message))}}(s):s,l=[];if(Array.isArray(a.indexes))for(const c of a.indexes){const u=Rw(c,"collectionGroup"),h=[];if(Array.isArray(c.fields))for(const p of c.fields){const g=ng("setIndexConfiguration",Rw(p,"fieldPath"));p.arrayConfig==="CONTAINS"?h.push(new Vs(g,2)):p.order==="ASCENDING"?h.push(new Vs(g,0)):p.order==="DESCENDING"&&h.push(new Vs(g,1))}l.push(new Il(Il.UNKNOWN_ID,u,h,Cl.empty()))}return l}(e);return O8(n,i)}function Rw(t,e){if(typeof t[e]!="string")throw new fe(ie.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function XN(t){var e;t=ut(t,Ft);const n=Ew.get(t);if(n)return n;if(((e=Xt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const i=new qC(t);return Ew.set(t,i),i}function JN(t){HC(t,!0)}function ZN(t){HC(t,!1)}function eD(t){U8(Xt(t._firestore)).then(e=>ye("deleting all persistent cache indexes succeeded")).catch(e=>Yn("deleting all persistent cache indexes failed",e))}function HC(t,e){V8(Xt(t._firestore),e).then(n=>ye(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Yn(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const Ew=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){var e;const n=(e=Xt(ut(t.firestore,Ft))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:qm(n,Gn(t._query)).Vt}function nD(t,e){var n;const i=I_(e,(s,a)=>new lI(a,s.aggregateType,s._internalFieldPath)),o=(n=Xt(ut(t.firestore,Ft))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return o===void 0?null:bI(o,$_(t._query),i,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Ib.instance.onExistenceFilterMismatch(e)}}class Ib{constructor(){this.Fc=new Map}static get instance(){return Sh||(Sh=new Ib,function(n){if(Lp)throw new Error("a TestingHooksSpi instance is already set");Lp=n}(Sh)),Sh}ct(e){this.Fc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),i=this.Fc;return i.set(n,e),()=>i.delete(n)}}let Sh=null;(function(e,n=!0){(function(o){ec=o})(ga),Zs(new Qo("firestore",(i,{instanceIdentifier:o,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Ft(new CF(i.getProvider("auth-internal")),new AF(a,i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new fe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(u.options.projectId,h)}(a,o),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),vr(a1,l1,e),vr(a1,l1,"esm2017")})();const Zp=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Sb,AggregateField:Hl,AggregateQuerySnapshot:_C,Bytes:li,CACHE_SIZE_UNLIMITED:$8,CollectionReference:Ji,DocumentReference:Et,DocumentSnapshot:fi,FieldPath:hs,FieldValue:ps,Firestore:Ft,FirestoreError:fe,GeoPoint:Zi,LoadBundleTask:wC,PersistentCacheIndexManager:qC,Query:Tn,QueryCompositeFilterConstraint:va,QueryConstraint:cc,QueryDocumentSnapshot:fu,QueryEndAtConstraint:jd,QueryFieldFilterConstraint:uc,QueryLimitConstraint:Sd,QueryOrderByConstraint:rg,QuerySnapshot:yi,QueryStartAtConstraint:Td,SnapshotMetadata:Hr,Timestamp:bt,Transaction:UC,VectorValue:Wi,WriteBatch:VC,_AutoId:Bm,_ByteString:tn,_DatabaseId:Xo,_DocumentKey:Re,_EmptyAppCheckTokenProvider:BF,_EmptyAuthCredentialsProvider:s_,_FieldPath:Ut,_TestingHooks:iD,_cast:ut,_debugAssert:_F,_internalAggregationQueryToProtoRunAggregationQueryRequest:nD,_internalQueryToProtoQueryTarget:tD,_isBase64Available:mz,_logWarn:Yn,_validateIsNotUsedTogether:l_,addDoc:$o,aggregateFieldEqual:yN,aggregateQuerySnapshotEqual:xN,and:lN,arrayRemove:$N,arrayUnion:HN,average:fN,clearIndexedDbPersistence:Y8,collection:xn,collectionGroup:q8,connectFirestoreEmulator:kC,count:MC,deleteAllPersistentCacheIndexes:eD,deleteDoc:Jp,deleteField:qN,disableNetwork:Z8,disablePersistentCacheIndexAutoCreation:ZN,doc:kn,documentId:tN,documentSnapshotFromJSON:bN,enableIndexedDbPersistence:G8,enableMultiTabIndexedDbPersistence:Q8,enableNetwork:J8,enablePersistentCacheIndexAutoCreation:JN,endAt:mN,endBefore:pN,ensureFirestoreConfigured:Xt,executeWrite:dc,getAggregateFromServer:LC,getCountFromServer:RN,getDoc:ro,getDocFromCache:SN,getDocFromServer:TN,getDocs:Ii,getDocsFromCache:jN,getDocsFromServer:_N,getFirestore:kd,getPersistentCacheIndexManager:XN,increment:KN,initializeFirestore:K8,limit:cN,limitToLast:uN,loadBundle:ox,memoryEagerGarbageCollector:FN,memoryLocalCache:NN,memoryLruGarbageCollector:zN,namedQuery:jC,onSnapshot:ed,onSnapshotResume:IN,onSnapshotsInSync:CN,or:aN,orderBy:Yp,persistentLocalCache:DN,persistentMultipleTabManager:LN,persistentSingleTabManager:OC,query:ei,queryEqual:mb,querySnapshotFromJSON:vN,refEqual:H8,runTransaction:UN,serverTimestamp:_b,setDoc:_d,setIndexConfiguration:YN,setLogLevel:jF,snapshotEqual:wN,startAfter:hN,startAt:dN,sum:gN,terminate:eN,updateDoc:Xp,vector:GN,waitForPendingWrites:X8,where:bn,writeBatch:QN},Symbol.toStringTag,{value:"Module"}));function Cb(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function $C(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KC=$C,GC=new ld("auth","Firebase",$C());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=new y0("@firebase/auth");function rD(t,...e){em.logLevel<=ft.WARN&&em.warn(`Auth (${ga}): ${t}`,...e)}function Jh(t,...e){em.logLevel<=ft.ERROR&&em.error(`Auth (${ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t,...e){throw Eb(t,...e)}function er(t,...e){return Eb(t,...e)}function Rb(t,e,n){const i=Object.assign(Object.assign({},KC()),{[e]:n});return new ld("auth","Firebase",i).create(e,{appName:t.name})}function Qr(t){return Rb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oD(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Vi(t,"argument-error"),Rb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Eb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return GC.create(t,...e)}function Je(t,e,...n){if(!t)throw Eb(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jh(e),new Error(e)}function oo(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sD(){return Aw()==="http:"||Aw()==="https:"}function Aw(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sD()||i5()||"connection"in navigator)?navigator.onLine:!0}function lD(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.shortDelay=e,this.longDelay=n,oo(n>e,"Short delay should be less than long delay!"),this.isMobile=t5()||r5()}get(){return aD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t,e){oo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dD=new Id(3e4,6e4);function po(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Rr(s,a,l,c){return C(this,arguments,function*(t,e,n,i,o={}){return YC(t,o,()=>C(this,null,function*(){let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=cd(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);const y=Object.assign({method:e,headers:g},u);return n5()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&ao(t.emulatorConfig.host)&&(y.credentials="include"),QC.fetch()(yield XC(t,t.config.apiHost,n,p),y)}))})}function YC(t,e,n){return C(this,null,function*(){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},cD),e);try{const o=new pD(t),s=yield Promise.race([n(),o.promise]);o.clearNetworkTimeout();const a=yield s.json();if("needConfirmation"in a)throw Th(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Th(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Th(t,"user-disabled",a);const h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rb(t,h,u);Vi(t,h)}}catch(o){if(o instanceof Cr)throw o;Vi(t,"network-request-failed",{message:String(o)})}})}function Cd(s,a,l,c){return C(this,arguments,function*(t,e,n,i,o={}){const u=yield Rr(t,e,n,i,o);return"mfaPendingCredential"in u&&Vi(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function XC(t,e,n,i){return C(this,null,function*(){const o=`${e}${n}?${i}`,s=t,a=s.config.emulator?Ab(t.config,o):`${t.config.apiScheme}://${o}`;return uD.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a})}function hD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(er(this.auth,"network-request-failed")),dD.get())})}}function Th(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=er(t,e,i);return o.customData._tokenResponse=n,o}function Bw(t){return t!==void 0&&t.enterprise!==void 0}class mD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function gD(t,e){return C(this,null,function*(){return Rr(t,"GET","/v2/recaptchaConfig",po(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){return C(this,null,function*(){return Rr(t,"POST","/v1/accounts:delete",e)})}function tm(t,e){return C(this,null,function*(){return Rr(t,"POST","/v1/accounts:lookup",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function JC(t,e=!1){return C(this,null,function*(){const n=kt(t),i=yield n.getIdToken(e),o=Bb(i);Je(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const s=typeof o.firebase=="object"?o.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:o,token:i,authTime:yu(ff(o.auth_time)),issuedAtTime:yu(ff(o.iat)),expirationTime:yu(ff(o.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}})}function ff(t){return Number(t)*1e3}function Bb(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=N2(n);return o?JSON.parse(o):(Jh("Failed to decode base64 JWT payload"),null)}catch(o){return Jh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Pw(t){const e=Bb(t);return Je(e,"internal-error"),Je(typeof e.exp!="undefined","internal-error"),Je(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,e,n=!1){return C(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof Cr&&yD(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function yD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),n)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){return C(this,null,function*(){var e;const n=t.auth,i=yield t.getIdToken(),o=yield $l(t,tm(n,{idToken:i}));Je(o==null?void 0:o.users.length,n,"internal-error");const s=o.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eR(s.providerUserInfo):[],l=bD(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ax(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function ZC(t){return C(this,null,function*(){const e=kt(t);yield nm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function bD(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function eR(t){return t.map(e=>{var{providerId:n}=e,i=Cb(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t,e){return C(this,null,function*(){const n=yield YC(t,{},()=>C(this,null,function*(){const i=cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:s}=t.config,a=yield XC(t,o,"/v1/token",`key=${s}`),l=yield t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:i};return t.emulatorConfig&&ao(t.emulatorConfig.host)&&(c.credentials="include"),QC.fetch()(a,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kD(t,e){return C(this,null,function*(){return Rr(t,"POST","/v2/accounts:revokeToken",po(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken!="undefined","internal-error"),Je(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Pw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const n=Pw(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return C(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return C(this,null,function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield vD(e,n);this.updateTokensAndExpiration(i,o,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:s}=n,a=new pl;return i&&(Je(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),o&&(Je(typeof o=="string","internal-error",{appName:e}),a.accessToken=o),s&&(Je(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,e){Je(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Qi{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,s=Cb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ax(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){const n=yield $l(this,this.stsTokenManager.getToken(this.auth,e));return Je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return JC(this,e)}reload(){return ZC(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return C(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield nm(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(ai(this.auth.app))return Promise.reject(Qr(this.auth));const e=yield this.getIdToken();return yield $l(this,fD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,s,a,l,c,u,h;const p=(i=n.displayName)!==null&&i!==void 0?i:void 0,g=(o=n.email)!==null&&o!==void 0?o:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,k=(a=n.photoURL)!==null&&a!==void 0?a:void 0,j=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:v,emailVerified:z,isAnonymous:D,providerData:P,stsTokenManager:_}=n;Je(v&&_,e,"internal-error");const S=pl.fromJSON(this.name,_);Je(typeof v=="string",e,"internal-error"),ko(p,e.name),ko(g,e.name),Je(typeof z=="boolean",e,"internal-error"),Je(typeof D=="boolean",e,"internal-error"),ko(y,e.name),ko(k,e.name),ko(j,e.name),ko(T,e.name),ko(x,e.name),ko(b,e.name);const R=new Qi({uid:v,auth:e,email:g,emailVerified:z,displayName:p,isAnonymous:D,photoURL:k,phoneNumber:y,tenantId:j,stsTokenManager:S,createdAt:x,lastLoginAt:b});return P&&Array.isArray(P)&&(R.providerData=P.map(E=>Object.assign({},E))),T&&(R._redirectEventId=T),R}static _fromIdTokenResponse(e,n,i=!1){return C(this,null,function*(){const o=new pl;o.updateFromServerResponse(n);const s=new Qi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return yield nm(s),s})}static _fromGetAccountInfoResponse(e,n,i){return C(this,null,function*(){const o=n.users[0];Je(o.localId!==void 0,"internal-error");const s=o.providerUserInfo!==void 0?eR(o.providerUserInfo):[],a=!(o.email&&o.passwordHash)&&!(s!=null&&s.length),l=new pl;l.updateFromIdToken(i);const c=new Qi({uid:o.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ax(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Map;function Kr(t){oo(t instanceof Function,"Expected a class definition");let e=Fw.get(t);return e?(oo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(e,n){return C(this,null,function*(){this.storage[e]=n})}_get(e){return C(this,null,function*(){const n=this.storage[e];return n===void 0?null:n})}_remove(e){return C(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}tR.type="NONE";const lx=tR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e,n){return`firebase:${t}:${e}:${n}`}class ml{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:s}=this.auth;this.fullUserKey=Zh(this.userKey,o.apiKey,s),this.fullPersistenceKey=Zh("persistence",o.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){const e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=yield tm(this.auth,{idToken:e}).catch(()=>{});return n?Qi._fromGetAccountInfoResponse(this.auth,n,e):null}return Qi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;const n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return C(this,null,function*(){if(!n.length)return new ml(Kr(lx),e,i);const o=(yield Promise.all(n.map(u=>C(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u);let s=o[0]||Kr(lx);const a=Zh(i,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=yield u._get(a);if(h){let p;if(typeof h=="string"){const g=yield tm(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Qi._fromGetAccountInfoResponse(e,g,h)}else p=Qi._fromJSON(e,h);u!==s&&(l=p),s=u;break}}catch(h){}const c=o.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ml(s,e,i):(s=c[0],l&&(yield s._set(a,l.toJSON())),yield Promise.all(n.map(u=>C(this,null,function*(){if(u!==s)try{yield u._remove(a)}catch(h){}}))),new ml(s,e,i))})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aR(e))return"Blackberry";if(lR(e))return"Webos";if(iR(e))return"Safari";if((e.includes("chrome/")||rR(e))&&!e.includes("edge/"))return"Chrome";if(sR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function nR(t=Sn()){return/firefox\//i.test(t)}function iR(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rR(t=Sn()){return/crios\//i.test(t)}function oR(t=Sn()){return/iemobile/i.test(t)}function sR(t=Sn()){return/android/i.test(t)}function aR(t=Sn()){return/blackberry/i.test(t)}function lR(t=Sn()){return/webos/i.test(t)}function Pb(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wD(t=Sn()){var e;return Pb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SD(){return o5()&&document.documentMode===10}function cR(t=Sn()){return Pb(t)||sR(t)||lR(t)||aR(t)||/windows phone/i.test(t)||oR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t,e=[]){let n;switch(t){case"Browser":n=zw(Sn());break;case"Worker":n=`${zw(Sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(n){return C(this,arguments,function*(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",po(t,e))})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=6;class ID{constructor(e){var n,i,o,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:_D,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsLowercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nw(this),this.idTokenSubscription=new Nw(this),this.beforeStateQueue=new TD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kr(n)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var i,o,s;if(!this._deleted&&(this.persistenceManager=yield ml.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(a){}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;const e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{const n=yield tm(this,{idToken:e}),i=yield Qi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var n;if(ai(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=yield this.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=o==null?void 0:o._redirectEventId,c=yield this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(o=c.user,s=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(o)}catch(a){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)})}tryRedirectSignIn(e){return C(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(i){yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield nm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=lD()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(ai(this.app))return Promise.reject(Qr(this));const n=e?kt(e):null;return n&&Je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return C(this,null,function*(){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return ai(this.app)?Promise.reject(Qr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ai(this.app)?Promise.reject(Qr(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Kr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){const e=yield jD(this),n=new ID(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ld("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){const n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield kD(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return C(this,null,function*(){const i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){const n=e&&Kr(e)||this._popupRedirectResolver;Je(n,this,"argument-error"),this.redirectPersistenceManager=yield ml.create(this,[Kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,o);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);const o=yield this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n})}_getAppCheckToken(){return C(this,null,function*(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n!=null&&n.error&&rD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token})}}function Er(t){return kt(t)}class Nw{constructor(e){this.auth=e,this.observer=null,this.addObserver=d5(n=>this.observer=n)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RD(t){sg=t}function dR(t){return sg.loadJS(t)}function ED(){return sg.recaptchaEnterpriseScript}function AD(){return sg.gapiScript}function BD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class PD{constructor(){this.enterprise=new FD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const zD="recaptcha-enterprise",hR="NO_RECAPTCHA";class ND{constructor(e){this.type=zD,this.auth=Er(e)}verify(e="verify",n=!1){return C(this,null,function*(){function i(s){return C(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,l)=>C(this,null,function*(){gD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new mD(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})}))})}function o(s,a,l){const c=window.grecaptcha;Bw(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(hR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PD().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&Bw(window.grecaptcha))o(l,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ED();c.length!==0&&(c+=l),dR(c).then(()=>{o(l,s,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})})}}function Dw(t,e,n,i=!1,o=!1){return C(this,null,function*(){const s=new ND(t);let a;if(o)a=hR;else try{a=yield s.verify(n)}catch(c){a=yield s.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})}function im(t,e,n,i,o){return C(this,null,function*(){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=yield Dw(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(a=>C(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=yield Dw(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)}))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){const n=Zl(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),s=n.getOptions();if(nr(s,e!=null?e:{}))return o;Vi(o,"already-initialized")}return n.initialize({options:e})}function DD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function mR(t,e,n){const i=Er(t);Je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,s=gR(e),{host:a,port:l}=MD(e),c=l===null?"":`:${l}`,u={url:`${s}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Je(nr(u,i.config.emulator)&&nr(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,ao(a)?(Am(`${s}//${a}${c}`),f0("Auth",!0)):WD()}function gR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MD(t){const e=gR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const s=o[1];return{host:s,port:Mw(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:Mw(a)}}}function Mw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}function LD(t,e){return C(this,null,function*(){return Rr(t,"POST","/v1/accounts:signUp",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){return C(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithPassword",po(t,e))})}function VD(t,e){return C(this,null,function*(){return Rr(t,"POST","/v1/accounts:sendOobCode",po(t,e))})}function UD(t,e){return C(this,null,function*(){return VD(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e){return C(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))})}function HD(t,e){return C(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends ag{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Kl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return C(this,null,function*(){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",OD);case"emailLink":return qD(e,{email:this._email,oobCode:this._password});default:Vi(e,"internal-error")}})}_linkToIdToken(e,n){return C(this,null,function*(){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,i,"signUpPassword",LD);case"emailLink":return HD(e,{idToken:n,email:this._email,oobCode:this._password});default:Vi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t,e){return C(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithIdp",po(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="http://localhost";class _r extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,s=Cb(n,["providerId","signInMethod"]);if(!i||!o)return null;const a=new _r(i,o);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return gl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,gl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gl(e,n)}buildRequest(){const e={requestUri:$D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GD(t){const e=$c(Kc(t)).link,n=e?$c(Kc(e)).deep_link_id:null,i=$c(Kc(t)).deep_link_id;return(i?$c(Kc(i)).link:null)||i||n||e||t}class lg{constructor(e){var n,i,o,s,a,l;const c=$c(Kc(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(i=c.oobCode)!==null&&i!==void 0?i:null,p=KD((o=c.mode)!==null&&o!==void 0?o:null);Je(u&&h&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=GD(e);try{return new lg(n)}catch(i){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=lg.parseLink(n);return Je(i,"argument-error"),Kl._fromEmailAndCode(e,i.code,i.tenantId)}}ka.PROVIDER_ID="password";ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Fb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fl extends hc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Je("providerId"in n&&"signInMethod"in n,"argument-error"),_r._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Je(e.idToken||e.accessToken,"argument-error"),_r._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a,providerId:l}=e;if(!i&&!o&&!n&&!s||!l)return null;try{return new fl(l)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch(c){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends hc{constructor(){super("facebook.com")}static credential(e){return _r._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch(n){return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _r._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mr.credential(n,i)}catch(o){return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends hc{constructor(){super("github.com")}static credential(e){return _r._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch(n){return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends hc{constructor(){super("twitter.com")}static credential(e,n){return _r._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Or.credential(n,i)}catch(o){return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t,e){return C(this,null,function*(){return Cd(t,"POST","/v1/accounts:signUp",po(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,o=!1){return C(this,null,function*(){const s=yield Qi._fromIdTokenResponse(e,i,o),a=Ww(i);return new ca({user:s,providerId:a,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return C(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);const o=Ww(i);return new ca({user:e,providerId:o,_tokenResponse:i,operationType:n})})}}function Ww(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends Cr{constructor(e,n,i,o){var s;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,rm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new rm(e,n,i,o)}}function fR(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rm._fromErrorAndOperation(t,s,e,i):s})}function YD(t,e,n=!1){return C(this,null,function*(){const i=yield $l(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ca._forOperation(t,"link",i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t,e,n=!1){return C(this,null,function*(){const{auth:i}=t;if(ai(i.app))return Promise.reject(Qr(i));const o="reauthenticate";try{const s=yield $l(t,fR(i,o,e,t),n);Je(s.idToken,i,"internal-error");const a=Bb(s.idToken);Je(a,i,"internal-error");const{sub:l}=a;return Je(t.uid===l,i,"user-mismatch"),ca._forOperation(t,o,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vi(i,"user-mismatch"),s}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t,e,n=!1){return C(this,null,function*(){if(ai(t.app))return Promise.reject(Qr(t));const i="signIn",o=yield fR(t,i,e),s=yield ca._fromIdTokenResponse(t,i,o);return n||(yield t._updateCurrentUser(s.user)),s})}function xR(t,e){return C(this,null,function*(){return yR(Er(t),e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){return C(this,null,function*(){const e=Er(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function vR(t,e,n){return C(this,null,function*(){const i=Er(t);yield im(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",UD)})}function zb(t,e,n){return C(this,null,function*(){if(ai(t.app))return Promise.reject(Qr(t));const i=Er(t),a=yield im(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&bR(t),c}),l=yield ca._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(l.user),l})}function kR(t,e,n){return ai(t.app)?Promise.reject(Qr(t)):xR(kt(t),ka.credential(e,n)).catch(i=>C(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&bR(t),i}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t,e){return C(this,null,function*(){return Rr(t,"POST","/v1/accounts:update",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(i,o){return C(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=kt(t),l={idToken:yield s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=yield $l(s,JD(s.auth,l));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;const u=s.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=s.displayName,u.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function wR(t,e,n,i){return kt(t).onIdTokenChanged(e,n,i)}function SR(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function ri(t,e,n,i){return kt(t).onAuthStateChanged(e,n,i)}function Dn(t){return kt(t).signOut()}const sm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sm,"1"),this.storage.removeItem(sm),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1e3,e3=10;class yl extends TR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);SD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,e3):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ZD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return C(this,null,function*(){yield Fr(yl.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return C(this,null,function*(){const n=yield Fr(yl.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return C(this,null,function*(){yield Fr(yl.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}yl.type="LOCAL";const jR=yl;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends TR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_R.type="SESSION";const Nb=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){return Promise.all(t.map(e=>C(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new cg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}handleEvent(e){return C(this,null,function*(){const n=e,{eventId:i,eventType:o,data:s}=n.data,a=this.handlersMap[o];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const l=Array.from(a).map(u=>C(this,null,function*(){return u(n.origin,s)})),c=yield t3(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:c})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return C(this,null,function*(){const o=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=Db("",20);o.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:o,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),o.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[o.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function i3(t){Sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){return typeof Sr().WorkerGlobalScope!="undefined"&&typeof Sr().importScripts=="function"}function r3(){return C(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})}function o3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s3(){return IR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebaseLocalStorageDb",a3=1,am="firebaseLocalStorage",RR="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ug(t,e){return t.transaction([am],e?"readwrite":"readonly").objectStore(am)}function l3(){const t=indexedDB.deleteDatabase(CR);return new Rd(t).toPromise()}function cx(){const t=indexedDB.open(CR,a3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(am,{keyPath:RR})}catch(o){n(o)}}),t.addEventListener("success",()=>C(this,null,function*(){const i=t.result;i.objectStoreNames.contains(am)?e(i):(i.close(),yield l3(),e(yield cx()))}))})}function Lw(t,e,n){return C(this,null,function*(){const i=ug(t,!0).put({[RR]:e,value:n});return new Rd(i).toPromise()})}function c3(t,e){return C(this,null,function*(){const n=ug(t,!1).get(e),i=yield new Rd(n).toPromise();return i===void 0?null:i.value})}function Ow(t,e){const n=ug(t,!0).delete(e);return new Rd(n).toPromise()}const u3=800,d3=3;class ER{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield cx(),this.db)})}_withRetries(e){return C(this,null,function*(){let n=0;for(;;)try{const i=yield this._openDb();return yield e(i)}catch(i){if(n++>d3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return IR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=cg._getInstance(s3()),this.receiver._subscribe("keyChanged",(e,n)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var e,n;if(this.activeServiceWorker=yield r3(),!this.activeServiceWorker)return;this.sender=new n3(this.activeServiceWorker);const i=yield this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||o3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;const e=yield cx();return yield Lw(e,sm,"1"),yield Ow(e,sm),!0}catch(e){}return!1})}_withPendingWrite(e){return C(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>Lw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return C(this,null,function*(){const n=yield this._withRetries(i=>c3(i,e));return this.localCache[e]=n,n})}_remove(e){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(n=>Ow(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return C(this,null,function*(){const e=yield this._withRetries(o=>{const s=ug(o,!1).getAll();return new Rd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:s}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n})}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),u3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ER.type="LOCAL";const AR=ER;new Id(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t,e){return e?Kr(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function h3(t){return yR(t.auth,new Mb(t),t.bypassAuthState)}function p3(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),XD(n,new Mb(t),t.bypassAuthState)}function m3(t){return C(this,null,function*(){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),YD(n,new Mb(t),t.bypassAuthState)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,i,o,s=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return C(this,null,function*(){const{urlResponse:n,sessionId:i,postBody:o,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h3;case"linkViaPopup":case"linkViaRedirect":return m3;case"reauthViaPopup":case"reauthViaRedirect":return p3;default:Vi(this.auth,"internal-error")}}resolve(e){oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=new Id(2e3,1e4);function ep(t,e,n){return C(this,null,function*(){if(ai(t.app))return Promise.reject(er(t,"operation-not-supported-in-this-environment"));const i=Er(t);oD(t,e,Fb);const o=BR(i,n);return new Ds(i,"signInViaPopup",e,o).executeNotNull()})}class Ds extends PR{constructor(e,n,i,o,s){super(e,n,o,s),this.provider=i,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}executeNotNull(){return C(this,null,function*(){const e=yield this.execute();return Je(e,this.auth,"internal-error"),e})}onExecution(){return C(this,null,function*(){oo(this.filter.length===1,"Popup operations only handle one event");const e=Db();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g3.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="pendingRedirect",tp=new Map;class xu extends PR{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return C(this,null,function*(){let e=tp.get(this.auth._key());if(!e){try{const i=(yield y3(this.resolver,this.auth))?yield Fr(xu.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}tp.set(this.auth._key(),e)}return this.bypassAuthState||tp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return Fr(xu.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Fr(xu.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}}function y3(t,e){return C(this,null,function*(){const n=v3(e),i=b3(t);if(!(yield i._isAvailable()))return!1;const o=(yield i._get(n))==="true";return yield i._remove(n),o})}function x3(t,e){tp.set(t._key(),e)}function b3(t){return Kr(t._redirectPersistence)}function v3(t){return Zh(f3,t.config.apiKey,t.name)}function k3(t,e){return C(this,null,function*(){return yield Er(t)._initializationPromise,FR(t,e,!1)})}function FR(t,e,n=!1){return C(this,null,function*(){if(ai(t.app))return Promise.reject(Qr(t));const i=Er(t),o=BR(i,e),a=yield new xu(i,o,n).execute();return a&&!n&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=10*60*1e3;class S3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!zR(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(er(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vw(e))}saveEventToCache(e){this.cachedEventUids.add(Vw(e)),this.lastProcessedEventTime=Date.now()}}function Vw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function T3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(n){return C(this,arguments,function*(t,e={}){return Rr(t,"GET","/v1/projects",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I3=/^https?/;function C3(t){return C(this,null,function*(){if(t.config.emulator)return;const{authorizedDomains:e}=yield j3(t);for(const n of e)try{if(R3(n))return}catch(i){}Vi(t,"unauthorized-domain")})}function R3(t){const e=sx(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!I3.test(n))return!1;if(_3.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new Id(3e4,6e4);function Uw(){const t=Sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function A3(t){return new Promise((e,n)=>{var i,o,s;function a(){Uw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uw(),n(er(t,"network-request-failed"))},timeout:E3.get()})}if(!((o=(i=Sr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((s=Sr().gapi)===null||s===void 0)&&s.load)a();else{const l=BD("iframefcb");return Sr()[l]=()=>{gapi.load?a():n(er(t,"network-request-failed"))},dR(`${AD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw np=null,e})}let np=null;function B3(t){return np=np||A3(t),np}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=new Id(5e3,15e3),F3="__/auth/iframe",z3="emulator/auth/iframe",N3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M3(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ab(e,z3):`https://${t.config.authDomain}/${F3}`,i={apiKey:e.apiKey,appName:t.name,v:ga},o=D3.get(t.config.apiHost);o&&(i.eid=o);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${cd(i).slice(1)}`}function W3(t){return C(this,null,function*(){const e=yield B3(t),n=Sr().gapi;return Je(n,t,"internal-error"),e.open({where:document.body,url:M3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N3,dontclear:!0},i=>new Promise((o,s)=>C(this,null,function*(){yield i.restyle({setHideOnLeave:!1});const a=er(t,"network-request-failed"),l=Sr().setTimeout(()=>{s(a)},P3.get());function c(){Sr().clearTimeout(l),o(i)}i.ping(c).then(c,()=>{s(a)})})))})}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O3=500,V3=600,U3="_blank",q3="http://localhost";class qw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function H3(t,e,n,i=O3,o=V3){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},L3),{width:i.toString(),height:o.toString(),top:s,left:a}),u=Sn().toLowerCase();n&&(l=rR(u)?U3:n),nR(u)&&(e=e||q3,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[y,k])=>`${g}${y}=${k},`,"");if(wD(u)&&l!=="_self")return $3(e||"",l),new qw(null);const p=window.open(e||"",l,h);Je(p,t,"popup-blocked");try{p.focus()}catch(g){}return new qw(p)}function $3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="__/auth/handler",G3="emulator/auth/handler",Q3=encodeURIComponent("fac");function Hw(t,e,n,i,o,s){return C(this,null,function*(){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ga,eventId:o};if(e instanceof Fb){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",u5(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof hc){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=yield t._getAppCheckToken(),u=c?`#${Q3}=${encodeURIComponent(c)}`:"";return`${Y3(t)}?${cd(l).slice(1)}${u}`})}function Y3({config:t}){return t.emulator?Ab(t,G3):`https://${t.authDomain}/${K3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="webStorageSupport";class X3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nb,this._completeRedirectFn=FR,this._overrideRedirectResult=x3}_openPopup(e,n,i,o){return C(this,null,function*(){var s;oo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield Hw(e,n,i,sx(),o);return H3(e,a,Db())})}_openRedirect(e,n,i,o){return C(this,null,function*(){yield this._originValidation(e);const s=yield Hw(e,n,i,sx(),o);return i3(s),new Promise(()=>{})})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:s}=this.eventManagers[n];return o?Promise.resolve(o):(oo(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return C(this,null,function*(){const n=yield W3(e),i=new S3(e);return n.register("authEvent",o=>(Je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yf,{type:yf},o=>{var s;const a=(s=o==null?void 0:o[0])===null||s===void 0?void 0:s[yf];a!==void 0&&n(!!a),Vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=C3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cR()||iR()||Pb()}}const NR=X3;var $w="@firebase/auth",Kw="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eM(t){Zs(new Qo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Je(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uR(t)},u=new CD(i,o,s,c);return DD(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Zs(new Qo("auth-internal",e=>{const n=Er(e.getProvider("auth").getImmediate());return(i=>new J3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr($w,Kw,Z3(t)),vr($w,Kw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=5*60,nM=O2("authIdTokenMaxAge")||tM;let Gw=null;const iM=t=>e=>C(Zn,null,function*(){const n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>nM)return;const o=n==null?void 0:n.token;Gw!==o&&(Gw=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});function Ze(t=b0()){const e=Zl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pR(t,{popupRedirectResolver:NR,persistence:[AR,jR,Nb]}),i=O2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=iM(s.toString());SR(n,a,()=>a(n.currentUser)),wR(n,l=>a(l))}}const o=M2("auth");return o&&mR(n,`http://${o}`),n}function rM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const s=er("internal-error");s.customData=o,n(s)},i.type="text/javascript",i.charset="UTF-8",rM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eM("Browser");const Qw=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:lg,AuthCredential:ag,EmailAuthCredential:Kl,EmailAuthProvider:ka,FacebookAuthProvider:Wr,GithubAuthProvider:Lr,GoogleAuthProvider:mr,OAuthCredential:_r,OAuthProvider:fl,TwitterAuthProvider:Or,beforeAuthStateChanged:SR,browserLocalPersistence:jR,browserPopupRedirectResolver:NR,browserSessionPersistence:Nb,connectAuthEmulator:mR,createUserWithEmailAndPassword:zb,getAuth:Ze,getIdTokenResult:JC,getRedirectResult:k3,inMemoryPersistence:lx,indexedDBLocalPersistence:AR,initializeAuth:pR,onAuthStateChanged:ri,onIdTokenChanged:wR,prodErrorMap:KC,reload:ZC,sendPasswordResetEmail:vR,signInWithCredential:xR,signInWithEmailAndPassword:kR,signInWithPopup:ep,signOut:Dn,updateProfile:om},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="firebasestorage.googleapis.com",MR="storageBucket",oM=2*60*1e3,sM=10*60*1e3,aM=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends Cr{constructor(e,n,i=0){super(xf(e),`Firebase Storage: ${n} (${xf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ht||(Ht={}));function xf(t){return"storage/"+t}function Wb(){const t="An unknown error occurred, please check the error payload for server response.";return new rn(Ht.UNKNOWN,t)}function lM(t){return new rn(Ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cM(t){return new rn(Ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rn(Ht.UNAUTHENTICATED,t)}function dM(){return new rn(Ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hM(t){return new rn(Ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WR(){return new rn(Ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LR(){return new rn(Ht.CANCELED,"User canceled the upload/download.")}function pM(t){return new rn(Ht.INVALID_URL,"Invalid URL '"+t+"'.")}function mM(t){return new rn(Ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gM(){return new rn(Ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MR+"' property when initializing the app?")}function OR(){return new rn(Ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fM(){return new rn(Ht.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function yM(){return new rn(Ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xM(t){return new rn(Ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ux(t){return new rn(Ht.INVALID_ARGUMENT,t)}function VR(){return new rn(Ht.APP_DELETED,"The Firebase app was deleted.")}function bM(t){return new rn(Ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bu(t,e){return new rn(Ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Mc(t){throw new rn(Ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ci.makeFromUrl(e,n)}catch(o){return new Ci(e,"")}if(i.path==="")return i;throw mM(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function s(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+o+a,"i"),c={bucket:1,path:3};function u(z){z.path_=decodeURIComponent(z.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${o}/o${g}`,"i"),k={bucket:1,path:3},j=n===DR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",x=new RegExp(`^https?://${j}/${o}/${T}`,"i"),v=[{regex:l,indices:c,postModify:s},{regex:y,indices:k,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let z=0;z<v.length;z++){const D=v[z],P=D.regex.exec(e);if(P){const _=P[D.indices.bucket];let S=P[D.indices.path];S||(S=""),i=new Ci(_,S),D.postModify(i);break}}if(i==null)throw pM(e);return i}}class vM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e,n){let i=1,o=null,s=null,a=!1,l=0;function c(){return l===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function p(T){o=setTimeout(()=>{o=null,t(y,c())},T)}function g(){s&&clearTimeout(s)}function y(T,...x){if(u){g();return}if(T){g(),h.call(null,T,...x);return}if(c()||a){g(),h.call(null,T,...x);return}i<64&&(i*=2);let v;l===1?(l=2,v=0):v=(i+Math.random())*1e3,p(v)}let k=!1;function j(T){k||(k=!0,g(),!u&&(o!==null?(T||(l=2),clearTimeout(o),p(0)):T||(l=1)))}return p(0),s=setTimeout(()=>{a=!0,j(!0)},n),j}function wM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){return t!==void 0}function TM(t){return typeof t=="function"}function jM(t){return typeof t=="object"&&!Array.isArray(t)}function dg(t){return typeof t=="string"||t instanceof String}function Yw(t){return Lb()&&t instanceof Blob}function Lb(){return typeof Blob!="undefined"}function Xw(t,e,n,i){if(i<e)throw ux(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw ux(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function UR(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const o=e(i)+"="+e(t[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Hs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hs||(Hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||o||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n,i,o,s,a,l,c,u,h,p,g=!0,y=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,j)=>{this.resolve_=k,this.reject_=j,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new jh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Hs.NO_ERROR,c=s.getStatus();if(!l||qR(c,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Hs.ABORT;i(!1,new jh(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;i(!0,new jh(u,s))})},n=(i,o)=>{const s=this.resolve_,a=this.reject_,l=o.connection;if(o.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());SM(c)?s(c):s()}catch(c){a(c)}else if(l!==null){const c=Wb();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(o.canceled){const c=this.appDelete_?VR():LR();a(c)}else{const c=WR();a(c)}};this.canceled_?n(!1,new jh(!1,null,!0)):this.backoffId_=kM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function IM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function RM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function EM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function AM(t,e,n,i,o,s,a=!0,l=!1){const c=UR(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return RM(h,e),IM(h,n),CM(h,s),EM(h,i),new _M(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function PM(...t){const e=BM();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Lb())return new Blob(t);throw new rn(Ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){if(typeof atob=="undefined")throw xM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bf{constructor(e,n){this.data=e,this.contentType=n||null}}function NM(t,e){switch(t){case yr.RAW:return new bf(HR(e));case yr.BASE64:case yr.BASE64URL:return new bf($R(t,e));case yr.DATA_URL:return new bf(MM(e),WM(e))}throw Wb()}function HR(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function DM(t){let e;try{e=decodeURIComponent(t)}catch(n){throw bu(yr.DATA_URL,"Malformed data URL.")}return HR(e)}function $R(t,e){switch(t){case yr.BASE64:{const o=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(o||s)throw bu(t,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case yr.BASE64URL:{const o=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(o||s)throw bu(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zM(e)}catch(o){throw o.message.includes("polyfill")?o:bu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class KR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bu(yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=LM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function MM(t){const e=new KR(t);return e.base64?$R(yr.BASE64,e.rest):DM(e.rest)}function WM(t){return new KR(t).contentType}function LM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){let i=0,o="";Yw(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(Yw(this.data_)){const i=this.data_,o=FM(i,e,n);return o===null?null:new Co(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Co(i,!0)}}static getBlob(...e){if(Lb()){const n=e.map(i=>i instanceof Co?i.data_:i);return new Co(PM.apply(null,n))}else{const n=e.map(a=>dg(a)?NM(yr.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const o=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)o[s++]=a[l]}),new Co(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){let e;try{e=JSON.parse(t)}catch(n){return null}return jM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function VM(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function QR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t,e){return e}class Xn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||UM}}let _h=null;function qM(t){return!dg(t)||t.length<2?t:QR(t)}function YR(){if(_h)return _h;const t=[];t.push(new Xn("bucket")),t.push(new Xn("generation")),t.push(new Xn("metageneration")),t.push(new Xn("name","fullPath",!0));function e(s,a){return qM(a)}const n=new Xn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const o=new Xn("size");return o.xform=i,t.push(o),t.push(new Xn("timeCreated")),t.push(new Xn("updated")),t.push(new Xn("md5Hash",null,!0)),t.push(new Xn("cacheControl",null,!0)),t.push(new Xn("contentDisposition",null,!0)),t.push(new Xn("contentEncoding",null,!0)),t.push(new Xn("contentLanguage",null,!0)),t.push(new Xn("contentType",null,!0)),t.push(new Xn("metadata","customMetadata",!0)),_h=t,_h}function HM(t,e){function n(){const i=t.bucket,o=t.fullPath,s=new Ci(i,o);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function $M(t,e,n){const i={};i.type="file";const o=n.length;for(let s=0;s<o;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return HM(i,t),i}function XR(t,e,n){const i=GR(e);return i===null?null:$M(t,i,n)}function KM(t,e,n,i){const o=GR(e);if(o===null||!dg(o.downloadTokens))return null;const s=o.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,p=t.fullPath,g="/b/"+a(h)+"/o/"+a(p),y=Ed(g,n,i),k=UR({alt:"media",token:u});return y+k})[0]}function JR(t,e){const n={},i=e.length;for(let o=0;o<i;o++){const s=e[o];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class pc{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t){if(!t)throw Wb()}function Ob(t,e){function n(i,o){const s=XR(t,o,e);return Yr(s!==null),s}return n}function GM(t,e){function n(i,o){const s=XR(t,o,e);return Yr(s!==null),KM(s,o,t.host,t._protocol)}return n}function Ad(t){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=dM():o=uM():n.getStatus()===402?o=cM(t.bucket):n.getStatus()===403?o=hM(t.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function ZR(t){const e=Ad(t);function n(i,o){let s=e(i,o);return i.getStatus()===404&&(s=lM(t.path)),s.serverResponse=o.serverResponse,s}return n}function QM(t,e,n){const i=e.fullServerUrl(),o=Ed(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new pc(o,s,Ob(t,n),a);return l.errorHandler=ZR(e),l}function YM(t,e,n){const i=e.fullServerUrl(),o=Ed(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new pc(o,s,GM(t,n),a);return l.errorHandler=ZR(e),l}function XM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function e6(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=XM(null,e)),i}function JM(t,e,n,i,o){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let v="";for(let z=0;z<2;z++)v=v+Math.random().toString().slice(2);return v}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const u=e6(e,i,o),h=JR(u,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+c+"--",y=Co.getBlob(p,i,g);if(y===null)throw OR();const k={name:u.fullPath},j=Ed(s,t.host,t._protocol),T="POST",x=t.maxUploadRetryTime,b=new pc(j,T,Ob(t,n),x);return b.urlParams=k,b.headers=a,b.body=y.uploadData(),b.errorHandler=Ad(e),b}class lm{constructor(e,n,i,o){this.current=e,this.total=n,this.finalized=!!i,this.metadata=o||null}}function Vb(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(o){Yr(!1)}return Yr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ZM(t,e,n,i,o){const s=e.bucketOnlyServerUrl(),a=e6(e,i,o),l={name:a.fullPath},c=Ed(s,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=JR(a,n),g=t.maxUploadRetryTime;function y(j){Vb(j);let T;try{T=j.getResponseHeader("X-Goog-Upload-URL")}catch(x){Yr(!1)}return Yr(dg(T)),T}const k=new pc(c,u,y,g);return k.urlParams=l,k.headers=h,k.body=p,k.errorHandler=Ad(e),k}function eW(t,e,n,i){const o={"X-Goog-Upload-Command":"query"};function s(u){const h=Vb(u,["active","final"]);let p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch(y){Yr(!1)}p||Yr(!1);const g=Number(p);return Yr(!isNaN(g)),new lm(g,i.size(),h==="final")}const a="POST",l=t.maxUploadRetryTime,c=new pc(n,a,s,l);return c.headers=o,c.errorHandler=Ad(e),c}const Jw=256*1024;function tW(t,e,n,i,o,s,a,l){const c=new lm(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw fM();const u=c.total-c.current;let h=u;o>0&&(h=Math.min(h,o));const p=c.current,g=p+h;let y="";h===0?y="finalize":u===h?y="upload, finalize":y="upload";const k={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},j=i.slice(p,g);if(j===null)throw OR();function T(z,D){const P=Vb(z,["active","final"]),_=c.current+h,S=i.size();let R;return P==="final"?R=Ob(e,s)(z,D):R=null,new lm(_,S,P==="final",R)}const x="POST",b=e.maxUploadRetryTime,v=new pc(n,x,T,b);return v.headers=k,v.body=j.uploadData(),v.progressCallback=l||null,v.errorHandler=Ad(t),v}const oi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vf(t){switch(t){case"running":case"pausing":case"canceling":return oi.RUNNING;case"paused":return oi.PAUSED;case"success":return oi.SUCCESS;case"canceled":return oi.CANCELED;case"error":return oi.ERROR;default:return oi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,n,i){if(TM(e)||n!=null||i!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=i!=null?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class iW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,s){if(this.sent_)throw Mc("cannot .send() more than once");if(ao(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mc("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Mc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rW extends iW{initXhr(){this.xhr_.responseType="text"}}function $a(){return new rW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=YR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(Ht.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qR(o.status,[]))if(s)o=WR();else{this.sleepTime=Math.max(this.sleepTime*2,aM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(Ht.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,s)=>{this._resolve=o,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=ZM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,$a,e,n);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const o=eW(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(o,$a,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Jw*this._chunkMultiplier,n=new lm(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((o,s)=>{let a;try{a=tW(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(a,$a,o,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Jw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=QM(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(i,$a,e,n);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=JM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(i,$a,e,n);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=LR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=vf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,o){const s=new nW(n||void 0,i||void 0,o||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(vf(this._state)){case oi.SUCCESS:za(this._resolve.bind(null,this.snapshot))();break;case oi.CANCELED:case oi.ERROR:const n=this._reject;za(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vf(this._state)){case oi.RUNNING:case oi.PAUSED:e.next&&za(e.next.bind(e,this.snapshot))();break;case oi.SUCCESS:e.complete&&za(e.complete.bind(e))();break;case oi.CANCELED:case oi.ERROR:e.error&&za(e.error.bind(e,this._error))();break;default:e.error&&za(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this._service=e,n instanceof Ci?this._location=n:this._location=Ci.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ua(e,n)}get root(){const e=new Ci(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QR(this._location.path)}get storage(){return this._service}get parent(){const e=OM(this._location.path);if(e===null)return null;const n=new Ci(this._location.bucket,e);return new ua(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bM(e)}}function sW(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new oW(t,new Co(e),n)}function aW(t){t._throwIfRoot("getDownloadURL");const e=YM(t.storage,t._location,YR());return t.storage.makeRequestWithTokens(e,$a).then(n=>{if(n===null)throw yM();return n})}function lW(t,e){const n=VM(t._location.path,e),i=new Ci(t._location.bucket,n);return new ua(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t){return/^[A-Za-z]+:\/\//.test(t)}function uW(t,e){return new ua(t,e)}function t6(t,e){if(t instanceof Ub){const n=t;if(n._bucket==null)throw gM();const i=new ua(n,n._bucket);return e!=null?t6(i,e):i}else return e!==void 0?lW(t,e):t}function dW(t,e){if(e&&cW(e)){if(t instanceof Ub)return uW(t,e);throw ux("To use ref(service, url), the first argument must be a Storage instance.")}else return t6(t,e)}function Zw(t,e){const n=e==null?void 0:e[MR];return n==null?null:Ci.makeFromBucketSpec(n,t)}function hW(t,e,n,i={}){t.host=`${e}:${n}`;const o=ao(e);o&&(Am(`https://${t.host}/b`),f0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:V2(s,t.app.options.projectId))}class Ub{constructor(e,n,i,o,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=DR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oM,this._maxUploadRetryTime=sM,this._requests=new Set,o!=null?this._bucket=Ci.makeFromBucketSpec(o,this._host):this._bucket=Zw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ci.makeFromBucketSpec(this._url,e):this._bucket=Zw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return C(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return C(this,null,function*(){if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ua(this,e)}_makeRequest(e,n,i,o,s=!0){if(this._deleted)return new vM(VR());{const a=AM(e,this._appId,i,o,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,n){return C(this,null,function*(){const[i,o]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()})}}const eS="@firebase/storage",tS="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="storage";function pW(t,e,n){return t=kt(t),sW(t,e,n)}function mW(t){return t=kt(t),aW(t)}function gW(t,e){return t=kt(t),dW(t,e)}function fW(t=b0(),e){t=kt(t);const i=Zl(t,n6).getImmediate({identifier:e}),o=W2("storage");return o&&yW(i,...o),i}function yW(t,e,n,i={}){hW(t,e,n,i)}function xW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Ub(n,i,o,e,ga)}function bW(){Zs(new Qo(n6,xW,"PUBLIC").setMultipleInstances(!0)),vr(eS,tS,""),vr(eS,tS,"esm2017")}bW();const vW={apiKey:"AIzaSyDi9hdqloCIg_8sfjjyERqnfAr-pW3BeNY",authDomain:"restarter-app.firebaseapp.com",projectId:"restarter-app",storageBucket:"restarter-app.firebasestorage.app",messagingSenderId:"393816322828",appId:"1:393816322828:web:32a9ed91fe95ab9cdd8f29",measurementId:"G-CX4DYFJ5B4"},ir=Q2(vW),Ct=kd(ir),Tr=Ze(ir),kW=fW(ir),kf=[{code:"zh-TW",label:""},{code:"zh-CN",label:""},{code:"en",label:"EN"},{code:"ja",label:""},{code:"ko",label:""},{code:"th",label:""},{code:"vi",label:"Ting Vit"},{code:"ms",label:"Bahasa Melayu"},{code:"la",label:"Latna"}],i6=m.createContext(null),dt=()=>{const t=m.useContext(i6);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},wW=({children:t})=>{const[e,n]=m.useState(()=>{try{const s=localStorage.getItem("lang");if(s&&kf.some(a=>a.code===s))return s}catch(s){console.warn("Failed to read language from localStorage:",s)}return"zh-TW"});m.useEffect(()=>{try{const s=localStorage.getItem("lang");if(s&&kf.some(u=>u.code===s))return;const a={en:"en","en-US":"en","en-GB":"en","zh-TW":"zh-TW","zh-HK":"zh-TW","zh-Hant":"zh-TW","zh-CN":"zh-CN","zh-Hans":"zh-CN",ja:"ja",ko:"ko",vi:"vi",th:"th",ms:"ms",la:"la"},l=navigator.language||navigator.languages&&navigator.languages[0]||"";let c="en";a[l]?c=a[l]:a[l.split("-")[0]]&&(c=a[l.split("-")[0]]),c!==e&&(n(c),localStorage.setItem("lang",c))}catch(s){console.warn("Failed to detect browser language:",s)}},[]);const o={lang:e,setLang:s=>{try{n(s),localStorage.setItem("lang",s)}catch(a){console.warn("Failed to save language to localStorage:",a)}},LANGS:kf};return r.jsx(i6.Provider,{value:o,children:t})},Ir=({className:t="",style:e={}})=>{const{lang:n,setLang:i,LANGS:o}=dt(),s=ke({padding:"3px 6px",borderRadius:4,fontWeight:600,fontSize:11,border:"1px solid #6B5BFF",color:"#6B5BFF",background:"#fff",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s",minWidth:e.minWidth!==void 0?e.minWidth:50},e);return r.jsx("select",{value:n,onChange:a=>i(a.target.value),className:t,style:s,children:o.map(a=>r.jsx("option",{value:a.code,children:a.label},a.code))})},SW=({isOpen:t,onClose:e,title:n,message:i,requiredPlan:o="basic"})=>{const s=tt(),a=window.innerWidth<=768;if(!t)return null;const l={basic:" (NT$ 149/)",advanced:" (NT$ 249/)",professional:" (NT$ 349/)",unlimited:" (NT$ 499/)"};return r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:a?20:32,maxWidth:400,width:"90%",maxHeight:"80vh",overflowY:"auto",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[r.jsx("div",{style:{fontSize:a?36:48,marginBottom:a?12:16,color:"#6B5BFF"},children:""}),r.jsx("h2",{style:{fontSize:a?20:24,fontWeight:700,color:"#333",marginBottom:a?8:12},children:n}),r.jsx("p",{style:{fontSize:a?14:16,color:"#666",marginBottom:a?16:20,lineHeight:1.6},children:i}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9ff 0%, #e8f4ff 100%)",borderRadius:12,padding:a?12:16,marginBottom:a?16:24,border:"1px solid #e0e8ff"},children:[r.jsx("div",{style:{fontSize:a?12:14,color:"#6B5BFF",fontWeight:600,marginBottom:a?6:8},children:" "}),r.jsxs("div",{style:{fontSize:a?11:13,color:"#666",lineHeight:1.4},children:[" ",r.jsx("br",{})," ",r.jsx("br",{})," "]})]}),o&&r.jsx("div",{style:{background:"#fff",borderRadius:10,padding:a?10:14,marginBottom:a?16:24,border:"2px solid #6B5BFF",boxShadow:"0 2px 8px #6B5BFF22"},children:r.jsxs("span",{style:{fontSize:a?12:14,color:"#6B5BFF",fontWeight:700},children:[" ",l[o]," "]})}),r.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[r.jsx("button",{onClick:()=>{e(),s("/plans")},style:{background:"linear-gradient(135deg, #6B5BFF 0%, #00CFFF 100%)",color:"#fff",border:"none",borderRadius:12,padding:"14px 28px",fontSize:16,fontWeight:700,cursor:"pointer",flex:1,boxShadow:"0 4px 12px #6B5BFF33",transition:"all 0.3s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 16px #6B5BFF44"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 12px #6B5BFF33"},children:" "}),r.jsx("button",{onClick:e,style:{background:"#f8f9ff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:12,padding:"14px 28px",fontSize:16,fontWeight:600,cursor:"pointer",flex:1,transition:"all 0.3s ease"},onMouseEnter:c=>{c.currentTarget.style.background="#6B5BFF",c.currentTarget.style.color="#fff"},onMouseLeave:c=>{c.currentTarget.style.background="#f8f9ff",c.currentTarget.style.color="#6B5BFF"},children:" "})]})]})})},mc=({isOpen:t,onClose:e,currentPlan:n,remainingDays:i,usedTokens:o,totalTokens:s})=>{const a=tt();if(!t)return null;const l={basic:"",advanced:"",professional:"",unlimited:""},c={basic:"50K",advanced:"100K",professional:"200K",unlimited:"500K"},u={basic:"NT$ 149",advanced:"NT$ 249",professional:"NT$ 349",unlimited:"NT$ 499"},h=()=>{e(),a("/plans")};return r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:r.jsxs("div",{style:{background:"#fff",borderRadius:20,padding:32,maxWidth:480,width:"90%",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[r.jsx("h2",{style:{fontSize:24,fontWeight:700,color:"#333",marginBottom:12},children:"Token "}),r.jsxs("p",{style:{fontSize:16,color:"#666",marginBottom:20,lineHeight:1.6},children:[" ",l[n],"  Token  ",i," "]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9ff 0%, #e8f4ff 100%)",borderRadius:12,padding:16,marginBottom:24,border:"1px solid #e0e8ff"},children:[r.jsx("div",{style:{fontSize:14,color:"#6B5BFF",fontWeight:600,marginBottom:8},children:" "}),r.jsxs("div",{style:{fontSize:13,color:"#666",lineHeight:1.4},children:[" ",Math.round(o/1e3),"K / ",Math.round(s/1e3),"K tokens",r.jsx("br",{})," ",i," ",r.jsx("br",{})," ",l[n]]})]}),r.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,marginBottom:24,border:"2px solid #6B5BFF",boxShadow:"0 2px 8px #6B5BFF22"},children:[r.jsx("div",{style:{fontSize:16,color:"#6B5BFF",fontWeight:700,marginBottom:12},children:" "}),r.jsxs("div",{style:{fontSize:14,color:"#666",lineHeight:1.5,marginBottom:16},children:[r.jsx("strong",{children:""})," ",c[n]," tokens",r.jsx("br",{})," ",i," "]}),r.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#6B5BFF"},children:u[n]})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)",borderRadius:12,padding:16,marginBottom:24,border:"1px solid #ffeaa7"},children:[r.jsx("div",{style:{fontSize:14,color:"#856404",fontWeight:600,marginBottom:8},children:" "}),r.jsxs("div",{style:{fontSize:13,color:"#856404",lineHeight:1.4},children:[" ",r.jsx("br",{})," ",r.jsx("br",{})," "]})]}),r.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[r.jsx("button",{onClick:h,style:{background:"linear-gradient(135deg, #6B5BFF 0%, #00CFFF 100%)",color:"#fff",border:"none",borderRadius:12,padding:"14px 28px",fontSize:16,fontWeight:700,cursor:"pointer",flex:1,boxShadow:"0 4px 12px #6B5BFF33",transition:"all 0.3s ease"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px #6B5BFF44"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 4px 12px #6B5BFF33"},children:" "}),r.jsx("button",{onClick:e,style:{background:"#f8f9ff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:12,padding:"14px 28px",fontSize:16,fontWeight:600,cursor:"pointer",flex:1,transition:"all 0.3s ease"},onMouseEnter:p=>{p.currentTarget.style.background="#6B5BFF",p.currentTarget.style.color="#fff"},onMouseLeave:p=>{p.currentTarget.style.background="#f8f9ff",p.currentTarget.style.color="#6B5BFF"},children:" "})]}),r.jsx("div",{style:{marginTop:16},children:r.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"#888",fontSize:14,cursor:"pointer",textDecoration:"underline"},children:""})})]})})},TW={production:{baseURL:"https://restarter-backend-6e9s.onrender.com/api",wsURL:"wss://restarter-backend-6e9s.onrender.com"}},r6=TW.production,o6=r6.baseURL,s6=r6.wsURL,vu=t=>`${o6}${t}`,jW=()=>s6;console.log(" :","");console.log(" API URL:",o6);console.log(" WebSocket URL:",s6);const nS=({className:t="",showDetails:e=!1})=>{const{lang:n}=dt(),[i,o]=m.useState(null),[s,a]=m.useState(!0),[l,c]=m.useState(null);m.useEffect(()=>{u()},[n]);const u=()=>C(Zn,null,function*(){try{a(!0),c(null);const y="Taipei";console.log("Fetching weather for:",y);const k=yield fetch(vu(`/weather/current?city=${y}`));if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const j=yield k.json();if(console.log("Weather API response:",j),j.weather){const T=h(j.weather,n);console.log("Localized weather:",T),o(T)}else c(j.error||"")}catch(y){c(""),console.error("Weather fetch error:",y)}finally{a(!1)}}),h=(y,k)=>{var D,P,_;const j={"zh-TW":{"clear sky":"","few clouds":"","scattered clouds":"","broken clouds":"","shower rain":"",rain:"",thunderstorm:"",snow:"",haze:"",smoke:"",dust:"",sand:"",ash:"",squall:"",tornado:"",sunny:"","partly cloudy":"",cloudy:"",overcast:"",mist:"",fog:"","patchy rain possible":"","patchy snow possible":"","patchy sleet possible":"","patchy freezing drizzle possible":"","thundery outbreaks possible":"","blowing snow":"",blizzard:"","freezing fog":"","patchy light drizzle":"","light drizzle":"","freezing drizzle":"","heavy freezing drizzle":"","patchy light rain":"","light rain":"","moderate rain at times":"","moderate rain":"","heavy rain at times":"","heavy rain":"","light freezing rain":"","moderate or heavy freezing rain":"","light sleet":"","moderate or heavy sleet":"","patchy light snow":"","light snow":"","patchy moderate snow":"","moderate snow":"","patchy heavy snow":"","heavy snow":"","ice pellets":"","light rain shower":"","moderate or heavy rain shower":"","torrential rain shower":"","light sleet showers":"","moderate or heavy sleet showers":"","light snow showers":"","moderate or heavy snow showers":"","light showers of ice pellets":"","moderate or heavy showers of ice pellets":"","patchy light rain with thunder":"","moderate or heavy rain with thunder":"","patchy light snow with thunder":"","moderate or heavy snow with thunder":"",:""},"zh-CN":{"clear sky":"","few clouds":"","scattered clouds":"","broken clouds":"","shower rain":"",rain:"",thunderstorm:"",snow:"",haze:"",smoke:"",dust:"",sand:"",ash:"",squall:"",tornado:"",sunny:"","partly cloudy":"",cloudy:"",overcast:"",mist:"",fog:"","patchy rain possible":"","patchy snow possible":"","patchy sleet possible":"","patchy freezing drizzle possible":"","thundery outbreaks possible":"","blowing snow":"",blizzard:"","freezing fog":"","patchy light drizzle":"","light drizzle":"","freezing drizzle":"","heavy freezing drizzle":"","patchy light rain":"","light rain":"","moderate rain at times":"","moderate rain":"","heavy rain at times":"","heavy rain":"","light freezing rain":"","moderate or heavy freezing rain":"","light sleet":"","moderate or heavy sleet":"","patchy light snow":"","light snow":"","patchy moderate snow":"","moderate snow":"","patchy heavy snow":"","heavy snow":"","ice pellets":"","light rain shower":"","moderate or heavy rain shower":"","torrential rain shower":"","light sleet showers":"","moderate or heavy sleet showers":"","light snow showers":"","moderate or heavy snow showers":"","light showers of ice pellets":"","moderate or heavy showers of ice pellets":"","patchy light rain with thunder":"","moderate or heavy rain with thunder":"","patchy light snow with thunder":"","moderate or heavy snow with thunder":"",:"Partly Cloudy"},en:{"clear sky":"Clear","few clouds":"Partly Cloudy","scattered clouds":"Cloudy","broken clouds":"Overcast","shower rain":"Showers",rain:"Rain",thunderstorm:"Thunderstorm",snow:"Snow",haze:"Haze",smoke:"Smoke",dust:"Dust",sand:"Sand",ash:"Ash",squall:"Squall",tornado:"Tornado",sunny:"Sunny","partly cloudy":"Partly Cloudy",cloudy:"Cloudy",overcast:"Overcast",mist:"Mist",fog:"Fog","patchy rain possible":"Patchy Rain","patchy snow possible":"Patchy Snow","patchy sleet possible":"Patchy Sleet","patchy freezing drizzle possible":"Patchy Freezing Drizzle","thundery outbreaks possible":"Thundery Outbreaks","blowing snow":"Blowing Snow",blizzard:"Blizzard","freezing fog":"Freezing Fog","patchy light drizzle":"Patchy Light Drizzle","light drizzle":"Light Drizzle","freezing drizzle":"Freezing Drizzle","heavy freezing drizzle":"Heavy Freezing Drizzle","patchy light rain":"Patchy Light Rain","light rain":"Light Rain","moderate rain at times":"Moderate Rain","moderate rain":"Moderate Rain","heavy rain at times":"Heavy Rain","heavy rain":"Heavy Rain","light freezing rain":"Light Freezing Rain","moderate or heavy freezing rain":"Moderate or Heavy Freezing Rain","light sleet":"Light Sleet","moderate or heavy sleet":"Moderate or Heavy Sleet","patchy light snow":"Patchy Light Snow","light snow":"Light Snow","patchy moderate snow":"Patchy Moderate Snow","moderate snow":"Moderate Snow","patchy heavy snow":"Patchy Heavy Snow","heavy snow":"Heavy Snow","ice pellets":"Ice Pellets","light rain shower":"Light Rain Shower","moderate or heavy rain shower":"Moderate or Heavy Rain Shower","torrential rain shower":"Torrential Rain Shower","light sleet showers":"Light Sleet Showers","moderate or heavy sleet showers":"Moderate or Heavy Sleet Showers","light snow showers":"Light Snow Showers","moderate or heavy snow showers":"Moderate or Heavy Snow Showers","light showers of ice pellets":"Light Ice Pellet Showers","moderate or heavy showers of ice pellets":"Moderate or Heavy Ice Pellet Showers","patchy light rain with thunder":"Patchy Light Rain with Thunder","moderate or heavy rain with thunder":"Moderate or Heavy Rain with Thunder","patchy light snow with thunder":"Patchy Light Snow with Thunder","moderate or heavy snow with thunder":"Moderate or Heavy Snow with Thunder",:"Partly Cloudy"},ja:{"clear sky":"","few clouds":"","scattered clouds":"","broken clouds":"","shower rain":"",rain:"",thunderstorm:"",snow:"",haze:"",smoke:"",dust:"",sand:"",ash:"",squall:"",tornado:"",sunny:"","partly cloudy":"",cloudy:"",overcast:"",mist:"",fog:"","patchy rain possible":"","patchy snow possible":"","patchy sleet possible":"","patchy freezing drizzle possible":"","thundery outbreaks possible":"","blowing snow":"",blizzard:"","freezing fog":"","patchy light drizzle":"","light drizzle":"","freezing drizzle":"","heavy freezing drizzle":"","patchy light rain":"","light rain":"","moderate rain at times":"","moderate rain":"","heavy rain at times":"","heavy rain":"","light freezing rain":"","moderate or heavy freezing rain":"","light sleet":"","moderate or heavy sleet":"","patchy light snow":"","light snow":"","patchy moderate snow":"","moderate snow":"","patchy heavy snow":"","heavy snow":"","ice pellets":"","light rain shower":"","moderate or heavy rain shower":"","torrential rain shower":"","light sleet showers":"","moderate or heavy sleet showers":"","light snow showers":"","moderate or heavy snow showers":"","light showers of ice pellets":"","moderate or heavy showers of ice pellets":"","patchy light rain with thunder":"","moderate or heavy rain with thunder":"","patchy light snow with thunder":"","moderate or heavy snow with thunder":"",:""},ko:{"clear sky":"","few clouds":" ","scattered clouds":" ","broken clouds":"","shower rain":"",rain:"",thunderstorm:"",snow:"",haze:"",smoke:"",dust:"",sand:"",ash:"",squall:"",tornado:"",sunny:"","partly cloudy":" ",cloudy:"",overcast:"",mist:"",fog:"","patchy rain possible":" ","patchy snow possible":" ","patchy sleet possible":" ","patchy freezing drizzle possible":" ","thundery outbreaks possible":" ","blowing snow":"",blizzard:"","freezing fog":"","patchy light drizzle":" ","light drizzle":"","freezing drizzle":"","heavy freezing drizzle":" ","patchy light rain":" ","light rain":" ","moderate rain at times":" ","moderate rain":" ","heavy rain at times":" ","heavy rain":" ","light freezing rain":" ","moderate or heavy freezing rain":"   ","light sleet":" ","moderate or heavy sleet":"   ","patchy light snow":" ","light snow":" ","patchy moderate snow":" ","moderate snow":" ","patchy heavy snow":" ","heavy snow":" ","ice pellets":"","light rain shower":" ","moderate or heavy rain shower":"   ","torrential rain shower":"","light sleet showers":"  ","moderate or heavy sleet showers":"    ","light snow showers":"  ","moderate or heavy snow showers":"    ","light showers of ice pellets":"  ","moderate or heavy showers of ice pellets":"    ","patchy light rain with thunder":"  ","moderate or heavy rain with thunder":"    ","patchy light snow with thunder":"  ","moderate or heavy snow with thunder":"    ",:" "},th:{"clear sky":"","few clouds":"","scattered clouds":"","broken clouds":"","shower rain":"",rain:"",thunderstorm:"",snow:"",haze:"",smoke:"",dust:"",sand:"",ash:"",squall:"",tornado:"",sunny:"","partly cloudy":"",cloudy:"",overcast:"",mist:"",fog:"","patchy rain possible":"","patchy snow possible":"","patchy sleet possible":"","patchy freezing drizzle possible":"","thundery outbreaks possible":"","blowing snow":"",blizzard:"","freezing fog":"","patchy light drizzle":"","light drizzle":"","freezing drizzle":"","heavy freezing drizzle":"","patchy light rain":"","light rain":"","moderate rain at times":"","moderate rain":"","heavy rain at times":"","heavy rain":"","light freezing rain":"","moderate or heavy freezing rain":"","light sleet":"","moderate or heavy sleet":"","patchy light snow":"","light snow":"","patchy moderate snow":"","moderate snow":"","patchy heavy snow":"","heavy snow":"","ice pellets":"","light rain shower":"","moderate or heavy rain shower":"","torrential rain shower":"","light sleet showers":"","moderate or heavy sleet showers":"","light snow showers":"","moderate or heavy snow showers":"","light showers of ice pellets":"","moderate or heavy showers of ice pellets":"","patchy light rain with thunder":"","moderate or heavy rain with thunder":"","patchy light snow with thunder":"","moderate or heavy snow with thunder":"",:""},vi:{"clear sky":"Tri quang","few clouds":"t my","scattered clouds":"Nhiu my","broken clouds":"U m","shower rain":"Ma ro",rain:"Ma",thunderstorm:"Ging bo",snow:"Tuyt",haze:"Sng m nh",smoke:"Khi",dust:"Bi",sand:"Ct",ash:"Tro ni la",squall:"Gi mnh",tornado:"Lc xoy",sunny:"Tri nng","partly cloudy":"t my",cloudy:"Nhiu my",overcast:"U m",mist:"Sng m",fog:"Sng m","patchy rain possible":"C th ma ro","patchy snow possible":"C th c tuyt","patchy sleet possible":"C th c ma tuyt","patchy freezing drizzle possible":"C th c ma ","thundery outbreaks possible":"C th c ging bo","blowing snow":"Tuyt bay",blizzard:"Bo tuyt","freezing fog":"Sng m ng bng","patchy light drizzle":"Ma phn nh","light drizzle":"Ma phn nh","freezing drizzle":"Ma ","heavy freezing drizzle":"Ma  mnh","patchy light rain":"Ma nh","light rain":"Ma nh","moderate rain at times":"Ma va","moderate rain":"Ma va","heavy rain at times":"Ma to","heavy rain":"Ma to","light freezing rain":"Ma  nh","moderate or heavy freezing rain":"Ma  va hoc mnh","light sleet":"Ma tuyt nh","moderate or heavy sleet":"Ma tuyt va hoc mnh","patchy light snow":"Tuyt nh","light snow":"Tuyt nh","patchy moderate snow":"Tuyt va","moderate snow":"Tuyt va","patchy heavy snow":"Tuyt to","heavy snow":"Tuyt to","ice pellets":"Ma ","light rain shower":"Ma ro nh","moderate or heavy rain shower":"Ma ro va hoc mnh","torrential rain shower":"Ma ro to","light sleet showers":"Ma tuyt nh","moderate or heavy sleet showers":"Ma tuyt va hoc mnh","light snow showers":"Tuyt nh","moderate or heavy snow showers":"Tuyt va hoc mnh","light showers of ice pellets":"Ma  nh","moderate or heavy showers of ice pellets":"Ma  va hoc mnh","patchy light rain with thunder":"Ma nh c sm","moderate or heavy rain with thunder":"Ma va hoc mnh c sm","patchy light snow with thunder":"Tuyt nh c sm","moderate or heavy snow with thunder":"Tuyt va hoc mnh c sm",:"t my"},ms:{"clear sky":"Cerah","few clouds":"Sedikit berawan","scattered clouds":"Berawan","broken clouds":"Mendung","shower rain":"Hujan renyai",rain:"Hujan",thunderstorm:"Ribut petir",snow:"Salji",haze:"Jerebu",smoke:"Asap",dust:"Debu",sand:"Pasir",ash:"Abu gunung berapi",squall:"Angin kencang",tornado:"Puting beliung",sunny:"Cerah","partly cloudy":"Sedikit berawan",cloudy:"Berawan",overcast:"Mendung",mist:"Kabut",fog:"Kabut","patchy rain possible":"Hujan renyai mungkin","patchy snow possible":"Salji mungkin","patchy sleet possible":"Hujan salji mungkin","patchy freezing drizzle possible":"Hujan beku mungkin","thundery outbreaks possible":"Ribut petir mungkin","blowing snow":"Salji berterbangan",blizzard:"Ribut salji","freezing fog":"Kabut beku","patchy light drizzle":"Hujan renyai ringan","light drizzle":"Hujan renyai ringan","freezing drizzle":"Hujan beku","heavy freezing drizzle":"Hujan beku lebat","patchy light rain":"Hujan ringan","light rain":"Hujan ringan","moderate rain at times":"Hujan sederhana","moderate rain":"Hujan sederhana","heavy rain at times":"Hujan lebat","heavy rain":"Hujan lebat","light freezing rain":"Hujan beku ringan","moderate or heavy freezing rain":"Hujan beku sederhana atau lebat","light sleet":"Hujan salji ringan","moderate or heavy sleet":"Hujan salji sederhana atau lebat","patchy light snow":"Salji ringan","light snow":"Salji ringan","patchy moderate snow":"Salji sederhana","moderate snow":"Salji sederhana","patchy heavy snow":"Salji lebat","heavy snow":"Salji lebat","ice pellets":"Hujan batu","light rain shower":"Hujan ringan","moderate or heavy rain shower":"Hujan sederhana atau lebat","torrential rain shower":"Hujan lebat","light sleet showers":"Hujan salji ringan","moderate or heavy sleet showers":"Hujan salji sederhana atau lebat","light snow showers":"Salji ringan","moderate or heavy snow showers":"Salji sederhana atau lebat","light showers of ice pellets":"Hujan batu ringan","moderate or heavy showers of ice pellets":"Hujan batu sederhana atau lebat","patchy light rain with thunder":"Hujan ringan dengan petir","moderate or heavy rain with thunder":"Hujan sederhana atau lebat dengan petir","patchy light snow with thunder":"Salji ringan dengan petir","moderate or heavy snow with thunder":"Salji sederhana atau lebat dengan petir",:"Sedikit berawan"},la:{"clear sky":"Serenum","few clouds":"Nubibus paucis","scattered clouds":"Nubibus dispersis","broken clouds":"Nubibus fractis","shower rain":"Imbre",rain:"Pluvia",thunderstorm:"Tempestas",snow:"Nix",haze:"Caligo",smoke:"Fumus",dust:"Pulvis",sand:"Arena",ash:"Cinis",squall:"Procella",tornado:"Turbo",sunny:"Serenum","partly cloudy":"Nubibus paucis",cloudy:"Nubibus",overcast:"Nubibus densis",mist:"Nebula",fog:"Nebula","patchy rain possible":"Imbre possibilis","patchy snow possible":"Nix possibilis","patchy sleet possible":"Nix pluvia possibilis","patchy freezing drizzle possible":"Gelida pluvia possibilis","thundery outbreaks possible":"Tempestas possibilis","blowing snow":"Nix ventosa",blizzard:"Procella nivis","freezing fog":"Gelida nebula","patchy light drizzle":"Levis pluvia","light drizzle":"Levis pluvia","freezing drizzle":"Gelida pluvia","heavy freezing drizzle":"Gravis gelida pluvia","patchy light rain":"Levis pluvia","light rain":"Levis pluvia","moderate rain at times":"Moderata pluvia","moderate rain":"Moderata pluvia","heavy rain at times":"Gravis pluvia","heavy rain":"Gravis pluvia","light freezing rain":"Levis gelida pluvia","moderate or heavy freezing rain":"Moderata vel gravis gelida pluvia","light sleet":"Levis nix pluvia","moderate or heavy sleet":"Moderata vel gravis nix pluvia","patchy light snow":"Levis nix","light snow":"Levis nix","patchy moderate snow":"Moderata nix","moderate snow":"Moderata nix","patchy heavy snow":"Gravis nix","heavy snow":"Gravis nix","ice pellets":"Glacies grana","light rain shower":"Levis pluvia","moderate or heavy rain shower":"Moderata vel gravis pluvia","torrential rain shower":"Torrens pluvia","light sleet showers":"Levis nix pluvia","moderate or heavy sleet showers":"Moderata vel gravis nix pluvia","light snow showers":"Levis nix","moderate or heavy snow showers":"Moderata vel gravis nix","light showers of ice pellets":"Levis glacies grana","moderate or heavy showers of ice pellets":"Moderata vel gravis glacies grana","patchy light rain with thunder":"Levis pluvia cum tonitru","moderate or heavy rain with thunder":"Moderata vel gravis pluvia cum tonitru","patchy light snow with thunder":"Levis nix cum tonitru","moderate or heavy snow with thunder":"Moderata vel gravis nix cum tonitru",:"Nubibus paucis"}},T={"zh-TW":{Taipei:"",Taichung:"",Tainan:"",Kaohsiung:"","New Taipei":"",Taoyuan:"",Hsinchu:"",Chiayi:"",Keelung:"",Hualien:"",Taitung:"",Pingtung:"",Yilan:"",Nantou:"",Yunlin:"",Changhua:"",Miaoli:""},"zh-CN":{Taipei:"",Taichung:"",Tainan:"",Kaohsiung:"","New Taipei":"",Taoyuan:"",Hsinchu:"",Chiayi:"",Keelung:"",Hualien:"",Taitung:"",Pingtung:"",Yilan:"",Nantou:"",Yunlin:"",Changhua:"",Miaoli:""},en:{Taipei:"Taipei",Taichung:"Taichung",Tainan:"Tainan",Kaohsiung:"Kaohsiung","New Taipei":"New Taipei",Taoyuan:"Taoyuan",Hsinchu:"Hsinchu",Chiayi:"Chiayi",Keelung:"Keelung",Hualien:"Hualien",Taitung:"Taitung",Pingtung:"Pingtung",Yilan:"Yilan",Nantou:"Nantou",Yunlin:"Yunlin",Changhua:"Changhua",Miaoli:"Miaoli"},ja:{Taipei:"",Taichung:"",Tainan:"",Kaohsiung:"","New Taipei":"",Taoyuan:"",Hsinchu:"",Chiayi:"",Keelung:"",Hualien:"",Taitung:"",Pingtung:"",Yilan:"",Nantou:"",Yunlin:"",Changhua:"",Miaoli:""},ko:{Taipei:"",Taichung:"",Tainan:"",Kaohsiung:"","New Taipei":"",Taoyuan:"",Hsinchu:"",Chiayi:"",Keelung:"",Hualien:"",Taitung:"",Pingtung:"",Yilan:"",Nantou:"",Yunlin:"",Changhua:"",Miaoli:""},th:{Taipei:"",Taichung:"",Tainan:"",Kaohsiung:"","New Taipei":"",Taoyuan:"",Hsinchu:"",Chiayi:"",Keelung:"",Hualien:"",Taitung:"",Pingtung:"",Yilan:"",Nantou:"",Yunlin:"",Changhua:"",Miaoli:""},vi:{Taipei:"i Bc",Taichung:"i Trung",Tainan:"i Nam",Kaohsiung:"Cao Hng","New Taipei":"Tn Bc",Taoyuan:"o Vin",Hsinchu:"Tn Trc",Chiayi:"Gia Ngha",Keelung:"C Long",Hualien:"Hoa Lin",Taitung:"i ng",Pingtung:"Bnh ng",Yilan:"Nghi Lan",Nantou:"Nam u",Yunlin:"Vn Lm",Changhua:"Chng Ha",Miaoli:"Miu Lt"},ms:{Taipei:"Taipei",Taichung:"Taichung",Tainan:"Tainan",Kaohsiung:"Kaohsiung","New Taipei":"New Taipei",Taoyuan:"Taoyuan",Hsinchu:"Hsinchu",Chiayi:"Chiayi",Keelung:"Keelung",Hualien:"Hualien",Taitung:"Taitung",Pingtung:"Pingtung",Yilan:"Yilan",Nantou:"Nantou",Yunlin:"Yunlin",Changhua:"Changhua",Miaoli:"Miaoli"},la:{Taipei:"Taipeium",Taichung:"Taichungum",Tainan:"Tainanum",Kaohsiung:"Kaohsiungum","New Taipei":"Novum Taipeium",Taoyuan:"Taoyuanum",Hsinchu:"Hsinchuum",Chiayi:"Chiayium",Keelung:"Keelungum",Hualien:"Hualienum",Taitung:"Taitungum",Pingtung:"Pingtungum",Yilan:"Yilanum",Nantou:"Nantouum",Yunlin:"Yunlinum",Changhua:"Changhuaum",Miaoli:"Miaolium"}},x={"zh-TW":["","","","","","",""],"zh-CN":["","","","","","",""],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ja:["","","","","","",""],ko:["","","","","","",""],th:["","","","","","",""],vi:["Ch nht","Th hai","Th ba","Th t","Th nm","Th su","Th by"],ms:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],la:["Dies Solis","Dies Lunae","Dies Martis","Dies Mercurii","Dies Iovis","Dies Veneris","Dies Saturni"]},b=((D=j[k])==null?void 0:D[y.description.toLowerCase()])||y.description,v=((P=T[k])==null?void 0:P[y.city])||y.city,z=((_=x[k])==null?void 0:_[new Date().getDay()])||x.en[new Date().getDay()];return We(ke({},y),{description:b,city:v,weekday:z})};if(s)return r.jsx("div",{className:`weather-widget ${t}`,style:{background:"#ffffff",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',marginTop:"8px"},children:r.jsx("div",{style:{fontSize:"12px",color:"#666",textAlign:"center"},children:"..."})});if(l)return r.jsx("div",{className:`weather-widget ${t}`,style:{background:"#ffffff",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',marginTop:"8px"},children:r.jsx("div",{style:{fontSize:"12px",color:"#ff6b6b",textAlign:"center"},children:l})});if(!i)return null;const p=h(i,n),g=()=>{const y=(i==null?void 0:i.city)||"Taipei",k=`https://www.google.com/search?q=weather+${encodeURIComponent(y)}`;window.open(k,"_blank")};return r.jsx("div",{className:`weather-widget ${t}`,onClick:g,style:{background:"#ffffff",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',marginTop:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",y.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:y=>{y.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",y.currentTarget.style.transform="translateY(0)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("span",{style:{fontSize:"16px"},children:""}),r.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:"#6B5BFF"},children:[p.temp,"C"]}),r.jsx("div",{style:{fontSize:"10px",color:"#666"},children:p.description})]}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:p.city}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:p.weekday})]})})},wf={"zh-TW":{slogan:[""],desc:`Restarter 
AI 


`,wall:"",friend:"",voice:"",ai:"AI ",tts:"",chat:"",emotion:"",welcomeRegister:""},"zh-CN":{slogan:[""],desc:`Restarter 
AI 


`,wall:"",friend:"",voice:"",ai:"AI ",tts:"",chat:"",emotion:"",welcomeRegister:""},en:{slogan:["Regain trust and start anew, you are never alone!"],desc:`Restarter is a platform for restarting your life. Here, there are no labels, only understanding.
Starting with "Social Integration Assessment", AI will accompany you through ten levels: emotional unlocking, voice release, challenging tasks, friend connections... every stop is to help you find trust and direction.
When emotions come, there is no need to suppress thema dedicated emotional release game zone allows you to fully release stress without harming others.
You are not a fixed person, but someone with the courage to choose again.
Here, you can confidently tell your stories and emotions, find solutions, and live out your next chapter.`,wall:"You can safely share your story and feelings here, where you will find understanding and companionship.",friend:"Soul Connection Workshop",voice:"Voice Input",ai:"AI Style Reply",tts:"Realistic TTS",chat:"Instant Heart Chat",emotion:"Emotion Visual Lab",welcomeRegister:"Welcome Register"},ja:{slogan:[""],desc:`Restarter
AI10... 


`,wall:"",friend:"",voice:"",ai:"AI",tts:"TTS",chat:"",emotion:"",welcomeRegister:""},ko:{slogan:[" ,  .    !"],desc:`Restarter   .   ,   .
    AI   10  :  ,   ,  ,  ...          .
                    .
        .
     ,       .`,wall:"       .    .",friend:"  ",voice:" ",ai:"AI  ",tts:" TTS",chat:"  ",emotion:"  ",welcomeRegister:" "},th:{slogan:[" !"],desc:`Restarter   
AI  10 :    ... 
 
 
   `,wall:" ",friend:"",voice:"",ai:" AI",tts:"TTS ",chat:"",emotion:"",welcomeRegister:""},vi:{slogan:["Tm li nim tin, bt u li, bn khng bao gi n c!"],desc:`Restarter l nn tng  lm li cuc i.  y khng c nhn mc, ch c s thu hiu.
Bt u tnh gi Ha nhp X hi, AI s ng hnh cng bn qua 10 cp : m kha cm xc, gii phng ting ni ni tm, nhim v thch thc, kt ni bn b... mi im dng  gip bn tm li nim tin v nh hng.
Khi cm xc n, khng cn phi km nnkhu vc tr chi gii phng cm xc chuyn bit cho php bn gii phng cng thng hon ton m khng lm tn thng ngi khc.
Bn khng phi l ngi b nh hnh, m l ngi c dng kh  la chn li.
 y, bn c th yn tm chia s cu chuyn v cm xc ca mnh, tm ra gii php, v sng chng tip theo ca cuc i.`,wall:"Bn c th yn tm chia s cu chuyn v cm xc ca mnh ti y, ni c s thu hiu v ng hnh.",friend:"Hi Tho Kt Ni Tm Hn",voice:"Nhp liu bng ging ni",ai:"Tr li theo phong cch AI",tts:"TTS thc t",chat:"Tr Chuyn T Tri Tim Ngay Lp Tc",emotion:"Phng th nghim hnh nh cm xc",welcomeRegister:"Cho mng ng k"},ms:{slogan:["Temui semula kepercayaan, mulakan semula, anda tidak pernah keseorangan!"],desc:`Restarter ialah platform untuk memulakan semula kehidupan. Di sini tiada label, hanya pemahaman.
Bermula dariPenilaian Integrasi Sosial, AI akan menemani anda melalui 10 peringkat: membuka kunci emosi, melepaskan suara hati, tugas mencabar, sambungan rakan... setiap perhentian untuk membantu anda mencari kepercayaan dan arah tuju.
Apabila emosi datang, tidak perlu menekanzon permainan pelepasan emosi khusus membolehkan anda melepaskan tekanan sepenuhnya tanpa mencederakan orang lain.
Anda bukan orang yang ditetapkan, tetapi seseorang yang mempunyai keberanian untuk memilih semula.
Di sini, anda boleh berkongsi kisah dan emosi anda dengan tenang, mencari penyelesaian, dan hidup bab seterusnya.`,wall:"Anda boleh berkongsi kisah dan perasaan anda dengan tenang di sini, di mana ada pemahaman dan teman seperjalanan.",friend:"Bengkel Sambungan Jiwa",voice:"Input Suara",ai:"Balasan Gaya AI",tts:"TTS Realistik",chat:"Sembang Hati Segera",emotion:"Makmal Visual Emosi",welcomeRegister:"Selamat Datang Daftar"},la:{slogan:["Fidem recupera et iterum incipe, numquam solus es!"],desc:`Restarter est suggestum ad vitam iterum incipiendam. Hic nullae notae sunt, tantum intellectus.
Incipiendo abAestimatio Integrationis Socialis, AI tecum per decem gradus ambulabit: solutio affectuum, emissio vocis cordis, negotia provocantia, nexus amicorum... omnis statio ad te adiuvandum fidem et directionem inveniendam.
Cum affectus veniunt, non necesse est eos supprimerezona ludi emissionis affectuum dedicata te sinit tensionem plene emittere sine aliis laedendis.
Tu non es homo fixus, sed qui audaciam habet iterum eligendi.
Hic, tuto fabulas tuas et affectus narrare potes, solutiones invenire, et proximum caput vivere.`,wall:"Hic tuto fabulas tuas et sensus tuos narrare potes: hic intellectus et comitatus invenies.",friend:"Officina Nexus Animi",voice:"Vox Input",ai:"AI Stylus Responsio",tts:"Verus TTS",chat:"Colloquium Cordis Instantaneum",emotion:"Emotion Visual Lab",welcomeRegister:"Benevenite Registrare"}},iS={"zh-TW":"","zh-CN":"",en:"",ja:"",ko:"",th:"",vi:"",ms:"",la:""},Na={"zh-TW":{privacy:"",terms:"/",deletion:""},"zh-CN":{privacy:"",terms:"/",deletion:""},en:{privacy:"Privacy Policy",terms:"Terms/Statement",deletion:"Data Deletion"},ja:{privacy:"",terms:"/",deletion:""},ko:{privacy:"",terms:"/",deletion:"  "},th:{privacy:"",terms:"/",deletion:""},vi:{privacy:"Chnh sch bo mt",terms:"iu khon/Tuyn b",deletion:"Gii thch xa d liu"},ms:{privacy:"Dasar Privasi",terms:"Terma/Pernyataan",deletion:"Penjelasan Penghapusan Data"},la:{privacy:"Consilium Privacy",terms:"Termini/Declaratio",deletion:"Norma Deletionis Datae"}},rS={"zh-TW":"","zh-CN":"",en:"Subscription Plans",ja:"",ko:" ",th:"",vi:"Gi ng K",ms:"Pelan Langganan",la:"Plana Subscriptionis"};function oS(){const t=tt(),{lang:e,setLang:n}=dt(),i=wf[e],o=m.useRef(null),s=m.useRef(null),[a,l]=m.useState(0),c=Ze(ir),[u,h]=m.useState(c.currentUser),[p,g]=m.useState(!1),[y,k]=m.useState(!1),[j,T]=m.useState(!1),[x,b]=m.useState(!1),[v,z]=m.useState(!1),[D,P]=m.useState({title:"",message:"",requiredPlan:"basic"}),{isTestMode:_}=fs(),[S,R]=m.useState(!1),[E,A]=m.useState({currentPlan:"basic",remainingDays:0,usedTokens:0,totalTokens:0}),[B,I]=m.useState(()=>typeof window!="undefined"?window.innerWidth<=768:!1);m.useEffect(()=>{const N=()=>I(window.innerWidth<=768);N(),window.addEventListener("resize",N);const O=setTimeout(()=>{const oe=document.querySelector("footer");oe&&(oe.style.transition="none",setTimeout(()=>{oe.style.transition="top 0.3s ease"},50))},500);return()=>{window.removeEventListener("resize",N),clearTimeout(O)}},[]);const re=[{key:"echo-box",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Heartfelt Diary",ko:"  ",th:"",vi:"Nht K T Tri Tim",ms:"Diari Kata-kata Hati",la:"Diarium Verborum Cordis"},desc:{"zh-TW":"","zh-CN":"",ja:"",en:"Voice and text emotional output, private record of personal emotions",ko:"   ,    ",th:" ",vi:"u ra cm xc bng ging ni v vn bn, ghi chp ring t v cm xc c nhn",ms:"Output emosi suara dan teks, rekod peribadi emosi peribadi",la:"Output emotio vocis et textus, recordatio privata emotionum personalium"},path:"/echo-box"},{key:"restart-wall",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Resonance Sharing Wall",ko:"  ",th:"",vi:"Tng Chia S Cng Hng",ms:"Dinding Perkongsian Resonans",la:"Murus Communicationis Resonantiae"},desc:{"zh-TW":"","zh-CN":"",ja:"",en:"Anonymously share emotional stories, promote community resonance and interaction",ko:"   ,    ",th:" ",vi:"Chia s cu chuyn cm xc n danh, thc y cng hng v tng tc cng ng",ms:"Kongsi cerita emosi secara anonim, galakkan resonans dan interaksi komuniti",la:"Fabulas affectuum anonyme partiri, resonantiam communitatis et interactionem promovere"},path:"/wall"},{key:"my-story",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Growth Footprints",ko:" ",th:"",vi:"Du Chn Trng Thnh",ms:"Jejak Pertumbuhan",la:"Vestigia Incrementi"},desc:{"zh-TW":"","zh-CN":"",ja:"",en:"Record and review personal growth and goal progress",ko:"      ",th:"",vi:"Ghi li v xem xt s pht trin c nhn v tin  mc tiu",ms:"Rekod dan semak semula pertumbuhan peribadi dan kemajuan matlamat",la:"Recorda et recense incrementum personale et progressum propositi"},path:"/my-story"},{key:"journal",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Daily Heart Gift",ko:"  ",th:"",vi:"Mn Qu T Tri Tim Hng Ngy",ms:"Hadiah Hati Harian",la:"Donum Cordis Diurnum"},desc:{"zh-TW":"","zh-CN":"",ja:"",en:"Daily random mood prompts and positive encouragement",ko:"     ",th:"",vi:"Gi  tm trng ngu nhin hng ngy v khuyn khch tch cc",ms:"Petunjuk mood rawak harian dan galakan positif",la:"Promptus animi cotidiani casuales et hortatio positiva"},path:"/journal"},{key:"missions",icon:"",title:{"zh-TW":"","zh-CN":"",en:"Self-Challenge",ja:"",ko:" ",th:"",vi:"Th thch bn thn",ms:"Cabaran Diri",la:"Provocatio Sui"},desc:{"zh-TW":"","zh-CN":"",en:"Personal growth challenge missions, inspire continuous self-breakthrough",ja:"",ko:"   ,    ",th:" ",vi:"Nhim v th thch pht trin c nhn, truyn cm hng t ph bn thn lin tc",ms:"Misi cabaran pertumbuhan peribadi, inspirasi penembusan diri berterusan",la:"Missiones provocationis incrementi personalis, inspirationem continuam sui transgressionis"},path:"/restart-missions"},{key:"storywall",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Identity Story Chain",ko:"  ",th:"",vi:"Chui Cu Chuyn Bn Sc",ms:"Rantai Cerita Identiti",la:"Catena Fabularum Identitatis"},desc:{"zh-TW":"","zh-CN":"",ja:"",en:"Deep story creation and exploration of self-identity",ko:"      ",th:"",vi:"Sng to cu chuyn su sc v khm ph bn sc c nhn",ms:"Penciptaan cerita mendalam dan penerokaan identiti diri",la:"Creatio fabularum profunda et exploratio identitatis sui"},path:"/storywall"},{key:"skillbox",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Social Simulation Institute",ko:"  ",th:"",vi:"Vin M Phng X Hi",ms:"Institut Simulasi Sosial",la:"Institutum Simulationis Socialis"},desc:{"zh-TW":"AI","zh-CN":"AI",en:"AI simulates real social situations, practice interpersonal interaction skills",ja:"AI",ko:"AI    ,    ",th:"AI  ",vi:"AI m phng tnh hung x hi thc t, thc hnh k nng tng tc gia cc c nhn",ms:"AI mensimulasikan situasi sosial sebenar, latih kemahiran interaksi interpersonal",la:"AI simulat situationes sociales reales, exerce artes interactionis interpersonal"},path:"/skillbox"},{key:"emotionRelease",icon:"",title:{"zh-TW":"","zh-CN":"",ja:"",en:"Stress Release Room",ko:" ",th:"",vi:"Phng Gii Ta p Lc",ms:"Bilik Pelepasan Tekanan",la:"Cubiculum Liberationis Tensionis"},desc:{"zh-TW":"","zh-CN":"",en:"Simple games help quickly relieve stress and emotions",ja:"",ko:"       ",th:" ",vi:"Tr chi n gin gip nhanh chng gim bt cng thng v cm xc",ms:"Permainan mudah membantu melegakan tekanan dan emosi dengan cepat",la:"Ludi simplices adiuvant tensionem et affectus celeriter alleviare"},path:"/emotion-release"}];m.useLayoutEffect(()=>{if(o.current&&s.current){const N=o.current.getBoundingClientRect().top,O=s.current.getBoundingClientRect().top,oe=o.current.getBoundingClientRect().height,ge=s.current.getBoundingClientRect().height;l(N+oe-(O+ge))}},[e]),m.useEffect(()=>{const N=ri(c,O=>{h(O),g(!0)});return()=>N()},[c]);const Q=m.useRef(null);m.useEffect(()=>{if(!y)return;const N=O=>{Q.current&&!Q.current.contains(O.target)&&k(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[y]);const X=m.useRef(null);m.useEffect(()=>{if(!j)return;const N=O=>{X.current&&!X.current.contains(O.target)&&T(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[j]);const de=N=>{t("/chat")},V={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Keluar",la:"Exire"},ee={"zh-TW":"","zh-CN":"",en:"Co-creation Lab",ja:"",ko:"",th:"",vi:"Phng Th Nghim ng Sng To",ms:"Makmal Penciptaan Bersama",la:"Laboratorium Co-creationis"},he={"zh-TW":"","zh-CN":"",en:"User collaboration and mutual assistance, promote co-creation and cooperative tasks",ja:"",ko:"   ,     ",th:" ",vi:"S hp tc v h tr ln nhau ca ngi dng, thc y ng sng to v nhim v hp tc",ms:"Kerjasama pengguna dan bantuan bersama, galakkan penciptaan bersama dan tugas kerjasama",la:"Collaboratio usorum et auxilium mutuum, promovere co-creationem et opera cooperativa"},be={"zh-TW":{title:"/",btn:"/",close:""},"zh-CN":{title:"/",btn:"/",close:""},en:{title:"Please register/login to use this feature",btn:"Go to Register/Login",close:"Close"},ja:{title:"/",btn:"/",close:""},ko:{title:"   / ",btn:"/ ",close:""},th:{title:"/",btn:"/",close:""},vi:{title:"Vui lng ng k/ng nhp  s dng chc nng ny",btn:"n ng k/ng nhp",close:"ng"},ms:{title:"Sila daftar/log masuk untuk menggunakan ciri ini",btn:"Pergi ke Daftar/Log Masuk",close:"Tutup"},la:{title:"Quaeso registra/aperi ut hoc munus utaris",btn:"Ad registra/login",close:"Claude"}}[e],te=(N,O)=>C(this,null,function*(){if(!u){b(!0);return}if(_){N();return}if(O)try{const oe=yield fetch("/api/subscription/check-permission",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:u.uid,feature:O})});if(!oe.ok)throw new Error("");const ge=yield oe.json();if(!ge.allowed){ge.canRenew?(A({currentPlan:ge.currentPlan,remainingDays:ge.remainingDays,usedTokens:ge.usedTokens,totalTokens:ge.totalTokens}),R(!0)):(P({title:"",message:ge.reason||"",requiredPlan:ge.requiredPlan||"basic"}),z(!0));return}}catch(oe){console.error(":",oe)}N()});return p?r.jsxs("div",{style:{position:"relative",minHeight:"100vh"},children:[B?r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:100,background:"rgba(255,255,255,0.95)",padding:"8px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 8px #0001"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:r.jsx("img",{src:"/ctx-logo.png",alt:"logo",style:{width:72,height:72,cursor:"pointer"},onClick:()=>t("/")})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:u.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}}),r.jsx("span",{style:{color:"#6B5BFF",fontWeight:600,fontSize:12,maxWidth:60,overflow:"hidden",textOverflow:"ellipsis"},children:u.displayName||u.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(c)}),style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px",borderRadius:4,fontWeight:600,border:"1px solid #ff6347",color:"#ff6347",background:"#fff",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s"},children:V[e]})]}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"1px solid #1976d2",borderRadius:6,fontWeight:600,fontSize:12,padding:"4px 8px"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Register":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"ng k":e==="ms"?"Daftar":"Registrare"}),r.jsx(Ir,{style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px"}}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:X,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:12,padding:"8px 10px",minWidth:44,height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>T(N=>!N),onMouseOver:N=>{N.currentTarget.style.background="#5a4fd9",N.currentTarget.style.borderColor="#5a4fd9"},onMouseOut:N=>{N.currentTarget.style.background="#6B5BFF",N.currentTarget.style.borderColor="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),j&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:180,maxWidth:220,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:"#6B5BFF"},children:e==="zh-TW"||e==="zh-CN"?"":e==="en"?"Legal Documents":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"Ti liu php l":e==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:Na,titleKey:"privacy",path:"/privacy-policy"},{key:"terms",title:Na,titleKey:"terms",path:"/terms"},{key:"data",title:Na,titleKey:"deletion",path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(N=>{var O;return r.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"11px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(N.path),T(!1)},onMouseOver:oe=>{oe.currentTarget.style.background="#f3f0ff",oe.currentTarget.style.color="#6B5BFF"},onMouseOut:oe=>{oe.currentTarget.style.background="#fff",oe.currentTarget.style.color="#232946"},children:N.titleKey?((O=N.title[e])==null?void 0:O[N.titleKey])||N.title["zh-TW"][N.titleKey]:N.title[e]||N.title["zh-TW"]},N.key)})]})]})]})]}):r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":e==="zh-TW"||e==="zh-CN"?" Restarter ":e==="en"?"Learn about Restarter platform":e==="ja"?"Restarter ":e==="ko"?"Restarter   ":e==="th"?" Restarter":e==="vi"?"Tm hiu v nn tng Restarter":e==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:e==="zh-TW"?" Restarter":e==="zh-CN"?" Restarter":e==="en"?" RestarterWho We Are":e==="ja"?" Restarter":e==="ko"?" Restarter ":e==="th"?" Restarter":e==="vi"?" RestarterChng ti l ai":e==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Provide feedback and suggestions":e==="ja"?"":e==="ko"?"  ":e==="th"?"":e==="vi"?"Cung cp phn hi  xut":e==="ms"?"Berikan maklum balas dan cadangan":"Praebe consilia et suggestiones",role:"button",children:e==="zh-TW"?" ":e==="zh-CN"?" ":e==="en"?" FeedbackWe Want to Hear You":e==="ja"?" ":e==="ko"?"    ":e==="th"?" ":e==="vi"?" Hp gp Chng ti mun lng nghe bn":e==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),u?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:u.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:u.displayName||u.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(c)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:V[e]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:e==="zh-TW"?"/":e==="zh-CN"?"/":e==="en"?"Register / Login":e==="ja"?"/":e==="ko"?"/":e==="th"?"/":e==="vi"?"ng k/ng nhp":e==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:Q,children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>k(N=>!N),children:[e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"English":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Ting Vit":e==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),y&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(N=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:N===e?"#6B5BFF":"#232946",fontWeight:N===e?700:500,background:N===e?"#f3f0ff":"#fff"},onClick:()=>{n(N),k(!1)},children:N==="zh-TW"?"":N==="zh-CN"?"":N==="en"?"English":N==="ja"?"":N==="ko"?"":N==="th"?"":N==="vi"?"Ting Vit":N==="ms"?"Bahasa Melayu":"Latin"},N))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:X,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>T(N=>!N),onMouseOver:N=>{N.currentTarget.style.background="#6B5BFF",N.currentTarget.style.color="#fff"},onMouseOut:N=>{N.currentTarget.style.background="#fff",N.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),j&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:e==="zh-TW"||e==="zh-CN"?"":e==="en"?"Legal Documents":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"Ti liu php l":e==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:Na,titleKey:"privacy",path:"/privacy-policy"},{key:"terms",title:Na,titleKey:"terms",path:"/terms"},{key:"data",title:Na,titleKey:"deletion",path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(N=>{var O;return r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(N.path),T(!1)},onMouseOver:oe=>{oe.currentTarget.style.background="#f3f0ff",oe.currentTarget.style.color="#6B5BFF"},onMouseOut:oe=>{oe.currentTarget.style.background="#fff",oe.currentTarget.style.color="#232946"},children:N.titleKey?((O=N.title[e])==null?void 0:O[N.titleKey])||N.title["zh-TW"][N.titleKey]:N.title[e]||N.title["zh-TW"]},N.key)})]})]})]}),B?r.jsxs("div",{style:{width:"100vw",minHeight:"100vh",background:"url('/plains.png') center center/cover no-repeat",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:100},children:[r.jsx("div",{style:{width:"100%",padding:"0 16px",marginBottom:16},children:r.jsx(nS,{})}),r.jsxs("div",{style:{width:"100%",padding:"20px 16px",textAlign:"center"},children:[r.jsx("div",{style:{marginBottom:16},children:r.jsx("span",{style:{fontWeight:900,color:"#232946",fontSize:16,lineHeight:1.2,letterSpacing:.3,textShadow:"1px 2px 8px #fff",whiteSpace:"nowrap"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Regain trust and start anew, you are never alone!":e==="ja"?"":e==="ko"?" ,  .    !":e==="th"?" !":e==="vi"?"Tm li nim tin, bt u li, bn khng bao gi n c!":e==="ms"?"Temui semula kepercayaan, mulakan semula, anda tidak pernah keseorangan!":"Fidem recupera et iterum incipe, numquam solus es!"})}),r.jsxs("h1",{style:{fontSize:24,fontWeight:900,color:"#fff",marginBottom:12,textShadow:"0 2px 8px #232946"},children:[r.jsx("span",{style:{color:"#6B5BFF"},children:"Restarter"})," Global Platform"]}),r.jsx("div",{style:{marginBottom:10},children:r.jsx("span",{style:{color:"#232946",fontWeight:500,fontSize:14,lineHeight:1.4,whiteSpace:"pre-line"},children:wf[e].desc})})]}),r.jsxs("div",{style:{width:"100%",padding:"0 16px",marginBottom:16,display:"flex",flexDirection:"row",gap:"12px",justifyContent:"center"},children:[r.jsx("img",{src:"/herogirl.png",style:{width:"50%",maxWidth:150,height:"auto",objectFit:"contain",borderRadius:"16px",boxShadow:"none"}}),r.jsx("img",{src:"/Robotgirl.png",style:{width:"50%",maxWidth:150,height:"auto",objectFit:"contain",borderRadius:"16px",boxShadow:"none"}})]}),r.jsxs("div",{style:{width:"100%",padding:"0 16px",marginBottom:"16px",position:"relative"},children:[r.jsxs("button",{onClick:()=>te(()=>t("/social-integration")),style:{background:"linear-gradient(135deg, #6B5BFF 0%, #5A4FCF 100%)",border:"none",borderRadius:"16px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 16px rgba(107, 91, 255, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",width:"100%",justifyContent:"center",position:"relative"},onMouseOver:N=>{N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 6px 20px rgba(107, 91, 255, 0.4)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="1")},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="0 4px 16px rgba(107, 91, 255, 0.3)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="0")},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),e==="zh-TW"?"":e==="zh-CN"?"":e==="ja"?"":e==="en"?"Social Integration Assessment":e==="ko"?"  ":e==="th"?"":e==="vi"?"nh Gi Ha Nhp X Hi":e==="ms"?"Penilaian Integrasi Sosial":"Aestimatio Integrationis Socialis"]}),r.jsx("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",background:"#232946",color:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"10px",fontWeight:"500",textAlign:"center",whiteSpace:"nowrap",opacity:"0",transition:"opacity 0.3s ease",zIndex:1e3,pointerEvents:"none",maxWidth:"200px",marginBottom:"8px"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="ja"?"":e==="en"?"Assess personal social integration, get professional advice and improvement direction":e==="ko"?"        ":e==="th"?" ":e==="vi"?"nh gi mc  ha nhp x hi c nhn, nhn li khuyn chuyn mn v hng ci thin":e==="ms"?"Nilai integrasi sosial peribadi, dapatkan nasihat profesional dan arah penambahbaikan":"Aestima integrationem socialem personalem, consilium professionalem et directionem meliorationis accipe"})]}),r.jsxs("div",{style:{width:"100%",padding:"0 16px",display:"flex",flexDirection:"column",gap:12},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:8,flexWrap:"wrap"},children:[r.jsxs("button",{className:"feature-btn",style:{flex:1,minWidth:"calc(50% - 4px)",padding:"16px 8px",borderRadius:12,border:"2px solid #6B5BFF",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:14,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},onClick:()=>te(()=>t("/friend")),children:[r.jsx("span",{style:{fontSize:20},children:iS[e]}),r.jsx("span",{style:{fontSize:12,textAlign:"center"},children:i.friend})]}),r.jsxs("button",{className:"feature-btn",style:{flex:1,minWidth:"calc(50% - 4px)",padding:"16px 8px",borderRadius:12,border:"2px solid #6B5BFF",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:14,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},onClick:()=>te(()=>de(),"aiChat"),children:[r.jsx("span",{style:{fontSize:20},children:""}),r.jsx("span",{style:{fontSize:12,textAlign:"center"},children:i.chat})]})]}),r.jsx("div",{style:{display:"flex",flexDirection:"row",gap:8,flexWrap:"wrap"},children:re.slice(0,2).map(N=>r.jsxs("button",{className:"feature-btn",style:{flex:1,minWidth:"calc(50% - 4px)",padding:"16px 8px",borderRadius:12,border:"2px solid #6B5BFF",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:14,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},onClick:()=>te(()=>t(N.path)),children:[r.jsx("span",{style:{fontSize:20},children:N.icon}),r.jsx("span",{style:{fontSize:12,textAlign:"center"},children:N.title[e]})]},N.key))}),r.jsx("div",{style:{display:"flex",flexDirection:"row",gap:8,flexWrap:"wrap"},children:re.slice(2,4).map(N=>r.jsxs("button",{className:"feature-btn",style:{flex:1,minWidth:"calc(50% - 4px)",padding:"16px 8px",borderRadius:12,border:"2px solid #6B5BFF",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:14,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},onClick:()=>te(()=>t(N.path)),children:[r.jsx("span",{style:{fontSize:20},children:N.icon}),r.jsx("span",{style:{fontSize:12,textAlign:"center"},children:N.title[e]})]},N.key))}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:8,flexWrap:"wrap"},children:[re.slice(4).map(N=>r.jsxs("button",{className:"feature-btn",style:{flex:1,minWidth:"calc(50% - 4px)",padding:"16px 8px",borderRadius:12,border:"2px solid #6B5BFF",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:14,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},onClick:()=>te(()=>t(N.path)),children:[r.jsx("span",{style:{fontSize:20},children:N.icon}),r.jsx("span",{style:{fontSize:12,textAlign:"center"},children:N.title[e]})]},N.key)),r.jsxs("button",{className:"feature-btn",style:{flex:1,minWidth:"calc(50% - 4px)",padding:"16px 8px",borderRadius:12,background:"linear-gradient(90deg, #ffe0b2 0%, #ffb74d 100%)",color:"#b85c00",border:"2px solid #ffb74d",fontWeight:900,fontSize:14,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},onClick:()=>te(()=>t("/HelpLab")),children:[r.jsx("span",{style:{fontSize:20},children:""}),r.jsx("span",{style:{fontSize:12,textAlign:"center"},children:ee[e]})]})]})]}),r.jsx("div",{style:{width:"100%",padding:"20px 16px",display:"flex",flexDirection:"column",gap:12,boxSizing:"border-box"},children:r.jsx("span",{href:"/plans",style:{width:"100%",padding:"12px",borderRadius:10,background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:14,textDecoration:"none",border:"2px solid #6B5BFF",cursor:"pointer",textAlign:"center",display:"block",boxSizing:"border-box"},children:rS[e]})})]}):r.jsxs("div",{style:{width:"100vw",minHeight:"160vh",background:"url('/plains.png') center center/cover no-repeat",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center"},children:[r.jsxs("div",{className:"home-left-col left-relative",style:{flex:1,minWidth:320,maxWidth:600,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",padding:"120px 0 0 0",zIndex:2},children:[r.jsx("div",{className:"fixed-logo-box",style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",className:"fixed-logo-img",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{className:"column-content",style:{justifyContent:"center",alignItems:"center",height:"100%",paddingTop:e==="vi"?"200px":e==="ms"?"220px":e==="la"?"240px":e==="en"?"180px":"80px"},children:[r.jsx("div",{style:{width:"100%",maxWidth:900,margin:"0 auto 16px auto",textAlign:"center",wordBreak:"break-word",whiteSpace:"normal",marginLeft:"0px"},children:r.jsx("span",{style:{fontWeight:900,color:"#232946",fontSize:20,lineHeight:1.2,letterSpacing:.5,textShadow:"2px 4px 12px #fff, 0 2px 8px #23294688",display:"inline-block",whiteSpace:"nowrap"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Regain trust and start anew, you are never alone!":e==="ja"?"":e==="ko"?" ,  .    !":e==="th"?" !":e==="vi"?"Tm li nim tin, bt u li, bn khng bao gi n c!":e==="ms"?"Temui semula kepercayaan, mulakan semula, anda tidak pernah keseorangan!":"Fidem recupera et iterum incipe, numquam solus es!"})}),r.jsxs("h1",{className:"main-title",style:{position:"relative",left:"0px",fontSize:36,fontWeight:900,color:"#fff",marginBottom:18,textShadow:"0 2px 12px #232946, 0 4px 24px #0008"},children:[r.jsx("span",{style:{color:"#6B5BFF"},children:"Restarter"})," Global Platform"]}),r.jsx("div",{style:{width:"100%",textAlign:"center",margin:"0 auto",marginBottom:16,marginTop:"0px"},children:r.jsx("span",{style:{color:"#232946",fontWeight:500,fontSize:16,lineHeight:1.5,letterSpacing:.5,whiteSpace:"pre-line"},children:wf[e].desc})}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px",position:"relative"},children:[r.jsxs("button",{onClick:()=>te(()=>t("/social-integration")),style:{background:"linear-gradient(135deg, #6B5BFF 0%, #5A4FCF 100%)",border:"none",borderRadius:"16px",padding:"16px 32px",color:"white",cursor:"pointer",fontSize:"18px",fontWeight:"600",boxShadow:"0 4px 16px rgba(107, 91, 255, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px",position:"relative"},onMouseOver:N=>{N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 6px 20px rgba(107, 91, 255, 0.4)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="1")},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="0 4px 16px rgba(107, 91, 255, 0.3)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="0")},children:[r.jsx("span",{style:{fontSize:"24px"},children:""}),e==="zh-TW"?"":e==="zh-CN"?"":e==="ja"?"":e==="en"?"Social Integration Assessment":e==="ko"?"  ":e==="th"?"":e==="vi"?"nh Gi Ha Nhp X Hi":e==="ms"?"Penilaian Integrasi Sosial":"Aestimatio Integrationis Socialis"]}),r.jsx("div",{style:{position:"absolute",top:"-50px",left:"50%",transform:"translateX(-50%)",background:"#232946",color:"white",padding:"8px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",textAlign:"center",whiteSpace:"nowrap",opacity:"0",transition:"opacity 0.3s ease",zIndex:1e3,pointerEvents:"none"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="ja"?"":e==="en"?"Assess personal social integration, get professional advice and improvement direction":e==="ko"?"        ":e==="th"?" ":e==="vi"?"nh gi mc  ha nhp x hi c nhn, nhn li khuyn chuyn mn v hng ci thin":e==="ms"?"Nilai integrasi sosial peribadi, dapatkan nasihat profesional dan arah penambahbaikan":"Aestima integrationem socialem personalem, consilium professionalem et directionem meliorationis accipe"})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:18,marginBottom:60,justifyContent:"center",width:"100%"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,justifyContent:"center"},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("button",{className:"feature-btn",style:{fontSize:18,padding:"16px 16px",minWidth:160,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",gap:8,justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",transition:"all 0.3s ease"},onClick:()=>te(()=>t("/friend"),"userInteraction"),onMouseOver:N=>{N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 6px 20px rgba(107, 91, 255, 0.4)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="1")},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="none";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="0")},role:"button",children:[r.jsx("span",{style:{fontSize:32},children:iS[e]}),r.jsx("span",{style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:i.friend})]}),r.jsx("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",background:"#232946",color:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center",whiteSpace:"nowrap",opacity:"0",transition:"opacity 0.3s ease",zIndex:1e3,pointerEvents:"none",maxWidth:"300px",marginBottom:"8px"},children:""})]}),re.slice(0,2).map(N=>r.jsxs("button",{className:"feature-btn",style:{fontSize:18,padding:"16px 16px",minWidth:160,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",gap:8,justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF"},onClick:()=>te(()=>t(N.path)),"aria-label":N.desc[e],role:"button",children:[r.jsx("span",{style:{fontSize:32,transform:N.icon===""?"translateY(8px)":"none"},children:N.icon}),r.jsx("span",{style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:N.title[e]})]},N.key))]}),r.jsx("div",{style:{display:"flex",flexDirection:"row",gap:18,justifyContent:"center"},children:re.slice(2,5).map(N=>r.jsxs("button",{className:"feature-btn",style:{fontSize:18,padding:"16px 16px",minWidth:160,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",gap:8,justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF"},onClick:()=>te(()=>t(N.path)),"aria-label":N.desc[e],role:"button",children:[r.jsx("span",{style:{fontSize:32},children:N.icon}),r.jsx("span",{style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:N.title[e]})]},N.key))}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,justifyContent:"center",marginTop:10},children:[re.slice(5,6).map(N=>r.jsxs("button",{className:"feature-btn",style:{fontSize:18,padding:"16px 16px",minWidth:160,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",gap:8,justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF"},onClick:()=>te(()=>t(N.path)),"aria-label":N.desc[e],role:"button",children:[r.jsx("span",{style:{fontSize:32},children:N.icon}),r.jsx("span",{style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:N.title[e]})]},N.key)),r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("button",{className:"feature-btn mutual-help-btn",style:{fontSize:18,padding:"16px 16px",minWidth:180,maxWidth:240,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",gap:8,justifyContent:"center",background:"linear-gradient(90deg, #ffe0b2 0%, #ffb74d 100%)",color:"#b85c00",border:"2px solid #ffb74d",fontWeight:900,boxShadow:"0 2px 12px #ffb74d55",transition:"all 0.3s ease"},onClick:()=>te(()=>t("/HelpLab")),onMouseOver:N=>{N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 6px 20px rgba(255, 183, 77, 0.4)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="1")},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="0 2px 12px #ffb74d55";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="0")},role:"button",children:[r.jsx("span",{style:{fontSize:32},children:""}),r.jsx("span",{style:{fontWeight:900,color:"#1976d2",textAlign:"center",lineHeight:1.2},children:ee[e]})]}),r.jsx("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",background:"#232946",color:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center",whiteSpace:"nowrap",opacity:"0",transition:"opacity 0.3s ease",zIndex:1e3,pointerEvents:"none",maxWidth:"200px",marginBottom:"8px"},children:he[e]})]}),r.jsxs("button",{className:"feature-btn",style:{fontSize:18,padding:"16px 16px",minWidth:160,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",gap:8,justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF"},onClick:()=>te(()=>t("/emotion-release")),"aria-label":e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Simple games help quickly relieve stress and emotions":e==="ja"?"":e==="ko"?"       ":e==="th"?" ":e==="vi"?"Tr chi n gin gip nhanh chng gim bt cng thng v cm xc":e==="ms"?"Permainan mudah membantu melegakan tekanan dan emosi dengan cepat":"Ludi simplices adiuvant tensionem et affectus celeriter alleviare",role:"button",children:[r.jsx("span",{style:{fontSize:32},children:""}),r.jsx("span",{style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="ja"?"":e==="en"?"Stress Release Room":e==="ko"?" ":e==="th"?"":e==="vi"?"Phng Gii Ta p Lc":e==="ms"?"Bilik Pelepasan Tekanan":"Cubiculum Liberationis Tensionis"})]})]})]})]})]}),r.jsxs("div",{className:"home-right-col",style:{flex:1,minWidth:320,maxWidth:520,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingTop:120,zIndex:2},children:[r.jsx("div",{style:{display:"flex",gap:18,marginBottom:18,justifyContent:"center",width:"100%"},children:r.jsx("span",{href:"/plans",style:{background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:18,padding:"10px 28px",borderRadius:10,boxShadow:"0 2px 8px #6B5BFF33",textDecoration:"none",border:"2px solid #6B5BFF",cursor:"pointer"},children:rS[e]})}),r.jsx("div",{style:{marginBottom:18,width:"100%",maxWidth:300},children:r.jsx(nS,{})}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"20px",width:"100%",alignItems:"center",justifyContent:"center",marginTop:"-100px",height:"calc(100vh - 120px)",maxHeight:600,minHeight:400},children:[r.jsx("img",{src:"/herogirl.png",className:"home-mic-img",style:{marginBottom:0,height:"100%",width:"50%",objectFit:"contain",borderRadius:"0",boxShadow:"none",border:"none"}}),r.jsx("img",{src:"/Robotgirl.png",className:"home-mic-img",style:{marginBottom:0,height:"100%",width:"50%",objectFit:"contain",borderRadius:"0",boxShadow:"none",border:"none"}})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("button",{ref:s,className:"feature-btn home-chat-btn",style:{height:80,marginTop:0,marginBottom:0,position:"relative",top:"-40px",gap:8,padding:"16px 16px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF"},onClick:()=>te(()=>de(),"aiChat"),onMouseOver:N=>{N.currentTarget.style.transform="translateY(-2px)",N.currentTarget.style.boxShadow="0 6px 20px rgba(107, 91, 255, 0.4)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="1")},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="0 4px 16px rgba(107, 91, 255, 0.3)";const O=N.currentTarget.nextElementSibling;O&&(O.style.opacity="0")},role:"button",children:[r.jsx("span",{role:"img",style:{fontSize:32},children:""}),r.jsx("span",{className:"home-chat-btn-text",style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:i.chat})]}),r.jsx("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",background:"#232946",color:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center",whiteSpace:"nowrap",opacity:"0",transition:"opacity 0.3s ease",zIndex:1e3,pointerEvents:"none",maxWidth:"200px",marginBottom:"8px"},children:"/"})]}),r.jsxs("button",{className:"feature-btn",style:{height:80,marginTop:10,marginBottom:0,position:"relative",top:"-40px",gap:8,padding:"16px 16px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF"},onClick:()=>te(()=>t("/skillbox")),"aria-label":e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Enter SkillBox to practice conversation skills and handle various challenges":e==="ja"?"SkillBox":e==="ko"?"SkillBox       ":e==="th"?" SkillBox ":e==="vi"?"Vo SkillBox  luyn tp k nng hi thoi v x l cc thch thc khc nhau":e==="ms"?"Masuk ke SkillBox untuk berlatih kemahiran perbualan dan menangani pelbagai cabaran":"Intra in SkillBox ad exercenda colloquia et varias difficultates tractandas",role:"button",children:[r.jsx("span",{style:{fontSize:32},children:""}),r.jsx("span",{style:{fontWeight:700,textAlign:"center",lineHeight:1.2},children:e==="zh-TW"?"":e==="zh-CN"?"":"SkillBox"})]})]})]}),x&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:28,minWidth:280,maxWidth:340,width:"90vw",position:"relative",display:"flex",flexDirection:"column",gap:12},children:[r.jsx("button",{type:"button",onClick:()=>b(!1),style:{position:"absolute",top:10,right:12,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsx("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:be.title}),r.jsx("button",{onClick:()=>t("/register"),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:14,padding:"12px 0",fontWeight:700,fontSize:17,cursor:"pointer",margin:"12px 0"},children:be.btn}),r.jsx("button",{onClick:()=>b(!1),style:{background:"#eee",color:"#666",border:"none",borderRadius:14,padding:"10px 0",fontWeight:700,fontSize:16,cursor:"pointer"},children:be.close})]})}),r.jsx(SW,{isOpen:v,onClose:()=>z(!1),title:D.title,message:D.message,requiredPlan:D.requiredPlan}),r.jsx(mc,{isOpen:S,onClose:()=>R(!1),currentPlan:E.currentPlan,remainingDays:E.remainingDays,usedTokens:E.usedTokens,totalTokens:E.totalTokens}),r.jsx("style",{children:`
        .feature-btn, .home-chat-btn, .topbar-btn {
          transition: background 0.18s, color 0.18s, box-shadow 0.18s;
          cursor: pointer;
        }
        /*  */
        .feature-btn, .home-chat-btn {
          background: #fff;
          border-radius: 12px;
          border: 2px solid #6B5BFF;
          color: #6B5BFF;
          font-weight: 700;
          font-size: 16px;
          padding: 8px 16px;
          backdrop-filter: blur(10px);
        }
        .home-chat-btn-text {
          font-size: 18px;
          margin-left: 2px;
        }
        .topbar-btn {
          background: #6c63ff;
          border-radius: 8px;
          border: none;
          color: #fff;
          font-weight: 700;
          font-size: 16px;
          padding: 8px 18px;
        }
        .fixed-logo-box {
          position: fixed;
          top: 16px;
          left: 42px;
          display: flex;
          align-items: center;
          gap: 12px;
          z-index: 10000;
        }
        .fixed-logo-img {
          width: 54px;
          height: 54px;
        }
        .fixed-logo-slogan {
          font-size: 20px;
          font-weight: 700;
          color: #fff;
          text-shadow: 0 2px 8px #232946, 0 4px 18px #0008;
        }
      `})]}):r.jsx("div",{style:{textAlign:"center",marginTop:"30vh",fontSize:24},children:"..."})}function Bd(){const[t,e]=m.useState(null),[n,i]=m.useState(!1),o=Ze(),s=()=>C(this,null,function*(){const c=o.currentUser;if(!c)return null;try{i(!0);const u=yield fetch(`/api/subscription/status/${c.uid}`);if(u.ok){const h=yield u.json();return e(h),h}}catch(u){console.error(":",u)}finally{i(!1)}return null}),a=c=>C(this,null,function*(){const u=o.currentUser;let h=u==null?void 0:u.uid;if(!h){const p=localStorage.getItem("testUser");if(p)h=JSON.parse(p).uid;else return{allowed:!1,reason:""}}try{const p=yield fetch(`/api/subscription/details/${h}`);let g=null;p.ok&&(g=yield p.json());const y=localStorage.getItem("testMode")==="true";if(y)return{allowed:!0,reason:void 0,featureName:{aiChat:"AI ",voiceInput:"",voiceOutput:"",videoChat:"",voiceRecording:""}[c]||c,isFreeUser:!0,isTestMode:!0,currentPlan:"test"};const k=yield fetch("/api/subscription/check-permission",{method:"POST",headers:{"Content-Type":"application/json","x-test-mode":y?"true":"false"},body:JSON.stringify({userId:h,feature:c})});if(k.ok){const j=yield k.json(),T={aiChat:"AI ",voiceInput:"",voiceOutput:"",videoChat:"",voiceRecording:""},x=g&&g.isActive&&g.startDate&&new Date(g.startDate).getTime()>Date.now()-24*60*60*1e3;return We(ke({},j),{featureName:T[c]||c,isFreeUser:j.currentPlan==="free"||!j.currentPlan,isNewSubscription:x,subscriptionData:g})}else return{allowed:!1,reason:"",featureName:c,isFreeUser:!0}}catch(p){return console.error(":",p),{allowed:!1,reason:"",featureName:c,isFreeUser:!0}}}),l=(c,u=0)=>C(this,null,function*(){const h=o.currentUser;let p=h==null?void 0:h.uid;if(!p){const y=localStorage.getItem("testUser");if(y)p=JSON.parse(y).uid;else return}const g=localStorage.getItem("testMode")==="true";try{yield fetch("/api/subscription/record-usage",{method:"POST",headers:{"Content-Type":"application/json","x-test-mode":g?"true":"false"},body:JSON.stringify({userId:p,feature:c,cost:u})})}catch(y){console.error(":",y)}});return m.useEffect(()=>{o.currentUser&&s()},[o.currentUser]),{subscriptionStatus:t,loading:n,checkPermission:a,recordUsage:l,fetchSubscriptionStatus:s}}const _W={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},Sf={"zh-TW":{privacy:"",terms:"/",deletion:""},"zh-CN":{privacy:"",terms:"/",deletion:""},en:{privacy:"Privacy Policy",terms:"Terms/Statement",deletion:"Data Deletion"},ja:{privacy:"",terms:"/",deletion:""},ko:{privacy:"",terms:"/",deletion:"  "},th:{privacy:"",terms:"/",deletion:""},vi:{privacy:"Chnh sch bo mt",terms:"iu khon/Tuyn b",deletion:"Gii thch xa d liu"},ms:{privacy:"Dasar Privasi",terms:"Terma/Penyata",deletion:"Penerangan Pemadaman Data"},la:{privacy:"Consilium de Privata",terms:"Termini/Declaratio",deletion:"Explicatio Deletionis Datae"}};function Ar({className:t,style:e}){const n=tt(),[i,o]=m.useState(null),{lang:s}=dt(),[a,l]=m.useState(!1),c=m.useRef(null);return m.useEffect(()=>{const u=ri(Tr,h=>{o(h)});return()=>u()},[]),m.useEffect(()=>{const u=h=>{c.current&&!c.current.contains(h.target)&&l(!1)};return a&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[a]),r.jsxs("div",{className:t,style:ke({position:"fixed",top:0,left:0,right:0,zIndex:100,background:"rgba(255,255,255,0.95)",padding:"8px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 8px #0001"},e),children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:r.jsx("img",{src:"/ctx-logo.png",alt:"logo",style:{width:72,height:72,cursor:"pointer"},onClick:()=>n("/")})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:i.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}}),r.jsx("span",{style:{color:"#6B5BFF",fontWeight:600,fontSize:12,maxWidth:60,overflow:"hidden",textOverflow:"ellipsis"},children:i.displayName||i.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(Tr)}),style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px",borderRadius:4,fontWeight:600,border:"1px solid #ff6347",color:"#ff6347",background:"#fff",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s"},children:_W[s]})]}):r.jsx("button",{className:"topbar-btn",onClick:()=>n("/register"),style:{background:"#fff",color:"#1976d2",border:"1px solid #1976d2",borderRadius:6,fontWeight:600,fontSize:12,padding:"4px 8px"},children:s==="zh-TW"?"":s==="zh-CN"?"":s==="en"?"Register":s==="ja"?"":s==="ko"?"":s==="th"?"":s==="vi"?"ng k":s==="ms"?"Daftar":"Registrare"}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:c,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:12,padding:"8px 10px",minWidth:44,height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>l(u=>!u),onMouseOver:u=>{u.currentTarget.style.background="#5a4fd9",u.currentTarget.style.borderColor="#5a4fd9"},onMouseOut:u=>{u.currentTarget.style.background="#6B5BFF",u.currentTarget.style.borderColor="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),a&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:180,maxWidth:220,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:"#6B5BFF"},children:s==="zh-TW"||s==="zh-CN"?"":s==="en"?"Legal Documents":s==="ja"?"":s==="ko"?" ":s==="th"?"":s==="vi"?"Ti liu php l":s==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:Sf,titleKey:"privacy",path:"/privacy-policy"},{key:"terms",title:Sf,titleKey:"terms",path:"/terms"},{key:"data",title:Sf,titleKey:"deletion",path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(u=>{var h;return r.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"11px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{n(u.path),l(!1)},onMouseOver:p=>{p.currentTarget.style.background="#f3f0ff",p.currentTarget.style.color="#6B5BFF"},onMouseOut:p=>{p.currentTarget.style.background="#fff",p.currentTarget.style.color="#232946"},children:u.titleKey?((h=u.title[s])==null?void 0:h[u.titleKey])||u.title["zh-TW"][u.titleKey]:u.title[s]||u.title["zh-TW"]},u.key)})]})]})]})]})}const sS={"zh-TW":{back:"",logout:"",title:"  Restart Wall",subtitle:"",subtitleDesc:"",inbox:" ",placeholder:"...(200)",send:window.innerWidth<=768?"":"",sending:"...",noMessages:"",commentsTitle:"",noComments:"",modalTitle:"",modalAction:"",nicknamePlaceholder:"",commentPlaceholder:"...",submitComment:"",supportMessage:" ",supportDesc:"",recording:"",pressToStop:"",readyToRecord:"",recordInstruction:"",recordTimeLimit:"1",cancel:"",startRecording:"",voice:""},"zh-CN":{back:"",logout:"",title:"  Restart Wall",subtitle:"",subtitleDesc:"",inbox:" ",placeholder:"...",send:"",sending:"...",noMessages:"",commentsTitle:"",noComments:"",modalTitle:"",modalAction:"",nicknamePlaceholder:"",commentPlaceholder:"...",submitComment:"",supportMessage:" ",supportDesc:"",recording:"",pressToStop:"",readyToRecord:"",recordInstruction:"",recordTimeLimit:"1",cancel:"",startRecording:"",voice:""},en:{back:"Back",logout:"Logout",title:" Emotion Wall Restart Wall",subtitle:"Social Emotional Support Platform",subtitleDesc:"Here, everyone can find emotional belonging and support. Share your feelings, or provide warm support messages to others. Let's build a caring community together.",inbox:" My Inbox",placeholder:"Say what you feel...",send:"Send",sending:"Sending...",noMessages:"No messages yet. Come and share your feelings!",commentsTitle:"Support Messages:",noComments:"No support messages yet",modalTitle:"Here's their post:",modalAction:"Leave support message:",nicknamePlaceholder:"Your Nickname",commentPlaceholder:"Support content...",submitComment:"Send Support",supportMessage:" Give Support",supportDesc:"See others' emotional sharing and give warm support and encouragement",recording:"Recording",pressToStop:"Press to Stop",readyToRecord:"Ready to Start Recording",recordInstruction:'After clicking "Start Recording", the system will begin recording your voice message.',recordTimeLimit:"Recording time limit is 1 minute",cancel:"Cancel",startRecording:"Start Recording",voice:"Voice"},ja:{back:"",logout:"",title:"  Restart Wall",subtitle:"",subtitleDesc:"",inbox:" ",placeholder:"...",send:"",sending:"...",noMessages:"",commentsTitle:"",noComments:"",modalTitle:"",modalAction:"",nicknamePlaceholder:"",commentPlaceholder:"...",submitComment:"",supportMessage:" ",supportDesc:"",recording:"",pressToStop:"",readyToRecord:"",recordInstruction:"",recordTimeLimit:"1",cancel:"",startRecording:"",voice:""},ko:{back:"",logout:"",title:"   Restart Wall",subtitle:"   ",subtitleDesc:"        .             .",inbox:"  ",placeholder:"  ...",send:"",sending:" ...",noMessages:"  .    !",commentsTitle:" :",noComments:"   ",modalTitle:" :",modalAction:"   :",nicknamePlaceholder:"",commentPlaceholder:" ...",submitComment:" ",supportMessage:" ",supportDesc:"        ",recording:" ",pressToStop:" ",readyToRecord:" ",recordInstruction:"       .",recordTimeLimit:"  1 ",cancel:"",startRecording:" ",voice:""},vi:{back:"Quay li",logout:"ng xut",title:" Bc tng Cm xc Restart Wall",subtitle:"Nn tng H tr Cm xc X hi",subtitleDesc:" y, mi ngi u c th tm thy s thuc v v h tr v mt cm xc. Chia s cm xc ca bn, hoc cung cp tin nhn h tr m p cho ngi khc. Hy cng nhau xy dng mt cng ng quan tm.",inbox:" Hp th ca ti",placeholder:"Ni ra cm xc ca bn...",send:"Gi",sending:"ang gi...",noMessages:"Cha c tin nhn no. Hy n v chia s cm xc ca bn!",commentsTitle:"Tin nhn h tr:",noComments:"Cha c tin nhn h tr no",modalTitle:"y l bi ng ca h:",modalAction:" li tin nhn h tr:",nicknamePlaceholder:"Bit danh ca bn",commentPlaceholder:"Ni dung h tr...",submitComment:"Gi h tr",supportMessage:" Gi h tr",supportDesc:"Xem chia s cm xc ca ngi khc v a ra h tr v khch l m p",recording:"ang ghi m",pressToStop:"Nhn  dng",readyToRecord:"Sn sng ghi m",recordInstruction:'Sau khi nhp vo "Bt u ghi m", h thng s bt u ghi m tin nhn ging ni ca bn.',recordTimeLimit:"Thi gian ghi m gii hn 1 pht",cancel:"Hy",startRecording:"Bt u ghi m",voice:"Ging ni"},th:{back:"",logout:"",title:"  Restart Wall",subtitle:"",subtitleDesc:"    ",inbox:" ",placeholder:"...",send:"",sending:"...",noMessages:" !",commentsTitle:":",noComments:"",modalTitle:":",modalAction:":",nicknamePlaceholder:"",commentPlaceholder:"...",submitComment:"",supportMessage:" ",supportDesc:"",recording:"",pressToStop:"",readyToRecord:"",recordInstruction:' "" ',recordTimeLimit:" 1 ",cancel:"",startRecording:"",voice:""},la:{back:"Redire",logout:"Exire",title:" Murus Emotionum Restart Wall",subtitle:"Platea Socialis Sustentationis Emotionalis",subtitleDesc:"Hic, omnes possunt invenire pertinere emotionalem et sustentationem. Communica sensus tuos, vel praebe calidas sustentationis epistulas aliis. Simul aedificemus communitatem curantem.",inbox:" Cista Mea",placeholder:"Dic quod sentis...",send:"Mittere",sending:"Mittens...",noMessages:"Nullae epistulae adhuc. Veni et communica sensus tuos!",commentsTitle:"Epistulae Sustentationis:",noComments:"Nullae epistulae sustentationis adhuc",modalTitle:"Ecce nuntius eorum:",modalAction:"Mitte epistulam sustentationis:",nicknamePlaceholder:"Tuum agnomen",commentPlaceholder:"Contentum sustentationis...",submitComment:"Mitte Sustentationem",supportMessage:" Da Sustentationem",supportDesc:"Vide communicationem emotionalem aliorum et praebe calidam sustentationem et cohortationem",recording:"Recordans",pressToStop:"Preme ad Desinere",readyToRecord:"Paratus ad Recordandum",recordInstruction:'Postquam "Incipe Recordandum" cliccas, systema incipiet recordare nuntium vocis tuae.',recordTimeLimit:"Tempus recordandi limitatur ad 1 minuta",cancel:"Cancella",startRecording:"Incipe Recordandum",voice:"Vox"},ms:{back:"Kembali",logout:"Log Keluar",title:" Tembok Emosi Restart Wall",subtitle:"Platform Sokongan Emosi Sosial",subtitleDesc:"Di sini, semua orang dapat mencari rasa kepunyaan dan sokongan emosi. Kongsi perasaan anda, atau berikan mesej sokongan yang hangat kepada orang lain. Mari kita bina komuniti yang prihatin bersama.",inbox:" Kotak Mesej Saya",placeholder:"Katakan perasaan anda...",send:"Hantar",sending:"Menghantar...",noMessages:"Belum ada mesej lagi. Datang dan kongsi perasaan anda!",commentsTitle:"Mesej Sokongan:",noComments:"Belum ada mesej sokongan",modalTitle:"Ini adalah siaran mereka:",modalAction:"Tinggalkan mesej sokongan:",nicknamePlaceholder:"Nama samaran anda",commentPlaceholder:"Kandungan sokongan...",submitComment:"Hantar Sokongan",supportMessage:" Beri Sokongan",supportDesc:"Lihat perkongsian emosi orang lain dan berikan sokongan dan galakan yang hangat",recording:"Merakam",pressToStop:"Tekan untuk Berhenti",readyToRecord:"Sedia untuk Merakam",recordInstruction:'Selepas mengklik "Mula Merakam", sistem akan mula merakam mesej suara anda.',recordTimeLimit:"Masa rakaman terhad kepada 1 minit",cancel:"Batal",startRecording:"Mula Merakam",voice:"Suara"}},IW={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"};function CW(){const t=tt(),e=Ze(),n=kd(),[i,o]=m.useState([]),[s,a]=m.useState(""),[l,c]=m.useState(!1),[u,h]=m.useState(null),[p,g]=m.useState(""),[y,k]=m.useState(!1),[j,T]=m.useState(null),[x,b]=m.useState(!1),[v,z]=m.useState(!1),[D,P]=m.useState(0),[_,S]=m.useState(null),[R,E]=m.useState([]),[A,B]=m.useState(!1),[I,re]=m.useState(""),[Q,X]=m.useState(0),[de,V]=m.useState(!1),ee=m.useRef(null),he=m.useRef([]),ve=m.useRef(0),[be,te]=m.useState(null),[N,O]=m.useState(null),[oe,ge]=m.useState(0),[je,Ce]=m.useState(null),[He,J]=m.useState(!1),{lang:H,setLang:Le}=dt(),Y=sS[H]||sS["zh-TW"],[ae,Ie]=m.useState(null),[xe,_e]=m.useState(!1),[we,qe]=m.useState(!1),gt=m.useRef(null),ht=m.useRef(null),{checkPermission:St,recordUsage:_t}=Bd(),[U,L]=m.useState(!1),[W,Qe]=m.useState(null),{isTestMode:at}=fs();m.useEffect(()=>{const K=ri(e,ce=>{Ie(ce)});return()=>K()},[]),m.useEffect(()=>{const K=ce=>{gt.current&&!gt.current.contains(ce.target)&&_e(!1),ht.current&&!ht.current.contains(ce.target)&&qe(!1)};return(xe||we)&&document.addEventListener("click",K),()=>{document.removeEventListener("click",K)}},[xe,we]);const M=K=>C(this,null,function*(){var ce,Ve,Ke;try{const me=kn(n,"profiles",K),Ee=yield ro(me);if(Ee.exists()){const Me=Ee.data();return{name:Me.nickname||Me.name||"",avatar:Me.avatar||"/avatars/Derxl.png",country:Me.country||"",gender:Me.gender||"",age:Me.age||25,email:((ce=e.currentUser)==null?void 0:ce.email)||"unknown@example.com"}}else{const Me=e.currentUser;return{name:(Me==null?void 0:Me.displayName)||((Ve=Me==null?void 0:Me.email)==null?void 0:Ve.split("@")[0])||"",avatar:(Me==null?void 0:Me.photoURL)||"/avatars/Derxl.png",country:"",gender:"",age:25,email:(Me==null?void 0:Me.email)||"unknown@example.com"}}}catch(me){console.error(":",me);const Ee=e.currentUser;return{name:(Ee==null?void 0:Ee.displayName)||((Ke=Ee==null?void 0:Ee.email)==null?void 0:Ke.split("@")[0])||"",avatar:(Ee==null?void 0:Ee.photoURL)||"/avatars/Derxl.png",country:"",gender:"",age:25,email:(Ee==null?void 0:Ee.email)||"unknown@example.com"}}});m.useEffect(()=>{const K=localStorage.getItem("messages");if(K)try{const ce=JSON.parse(K),Ve=Ze(),Ke=Ve.currentUser,Ee=ce.filter(lt=>!Ke||lt.user.id!=="user123"&&lt.user.id!=="user456"&&lt.user.id!=="user789").filter(lt=>lt.text.includes("[")&&(!lt.duration||lt.duration<=0)?(console.log(":",lt),!1):!0),Me=Ee.sort((lt,un)=>new Date(un.createdAt).getTime()-new Date(lt.createdAt).getTime());o(Me),console.log("localStorage:",Me.length,""),console.log(":",Me),Ee.length!==ce.length&&(localStorage.setItem("messages",JSON.stringify(Ee)),console.log(""));const Tt=Ve.currentUser;Tt&&C(this,null,function*(){try{let un=!1;const fn=yield M(Tt.uid),Ye=Ee.map(or=>{if(or.comments){const ys=or.comments.map($t=>(($t.nickname==="lkjh123"||$t.commenterEmail==="as0@gmail.com"||!$t.commenterId||$t.commenterAge===0||$t.commenterAge===35||$t.commenterAge===39)&&($t.commenterId=Tt.uid,$t.nickname=fn.name,$t.commenterEmail=fn.email,$t.commenterAvatar=fn.avatar,$t.commenterCountry=fn.country,$t.commenterGender=fn.gender,$t.commenterAge=fn.age,$t.createdAt=$t.createdAt||new Date().toISOString(),un=!0,console.log(":",$t)),$t));return We(ke({},or),{comments:ys})}return or});un&&(o(Ye),localStorage.setItem("messages",JSON.stringify(Ye)),console.log(""))}catch(un){console.error(":",un)}})}catch(ce){console.error("localStorage:",ce)}else console.log("localStorage")},[]);const Se=K=>{const Ve=Ze().currentUser;return Ve&&K.user.id===Ve.uid},Pe=K=>{const Ve=Ze().currentUser;return Ve&&K.commenterId===Ve.uid},$e=()=>{const ce=Ze().currentUser;return ce?i.filter(Ve=>Ve.user.id===ce.uid):[]},G=()=>{const ce=Ze().currentUser,Ve=[];return ce?(console.log("UID:",ce.uid),console.log(":",i),i.forEach(Ke=>{var me,Ee;console.log(":",Ke.id,":",((me=Ke.comments)==null?void 0:me.length)||0),(Ee=Ke.comments)==null||Ee.forEach(Me=>{var Tt;if(!Me.commenterId){const lt=ce.displayName||((Tt=ce.email)==null?void 0:Tt.split("@")[0])||"",un=ce.email;(Me.nickname===lt||Me.commenterEmail===un)&&(Me.commenterId=ce.uid,console.log("commenterId:",Me))}console.log(":",Me.nickname,"commenterId:",Me.commenterId,"UID:",ce.uid),Me.commenterId===ce.uid&&(console.log(":",Me),Ve.push({message:Ke,comment:Me}))})}),console.log(":",Ve.length),Ve):(console.log(""),Ve)},Fe=()=>C(this,null,function*(){if(v){ee.current&&ee.current.state==="recording"&&ee.current.stop(),_&&(clearInterval(_),S(null)),z(!1),b(!1),P(0);return}if(localStorage.getItem("testMode")==="true"){V(!0);return}const ce=yield St("aiChat");if(!ce.allowed){Qe(ce),L(!0);return}V(!0)}),De=()=>C(this,null,function*(){V(!1);try{const K=yield navigator.mediaDevices.getUserMedia({audio:!0}),ce=new MediaRecorder(K,{mimeType:"audio/webm;codecs=opus"});E([]),he.current=[],P(0),ve.current=0,ge(0),ce.ondataavailable=Ke=>{console.log(":",Ke.data.size),Ke.data.size>0&&(he.current.push(Ke.data),E(me=>{const Ee=[...me,Ke.data];return console.log(":",Ee.length),Ee}))},ce.onstop=()=>{_&&(clearInterval(_),S(null));const Ke=[...he.current];console.log(":",Ke.length);const me=Ke.length>0?new Blob(Ke,{type:"audio/webm"}):new Blob([""],{type:"audio/webm"}),Ee=Math.max(1,ve.current);console.log("blob:",me.size,":",Ee);const Me=URL.createObjectURL(me);re(Me),X(Ee),B(!0),K.getTracks().forEach(Tt=>Tt.stop()),z(!1),b(!1)},ce.start(100),ee.current=ce,z(!0),b(!0);const Ve=setInterval(()=>{P(Ke=>{const me=Ke+1;return ve.current=me,me>=60&&(ee.current&&ee.current.state==="recording"&&ee.current.stop(),Ve&&(clearInterval(Ve),S(null)),z(!1),b(!1),alert(` 1

 `)),me})},1e3);S(Ve),console.log("...")}catch(K){console.error(":",K),alert(` 

 

 `)}}),q=()=>{V(!1)},le=()=>C(this,null,function*(){if(I){const K=Math.max(1,Q),ce=`[ - ${Math.floor(K/60)}:${(K%60).toString().padStart(2,"0")}]`;console.log(":",{voiceText:ce,actualDuration:K}),c(!0);const Ve=e.currentUser;if(!Ve){alert(""),c(!1);return}const Ke=yield M(Ve.uid),me={id:Date.now().toString(),text:ce,aiReply:"",toneId:"",createdAt:new Date().toISOString(),audioUrl:I,duration:K,user:{id:Ve.uid,name:Ke.name,avatar:Ke.avatar,country:Ke.country,region:Ke.country,email:Ke.email},comments:[]};console.log(":",{duration:Q,audioUrl:I,voiceText:ce}),console.log(":",me);const Ee=[me,...i];o(Ee),localStorage.setItem("messages",JSON.stringify(Ee)),console.log("localStorage"),yield _t("aiChat",1),re(""),X(0),B(!1),c(!1),k(!0)}}),rt=()=>{B(!1),re(""),X(0)},$=K=>{if(be===K.id&&N){N.pause(),te(null),O(null),je&&(clearInterval(je),Ce(null)),ge(0);return}if(be===K.id&&!N){const ce=new Audio(K.audioUrl),Ve=K.duration?K.duration-oe:0;ce.currentTime=Ve,te(K.id),O(ce);const Ke=setInterval(()=>{ge(me=>me<=1?(clearInterval(Ke),te(null),O(null),Ce(null),0):me-1)},1e3);Ce(Ke),ce.play().then(()=>{console.log("...")}).catch(me=>{console.error(":",me),pe(K.text)});return}if(N&&(N.pause(),je&&(clearInterval(je),Ce(null)),ge(0)),K.audioUrl){console.log(":",{audioUrl:K.audioUrl,duration:K.duration,messageId:K.id});const ce=new Audio(K.audioUrl);te(K.id),O(ce),ge(K.duration||0),ce.onerror=Ke=>{console.error(":",Ke),pe(K.text)},ce.onended=()=>{te(null),O(null),ge(0),je&&(clearInterval(je),Ce(null))};const Ve=setInterval(()=>{ge(Ke=>Ke<=1?(clearInterval(Ve),te(null),O(null),Ce(null),0):Ke-1)},1e3);Ce(Ve),ce.play().then(()=>{console.log("...")}).catch(Ke=>{console.error(":",Ke),pe(K.text)})}else pe(K.text)},pe=K=>{if("speechSynthesis"in window){const ce=new SpeechSynthesisUtterance(K);ce.lang="zh-TW",ce.rate=.9,ce.pitch=1,window.speechSynthesis.cancel(),window.speechSynthesis.speak(ce),console.log("...")}else alert("")},nt=()=>C(this,null,function*(){if(!s.trim()){console.log("");return}console.log(":",{input:s}),c(!0);const K=e.currentUser;if(!K){alert(""),c(!1);return}const ce=yield M(K.uid),Ve={id:Date.now().toString(),text:s,aiReply:"",toneId:"",createdAt:new Date().toISOString(),user:{id:K.uid,name:ce.name,avatar:ce.avatar,country:ce.country,region:ce.country,email:ce.email},comments:[]};console.log(":",Ve);const Ke=[Ve,...i];o(Ke),localStorage.setItem("messages",JSON.stringify(Ke)),console.log("localStorage"),a(""),c(!1)}),pt=()=>{L(!1),Qe(null)},it=K=>{if(window.confirm(` 

 

 `)){const ce=i.filter(Ve=>Ve.id!==K);o(ce),localStorage.setItem("messages",JSON.stringify(ce)),console.log(":",K)}};return r.jsxs("div",{className:"modern-bg",style:{background:(window.innerWidth<=768,"#8a8a8a"),backgroundImage:"url(/soil.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[window.innerWidth<=768?r.jsx(Ar,{}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},children:H==="zh-TW"?" Restarter":H==="zh-CN"?" Restarter":H==="en"?" RestarterWho We Are":H==="ja"?" Restarter":H==="ko"?" Restarter ":H==="th"?" Restarter":H==="vi"?" RestarterChng ti l ai":H==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},children:H==="zh-TW"?" ":H==="zh-CN"?" ":H==="en"?" FeedbackWe Want to Hear You":H==="ja"?" ":H==="ko"?"    ":H==="th"?" ":H==="vi"?" Hp gp Chng ti mun lng nghe bn":H==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),ae?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:ae.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:ae.displayName||ae.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(e)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:IW[H]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:H==="zh-TW"?"/":H==="zh-CN"?"/":H==="en"?"Register / Login":H==="ja"?"/":H==="ko"?"/":H==="th"?"/":H==="vi"?"ng k/ng nhp":H==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:gt,children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>_e(K=>!K),children:[H==="zh-TW"?"":H==="zh-CN"?"":H==="en"?"English":H==="ja"?"":H==="ko"?"":H==="th"?"":H==="vi"?"Ting Vit":H==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),xe&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(K=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:K===H?"#6B5BFF":"#232946",fontWeight:K===H?700:500,background:K===H?"#f3f0ff":"#fff"},onClick:()=>{Le(K),_e(!1)},children:K==="zh-TW"?"":K==="zh-CN"?"":K==="en"?"English":K==="ja"?"":K==="ko"?"":K==="th"?"":K==="vi"?"Ting Vit":K==="ms"?"Bahasa Melayu":"Latin"},K))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:ht,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>qe(K=>!K),onMouseOver:K=>{K.currentTarget.style.background="#6B5BFF",K.currentTarget.style.color="#fff"},onMouseOut:K=>{K.currentTarget.style.background="#fff",K.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),we&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:H==="zh-TW"||H==="zh-CN"?"":H==="en"?"Legal Documents":H==="ja"?"":H==="ko"?" ":H==="th"?"":H==="vi"?"Ti liu php l":H==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:{"zh-TW":"","zh-CN":"",en:"Privacy Policy",ja:"",ko:" ",th:"",vi:"Chnh sch bo mt",ms:"Dasar Privasi",la:"Politica Privata"},path:"/privacy-policy"},{key:"terms",title:{"zh-TW":"/","zh-CN":"/",en:"Terms & Conditions",ja:"",ko:"",th:"",vi:"iu khon & iu kin",ms:"Terma & Syarat",la:"Termini & Conditiones"},path:"/terms"},{key:"data",title:{"zh-TW":"","zh-CN":"",en:"Data Deletion",ja:"",ko:" ",th:"",vi:"Xa d liu",ms:"Pemadaman Data",la:"Deletio Datorum"},path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(K=>r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(K.path),qe(!1)},onMouseOver:ce=>{ce.currentTarget.style.background="#f3f0ff",ce.currentTarget.style.color="#6B5BFF"},onMouseOut:ce=>{ce.currentTarget.style.background="#fff",ce.currentTarget.style.color="#232946"},children:K.title[H]||K.title["zh-TW"]},K.key))]})]})]}),r.jsx("div",{style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})})]}),r.jsxs("div",{className:"modern-container",style:{maxWidth:window.innerWidth<=768?"100%":600,width:"100%",margin:"0 auto",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:window.innerWidth<=768?"140px 16px 20px 16px":"0",marginTop:window.innerWidth<=768?"0":"120px",boxSizing:"border-box",minHeight:window.innerWidth<=768?"100vh":"auto",position:"relative",zIndex:1,overflow:"hidden",background:(window.innerWidth<=768,"linear-gradient(135deg, #FFB366 0%, #FFE5CC 100%)"),transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",perspective:"1000px",willChange:"auto"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:(window.innerWidth<=768,12),flexDirection:(window.innerWidth<=768,"column"),gap:(window.innerWidth<=768,8),width:"100%",minHeight:(window.innerWidth<=768,"auto"),background:(window.innerWidth<=768,"linear-gradient(135deg, #FFB366 0%, #FFE5CC 100%)")},children:[r.jsx("h2",{className:"modern-title",style:{fontSize:(window.innerWidth<=768,"1.4rem"),margin:0,flex:1,textAlign:"center",color:"#6B5BFF",textShadow:"0 2px 12px #6B5BFF88, 0 4px 24px #0008",letterSpacing:1,display:"flex",alignItems:"center",gap:(window.innerWidth<=768,2),whiteSpace:"nowrap",flexWrap:"wrap",justifyContent:"center",background:(window.innerWidth<=768,"linear-gradient(135deg, #FFB366 0%, #FFE5CC 100%)")},children:Y.title}),window.innerWidth<=768&&r.jsx("button",{onClick:()=>{console.log(":",y),k(!y),console.log(":",!y)},style:{background:y?"linear-gradient(135deg, #23c6e6 60%, #6B5BFF 100%)":"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:12,fontWeight:900,fontSize:10,padding:"8px 12px",boxShadow:"0 2px 12px #6B5BFF33",letterSpacing:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"2px",whiteSpace:"nowrap",width:"120px",minHeight:"32px",cursor:"pointer",zIndex:9999,position:"relative",pointerEvents:"auto",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"manipulation"},children:y?H==="zh-TW"||H==="zh-CN"?" ":H==="en"?" All Messages":H==="ja"?" ":H==="ko"?"  ":H==="vi"?" Tt c tin nhn":H==="th"?" ":H==="la"?" Visi ziojumi":H==="ms"?" Semua mesej":" ":H==="zh-TW"||H==="zh-CN"?" ":H==="en"?" My Messages":H==="ja"?" ":H==="ko"?"  ":H==="vi"?" Tin nhn ca ti":H==="th"?" ":H==="la"?" Mani ziojumi":H==="ms"?" Mesej saya":" "})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(107, 91, 255, 0.1) 0%, rgba(35, 198, 230, 0.1) 100%)",borderRadius:"20px",padding:window.innerWidth<=768?"16px":"24px",marginBottom:"18px",border:"2px solid rgba(107, 91, 255, 0.2)",boxShadow:"0 8px 32px rgba(107, 91, 255, 0.15)",backdropFilter:"blur(10px)",textAlign:"center",marginTop:window.innerWidth<=768?"40px":window.innerWidth<=768?"20px":"10px"},children:[r.jsx("h3",{style:{color:"#fff",fontSize:(window.innerWidth<=768,"1.2rem"),fontWeight:"700",margin:"0 0 12px 0",textShadow:"0 2px 8px rgba(107, 91, 255, 0.3)"},children:Y.subtitle}),r.jsx("p",{style:{color:"#000",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",lineHeight:"1.6",margin:"0",opacity:"0.9"},children:""})]}),r.jsx("div",{className:"tone-list",style:{marginBottom:18}}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12,marginBottom:18,padding:(window.innerWidth<=768,"0 8px"),width:"100%",maxWidth:"600px",margin:"0 auto"},children:[r.jsx("input",{className:"quote-card",style:{width:window.innerWidth<=768?"100%":"calc(100% - 32px)",fontSize:window.innerWidth<=768?16:18,padding:window.innerWidth<=768?"10px 14px":"12px 16px",border:"2px solid rgba(107, 91, 255, 0.5)",outline:"none",background:"#232946",color:"#fff",borderRadius:"12px",marginBottom:"8px",boxSizing:"border-box",margin:window.innerWidth<=768?void 0:"0 auto 8px auto"},maxLength:200,placeholder:Y.placeholder,value:s,onChange:K=>a(K.target.value),onKeyDown:K=>K.key==="Enter"&&nt(),disabled:l}),r.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"space-between",width:window.innerWidth<=768?"100%":"calc(100% - 32px)",padding:window.innerWidth<=768?"0 8px":"0 8px 0 16px",margin:window.innerWidth<=768?void 0:"0 auto"},children:[r.jsx("button",{className:"tone-card selected",style:{fontSize:window.innerWidth<=768?14:16,padding:window.innerWidth<=768?"8px 12px":"10px 16px",minWidth:window.innerWidth<=768?"60px":"70px",whiteSpace:"nowrap",flexShrink:0,borderRadius:"8px",background:"linear-gradient(135deg, #6B5BFF 0%, #23c6e6 100%)",color:"#fff",border:"none",cursor:"pointer"},onClick:()=>{console.log(""),console.log(":",{input:s,loading:l}),nt()},disabled:l,children:l?Y.sending:Y.send}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsxs("button",{onClick:Fe,style:{background:x?"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)":"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",border:"none",borderRadius:"12px",padding:window.innerWidth<=768?"10px 16px":"10px 10px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:x?"0 4px 16px rgba(244, 67, 54, 0.3)":"0 4px 16px rgba(33, 150, 243, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",animation:x?"pulse 1.5s infinite":"none",minWidth:window.innerWidth<=768?"70px":"56px",whiteSpace:"nowrap",flexShrink:0,marginRight:window.innerWidth<=768?void 0:8},onMouseOver:K=>{x||(K.currentTarget.style.transform="translateY(-2px)",K.currentTarget.style.boxShadow="0 6px 20px rgba(33, 150, 243, 0.4)")},onMouseOut:K=>{x||(K.currentTarget.style.transform="translateY(0)",K.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3)")},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),x?`${Y.recording} ${Math.floor(D/60)}:${(D%60).toString().padStart(2,"0")}`:Y.voice]}),x&&r.jsx("div",{style:{fontSize:"12px",color:"#f44336",marginTop:"4px",fontWeight:"500"},children:Y.pressToStop}),window.innerWidth>768&&r.jsx("button",{onClick:()=>{console.log(":",y),k(!y),console.log(":",!y)},style:{background:y?"linear-gradient(135deg, #23c6e6 60%, #6B5BFF 100%)":"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:12,fontWeight:900,fontSize:10,padding:"6px 10px",boxShadow:"0 2px 12px #6B5BFF33",letterSpacing:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"2px",whiteSpace:"nowrap",width:"100px",minHeight:"28px",cursor:"pointer",zIndex:9999,position:"relative",pointerEvents:"auto",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"manipulation",marginTop:"8px"},children:y?H==="zh-TW"||H==="zh-CN"?" ":H==="en"?" All":H==="ja"?" ":H==="ko"?" ":H==="vi"?" Tt c":H==="th"?" ":H==="la"?" Visi":H==="ms"?" Semua":" ":H==="zh-TW"||H==="zh-CN"?" ":H==="en"?" My":H==="ja"?" ":H==="ko"?" ":H==="vi"?" Tin nhn":H==="th"?" ":H==="la"?" Mani":H==="ms"?" Mesej":" "})]})]}),r.jsx("div",{className:"quote-list",children:y?r.jsxs("div",{children:[r.jsxs("h3",{style:{color:"#6B5BFF",fontSize:"1.5rem",marginBottom:"20px",textAlign:"center",fontWeight:"700"},children:[" ",H==="zh-TW"||H==="zh-CN"?"":H==="en"?"My Messages":H==="ja"?"":H==="ko"?" ":H==="vi"?"Tin nhn ca ti":H==="th"?"":H==="la"?"Mani ziojumi":H==="ms"?"Mesej saya":""]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("h3",{style:{color:"#6B5BFF",fontSize:"1.2rem",marginBottom:"12px",textAlign:"center"},children:" "}),$e().length===0?r.jsx("div",{style:{color:"#000",textAlign:"center",padding:"20px"},children:""}):$e().map(K=>r.jsxs("div",{className:"quote-card",style:{position:"relative",paddingLeft:64,marginBottom:"12px"},children:[r.jsx("img",{src:K.user.avatar,alt:"avatar",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",position:"absolute",left:8,top:16,cursor:"pointer",border:"2px solid #6B5BFF"},onClick:()=>h(K)}),r.jsx("button",{onClick:()=>it(K.id),style:{position:"absolute",top:"8px",right:"8px",background:"linear-gradient(135deg, #ff6b6b 60%, #ff8e8e 100%)",color:"#fff",border:"none",borderRadius:"12px",padding:"4px 8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 8px rgba(255, 107, 107, 0.3)",zIndex:10},children:""}),r.jsx("div",{className:"quote-text",children:K.text}),K.audioUrl&&r.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("button",{onClick:()=>$(K),style:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",border:"none",borderRadius:"6px",padding:"4px 8px",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("span",{children:be===K.id?"":""}),be===K.id?"":""]}),r.jsxs("span",{style:{fontSize:"12px",color:"#ccc"},children:[": ",K.duration&&K.duration>0?`${Math.floor(K.duration/60)}:${(K.duration%60).toString().padStart(2,"0")}`:""]})]}),r.jsx("div",{style:{fontSize:12,color:"#fff",marginTop:6},children:new Date(K.createdAt).toLocaleString()}),r.jsxs("div",{style:{marginTop:14,background:"#f7f7ff",borderRadius:10,padding:"10px 14px",boxShadow:"0 1px 6px #6B5BFF11"},children:[r.jsx("b",{style:{color:"#6B5BFF",fontSize:16},children:Y.commentsTitle}),(K.comments||[]).length===0&&r.jsx("span",{style:{color:"#bbb",marginLeft:8},children:Y.noComments}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:6},children:(K.comments||[]).sort((ce,Ve)=>{const Ke=ce.createdAt?new Date(ce.createdAt).getTime():new Date(K.createdAt).getTime();return(Ve.createdAt?new Date(Ve.createdAt).getTime():new Date(K.createdAt).getTime())-Ke}).map((ce,Ve)=>r.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:"8px 12px",color:"#232946",fontSize:15,border:"1px solid #eee",boxShadow:"0 1px 4px #6B5BFF08",position:"relative",paddingLeft:"60px"},children:[r.jsx("img",{src:ce.commenterAvatar||"https://via.placeholder.com/40x40/6B7280/FFFFFF?text=?",alt:"commenter avatar",style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",position:"absolute",left:8,top:8,border:"2px solid #6B5BFF"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[r.jsx("b",{style:{color:"#6B5BFF"},children:ce.nickname}),(Se(K)||Pe(ce))&&r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[r.jsxs("div",{children:[" ",ce.commenterEmail]}),r.jsxs("div",{children:[" ",ce.commenterCountry]}),r.jsxs("div",{children:[" ",ce.commenterGender,"",ce.commenterAge,""]})]}),!Se(K)&&!Pe(ce)&&r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:r.jsxs("div",{children:[" ",ce.commenterCountry]})})]}),r.jsx("div",{children:ce.content}),r.jsx("div",{style:{fontSize:10,color:"#999",marginTop:4},children:ce.createdAt?new Date(ce.createdAt).toLocaleString():new Date(K.createdAt).toLocaleString()}),Se(K)&&!Pe(ce)&&r.jsx("button",{onClick:()=>alert(` ${ce.nickname}
${ce.commenterEmail}
${ce.commenterCountry}
${ce.commenterGender}
${ce.commenterAge}`),style:{position:"absolute",top:"8px",right:"8px",background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:"12px",padding:"4px 8px",fontSize:"10px",cursor:"pointer",fontWeight:"600"},children:" "})]},Ve))})]})]},K.id))]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("h3",{style:{color:"#6B5BFF",fontSize:"1.2rem",marginBottom:"20px",textAlign:"center",fontWeight:"700"},children:[" ",H==="zh-TW"||H==="zh-CN"?"":H==="en"?"All Messages":H==="ja"?"":H==="ko"?" ":H==="vi"?"Tt c tin nhn":H==="th"?"":H==="la"?"Visi ziojumi":H==="ms"?"Semua mesej":""]}),i.filter(K=>!Se(K)).length===0&&r.jsx("div",{style:{color:"#000",textAlign:"center",marginTop:32},children:Y.noMessages}),r.jsxs("div",{style:{marginTop:"40px",marginBottom:"40px"},children:[r.jsx("h3",{style:{color:"#6B5BFF",fontSize:"1rem",marginBottom:"12px",textAlign:"center"},children:" "}),(()=>{const K=G();return console.log(":",K.length),console.log(":",K),K.length===0?r.jsx("div",{style:{color:"#000",textAlign:"center",padding:"20px"},children:""}):K.map(({message:ce,comment:Ve},Ke)=>r.jsxs("div",{className:"quote-card",style:{position:"relative",paddingLeft:64,marginBottom:"12px"},children:[r.jsx("img",{src:ce.user.avatar,alt:"avatar",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",position:"absolute",left:8,top:16,border:"2px solid #6B5BFF"}}),r.jsxs("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:[" ",r.jsx("b",{style:{color:"#6B5BFF"},children:ce.user.name})," "]}),r.jsx("div",{className:"quote-text",style:{background:"#f0f8ff",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e6f3ff"},children:Ve.content}),r.jsx("div",{style:{fontSize:12,color:"#614425",marginTop:6},children:Ve.createdAt?new Date(Ve.createdAt).toLocaleString():new Date(ce.createdAt).toLocaleString()})]},Ke))})()]}),i.filter(K=>!Se(K)).map(K=>r.jsxs("div",{className:"quote-card",style:{position:"relative",paddingLeft:64},children:[r.jsx("img",{src:K.user.avatar,alt:"avatar",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",position:"absolute",left:8,top:16,cursor:"pointer",border:"2px solid #6B5BFF"},onClick:()=>h(K)}),r.jsx("div",{className:"quote-text",children:K.text}),K.audioUrl&&r.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("button",{onClick:()=>$(K),style:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",border:"none",borderRadius:"6px",padding:"4px 8px",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("span",{children:be===K.id?"":""}),be===K.id?"":""]}),r.jsxs("span",{style:{fontSize:"12px",color:"#ccc"},children:[": ",K.duration&&K.duration>0?`${Math.floor(K.duration/60)}:${(K.duration%60).toString().padStart(2,"0")}`:""]})]}),r.jsx("div",{style:{fontSize:12,color:"#fff",marginTop:6},children:new Date(K.createdAt).toLocaleString()}),r.jsx("div",{style:{marginTop:12,display:"flex",justifyContent:"center"},children:r.jsx("button",{onClick:()=>h(K),style:{background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:"20px",padding:"8px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 8px rgba(107, 91, 255, 0.3)"},children:Y.supportMessage})}),r.jsxs("div",{style:{marginTop:14,background:"#f7f7ff",borderRadius:10,padding:"10px 14px",boxShadow:"0 1px 6px #6B5BFF11"},children:[r.jsx("b",{style:{color:"#6B5BFF",fontSize:16},children:Y.commentsTitle}),(K.comments||[]).length===0&&r.jsx("span",{style:{color:"#bbb",marginLeft:8},children:Y.noComments}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:6},children:(K.comments||[]).sort((ce,Ve)=>{const Ke=ce.createdAt?new Date(ce.createdAt).getTime():new Date(K.createdAt).getTime();return(Ve.createdAt?new Date(Ve.createdAt).getTime():new Date(K.createdAt).getTime())-Ke}).map((ce,Ve)=>r.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:"8px 12px",color:"#232946",fontSize:15,border:"1px solid #eee",boxShadow:"0 1px 4px #6B5BFF08",position:"relative",paddingLeft:"60px"},children:[r.jsx("img",{src:ce.commenterAvatar||"https://via.placeholder.com/40x40/6B7280/FFFFFF?text=?",alt:"commenter avatar",style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",position:"absolute",left:8,top:8,border:"2px solid #6B5BFF"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[r.jsx("b",{style:{color:"#6B5BFF"},children:ce.nickname}),(Se(K)||Pe(ce))&&r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[r.jsxs("div",{children:[" ",ce.commenterEmail]}),r.jsxs("div",{children:[" ",ce.commenterCountry]}),r.jsxs("div",{children:[" ",ce.commenterGender,"",ce.commenterAge,""]})]}),!Se(K)&&!Pe(ce)&&r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:r.jsxs("div",{children:[" ",ce.commenterCountry]})})]}),r.jsx("div",{children:ce.content}),r.jsx("div",{style:{fontSize:10,color:"#999",marginTop:4},children:ce.createdAt?new Date(ce.createdAt).toLocaleString():new Date(K.createdAt).toLocaleString()}),Se(K)&&!Pe(ce)&&r.jsx("button",{onClick:()=>alert(` ${ce.nickname}
${ce.commenterEmail}
${ce.commenterCountry}
${ce.commenterGender}
${ce.commenterAge}`),style:{position:"absolute",top:"8px",right:"8px",background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:"12px",padding:"4px 8px",fontSize:"10px",cursor:"pointer",fontWeight:"600"},children:" "})]},Ve))})]})]},K.id))]})})]})]}),de&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"90%",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),r.jsx("h3",{style:{margin:"0 0 16px 0",color:"#333",fontSize:"20px"},children:Y.readyToRecord}),r.jsxs("p",{style:{margin:"0 0 20px 0",color:"#666",lineHeight:"1.5"},children:[Y.recordInstruction,r.jsx("br",{}),r.jsxs("strong",{style:{color:"#ff6b6b"},children:[" ",Y.recordTimeLimit]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:q,style:{background:"#f44336",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",minWidth:"120px"},children:Y.cancel}),r.jsx("button",{onClick:De,style:{background:"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",minWidth:"120px"},children:Y.startRecording})]})]})}),A&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"90%",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[r.jsx("h3",{style:{margin:"0 0 16px 0",color:"#333"},children:""}),r.jsxs("p",{style:{margin:"0 0 20px 0",color:"#666"},children:[": ",Q>0?`${Math.floor(Q/60)}:${(Q%60).toString().padStart(2,"0")}`:"0:00"," (: ",Math.max(1,Q),")"]}),r.jsxs("button",{onClick:()=>{if(I){const K=Math.max(1,Q);if(N){N.pause(),O(null),je&&(clearInterval(je),Ce(null));return}const ce=new Audio(I);O(ce),ge(K),ce.onended=()=>{O(null),ge(0),je&&(clearInterval(je),Ce(null))};const Ve=setInterval(()=>{ge(Ke=>Ke<=1?(clearInterval(Ve),O(null),0):Ke-1)},1e3);Ce(Ve),ce.play()}},style:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",border:"none",borderRadius:"8px",padding:"8px 16px",color:"white",cursor:"pointer",fontSize:"14px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"6px",margin:"0 auto 16px auto"},children:[r.jsx("span",{children:N?"":""}),N?"":""]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:le,style:{background:"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",border:"none",borderRadius:"8px",padding:"10px 20px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:""}),r.jsx("button",{onClick:rt,style:{background:"#f44336",border:"none",borderRadius:"8px",padding:"10px 20px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:""})]})]})}),U&&W&&r.jsx(mc,{isOpen:U,onClose:pt,currentPlan:W.currentPlan,remainingDays:W.remainingDays,usedTokens:W.usedTokens,totalTokens:W.totalTokens})]})}const aS={"zh-TW":{title:" Voice Release",subtitle:"...",holdToRecord:"",webSimulation:"()",recording:"...",stopRecording:"",todayMood:"",reflectionMoment:"",addDiary:"",editDiary:"",deleteDiary:"",save:"",cancel:"",backToHome:" ",logout:"",noDiaries:"",startSpeaking:"",submit:"",submitVoice:"",recordingComplete:"",submitToSave:"",emotion:{happy:"",sad:"",angry:"",neutral:"",excited:"",calm:""}},"zh-CN":{title:" Voice Release",subtitle:"...",holdToRecord:"",webSimulation:"()",recording:"...",stopRecording:"",todayMood:"",reflectionMoment:"",addDiary:"",editDiary:"",deleteDiary:"",save:"",cancel:"",backToHome:" ",logout:"",noDiaries:"",startSpeaking:"",submit:"",submitVoice:"",recordingComplete:"",submitToSave:"",emotion:{happy:"",sad:"",angry:"",neutral:"",excited:"",calm:""}},ja:{title:" Voice Release",subtitle:"...",holdToRecord:"",webSimulation:"(Web)",recording:"...",stopRecording:"",todayMood:"",reflectionMoment:"",addDiary:"",editDiary:"",deleteDiary:"",save:"",cancel:"",backToHome:" ",logout:"",noDiaries:"",startSpeaking:"",submit:"",submitVoice:"",recordingComplete:"",submitToSave:"",emotion:{happy:"",sad:"",angry:"",neutral:"",excited:"",calm:""}},ko:{title:"   Voice Release",subtitle:"   ...      ,     ",holdToRecord:"  ",webSimulation:"(    )",recording:" ...",stopRecording:" ",todayMood:" ",reflectionMoment:" ",addDiary:"  ",editDiary:"  ",deleteDiary:"  ",save:"",cancel:"",backToHome:"  ",logout:"",noDiaries:"    .  !",startSpeaking:" ",submit:"",submitVoice:"  ",recordingComplete:" ",submitToSave:"   ",emotion:{happy:"",sad:"",angry:"",neutral:"",excited:"",calm:""}},th:{title:" Voice Release",subtitle:"...  ",holdToRecord:"",webSimulation:"()",recording:"...",stopRecording:"",todayMood:"",reflectionMoment:"",addDiary:"",editDiary:"",deleteDiary:"",save:"",cancel:"",backToHome:" ",logout:"",noDiaries:" !",startSpeaking:"",submit:"",submitVoice:"",recordingComplete:"",submitToSave:"",emotion:{happy:"",sad:"",angry:"",neutral:"",excited:"",calm:""}},vi:{title:"Gii Phng Ting Lng Voice Release",subtitle:"Khng cn gi trong lng...bn c th t do ni ra s bt mn vi nhng ngi hoc s vic no , khng c vn  no khng th gii quyt",holdToRecord:"Gi  ghi m",webSimulation:"(Phin bn web s dng ghi m m phng)",recording:"ang ghi m...",stopRecording:"Dng ghi m",todayMood:"Tm trng hm nay",reflectionMoment:"Khonh khc suy ngm",addDiary:"Thm ting lng",editDiary:"Chnh sa ting lng",deleteDiary:"Xa ting lng",save:"Lu",cancel:"Hy",backToHome:" V trang ch",logout:"ng xut",noDiaries:"Cha c nht k ting lng, hy bt u ghi m!",startSpeaking:"Bt u ni",submit:"Gi",submitVoice:"Gi ting lng",recordingComplete:"Ghi m hon thnh",submitToSave:"Nhp  gi v lu ting lng",emotion:{happy:"Vui v",sad:"Bun",angry:"Tc gin",neutral:"Bnh tnh",excited:"Hng phn",calm:"Th gin"}},ms:{title:"Pelepasan Suara Hati Voice Release",subtitle:"Tidak perlu disimpan dalam hati...anda boleh bebas mengucapkan ketidakpuasan terhadap orang atau perkara tertentu, tiada masalah yang tidak dapat diselesaikan",holdToRecord:"Tahan untuk Rakam",webSimulation:"(Versi web menggunakan rakaman simulasi)",recording:"Merakam...",stopRecording:"Hentikan Rakaman",todayMood:"Mood Hari Ini",reflectionMoment:"Saat Refleksi",addDiary:"Tambah Suara Hati",editDiary:"Sunting Suara Hati",deleteDiary:"Padam Suara Hati",save:"Simpan",cancel:"Batal",backToHome:" Kembali ke Rumah",logout:"Log Keluar",noDiaries:"Belum ada diari suara hati, mulakan rakaman!",startSpeaking:"Mula Bercakap",submit:"Hantar",submitVoice:"Hantar Suara Hati",recordingComplete:"Rakaman Selesai",submitToSave:"Klik untuk hantar dan simpan suara hati",emotion:{happy:"Gembira",sad:"Sedih",angry:"Marah",neutral:"Tenang",excited:"Teruja",calm:"Selesa"}},la:{title:"Vox Liberatio Voice Release",subtitle:"Non necesse est in corde servare...liberam dissatisfactionem cum hominibus vel rebus quibusdam profer, nulla quaestio insolubilis est",holdToRecord:"Tene ad Recordandum",webSimulation:"(Versio interretialis simulatione utitur)",recording:"Recordans...",stopRecording:"Recordationem Cessa",todayMood:"Affectus Hodiernus",reflectionMoment:"Momentum Cogitationis",addDiary:"Vox Adde",editDiary:"Vox Edita",deleteDiary:"Vox Dele",save:"Serva",cancel:"Cancella",backToHome:" Ad Domum Reverte",logout:"Exi",noDiaries:"Nondum diaria vocis cordis, incipiamus recordare!",startSpeaking:"Incipe Loqui",submit:"Submitte",submitVoice:"Vox Submitte",recordingComplete:"Recordatio Perfecta",submitToSave:"Click ut submitte et serva vocem",emotion:{happy:"Laetus",sad:"Tristis",angry:"Iratus",neutral:"Tranquillus",excited:"Excitatus",calm:"Placidus"}},en:{title:"Voice Release",subtitle:"No need to keep it in your heart...you can freely speak out your dissatisfaction with which people or things, there is no problem that cannot be solved",holdToRecord:"Hold to Record",webSimulation:"(Web version uses simulated recording)",recording:"Recording...",stopRecording:"Stop Recording",todayMood:"Today's Mood",reflectionMoment:"Reflection Moment",addDiary:"Add Voice",editDiary:"Edit Voice",deleteDiary:"Delete Voice",save:"Save",cancel:"Cancel",backToHome:" Back to Home",logout:"Logout",noDiaries:"No heart voice diaries yet, start recording!",startSpeaking:"Start Speaking",submit:"Submit",submitVoice:"Submit Voice",recordingComplete:"Recording Complete",submitToSave:"Click to submit and save voice",emotion:{happy:"Happy",sad:"Sad",angry:"Angry",neutral:"Neutral",excited:"Excited",calm:"Calm"}}},RW={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"};function EW(){const t=tt(),{lang:e,setLang:n}=dt(),i=aS[e]||aS["zh-TW"],[o,s]=m.useState(null),[a,l]=m.useState(!1),[c,u]=m.useState(!1),h=m.useRef(null),p=m.useRef(null),[g,y]=m.useState(!1),[k,j]=m.useState(null),[T,x]=m.useState([]),b=m.useRef([]),[v,z]=m.useState(()=>{const q=localStorage.getItem("voiceDiaries");return q?JSON.parse(q):[{id:1,title:"",content:"",date:new Date().toISOString(),emotion:"happy",expanded:!1},{id:2,title:"",content:"",date:new Date(Date.now()-24*60*60*1e3).toISOString(),emotion:"neutral",expanded:!1}]}),[D,P]=m.useState(!1),[_,S]=m.useState(!1),[R,E]=m.useState(null),[A,B]=m.useState({title:"",content:"",emotion:"neutral"}),[I,re]=m.useState(0),[Q,X]=m.useState(null),[de,V]=m.useState(null),[ee,he]=m.useState(!1),[ve,be]=m.useState(!1),{checkPermission:te,recordUsage:N}=Bd(),[O,oe]=m.useState(!1),[ge,je]=m.useState(null),[Ce,He]=m.useState(null),[J,H]=m.useState(null),{isTestMode:Le}=fs(),[Y,ae]=m.useState(!1),[Ie,xe]=m.useState(null);m.useEffect(()=>{const q=ri(Tr,le=>{s(le)});return()=>q()},[]),m.useEffect(()=>{const q=le=>{h.current&&!h.current.contains(le.target)&&l(!1),p.current&&!p.current.contains(le.target)&&u(!1)};return(a||c)&&document.addEventListener("click",q),()=>{document.removeEventListener("click",q)}},[a,c]);const _e=()=>C(this,null,function*(){if(g){k&&k.state==="recording"&&k.stop(),Q&&(clearInterval(Q),X(null)),y(!1),P(!1),re(0);return}const q=yield te("aiChat");if(!q.allowed){if(Le){be(!0);return}q.canRenew,je(q),oe(!0);return}be(!0)}),we=()=>C(this,null,function*(){be(!1);try{const q=yield navigator.mediaDevices.getUserMedia({audio:!0}),le=new MediaRecorder(q,{mimeType:"audio/webm;codecs=opus"});x([]),b.current=[],re(0),le.ondataavailable=$=>{console.log(":",$.data.size),$.data.size>0&&(b.current.push($.data),x(pe=>{const nt=[...pe,$.data];return console.log(":",nt.length),nt}))},le.onstop=()=>{const $=[...b.current];console.log(":",$.length);const pe=$.length>0?new Blob($,{type:"audio/webm"}):new Blob([""],{type:"audio/webm"}),nt=Math.max(1,Math.floor($.length*.1));console.log("blob:",pe.size,":",nt),V({blob:pe,duration:nt}),he(!0),x([]),b.current=[],console.log(""),q.getTracks().forEach(pt=>pt.stop())},le.start(100),j(le),y(!0),P(!0);const rt=setInterval(()=>{re($=>{const pe=$+1;return pe>=60&&(k&&k.state==="recording"&&k.stop(),rt&&(clearInterval(rt),X(null)),y(!1),P(!1),alert("1")),pe})},1e3);X(rt)}catch(q){console.error(":",q),alert("")}}),qe=()=>{be(!1)},gt=(q,le)=>{const rt=URL.createObjectURL(q),$=["","","","",""],pe=$[Math.floor(Math.random()*$.length)],nt=["happy","neutral","calm"][Math.floor(Math.random()*3)],it=[{id:Date.now(),title:"",content:pe,date:new Date().toISOString(),emotion:nt,expanded:!1,audioUrl:rt,duration:le},...v];z(it),St(it),P(!1)},ht=()=>{de&&(gt(de.blob,de.duration),V(null),he(!1),N("aiChat",1))},St=q=>{localStorage.setItem("voiceDiaries",JSON.stringify(q))},_t=()=>{V(null),he(!1)},U=()=>{if(A.title.trim()&&A.content.trim()){const le=[{id:Date.now(),title:A.title,content:A.content,date:new Date().toISOString(),emotion:A.emotion,expanded:!1,duration:0},...v];z(le),St(le),B({title:"",content:"",emotion:"neutral"}),S(!1)}},L=q=>{E(q),B({title:q.title,content:q.content,emotion:q.emotion})},W=()=>{if(R&&A.title.trim()&&A.content.trim()){const q=v.map(le=>le.id===R.id?We(ke({},le),{title:A.title,content:A.content,emotion:A.emotion}):le);z(q),St(q),E(null),B({title:"",content:"",emotion:"neutral"})}},Qe=q=>{xe(q),ae(!0)},at=()=>{if(Ie){const q=v.filter(le=>le.id!==Ie);z(q),St(q),ae(!1),xe(null)}},M=()=>{ae(!1),xe(null)},Se=q=>{const le=v.map(rt=>rt.id===q?We(ke({},rt),{expanded:!rt.expanded}):We(ke({},rt),{expanded:!1}));z(le),St(le)},Pe=q=>{if(Ce===q.id){J&&(J.pause(),J.currentTime=0),window.speechSynthesis.speaking&&window.speechSynthesis.cancel(),He(null),H(null);return}if(J&&(J.pause(),J.currentTime=0),window.speechSynthesis.speaking&&window.speechSynthesis.cancel(),q.audioUrl){const le=new Audio(q.audioUrl);le.onended=()=>{He(null),H(null)},le.onerror=rt=>{console.error(":",rt),He(null),H(null),$e(q.content)},le.play().then(()=>{console.log("..."),He(q.id),H(le)}).catch(rt=>{console.error(":",rt),He(null),H(null),$e(q.content)})}else He(q.id),$e(q.content)},$e=q=>{if("speechSynthesis"in window){if(window.speechSynthesis.speaking){window.speechSynthesis.cancel(),He(null),H(null);return}const le=new SpeechSynthesisUtterance(q);le.lang="zh-TW",le.rate=.9,le.pitch=1,le.onend=()=>{He(null),H(null)},le.onerror=()=>{He(null),H(null)},window.speechSynthesis.speak(le),console.log("...")}else alert(""),He(null),H(null)},G=q=>({happy:"#4CAF50",sad:"#2196F3",angry:"#F44336",neutral:"#9E9E9E",excited:"#FF9800",calm:"#8BC34A"})[q]||"#9E9E9E",Fe=q=>new Date(q).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});m.useEffect(()=>()=>{Q&&clearInterval(Q)},[Q]);const De=()=>{oe(!1),je(null)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:window.innerWidth<=768?"0":"20px"},children:[r.jsx("style",{children:`
            @keyframes pulse {
              0% { transform: scale(1); }
              50% { transform: scale(1.05); }
              100% { transform: scale(1); }
            }
            @keyframes bounce {
              0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
              40% { transform: translateY(-3px); }
              60% { transform: translateY(-2px); }
            }
            @media (max-width: 767px) {
              .mobile-shared-header {
                display: block !important;
              }
              .desktop-header {
                display: none !important;
              }
            }
            @media (min-width: 768px) {
              .mobile-shared-header {
                display: none !important;
              }
              .desktop-header {
                display: flex !important;
              }
            }
          `}),r.jsx("div",{className:"mobile-shared-header",style:{display:"none"},children:r.jsx(Ar,{})}),window.innerWidth>768&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed-logo-box",style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",className:"fixed-logo-img",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},children:e==="zh-TW"?" Restarter":e==="zh-CN"?" Restarter":e==="en"?" RestarterWho We Are":e==="ja"?" Restarter":e==="ko"?" Restarter ":e==="th"?" Restarter":e==="vi"?" RestarterChng ti l ai":e==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},children:e==="zh-TW"?" ":e==="zh-CN"?" ":e==="en"?" FeedbackWe Want to Hear You":e==="ja"?" ":e==="ko"?"    ":e==="th"?" ":e==="vi"?" Hp gp Chng ti mun lng nghe bn":e==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),o?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:o.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:o.displayName||o.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(Tr)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:RW[e]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:e==="zh-TW"?"/":e==="zh-CN"?"/":e==="en"?"Register / Login":e==="ja"?"/":e==="ko"?"/":e==="th"?"/":e==="vi"?"ng k/ng nhp":e==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:h,children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>l(q=>!q),children:[e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"English":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Ting Vit":e==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),a&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(q=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:q===e?"#6B5BFF":"#232946",fontWeight:q===e?700:500,background:q===e?"#f3f0ff":"#fff"},onClick:()=>{n(q),l(!1)},children:q==="zh-TW"?"":q==="zh-CN"?"":q==="en"?"English":q==="ja"?"":q==="ko"?"":q==="th"?"":q==="vi"?"Ting Vit":q==="ms"?"Bahasa Melayu":"Latin"},q))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:p,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>u(q=>!q),onMouseOver:q=>{q.currentTarget.style.background="#6B5BFF",q.currentTarget.style.color="#fff"},onMouseOut:q=>{q.currentTarget.style.background="#fff",q.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),c&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:e==="zh-TW"||e==="zh-CN"?"":e==="en"?"Legal Documents":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"Ti liu php l":e==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:{"zh-TW":"","zh-CN":"",en:"Privacy Policy",ja:"",ko:" ",th:"",vi:"Chnh sch bo mt",ms:"Dasar Privasi",la:"Politica Privata"},path:"/privacy-policy"},{key:"terms",title:{"zh-TW":"/","zh-CN":"/",en:"Terms & Conditions",ja:"",ko:"",th:"",vi:"iu khon & iu kin",ms:"Terma & Syarat",la:"Termini & Conditiones"},path:"/terms"},{key:"data",title:{"zh-TW":"","zh-CN":"",en:"Data Deletion",ja:"",ko:" ",th:"",vi:"Xa d liu",ms:"Pemadaman Data",la:"Deletio Datorum"},path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(q=>r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(q.path),u(!1)},onMouseOver:le=>{le.currentTarget.style.background="#f3f0ff",le.currentTarget.style.color="#6B5BFF"},onMouseOut:le=>{le.currentTarget.style.background="#fff",le.currentTarget.style.color="#232946"},children:q.title[e]||q.title["zh-TW"]},q.key))]})]})]})]}),r.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",marginTop:window.innerWidth<=768?"100px":"120px",padding:window.innerWidth<=768?"20px":"0"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"30px",color:"white"},children:[r.jsxs("h1",{style:{fontSize:window.innerWidth<=768?"28px":"36px",fontWeight:"900",margin:"0",textShadow:"0 2px 12px #232946, 0 4px 24px #0008"},children:[" ",i.title]}),r.jsx("p",{style:{fontSize:window.innerWidth<=768?"14px":"16px",fontWeight:"400",margin:"12px 0 0 0",color:"rgba(255,255,255,0.9)",textShadow:"0 1px 4px #232946",lineHeight:"1.4"},children:""})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(64, 64, 64, 0.9), rgba(32, 32, 32, 0.8))",borderRadius:"20px",padding:"40px",textAlign:"center",marginBottom:"30px",boxShadow:"0 8px 32px rgba(128, 128, 128, 0.3)",maxWidth:window.innerWidth<=768?"90%":"60%",margin:"0 auto 30px auto",border:"1px solid rgba(192, 192, 192, 0.3)"},children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"15px"},children:r.jsx("button",{onClick:_e,style:{width:"80px",height:"80px",borderRadius:"50%",background:g?"linear-gradient(45deg, #ff5722, #ff9800)":"linear-gradient(45deg, #ff9800, #ff5722)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:g?"0 0 0 4px #ffe0b2, 0 0 20px rgba(255, 87, 34, 0.5)":"0 4px 16px rgba(255, 152, 0, 0.3)",cursor:"pointer",transition:"all 0.3s ease",border:"none",animation:g?"pulse 1.5s infinite":"none"},onMouseEnter:q=>{g||(q.currentTarget.style.transform="scale(1.1)")},onMouseLeave:q=>{g||(q.currentTarget.style.transform="scale(1)")},children:r.jsx("span",{style:{fontSize:"32px",color:"white",filter:g?"drop-shadow(0 0 6px #ff9800)":""},children:g?"":""})})}),r.jsx("div",{style:{color:g?"#ff5722":"#ff9800",fontSize:"16px",fontWeight:"700",marginBottom:"10px",textAlign:"center"},children:g?i.stopRecording:i.startSpeaking}),g&&r.jsxs("div",{style:{color:"#ff5722",fontSize:"14px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},children:["... ",Math.floor(I/60),":",(I%60).toString().padStart(2,"0")]})]}),r.jsx("p",{style:{color:"#666",fontSize:"14px",marginBottom:"20px"},children:i.holdToRecord}),r.jsxs("button",{onClick:()=>S(!0),style:{background:"linear-gradient(45deg, #667eea, #764ba2)",border:"none",borderRadius:"12px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",marginTop:"20px"},children:["+ ",e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Add Text Voice":e==="ja"?"":e==="ko"?"   ":e==="th"?"":e==="vi"?"Thm Ting Lng Vn Bn":e==="ms"?"Tambah Suara Hati Teks":"Adde Vox Textus"]})]}),r.jsxs("div",{style:{marginBottom:"30px"},children:[r.jsxs("h3",{style:{color:"white",fontSize:"20px",marginBottom:"20px",fontWeight:"600"},children:[e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Voice Diary":e==="ja"?"":e==="ko"?"  ":e==="th"?"":e==="vi"?"Nht K Ting Lng":e==="ms"?"Diari Suara Hati":"Diarium Vocis"," (",v.length,")"]}),v.length===0?r.jsx("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"16px",padding:"40px",textAlign:"center",color:"#666"},children:i.noDiaries}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:v.map(q=>r.jsx("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("button",{onClick:()=>Se(q.id),style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"600",color:"#333",textAlign:"left",flex:1},children:q.title}),r.jsx("button",{onClick:()=>Pe(q),style:{background:Ce===q.id?"linear-gradient(45deg, #ff5722, #ff9800)":"linear-gradient(45deg, #4CAF50, #45a049)",border:"none",borderRadius:"50%",width:"36px",height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s"},onMouseEnter:le=>{le.currentTarget.style.transform="scale(1.1)"},onMouseLeave:le=>{le.currentTarget.style.transform="scale(1)"},children:r.jsx("span",{style:{fontSize:"16px",color:"white"},children:Ce===q.id?"":""})}),r.jsx("span",{style:{background:G(q.emotion),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:i.emotion[q.emotion]})]}),q.expanded&&r.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"rgba(0,0,0,0.05)",borderRadius:"8px"},children:[r.jsx("p",{style:{color:"#666",fontSize:"14px",lineHeight:"1.5",marginBottom:"8px"},children:q.content}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[r.jsx("p",{style:{color:"#999",fontSize:"12px"},children:Fe(q.date)}),q.duration&&r.jsxs("span",{style:{color:"#667eea",fontSize:"12px",fontWeight:"500",background:"rgba(102, 126, 234, 0.1)",padding:"2px 6px",borderRadius:"4px"},children:[" ",Math.floor(q.duration/60),":",(q.duration%60).toString().padStart(2,"0")]})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>L(q),style:{background:"#4CAF50",border:"none",borderRadius:"6px",padding:"6px 12px",color:"white",cursor:"pointer",fontSize:"12px"},children:[" ",i.editDiary]}),r.jsxs("button",{onClick:()=>Qe(q.id),style:{background:"#F44336",border:"none",borderRadius:"6px",padding:"6px 12px",color:"white",cursor:"pointer",fontSize:"12px"},children:[" ",i.deleteDiary]})]})]})},q.id))})]})]}),_&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333"},children:i.addDiary}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Title":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Tiu ":e==="ms"?"Tajuk":"Titulus"}),r.jsx("input",{type:"text",value:A.title,onChange:q=>B(le=>We(ke({},le),{title:q.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},placeholder:e==="zh-TW"?" (30)":e==="zh-CN"?" (30)":e==="en"?"Enter diary title (30 chars max)":e==="ja"?" (30)":e==="ko"?"   (30 )":e==="th"?" ( 30 )":e==="vi"?"Nhp tiu  nht k (ti a 30 k t)":e==="ms"?"Masukkan tajuk diari (maksimum 30 aksara)":"Intra titulum diarii (max 30 litterae)"})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Content":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Ni dung":e==="ms"?"Kandungan":"Contentus"}),r.jsx("textarea",{value:A.content,onChange:q=>B(le=>We(ke({},le),{content:q.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",minHeight:"100px",resize:"vertical"},placeholder:e==="zh-TW"?" (200)":e==="zh-CN"?" (200)":e==="en"?"Enter diary content (200 chars max)":e==="ja"?" (200)":e==="ko"?"   (200 )":e==="th"?" ( 200 )":e==="vi"?"Nhp ni dung nht k (ti a 200 k t)":e==="ms"?"Masukkan kandungan diari (maksimum 200 aksara)":"Intra contentum diarii (max 200 litterae)"})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Emotion":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Cm xc":e==="ms"?"Emosi":"Affectus"}),r.jsxs("select",{value:A.emotion,onChange:q=>B(le=>We(ke({},le),{emotion:q.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"happy",children:i.emotion.happy}),r.jsx("option",{value:"sad",children:i.emotion.sad}),r.jsx("option",{value:"angry",children:i.emotion.angry}),r.jsx("option",{value:"neutral",children:i.emotion.neutral}),r.jsx("option",{value:"excited",children:i.emotion.excited}),r.jsx("option",{value:"calm",children:i.emotion.calm})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>S(!1),style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px"},children:i.cancel}),r.jsx("button",{onClick:U,style:{background:"linear-gradient(45deg, #667eea, #764ba2)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:i.save})]})]})}),R&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333"},children:i.editDiary}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Title":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Tiu ":e==="ms"?"Tajuk":"Titulus"}),r.jsx("input",{type:"text",value:A.title,onChange:q=>B(le=>We(ke({},le),{title:q.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Content":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Ni dung":e==="ms"?"Kandungan":"Contentus"}),r.jsx("textarea",{value:A.content,onChange:q=>B(le=>We(ke({},le),{content:q.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",minHeight:"100px",resize:"vertical"}})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Emotion":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Cm xc":e==="ms"?"Emosi":"Affectus"}),r.jsxs("select",{value:A.emotion,onChange:q=>B(le=>We(ke({},le),{emotion:q.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"happy",children:i.emotion.happy}),r.jsx("option",{value:"sad",children:i.emotion.sad}),r.jsx("option",{value:"angry",children:i.emotion.angry}),r.jsx("option",{value:"neutral",children:i.emotion.neutral}),r.jsx("option",{value:"excited",children:i.emotion.excited}),r.jsx("option",{value:"calm",children:i.emotion.calm})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>E(null),style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px"},children:i.cancel}),r.jsx("button",{onClick:W,style:{background:"linear-gradient(45deg, #667eea, #764ba2)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:i.save})]})]})}),ve&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),r.jsx("h3",{style:{marginBottom:"16px",color:"#333",fontSize:"20px",fontWeight:"600"},children:""}),r.jsxs("p",{style:{marginBottom:"20px",color:"#666",fontSize:"16px",lineHeight:"1.5"},children:["",r.jsx("br",{}),r.jsx("strong",{style:{color:"#ff6b6b"},children:" 1"})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:qe,style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:""}),r.jsx("button",{onClick:we,style:{background:"linear-gradient(45deg, #667eea, #764ba2)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:""})]})]})}),ee&&de&&(console.log("pendingAudio:",de),!0)&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),r.jsx("h3",{style:{marginBottom:"10px",color:"#333",fontSize:"20px",fontWeight:"600"},children:i.recordingComplete}),r.jsx("p",{style:{marginBottom:"20px",color:"#666",fontSize:"16px"},children:i.submitToSave}),r.jsx("div",{style:{marginBottom:"20px",padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:r.jsxs("div",{style:{color:"#495057",fontSize:"14px",fontWeight:"500"},children:[": ",Math.floor(de.duration/60),":",(de.duration%60).toString().padStart(2,"0")]})}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:_t,style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:i.cancel}),r.jsx("button",{onClick:ht,style:{background:"linear-gradient(45deg, #667eea, #764ba2)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:i.submit})]})]})}),Y&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"40px",width:"90%",maxWidth:"450px",textAlign:"center",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:"2px solid rgba(255,255,255,0.2)"},children:[r.jsx("div",{style:{fontSize:"64px",marginBottom:"20px",animation:"pulse 2s infinite"},children:""}),r.jsx("h3",{style:{marginBottom:"15px",color:"white",fontSize:"22px",fontWeight:"600",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:""}),r.jsx("p",{style:{marginBottom:"30px",color:"rgba(255,255,255,0.9)",fontSize:"16px",lineHeight:"1.5",textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:""}),r.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[r.jsx("button",{onClick:M,style:{background:"rgba(255,255,255,0.2)",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"12px",padding:"14px 28px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(255,255,255,0.3)",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.background="rgba(255,255,255,0.2)",q.currentTarget.style.transform="translateY(0)"},children:""}),r.jsx("button",{onClick:at,style:{background:"linear-gradient(45deg, #ff6b6b, #ee5a52)",border:"none",borderRadius:"12px",padding:"14px 28px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:"0 8px 20px rgba(255,107,107,0.4)",transition:"all 0.3s ease"},onMouseEnter:q=>{q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 12px 25px rgba(255,107,107,0.5)"},onMouseLeave:q=>{q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="0 8px 20px rgba(255,107,107,0.4)"},children:""})]})]})})]}),O&&ge&&r.jsx(mc,{isOpen:O,onClose:De,currentPlan:ge.currentPlan,remainingDays:ge.remainingDays,usedTokens:ge.usedTokens,totalTokens:ge.totalTokens})]})}const a6=({isOpen:t,onClose:e,featureName:n})=>{const i=tt(),o=window.innerWidth<=768;if(!t)return null;const s={basic:{price:"NT$ 149",tokens:"50K",features:["","AI ","","",": 100/"]}},a=()=>{e(),i("/plans")};return r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:r.jsxs("div",{style:{background:"#fff",borderRadius:20,padding:o?16:32,maxWidth:480,width:"90%",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[!o&&r.jsx("div",{style:{fontSize:48,marginBottom:16,color:"#6B5BFF"},children:""}),r.jsxs("h2",{style:{fontSize:o?18:24,fontWeight:700,color:"#333",marginBottom:o?6:12},children:[" ",n]}),r.jsxs("p",{style:{fontSize:o?12:16,color:"#666",marginBottom:o?12:20,lineHeight:1.4},children:["",n," "]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9ff 0%, #e8f4ff 100%)",borderRadius:12,padding:o?12:16,marginBottom:o?16:24,border:"1px solid #e0e8ff"},children:[r.jsx("div",{style:{fontSize:o?12:14,color:"#6B5BFF",fontWeight:600,marginBottom:o?6:8},children:" "}),r.jsxs("div",{style:{fontSize:o?11:13,color:"#666",lineHeight:1.3},children:[" ",r.jsx("br",{})," AI ",r.jsx("br",{})," "]})]}),r.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:o?14:20,marginBottom:o?16:24,border:"2px solid #6B5BFF",boxShadow:"0 2px 8px #6B5BFF22"},children:[r.jsx("div",{style:{fontSize:o?14:16,color:"#6B5BFF",fontWeight:700,marginBottom:o?8:12},children:" "}),r.jsxs("div",{style:{fontSize:o?12:14,color:"#666",lineHeight:1.4,marginBottom:o?12:16},children:[r.jsx("strong",{children:""}),"",r.jsx("br",{})," ",s.basic.tokens," tokens",s.basic.features.join("")]}),r.jsx("div",{style:{fontSize:o?16:18,fontWeight:700,color:"#6B5BFF"},children:s.basic.price})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)",borderRadius:12,padding:o?12:16,marginBottom:o?16:24,border:"1px solid #ffeaa7"},children:[r.jsx("div",{style:{fontSize:o?12:14,color:"#856404",fontWeight:600,marginBottom:o?6:8},children:" "}),r.jsxs("div",{style:{fontSize:o?11:13,color:"#856404",lineHeight:1.3},children:["  ",n,r.jsx("br",{}),"  AI ",r.jsx("br",{})," ",r.jsx("br",{})," "]})]}),r.jsxs("div",{style:{display:"flex",gap:o?8:12,justifyContent:"center"},children:[r.jsx("button",{onClick:a,style:{background:"linear-gradient(135deg, #6B5BFF 0%, #00CFFF 100%)",color:"#fff",border:"none",borderRadius:12,padding:o?"12px 20px":"14px 28px",fontSize:o?14:16,fontWeight:700,cursor:"pointer",flex:1,boxShadow:"0 4px 12px #6B5BFF33",transition:"all 0.3s ease"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 6px 16px #6B5BFF44"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 4px 12px #6B5BFF33"},children:" "}),r.jsx("button",{onClick:e,style:{background:"#f8f9ff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:12,padding:o?"12px 20px":"14px 28px",fontSize:o?14:16,fontWeight:600,cursor:"pointer",flex:1,transition:"all 0.3s ease"},onMouseEnter:l=>{l.currentTarget.style.background="#6B5BFF",l.currentTarget.style.color="#fff"},onMouseLeave:l=>{l.currentTarget.style.background="#f8f9ff",l.currentTarget.style.color="#6B5BFF"},children:" "})]}),r.jsx("div",{style:{marginTop:16},children:r.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"#888",fontSize:14,cursor:"pointer",textDecoration:"underline"},children:""})})]})})},AW={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},lS={"zh-TW":{title:" My Story",subtitle:"",backToHome:" ",logout:"",addMilestone:"",editMilestone:"",deleteMilestone:"",save:"",cancel:"",totalDays:"",achievements:"",currentStreak:"",days:"",myMilestones:"",noMilestones:"",socialIntegration:"",socialIntegrationTitle:"",socialIntegrationDesc:"",socialIntegrationQuestions:{q1:"",q2:"/",q3:"",q4:"",q5:""},socialIntegrationOptions:{excellent:"",good:"",fair:"",poor:""},milestoneTypes:{start:"",achievement:"",growth:"",habit:"",help:"",goal:"",social:""}},"zh-CN":{title:" My Story",subtitle:"",backToHome:" ",logout:"",addMilestone:"",editMilestone:"",deleteMilestone:"",save:"",cancel:"",totalDays:"",achievements:"",currentStreak:"",days:"",myMilestones:"",noMilestones:"",socialIntegration:"",socialIntegrationTitle:"",socialIntegrationDesc:"",socialIntegrationQuestions:{q1:"",q2:"/",q3:"",q4:"",q5:""},socialIntegrationOptions:{excellent:"",good:"",fair:"",poor:""},milestoneTypes:{start:"",achievement:"",growth:"",habit:"",help:"",goal:"",social:""}},en:{title:"My Story",subtitle:"Record goals, review progress, verify resultsmake every step visible.",backToHome:" Back to Home",logout:"Logout",addMilestone:"Add Milestone",editMilestone:"Edit Milestone",deleteMilestone:"Delete Milestone",save:"Save",cancel:"Cancel",totalDays:"Total Days",achievements:"Achievements",currentStreak:"Current Streak",days:"days",myMilestones:"My Milestones",noMilestones:"No milestones yet, start recording your story!",socialIntegration:"Social Integration Assessment",socialIntegrationTitle:"Social Integration Assessment",socialIntegrationDesc:"Assess your level of social integration, including relationships, employment status, family relationships, etc.",socialIntegrationQuestions:{q1:"How do you feel about your relationships with others?",q2:"Are you satisfied with your current work/study situation?",q3:"How are your relationships with family?",q4:"Do you have confidence in the future?",q5:"How do you feel about society's acceptance of you?"},socialIntegrationOptions:{excellent:"Excellent",good:"Good",fair:"Fair",poor:"Needs Improvement"},milestoneTypes:{start:"Start",achievement:"Achievement",growth:"Growth",habit:"Habit",help:"Help",goal:"Goal",social:"Social Integration"}},ja:{title:"",subtitle:"",backToHome:" ",logout:"",addMilestone:"",editMilestone:"",deleteMilestone:"",save:"",cancel:"",totalDays:"",achievements:"",currentStreak:"",days:"",myMilestones:"",noMilestones:"",socialIntegration:"",socialIntegrationTitle:"",socialIntegrationDesc:"",socialIntegrationQuestions:{q1:"",q2:"/",q3:"",q4:"",q5:""},socialIntegrationOptions:{excellent:"",good:"",fair:"",poor:""},milestoneTypes:{start:"",achievement:"",growth:"",habit:"",help:"",goal:"",social:""}},ko:{title:" ",subtitle:" ,   ,     .",backToHome:" ",logout:"",addMilestone:" ",editMilestone:" ",deleteMilestone:" ",save:"",cancel:"",totalDays:" ",achievements:"",currentStreak:"",days:"",myMilestones:" ",noMilestones:"  .   !",socialIntegration:"  ",socialIntegrationTitle:"  ",socialIntegrationDesc:", ,      ",socialIntegrationQuestions:{q1:"    ?",q2:" /  ?",q3:"  ?",q4:"   ?",q5:"   ?"},socialIntegrationOptions:{excellent:" ",good:"",fair:"",poor:" "},milestoneTypes:{start:"",achievement:"",growth:"",habit:"",help:"",goal:"",social:" "}},th:{title:"",subtitle:"  ",backToHome:" ",logout:"",addMilestone:"",editMilestone:"",deleteMilestone:"",save:"",cancel:"",totalDays:"",achievements:"",currentStreak:"",days:"",myMilestones:"",noMilestones:" !",socialIntegration:"",socialIntegrationTitle:"",socialIntegrationDesc:"   ",socialIntegrationQuestions:{q1:"?",q2:"/?",q3:"?",q4:"?",q5:"?"},socialIntegrationOptions:{excellent:"",good:"",fair:"",poor:""},milestoneTypes:{start:"",achievement:"",growth:"",habit:"",help:"",goal:"",social:""}},vi:{title:"Cu chuyn ca ti",subtitle:"Ghi li mc tiu, xem xt tin , xc minh kt qulm cho mi bc u nhn thy c.",backToHome:" V trang ch",logout:"ng xut",addMilestone:"Thm ct mc",editMilestone:"Chnh sa ct mc",deleteMilestone:"Xa ct mc",save:"Lu",cancel:"Hy",totalDays:"Tng s ngy",achievements:"Thnh tu",currentStreak:"Lin tip",days:"ngy",myMilestones:"Ct mc ca ti",noMilestones:"Cha c ct mc no, hy bt u ghi li cu chuyn ca bn!",socialIntegration:"nh gi ha nhp x hi",socialIntegrationTitle:"nh gi ha nhp x hi",socialIntegrationDesc:"nh gi mc  ha nhp x hi ca bn, bao gm cc mi quan h, tnh trng vic lm, mi quan h gia nh",socialIntegrationQuestions:{q1:"Bn cm thy th no v mi quan h vi ngi khc?",q2:"Bn c hi lng vi tnh hnh cng vic/hc tp hin ti khng?",q3:"Mi quan h vi gia nh nh th no?",q4:"Bn c t tin v tng lai khng?",q5:"Bn cm thy th no v s chp nhn t x hi?"},socialIntegrationOptions:{excellent:"Rt tt",good:"Tt",fair:"Bnh thng",poor:"Cn ci thin"},milestoneTypes:{start:"Bt u",achievement:"Thnh tu",growth:"Pht trin",habit:"Thi quen",help:"H tr",goal:"Mc tiu",social:"Ha nhp x hi"}},ms:{title:"Cerita Saya",subtitle:"Rakam matlamat, semak semula kemajuan, sahkan hasiljadikan setiap langkah kelihatan.",backToHome:" Kembali ke Laman Utama",logout:"Log keluar",addMilestone:"Tambah Pencapaian",editMilestone:"Edit Pencapaian",deleteMilestone:"Padam Pencapaian",save:"Simpan",cancel:"Batal",totalDays:"Jumlah Hari",achievements:"Pencapaian",currentStreak:"Berturut-turut",days:"hari",myMilestones:"Pencapaian Saya",noMilestones:"Belum ada pencapaian, mulakan rakam cerita anda!",socialIntegration:"Penilaian Integrasi Sosial",socialIntegrationTitle:"Penilaian Integrasi Sosial",socialIntegrationDesc:"Nilai tahap integrasi sosial anda, termasuk hubungan, status pekerjaan, hubungan keluarga",socialIntegrationQuestions:{q1:"Bagaimana perasaan anda tentang hubungan dengan orang lain?",q2:"Adakah anda berpuas hati dengan situasi kerja/pembelajaran semasa?",q3:"Bagaimana hubungan anda dengan keluarga?",q4:"Adakah anda yakin dengan masa hadapan?",q5:"Bagaimana perasaan anda tentang penerimaan masyarakat?"},socialIntegrationOptions:{excellent:"Sangat Baik",good:"Baik",fair:"Sederhana",poor:"Perlu Penambahbaikan"},milestoneTypes:{start:"Mula",achievement:"Pencapaian",growth:"Pertumbuhan",habit:"Tabiat",help:"Bantuan",goal:"Matlamat",social:"Integrasi Sosial"}},la:{title:"Fabula Mea",subtitle:"Proposita inscribe, progressum recense, eventa verificagradum quemque visibilem fac.",backToHome:" Redi ad domum",logout:"Exire",addMilestone:"Addere Lapidem Milliarium",editMilestone:"Lapidem Milliarium Edere",deleteMilestone:"Lapidem Milliarium Delere",save:"Servare",cancel:"Cancellare",totalDays:"Dies Totales",achievements:"Res Gestae",currentStreak:"Series",days:"dies",myMilestones:"Lapides Milliarii Mei",noMilestones:"Nondum lapides milliarii, incipe fabulam tuam inscribere!",socialIntegration:"Aestimatio Integrationis Socialis",socialIntegrationTitle:"Aestimatio Integrationis Socialis",socialIntegrationDesc:"Aestima gradum integrationis socialis tuae, includens relationes, statum operis, relationes familiae",socialIntegrationQuestions:{q1:"Quomodo sentis de relationibus cum aliis?",q2:"Esne contentus cum statu operis/studii praesenti?",q3:"Quomodo sunt relationes tuae cum familia?",q4:"Habesne fiduciam in futuro?",q5:"Quomodo sentis de acceptatione societatis?"},socialIntegrationOptions:{excellent:"Optime",good:"Bene",fair:"Mediocriter",poor:"Emendatione Opus"},milestoneTypes:{start:"Initiare",achievement:"Res Gesta",growth:"Incrementum",habit:"Consuetudo",help:"Auxilium",goal:"Propositum",social:"Integratio Socialis"}}};function BW(){var q,le,rt;const t=tt(),{lang:e,setLang:n}=dt(),i=lS[e]||lS["zh-TW"],o=()=>C(this,null,function*(){try{const pe=Ze().currentUser;if(pe){const nt=kd(),pt=kn(nt,"profiles",pe.uid),it=yield ro(pt);if(it.exists()){const K=it.data();K.avatar&&N(K.avatar)}}}catch($){console.error(":",$)}}),[s,a]=m.useState(()=>{const $=localStorage.getItem("userMilestones");return $?JSON.parse($):[{id:1,title:"",description:"",date:new Date(Date.now()-30*24*60*60*1e3).toISOString(),type:"start",completed:!0},{id:2,title:"",description:"",date:new Date(Date.now()-25*24*60*60*1e3).toISOString(),type:"achievement",completed:!0},{id:3,title:"",description:"",date:new Date(Date.now()-20*24*60*60*1e3).toISOString(),type:"growth",completed:!0},{id:4,title:"",description:"",date:new Date(Date.now()-15*24*60*60*1e3).toISOString(),type:"habit",completed:!0},{id:5,title:"",description:"",date:new Date(Date.now()-10*24*60*60*1e3).toISOString(),type:"help",completed:!0},{id:6,title:"",description:"",date:new Date(Date.now()+5*24*60*60*1e3).toISOString(),type:"goal",completed:!1}]}),[l]=m.useState({name:"",startDate:new Date(Date.now()-30*24*60*60*1e3),totalDays:30,achievements:5,currentStreak:7}),[c,u]=m.useState(!1),[h,p]=m.useState(!1),[g,y]=m.useState(!1),k=m.useRef(null),[j,T]=m.useState(!1),[x,b]=m.useState(null),[v,z]=m.useState(null),[D,P]=m.useState({title:"",description:"",type:"achievement"});m.useEffect(()=>{if(!g)return;const $=pe=>{k.current&&!k.current.contains(pe.target)&&y(!1)};return document.addEventListener("click",$),()=>document.removeEventListener("click",$)},[g]);const[_,S]=m.useState(!1),[R,E]=m.useState(!1),[A,B]=m.useState(0),[I,re]=m.useState(null),[Q,X]=m.useState(!1),[de,V]=m.useState(!1),[ee,he]=m.useState(null),[ve,be]=m.useState(null),[te,N]=m.useState("/avatars/Derxl.png"),[O,oe]=m.useState([]),ge=m.useRef([]),{checkPermission:je,recordUsage:Ce}=Bd(),[He,J]=m.useState(!1),[H,Le]=m.useState(!1),[Y,ae]=m.useState(null);m.useEffect(()=>{o()},[]);const Ie=$=>{localStorage.setItem("userMilestones",JSON.stringify($))},xe=()=>{if(D.title.trim()&&D.description.trim()){const pe=[{id:Date.now(),title:D.title,description:D.description,date:new Date().toISOString(),type:D.type,completed:!1},...s];a(pe),Ie(pe),P({title:"",description:"",type:"achievement"}),u(!1)}},_e=$=>{z($),P({title:$.title,description:$.description,type:$.type})},we=()=>{if(v&&D.title.trim()&&D.description.trim()){const $=s.map(pe=>pe.id===v.id?We(ke({},pe),{title:D.title,description:D.description,type:D.type}):pe);a($),Ie($),z(null),P({title:"",description:"",type:"achievement"})}},qe=$=>{if(window.confirm(` 

 

 `)){const pe=s.filter(nt=>nt.id!==$);a(pe),Ie(pe)}},gt=()=>C(this,null,function*(){if(R){ee&&ee.state==="recording"&&ee.stop(),ve&&(clearInterval(ve),be(null)),E(!1),S(!1),B(0);return}const $=yield je("aiChat");if(!$.allowed){$.isFreeUser?Le(!0):($.canRenew,ae($),J(!0));return}V(!0)}),ht=()=>C(this,null,function*(){V(!1);try{const $=yield navigator.mediaDevices.getUserMedia({audio:!0}),pe=new MediaRecorder($,{mimeType:"audio/webm;codecs=opus"});oe([]),ge.current=[],B(0),pe.ondataavailable=pt=>{console.log(":",pt.data.size),pt.data.size>0&&(ge.current.push(pt.data),oe(it=>{const K=[...it,pt.data];return console.log(":",K.length),K}))},pe.onstop=()=>{const pt=[...ge.current];console.log(":",pt.length);const it=pt.length>0?new Blob(pt,{type:"audio/webm"}):new Blob([""],{type:"audio/webm"}),K=Math.max(1,Math.floor(pt.length*.1));console.log("blob:",it.size,":",K),re({blob:it,duration:K}),X(!0),oe([]),ge.current=[],console.log(""),$.getTracks().forEach(ce=>ce.stop())},pe.start(100),he(pe),E(!0),S(!0);const nt=setInterval(()=>{B(pt=>{const it=pt+1;return it>=60&&(ee&&ee.state==="recording"&&ee.stop(),nt&&(clearInterval(nt),be(null)),E(!1),S(!1),alert("1")),it})},1e3);be(nt)}catch($){console.error(":",$),alert("")}}),St=()=>{V(!1)},_t=()=>{I&&(M(I.blob,I.duration),re(null),X(!1),Ce("aiChat",1))},U=()=>{re(null),X(!1)},[L,W]=m.useState({q1:"",q2:"",q3:"",q4:"",q5:""}),Qe=$=>{const pe={excellent:5,good:4,fair:3,poor:2},it=[pe[$.q1]||3,pe[$.q2]||3,pe[$.q3]||3,pe[$.q4]||3,pe[$.q5]||3].reduce((K,ce)=>K+ce,0)/5;return it>=4.5?{score:it,result:"",description:"",recommendations:["","","",""],analysis:""}:it>=3.5?{score:it,result:"",description:"",recommendations:["","","",""],analysis:""}:it>=2.5?{score:it,result:"",description:"",recommendations:["","","",""],analysis:""}:{score:it,result:"",description:"",recommendations:["","","",""],analysis:""}},at=()=>{if(!Object.values(L).every(K=>K!=="")){alert("");return}const pe=Qe(L),nt={score:pe.score,result:pe.result,description:pe.description,recommendations:pe.recommendations,analysis:pe.analysis,details:{relationships:L.q1,employment:L.q2,family:L.q3,confidence:L.q4,acceptance:L.q5}},it=[{id:Date.now(),title:`${i.socialIntegrationTitle} - ${pe.result}`,description:`${pe.description} : ${pe.score.toFixed(1)}/5.0


${pe.analysis}


${pe.recommendations.map(K=>` ${K}`).join(`
`)}`,date:new Date().toISOString(),type:"social",completed:!0},...s];a(it),Ie(it),W({q1:"",q2:"",q3:"",q4:"",q5:""}),p(!1),T(!0),b(nt)},M=($,pe)=>{const nt=URL.createObjectURL($),pt=["","","","",""],it=pt[Math.floor(Math.random()*pt.length)],K=["achievement","growth","habit","help","goal"][Math.floor(Math.random()*5)],Ve=[{id:Date.now(),title:"",description:it,date:new Date().toISOString(),type:K,completed:!0,audioUrl:nt,duration:pe},...s];a(Ve),Ie(Ve)},Se=$=>({start:"#2196F3",achievement:"#4CAF50",growth:"#9C27B0",habit:"#FF9800",help:"#E91E63",goal:"#F44336",social:"#6B5BFF"})[$]||"#9E9E9E",Pe=$=>new Date($).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),$e=$=>{if($.audioUrl){const pe=new Audio($.audioUrl);pe.onerror=nt=>{console.error(":",nt),G($.description)},pe.play().then(()=>{console.log("...")}).catch(nt=>{console.error(":",nt),G($.description)})}else G($.description)},G=$=>{if("speechSynthesis"in window){const pe=new SpeechSynthesisUtterance($);pe.lang="zh-TW",pe.rate=.9,pe.pitch=1,window.speechSynthesis.cancel(),window.speechSynthesis.speak(pe),console.log("...")}else alert("")},Fe=s.filter($=>$.completed).length,De=()=>{J(!1),ae(null)};return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%)",padding:window.innerWidth<=768?"0":"20px"},children:[window.innerWidth<=768?r.jsx(Ar,{}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed-logo-box",style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",className:"fixed-logo-img",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},children:e==="zh-TW"?" Restarter":e==="zh-CN"?" Restarter":e==="en"?" RestarterWho We Are":e==="ja"?" Restarter":e==="ko"?" Restarter ":e==="th"?" Restarter":e==="vi"?" RestarterChng ti l ai":e==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},children:e==="zh-TW"?" ":e==="zh-CN"?" ":e==="en"?" FeedbackWe Want to Hear You":e==="ja"?" ":e==="ko"?"    ":e==="th"?" ":e==="vi"?" Hp gp Chng ti mun lng nghe bn":e==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:((q=Ze().currentUser)==null?void 0:q.photoURL)||"/ctx-logo.png",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}}),r.jsx("span",{style:{color:"#6B5BFF",fontWeight:600,fontSize:12,maxWidth:60,overflow:"hidden",textOverflow:"ellipsis"},children:((le=Ze().currentUser)==null?void 0:le.displayName)||((rt=Ze().currentUser)==null?void 0:rt.email)||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Ze().signOut(),t("/")}),style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px",borderRadius:4,fontWeight:600,border:"1px solid #ff6347",color:"#ff6347",background:"#fff",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s"},children:AW[e]})]})]}),r.jsx(Ir,{style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px"}}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:k,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>y($=>!$),onMouseOver:$=>{$.currentTarget.style.background="#6B5BFF",$.currentTarget.style.color="#fff"},onMouseOut:$=>{$.currentTarget.style.background="#fff",$.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),g&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:e==="zh-TW"||e==="zh-CN"?"":e==="en"?"Legal Documents":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"Ti liu php l":e==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:"",path:"/privacy-policy"},{key:"terms",title:"",path:"/terms"},{key:"data",title:"",path:"/data-deletion"},{key:"ai",title:"AI",path:"/ai-statement"},{key:"mental",title:"",path:"/mental-health-disclaimer"},{key:"cookie",title:"Cookie",path:"/cookie-policy"},{key:"children",title:"",path:"/children-privacy"},{key:"international",title:"",path:"/international-users"},{key:"security",title:"",path:"/security-statement"},{key:"update",title:"",path:"/update-notification"}].map($=>r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t($.path),y(!1)},onMouseOver:pe=>{pe.currentTarget.style.background="#f3f0ff",pe.currentTarget.style.color="#6B5BFF"},onMouseOut:pe=>{pe.currentTarget.style.background="#fff",pe.currentTarget.style.color="#232946"},children:$.title},$.key))]})]})]}),r.jsxs("div",{style:{marginTop:"100px",marginBottom:"30px",textAlign:"center"},children:[r.jsx("h1",{style:{color:"white",fontSize:"24px",fontWeight:"bold",margin:0,marginBottom:"8px"},children:i.myMilestones}),r.jsx("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"14px",fontWeight:400,margin:0,textAlign:"center",lineHeight:1.4},children:i.subtitle})]})]}),r.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",marginTop:window.innerWidth<=768?"100px":"0",padding:window.innerWidth<=768?"20px":"0"},children:[r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[r.jsxs("div",{style:{width:"70px",height:"70px",borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",overflow:"hidden"},children:[r.jsx("img",{src:te,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:$=>{const pe=$.currentTarget;pe.style.display="none";const nt=pe.nextElementSibling;nt&&(nt.style.display="flex")}}),r.jsx("span",{style:{fontSize:"35px",color:"#4CAF50",display:"none",position:"absolute"},children:""})]}),r.jsx("h2",{style:{color:"#333",fontSize:"22px",fontWeight:"bold",marginBottom:"6px"},children:e==="zh-TW"||e==="zh-CN"?"":e==="en"?"Milestone":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Ct mc":e==="ms"?"Pencapaian":"Lapis Milliarius"}),r.jsxs("p",{style:{color:"#666",fontSize:"13px",marginBottom:"20px"},children:[" ",l.startDate.toLocaleDateString("zh-TW")]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-around"},children:[r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"22px",fontWeight:"bold",color:"#4CAF50",marginBottom:"3px"},children:l.totalDays}),r.jsx("div",{style:{fontSize:"11px",color:"#666"},children:i.totalDays})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"22px",fontWeight:"bold",color:"#FF9800",marginBottom:"3px"},children:Fe}),r.jsx("div",{style:{fontSize:"11px",color:"#666"},children:i.achievements})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"22px",fontWeight:"bold",color:"#2196F3",marginBottom:"3px"},children:l.currentStreak}),r.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:[i.currentStreak," ",i.days]})]})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginBottom:"24px",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>u(!0),style:{background:"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",border:"none",borderRadius:"16px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 16px rgba(33, 150, 243, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:$=>{$.currentTarget.style.transform="translateY(-2px)",$.currentTarget.style.boxShadow="0 6px 20px rgba(33, 150, 243, 0.4)"},onMouseOut:$=>{$.currentTarget.style.transform="translateY(0)",$.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3)"},children:[r.jsx("span",{style:{fontSize:"18px"},children:"+"}),i.addMilestone]}),r.jsxs("button",{onClick:gt,style:{background:_?"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)":"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",border:"none",borderRadius:"16px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:_?"0 4px 16px rgba(244, 67, 54, 0.3)":"0 4px 16px rgba(33, 150, 243, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",animation:_?"pulse 1.5s infinite":"none"},onMouseOver:$=>{_||($.currentTarget.style.transform="translateY(-2px)",$.currentTarget.style.boxShadow="0 6px 20px rgba(33, 150, 243, 0.4)")},onMouseOut:$=>{_||($.currentTarget.style.transform="translateY(0)",$.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3)")},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),_?`${e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Recording":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"ang ghi m":e==="ms"?"Sedang Merakam":"Recording"} ${Math.floor(A/60)}:${(A%60).toString().padStart(2,"0")}`:e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Voice Input":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"Nhp ging ni":e==="ms"?"Input Suara":"Input Vox"]})]}),r.jsx("div",{style:{marginBottom:"30px"},children:s.length===0?r.jsx("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"16px",padding:"40px",textAlign:"center",color:"#666"},children:i.noMilestones}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:s.map(($,pe)=>r.jsx("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",position:"relative"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"40px"},children:[r.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:$.completed?Se($.type):"#ddd",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:$.completed&&r.jsx("span",{style:{color:"white",fontSize:"12px"},children:""})}),pe<s.length-1&&r.jsx("div",{style:{width:"2px",height:"40px",background:"#ddd"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{background:Se($.type),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:i.milestoneTypes[$.type]}),r.jsx("span",{style:{color:"#999",fontSize:"12px"},children:Pe($.date)})]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[$.title!==""&&r.jsx("button",{onClick:()=>_e($),style:{background:"#4CAF50",border:"none",borderRadius:"6px",padding:"4px 8px",color:"white",cursor:"pointer",fontSize:"12px"},children:""}),r.jsx("button",{onClick:()=>qe($.id),style:{background:"#F44336",border:"none",borderRadius:"6px",padding:"4px 8px",color:"white",cursor:"pointer",fontSize:"12px"},children:""})]})]}),r.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"600",color:$.completed?"#333":"#666"},children:$.title}),r.jsx("p",{style:{color:"#666",fontSize:"14px",lineHeight:"1.5",margin:0,marginBottom:"8px"},children:$.description}),$.audioUrl&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"8px"},children:[r.jsxs("button",{onClick:()=>$e($),style:{background:"linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%)",border:"none",borderRadius:"8px",padding:"6px 12px",color:"white",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),""]}),$.duration&&r.jsxs("span",{style:{color:"#666",fontSize:"12px",background:"#f5f5f5",padding:"4px 8px",borderRadius:"6px"},children:[": ",Math.floor($.duration/60),":",($.duration%60).toString().padStart(2,"0")]})]})]})]})},$.id))})})]}),c&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333"},children:i.addMilestone}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:""}),r.jsx("input",{type:"text",value:D.title,onChange:$=>P(pe=>We(ke({},pe),{title:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},placeholder:""})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:""}),r.jsx("textarea",{value:D.description,onChange:$=>P(pe=>We(ke({},pe),{description:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",minHeight:"100px",resize:"vertical"},placeholder:""})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:""}),r.jsxs("select",{value:D.type,onChange:$=>P(pe=>We(ke({},pe),{type:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"start",children:i.milestoneTypes.start}),r.jsx("option",{value:"achievement",children:i.milestoneTypes.achievement}),r.jsx("option",{value:"growth",children:i.milestoneTypes.growth}),r.jsx("option",{value:"habit",children:i.milestoneTypes.habit}),r.jsx("option",{value:"help",children:i.milestoneTypes.help}),r.jsx("option",{value:"goal",children:i.milestoneTypes.goal}),r.jsx("option",{value:"social",children:i.milestoneTypes.social})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>u(!1),style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px"},children:i.cancel}),r.jsx("button",{onClick:xe,style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:i.save})]})]})}),Q&&I&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px",textAlign:"center"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333"},children:""}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("p",{style:{color:"#666",marginBottom:"10px"},children:[": ",Math.floor(I.duration/60),":",(I.duration%60).toString().padStart(2,"0")]}),r.jsx("audio",{controls:!0,style:{width:"100%",marginBottom:"20px"},src:URL.createObjectURL(I.blob)})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:U,style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:""}),r.jsx("button",{onClick:_t,style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:""})]})]})}),de&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),r.jsx("h3",{style:{marginBottom:"16px",color:"#333",fontSize:"20px",fontWeight:"600"},children:""}),r.jsxs("p",{style:{marginBottom:"20px",color:"#666",fontSize:"16px",lineHeight:"1.5"},children:["",r.jsx("br",{}),r.jsx("strong",{style:{color:"#ff6b6b"},children:" 1"})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:St,style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:""}),r.jsx("button",{onClick:ht,style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)"},children:""})]})]})}),v&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"500px"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333"},children:i.editMilestone}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:""}),r.jsx("input",{type:"text",value:D.title,onChange:$=>P(pe=>We(ke({},pe),{title:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:""}),r.jsx("textarea",{value:D.description,onChange:$=>P(pe=>We(ke({},pe),{description:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",minHeight:"100px",resize:"vertical"}})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#666"},children:""}),r.jsxs("select",{value:D.type,onChange:$=>P(pe=>We(ke({},pe),{type:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"start",children:i.milestoneTypes.start}),r.jsx("option",{value:"achievement",children:i.milestoneTypes.achievement}),r.jsx("option",{value:"growth",children:i.milestoneTypes.growth}),r.jsx("option",{value:"habit",children:i.milestoneTypes.habit}),r.jsx("option",{value:"help",children:i.milestoneTypes.help}),r.jsx("option",{value:"goal",children:i.milestoneTypes.goal}),r.jsx("option",{value:"social",children:i.milestoneTypes.social})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>z(null),style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px"},children:i.cancel}),r.jsx("button",{onClick:we,style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:i.save})]})]})}),He&&Y&&r.jsx(mc,{isOpen:He,onClose:De,currentPlan:Y.currentPlan,remainingDays:Y.remainingDays,usedTokens:Y.usedTokens,totalTokens:Y.totalTokens}),H&&r.jsx(a6,{isOpen:H,onClose:()=>Le(!1),featureName:""}),h&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333",textAlign:"center"},children:i.socialIntegrationTitle}),r.jsx("p",{style:{marginBottom:"24px",color:"#666",textAlign:"center",lineHeight:"1.5"},children:i.socialIntegrationDesc}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"600"},children:i.socialIntegrationQuestions.q1}),r.jsxs("select",{value:L.q1,onChange:$=>W(pe=>We(ke({},pe),{q1:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"",children:"..."}),r.jsx("option",{value:"excellent",children:i.socialIntegrationOptions.excellent}),r.jsx("option",{value:"good",children:i.socialIntegrationOptions.good}),r.jsx("option",{value:"fair",children:i.socialIntegrationOptions.fair}),r.jsx("option",{value:"poor",children:i.socialIntegrationOptions.poor})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"600"},children:i.socialIntegrationQuestions.q2}),r.jsxs("select",{value:L.q2,onChange:$=>W(pe=>We(ke({},pe),{q2:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"",children:"..."}),r.jsx("option",{value:"excellent",children:i.socialIntegrationOptions.excellent}),r.jsx("option",{value:"good",children:i.socialIntegrationOptions.good}),r.jsx("option",{value:"fair",children:i.socialIntegrationOptions.fair}),r.jsx("option",{value:"poor",children:i.socialIntegrationOptions.poor})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"600"},children:i.socialIntegrationQuestions.q3}),r.jsxs("select",{value:L.q3,onChange:$=>W(pe=>We(ke({},pe),{q3:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"",children:"..."}),r.jsx("option",{value:"excellent",children:i.socialIntegrationOptions.excellent}),r.jsx("option",{value:"good",children:i.socialIntegrationOptions.good}),r.jsx("option",{value:"fair",children:i.socialIntegrationOptions.fair}),r.jsx("option",{value:"poor",children:i.socialIntegrationOptions.poor})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"600"},children:i.socialIntegrationQuestions.q4}),r.jsxs("select",{value:L.q4,onChange:$=>W(pe=>We(ke({},pe),{q4:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"",children:"..."}),r.jsx("option",{value:"excellent",children:i.socialIntegrationOptions.excellent}),r.jsx("option",{value:"good",children:i.socialIntegrationOptions.good}),r.jsx("option",{value:"fair",children:i.socialIntegrationOptions.fair}),r.jsx("option",{value:"poor",children:i.socialIntegrationOptions.poor})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#333",fontWeight:"600"},children:i.socialIntegrationQuestions.q5}),r.jsxs("select",{value:L.q5,onChange:$=>W(pe=>We(ke({},pe),{q5:$.target.value})),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"},children:[r.jsx("option",{value:"",children:"..."}),r.jsx("option",{value:"excellent",children:i.socialIntegrationOptions.excellent}),r.jsx("option",{value:"good",children:i.socialIntegrationOptions.good}),r.jsx("option",{value:"fair",children:i.socialIntegrationOptions.fair}),r.jsx("option",{value:"poor",children:i.socialIntegrationOptions.poor})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"24px"},children:[r.jsx("button",{onClick:()=>p(!1),style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px"},children:i.cancel}),r.jsx("button",{onClick:at,disabled:!Object.values(L).every($=>$!==""),style:{background:Object.values(L).every($=>$!=="")?"linear-gradient(45deg, #6B5BFF, #5A4FCF)":"#ccc",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:Object.values(L).every($=>$!=="")?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600"},children:""})]})]})}),j&&x&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[r.jsx("h3",{style:{marginBottom:"20px",color:"#333",textAlign:"center"},children:" "}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #6B5BFF 0%, #5A4FCF 100%)",borderRadius:"12px",padding:"20px",color:"white",marginBottom:"20px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"8px"},children:x.result}),r.jsxs("div",{style:{fontSize:"18px",marginBottom:"8px"},children:["",x.score.toFixed(1),"/5.0"]}),r.jsx("div",{style:{fontSize:"14px",opacity:.9},children:x.description})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{color:"#333",marginBottom:"12px",fontWeight:"600"},children:" "}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",background:"#f8f9fa",borderRadius:"6px"},children:[r.jsx("span",{style:{color:"#666"},children:""}),r.jsx("span",{style:{fontWeight:"600",color:"#6B5BFF"},children:x.details.relationships==="excellent"?"":x.details.relationships==="good"?"":x.details.relationships==="fair"?"":""})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",background:"#f8f9fa",borderRadius:"6px"},children:[r.jsx("span",{style:{color:"#666"},children:""}),r.jsx("span",{style:{fontWeight:"600",color:"#6B5BFF"},children:x.details.employment==="excellent"?"":x.details.employment==="good"?"":x.details.employment==="fair"?"":""})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",background:"#f8f9fa",borderRadius:"6px"},children:[r.jsx("span",{style:{color:"#666"},children:""}),r.jsx("span",{style:{fontWeight:"600",color:"#6B5BFF"},children:x.details.family==="excellent"?"":x.details.family==="good"?"":x.details.family==="fair"?"":""})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",background:"#f8f9fa",borderRadius:"6px"},children:[r.jsx("span",{style:{color:"#666"},children:""}),r.jsx("span",{style:{fontWeight:"600",color:"#6B5BFF"},children:x.details.confidence==="excellent"?"":x.details.confidence==="good"?"":x.details.confidence==="fair"?"":""})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",background:"#f8f9fa",borderRadius:"6px"},children:[r.jsx("span",{style:{color:"#666"},children:""}),r.jsx("span",{style:{fontWeight:"600",color:"#6B5BFF"},children:x.details.acceptance==="excellent"?"":x.details.acceptance==="good"?"":x.details.acceptance==="fair"?"":""})]})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{color:"#333",marginBottom:"12px",fontWeight:"600"},children:" "}),r.jsx("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"16px"},children:x.recommendations.map(($,pe)=>r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"8px",fontSize:"14px",lineHeight:"1.4"},children:[r.jsx("span",{style:{color:"#6B5BFF",fontWeight:"bold"},children:""}),r.jsx("span",{style:{color:"#333"},children:$})]},pe))})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #FF9800 0%, #F57C00 100%)",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[r.jsx("h4",{style:{color:"white",marginBottom:"8px",fontWeight:"600"},children:" "}),r.jsx("p",{style:{color:"white",fontSize:"14px",lineHeight:"1.4",margin:0},children:""})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:()=>T(!1),style:{background:"#f5f5f5",border:"none",borderRadius:"8px",padding:"12px 24px",color:"#666",cursor:"pointer",fontSize:"14px"},children:""}),r.jsx("button",{onClick:()=>{T(!1),alert("")},style:{background:"linear-gradient(45deg, #6B5BFF, #5A4FCF)",border:"none",borderRadius:"8px",padding:"12px 24px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:""})]})]})})]})}const PW={male:"/avatars/male.png",female:"/avatars/female.png"};function FW({avatar:t,videoUrl:e,audioUrl:n,isSpeaking:i,onAvatarChange:o,size:s=160}){const a=m.useRef(null),[l,c]=m.useState(!1),u=()=>{a.current&&(a.current.currentTime=0,a.current.play(),c(!0))},h=()=>c(!1),p=()=>t==="male"||t==="female"?PW[t]:t;return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[r.jsxs("div",{style:{position:"relative",width:s,height:s,marginBottom:8},children:[e?r.jsx("video",{src:e,width:s,height:s,autoPlay:!0,muted:!0,loop:!0,style:{borderRadius:"50%",objectFit:"cover"}}):r.jsx("img",{src:p(),width:s,height:s,style:{borderRadius:"50%",objectFit:"cover",filter:i?"brightness(1.1)":"none"},alt:"avatar"}),o&&(t==="male"||t==="female")&&r.jsx("button",{onClick:()=>o(t==="male"?"female":"male"),style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",border:"none",width:36,height:36,cursor:"pointer",fontSize:18},children:""})]}),n&&r.jsx("audio",{ref:a,src:n,onEnded:h}),n&&r.jsx("button",{onClick:u,style:{padding:"6px 18px",borderRadius:8,background:"#6c63ff",color:"#fff",border:"none",fontWeight:700,fontSize:16,marginTop:8},disabled:l,children:l?"...":""})]})}function l6(t,e){return function(){return t.apply(e,arguments)}}const{toString:zW}=Object.prototype,{getPrototypeOf:qb}=Object,{iterator:hg,toStringTag:c6}=Symbol,pg=(t=>e=>{const n=zW.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),rr=t=>(t=t.toLowerCase(),e=>pg(e)===t),mg=t=>e=>typeof e===t,{isArray:gc}=Array,td=mg("undefined");function Pd(t){return t!==null&&!td(t)&&t.constructor!==null&&!td(t.constructor)&&xi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const u6=rr("ArrayBuffer");function NW(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&u6(t.buffer),e}const DW=mg("string"),xi=mg("function"),d6=mg("number"),Fd=t=>t!==null&&typeof t=="object",MW=t=>t===!0||t===!1,ip=t=>{if(pg(t)!=="object")return!1;const e=qb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(c6 in t)&&!(hg in t)},WW=t=>{if(!Fd(t)||Pd(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},LW=rr("Date"),OW=rr("File"),VW=rr("Blob"),UW=rr("FileList"),qW=t=>Fd(t)&&xi(t.pipe),HW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||xi(t.append)&&((e=pg(t))==="formdata"||e==="object"&&xi(t.toString)&&t.toString()==="[object FormData]"))},$W=rr("URLSearchParams"),[KW,GW,QW,YW]=["ReadableStream","Request","Response","Headers"].map(rr),XW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let i,o;if(typeof t!="object"&&(t=[t]),gc(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{if(Pd(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let l;for(i=0;i<a;i++)l=s[i],e.call(null,t[l],l,t)}}function h6(t,e){if(Pd(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const Ms=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,p6=t=>!td(t)&&t!==Ms;function dx(){const{caseless:t}=p6(this)&&this||{},e={},n=(i,o)=>{const s=t&&h6(e,o)||o;ip(e[s])&&ip(i)?e[s]=dx(e[s],i):ip(i)?e[s]=dx({},i):gc(i)?e[s]=i.slice():e[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&zd(arguments[i],n);return e}const JW=(t,e,n,{allOwnKeys:i}={})=>(zd(e,(o,s)=>{n&&xi(o)?t[s]=l6(o,n):t[s]=o},{allOwnKeys:i}),t),ZW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eL=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},tL=(t,e,n,i)=>{let o,s,a;const l={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)a=o[s],(!i||i(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&qb(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},nL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},iL=t=>{if(!t)return null;if(gc(t))return t;let e=t.length;if(!d6(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},rL=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&qb(Uint8Array)),oL=(t,e)=>{const i=(t&&t[hg]).call(t);let o;for(;(o=i.next())&&!o.done;){const s=o.value;e.call(t,s[0],s[1])}},sL=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},aL=rr("HTMLFormElement"),lL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),cS=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cL=rr("RegExp"),m6=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};zd(n,(o,s)=>{let a;(a=e(o,s,t))!==!1&&(i[s]=a||o)}),Object.defineProperties(t,i)},uL=t=>{m6(t,(e,n)=>{if(xi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(xi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dL=(t,e)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return gc(t)?i(t):i(String(t).split(e)),n},hL=()=>{},pL=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function mL(t){return!!(t&&xi(t.append)&&t[c6]==="FormData"&&t[hg])}const gL=t=>{const e=new Array(10),n=(i,o)=>{if(Fd(i)){if(e.indexOf(i)>=0)return;if(Pd(i))return i;if(!("toJSON"in i)){e[o]=i;const s=gc(i)?[]:{};return zd(i,(a,l)=>{const c=n(a,o+1);!td(c)&&(s[l]=c)}),e[o]=void 0,s}}return i};return n(t,0)},fL=rr("AsyncFunction"),yL=t=>t&&(Fd(t)||xi(t))&&xi(t.then)&&xi(t.catch),g6=((t,e)=>t?setImmediate:e?((n,i)=>(Ms.addEventListener("message",({source:o,data:s})=>{o===Ms&&s===n&&i.length&&i.shift()()},!1),o=>{i.push(o),Ms.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",xi(Ms.postMessage)),xL=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Ms):typeof process!="undefined"&&process.nextTick||g6,bL=t=>t!=null&&xi(t[hg]),se={isArray:gc,isArrayBuffer:u6,isBuffer:Pd,isFormData:HW,isArrayBufferView:NW,isString:DW,isNumber:d6,isBoolean:MW,isObject:Fd,isPlainObject:ip,isEmptyObject:WW,isReadableStream:KW,isRequest:GW,isResponse:QW,isHeaders:YW,isUndefined:td,isDate:LW,isFile:OW,isBlob:VW,isRegExp:cL,isFunction:xi,isStream:qW,isURLSearchParams:$W,isTypedArray:rL,isFileList:UW,forEach:zd,merge:dx,extend:JW,trim:XW,stripBOM:ZW,inherits:eL,toFlatObject:tL,kindOf:pg,kindOfTest:rr,endsWith:nL,toArray:iL,forEachEntry:oL,matchAll:sL,isHTMLForm:aL,hasOwnProperty:cS,hasOwnProp:cS,reduceDescriptors:m6,freezeMethods:uL,toObjectSet:dL,toCamelCase:lL,noop:hL,toFiniteNumber:pL,findKey:h6,global:Ms,isContextDefined:p6,isSpecCompliantForm:mL,toJSONObject:gL,isAsyncFn:fL,isThenable:yL,setImmediate:g6,asap:xL,isIterable:bL};function st(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}se.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const f6=st.prototype,y6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{y6[t]={value:t}});Object.defineProperties(st,y6);Object.defineProperty(f6,"isAxiosError",{value:!0});st.from=(t,e,n,i,o,s)=>{const a=Object.create(f6);return se.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),st.call(a,t.message,e,n,i,o),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const vL=null;function hx(t){return se.isPlainObject(t)||se.isArray(t)}function x6(t){return se.endsWith(t,"[]")?t.slice(0,-2):t}function uS(t,e,n){return t?t.concat(e).map(function(o,s){return o=x6(o),!n&&s?"["+o+"]":o}).join(n?".":""):e}function kL(t){return se.isArray(t)&&!t.some(hx)}const wL=se.toFlatObject(se,{},null,function(e){return/^is[A-Z]/.test(e)});function gg(t,e,n){if(!se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,T){return!se.isUndefined(T[j])});const i=n.metaTokens,o=n.visitor||h,s=n.dots,a=n.indexes,c=(n.Blob||typeof Blob!="undefined"&&Blob)&&se.isSpecCompliantForm(e);if(!se.isFunction(o))throw new TypeError("visitor must be a function");function u(k){if(k===null)return"";if(se.isDate(k))return k.toISOString();if(se.isBoolean(k))return k.toString();if(!c&&se.isBlob(k))throw new st("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(k)||se.isTypedArray(k)?c&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function h(k,j,T){let x=k;if(k&&!T&&typeof k=="object"){if(se.endsWith(j,"{}"))j=i?j:j.slice(0,-2),k=JSON.stringify(k);else if(se.isArray(k)&&kL(k)||(se.isFileList(k)||se.endsWith(j,"[]"))&&(x=se.toArray(k)))return j=x6(j),x.forEach(function(v,z){!(se.isUndefined(v)||v===null)&&e.append(a===!0?uS([j],z,s):a===null?j:j+"[]",u(v))}),!1}return hx(k)?!0:(e.append(uS(T,j,s),u(k)),!1)}const p=[],g=Object.assign(wL,{defaultVisitor:h,convertValue:u,isVisitable:hx});function y(k,j){if(!se.isUndefined(k)){if(p.indexOf(k)!==-1)throw Error("Circular reference detected in "+j.join("."));p.push(k),se.forEach(k,function(x,b){(!(se.isUndefined(x)||x===null)&&o.call(e,x,se.isString(b)?b.trim():b,j,g))===!0&&y(x,j?j.concat(b):[b])}),p.pop()}}if(!se.isObject(t))throw new TypeError("data must be an object");return y(t),e}function dS(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Hb(t,e){this._pairs=[],t&&gg(t,this,e)}const b6=Hb.prototype;b6.append=function(e,n){this._pairs.push([e,n])};b6.toString=function(e){const n=e?function(i){return e.call(this,i,dS)}:dS;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function SL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v6(t,e,n){if(!e)return t;const i=n&&n.encode||SL;se.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let s;if(o?s=o(e,n):s=se.isURLSearchParams(e)?e.toString():new Hb(e,n).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class hS{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,function(i){i!==null&&e(i)})}}const k6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},TL=typeof URLSearchParams!="undefined"?URLSearchParams:Hb,jL=typeof FormData!="undefined"?FormData:null,_L=typeof Blob!="undefined"?Blob:null,IL={isBrowser:!0,classes:{URLSearchParams:TL,FormData:jL,Blob:_L},protocols:["http","https","file","blob","url","data"]},$b=typeof window!="undefined"&&typeof document!="undefined",px=typeof navigator=="object"&&navigator||void 0,CL=$b&&(!px||["ReactNative","NativeScript","NS"].indexOf(px.product)<0),RL=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",EL=$b&&window.location.href||"http://localhost",AL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$b,hasStandardBrowserEnv:CL,hasStandardBrowserWebWorkerEnv:RL,navigator:px,origin:EL},Symbol.toStringTag,{value:"Module"})),$n=ke(ke({},AL),IL);function BL(t,e){return gg(t,new $n.classes.URLSearchParams,ke({visitor:function(n,i,o,s){return $n.isNode&&se.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function PL(t){return se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FL(t){const e={},n=Object.keys(t);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],e[s]=t[s];return e}function w6(t){function e(n,i,o,s){let a=n[s++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=s>=n.length;return a=!a&&se.isArray(o)?o.length:a,c?(se.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!l):((!o[a]||!se.isObject(o[a]))&&(o[a]=[]),e(n,i,o[a],s)&&se.isArray(o[a])&&(o[a]=FL(o[a])),!l)}if(se.isFormData(t)&&se.isFunction(t.entries)){const n={};return se.forEachEntry(t,(i,o)=>{e(PL(i),o,n,0)}),n}return null}function zL(t,e,n){if(se.isString(t))try{return(e||JSON.parse)(t),se.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Nd={transitional:k6,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=se.isObject(e);if(s&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return o?JSON.stringify(w6(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e)||se.isReadableStream(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return BL(e,this.formSerializer).toString();if((l=se.isFileList(e))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return gg(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),zL(e)):e}],transformResponse:[function(e){const n=this.transitional||Nd.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(se.isResponse(e)||se.isReadableStream(e))return e;if(e&&se.isString(e)&&(i&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?st.from(l,st.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$n.classes.FormData,Blob:$n.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],t=>{Nd.headers[t]={}});const NL=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),DL=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!n||e[n]&&NL[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},pS=Symbol("internals");function Wc(t){return t&&String(t).trim().toLowerCase()}function rp(t){return t===!1||t==null?t:se.isArray(t)?t.map(rp):String(t)}function ML(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const WL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Tf(t,e,n,i,o){if(se.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!se.isString(e)){if(se.isString(i))return e.indexOf(i)!==-1;if(se.isRegExp(i))return i.test(e)}}function LL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function OL(t,e){const n=se.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,s,a){return this[i].call(this,e,o,s,a)},configurable:!0})})}let bi=class{constructor(e){e&&this.set(e)}set(e,n,i){const o=this;function s(l,c,u){const h=Wc(c);if(!h)throw new Error("header name must be a non-empty string");const p=se.findKey(o,h);(!p||o[p]===void 0||u===!0||u===void 0&&o[p]!==!1)&&(o[p||c]=rp(l))}const a=(l,c)=>se.forEach(l,(u,h)=>s(u,h,c));if(se.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(se.isString(e)&&(e=e.trim())&&!WL(e))a(DL(e),n);else if(se.isObject(e)&&se.isIterable(e)){let l={},c,u;for(const h of e){if(!se.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?se.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}a(l,n)}else e!=null&&s(n,e,i);return this}get(e,n){if(e=Wc(e),e){const i=se.findKey(this,e);if(i){const o=this[i];if(!n)return o;if(n===!0)return ML(o);if(se.isFunction(n))return n.call(this,o,i);if(se.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Wc(e),e){const i=se.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Tf(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let o=!1;function s(a){if(a=Wc(a),a){const l=se.findKey(i,a);l&&(!n||Tf(i,i[l],l,n))&&(delete i[l],o=!0)}}return se.isArray(e)?e.forEach(s):s(e),o}clear(e){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!e||Tf(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const n=this,i={};return se.forEach(this,(o,s)=>{const a=se.findKey(i,s);if(a){n[a]=rp(o),delete n[s];return}const l=e?LL(s):String(s).trim();l!==s&&delete n[s],n[l]=rp(o),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return se.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=e&&se.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[pS]=this[pS]={accessors:{}}).accessors,o=this.prototype;function s(a){const l=Wc(a);i[l]||(OL(o,a),i[l]=!0)}return se.isArray(e)?e.forEach(s):s(e),this}};bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(bi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});se.freezeMethods(bi);function jf(t,e){const n=this||Nd,i=e||n,o=bi.from(i.headers);let s=i.data;return se.forEach(t,function(l){s=l.call(n,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function S6(t){return!!(t&&t.__CANCEL__)}function fc(t,e,n){st.call(this,t==null?"canceled":t,st.ERR_CANCELED,e,n),this.name="CanceledError"}se.inherits(fc,st,{__CANCEL__:!0});function T6(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new st("Request failed with status code "+n.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function VL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function UL(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=i[s];a||(a=u),n[o]=c,i[o]=u;let p=s,g=0;for(;p!==o;)g+=n[p++],p=p%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),u-a<e)return;const y=h&&u-h;return y?Math.round(g*1e3/y):void 0}}function qL(t,e){let n=0,i=1e3/e,o,s;const a=(u,h=Date.now())=>{n=h,o=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const h=Date.now(),p=h-n;p>=i?a(u,h):(o=u,s||(s=setTimeout(()=>{s=null,a(o)},i-p)))},()=>o&&a(o)]}const cm=(t,e,n=3)=>{let i=0;const o=UL(50,250);return qL(s=>{const a=s.loaded,l=s.lengthComputable?s.total:void 0,c=a-i,u=o(c),h=a<=l;i=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-a)/u:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(p)},n)},mS=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},gS=t=>(...e)=>se.asap(()=>t(...e)),HL=$n.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,$n.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL($n.origin),$n.navigator&&/(msie|trident)/i.test($n.navigator.userAgent)):()=>!0,$L=$n.hasStandardBrowserEnv?{write(t,e,n,i,o,s){const a=[t+"="+encodeURIComponent(e)];se.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),se.isString(i)&&a.push("path="+i),se.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function KL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function GL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function j6(t,e,n){let i=!KL(e);return t&&(i||n==!1)?GL(t,e):e}const fS=t=>t instanceof bi?ke({},t):t;function da(t,e){e=e||{};const n={};function i(u,h,p,g){return se.isPlainObject(u)&&se.isPlainObject(h)?se.merge.call({caseless:g},u,h):se.isPlainObject(h)?se.merge({},h):se.isArray(h)?h.slice():h}function o(u,h,p,g){if(se.isUndefined(h)){if(!se.isUndefined(u))return i(void 0,u,p,g)}else return i(u,h,p,g)}function s(u,h){if(!se.isUndefined(h))return i(void 0,h)}function a(u,h){if(se.isUndefined(h)){if(!se.isUndefined(u))return i(void 0,u)}else return i(void 0,h)}function l(u,h,p){if(p in e)return i(u,h);if(p in t)return i(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,h,p)=>o(fS(u),fS(h),p,!0)};return se.forEach(Object.keys(ke(ke({},t),e)),function(h){const p=c[h]||o,g=p(t[h],e[h],h);se.isUndefined(g)&&p!==l||(n[h]=g)}),n}const _6=t=>{const e=da({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:l}=e;e.headers=a=bi.from(a),e.url=v6(j6(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(se.isFormData(n)){if($n.hasStandardBrowserEnv||$n.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...h]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...h].join("; "))}}if($n.hasStandardBrowserEnv&&(i&&se.isFunction(i)&&(i=i(e)),i||i!==!1&&HL(e.url))){const u=o&&s&&$L.read(s);u&&a.set(o,u)}return e},QL=typeof XMLHttpRequest!="undefined",YL=QL&&function(t){return new Promise(function(n,i){const o=_6(t);let s=o.data;const a=bi.from(o.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=o,h,p,g,y,k;function j(){y&&y(),k&&k(),o.cancelToken&&o.cancelToken.unsubscribe(h),o.signal&&o.signal.removeEventListener("abort",h)}let T=new XMLHttpRequest;T.open(o.method.toUpperCase(),o.url,!0),T.timeout=o.timeout;function x(){if(!T)return;const v=bi.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:v,config:t,request:T};T6(function(_){n(_),j()},function(_){i(_),j()},D),T=null}"onloadend"in T?T.onloadend=x:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(x)},T.onabort=function(){T&&(i(new st("Request aborted",st.ECONNABORTED,t,T)),T=null)},T.onerror=function(){i(new st("Network Error",st.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const D=o.transitional||k6;o.timeoutErrorMessage&&(z=o.timeoutErrorMessage),i(new st(z,D.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,t,T)),T=null},s===void 0&&a.setContentType(null),"setRequestHeader"in T&&se.forEach(a.toJSON(),function(z,D){T.setRequestHeader(D,z)}),se.isUndefined(o.withCredentials)||(T.withCredentials=!!o.withCredentials),l&&l!=="json"&&(T.responseType=o.responseType),u&&([g,k]=cm(u,!0),T.addEventListener("progress",g)),c&&T.upload&&([p,y]=cm(c),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",y)),(o.cancelToken||o.signal)&&(h=v=>{T&&(i(!v||v.type?new fc(null,t,T):v),T.abort(),T=null)},o.cancelToken&&o.cancelToken.subscribe(h),o.signal&&(o.signal.aborted?h():o.signal.addEventListener("abort",h)));const b=VL(o.url);if(b&&$n.protocols.indexOf(b)===-1){i(new st("Unsupported protocol "+b+":",st.ERR_BAD_REQUEST,t));return}T.send(s||null)})},XL=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,o;const s=function(u){if(!o){o=!0,l();const h=u instanceof Error?u:this.reason;i.abort(h instanceof st?h:new fc(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,s(new st(`timeout ${e} of ms exceeded`,st.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:c}=i;return c.unsubscribe=()=>se.asap(l),c}},JL=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,o;for(;i<n;)o=i+e,yield t.slice(i,o),i=o},ZL=function(t,e){return Jd(this,null,function*(){try{for(var n=Ia(eO(t)),i,o,s;i=!(o=yield new sr(n.next())).done;i=!1){const a=o.value;yield*Cg(JL(a,e))}}catch(o){s=[o]}finally{try{i&&(o=n.return)&&(yield new sr(o.call(n)))}finally{if(s)throw s[0]}}})},eO=function(t){return Jd(this,null,function*(){if(t[Symbol.asyncIterator]){yield*Cg(t);return}const e=t.getReader();try{for(;;){const{done:n,value:i}=yield new sr(e.read());if(n)break;yield i}}finally{yield new sr(e.cancel())}})},yS=(t,e,n,i)=>{const o=ZL(t,e);let s=0,a,l=u=>{a||(a=!0,i&&i(u))};return new ReadableStream({pull(u){return C(this,null,function*(){try{const{done:h,value:p}=yield o.next();if(h){l(),u.close();return}let g=p.byteLength;if(n){let y=s+=g;n(y)}u.enqueue(new Uint8Array(p))}catch(h){throw l(h),h}})},cancel(u){return l(u),o.return()}},{highWaterMark:2})},fg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",I6=fg&&typeof ReadableStream=="function",tO=fg&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):t=>C(Zn,null,function*(){return new Uint8Array(yield new Response(t).arrayBuffer())})),C6=(t,...e)=>{try{return!!t(...e)}catch(n){return!1}},nO=I6&&C6(()=>{let t=!1;const e=new Request($n.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),xS=64*1024,mx=I6&&C6(()=>se.isReadableStream(new Response("").body)),um={stream:mx&&(t=>t.body)};fg&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!um[e]&&(um[e]=se.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new st(`Response type '${e}' is not supported`,st.ERR_NOT_SUPPORT,i)})})})(new Response);const iO=t=>C(Zn,null,function*(){if(t==null)return 0;if(se.isBlob(t))return t.size;if(se.isSpecCompliantForm(t))return(yield new Request($n.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(se.isArrayBufferView(t)||se.isArrayBuffer(t))return t.byteLength;if(se.isURLSearchParams(t)&&(t=t+""),se.isString(t))return(yield tO(t)).byteLength}),rO=(t,e)=>C(Zn,null,function*(){const n=se.toFiniteNumber(t.getContentLength());return n==null?iO(e):n}),oO=fg&&(t=>C(Zn,null,function*(){let{url:e,method:n,data:i,signal:o,cancelToken:s,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:p="same-origin",fetchOptions:g}=_6(t);u=u?(u+"").toLowerCase():"text";let y=XL([o,s&&s.toAbortSignal()],a),k;const j=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let T;try{if(c&&nO&&n!=="get"&&n!=="head"&&(T=yield rO(h,i))!==0){let D=new Request(e,{method:"POST",body:i,duplex:"half"}),P;if(se.isFormData(i)&&(P=D.headers.get("content-type"))&&h.setContentType(P),D.body){const[_,S]=mS(T,cm(gS(c)));i=yS(D.body,xS,_,S)}}se.isString(p)||(p=p?"include":"omit");const x="credentials"in Request.prototype;k=new Request(e,We(ke({},g),{signal:y,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",credentials:x?p:void 0}));let b=yield fetch(k,g);const v=mx&&(u==="stream"||u==="response");if(mx&&(l||v&&j)){const D={};["status","statusText","headers"].forEach(R=>{D[R]=b[R]});const P=se.toFiniteNumber(b.headers.get("content-length")),[_,S]=l&&mS(P,cm(gS(l),!0))||[];b=new Response(yS(b.body,xS,_,()=>{S&&S(),j&&j()}),D)}u=u||"text";let z=yield um[se.findKey(um,u)||"text"](b,t);return!v&&j&&j(),yield new Promise((D,P)=>{T6(D,P,{data:z,headers:bi.from(b.headers),status:b.status,statusText:b.statusText,config:t,request:k})})}catch(x){throw j&&j(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new st("Network Error",st.ERR_NETWORK,t,k),{cause:x.cause||x}):st.from(x,x&&x.code,t,k)}})),gx={http:vL,xhr:YL,fetch:oO};se.forEach(gx,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});const bS=t=>`- ${t}`,sO=t=>se.isFunction(t)||t===null||t===!1,R6={getAdapter:t=>{t=se.isArray(t)?t:[t];const{length:e}=t;let n,i;const o={};for(let s=0;s<e;s++){n=t[s];let a;if(i=n,!sO(n)&&(i=gx[(a=String(n)).toLowerCase()],i===void 0))throw new st(`Unknown adapter '${a}'`);if(i)break;o[a||"#"+s]=i}if(!i){const s=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(bS).join(`
`):" "+bS(s[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:gx};function _f(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fc(null,t)}function vS(t){return _f(t),t.headers=bi.from(t.headers),t.data=jf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),R6.getAdapter(t.adapter||Nd.adapter)(t).then(function(i){return _f(t),i.data=jf.call(t,t.transformResponse,i),i.headers=bi.from(i.headers),i},function(i){return S6(i)||(_f(t),i&&i.response&&(i.response.data=jf.call(t,t.transformResponse,i.response),i.response.headers=bi.from(i.response.headers))),Promise.reject(i)})}const E6="1.11.0",yg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{yg[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const kS={};yg.transitional=function(e,n,i){function o(s,a){return"[Axios v"+E6+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,l)=>{if(e===!1)throw new st(o(a," has been removed"+(n?" in "+n:"")),st.ERR_DEPRECATED);return n&&!kS[a]&&(kS[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,l):!0}};yg.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function aO(t,e,n){if(typeof t!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const s=i[o],a=e[s];if(a){const l=t[s],c=l===void 0||a(l,s,t);if(c!==!0)throw new st("option "+s+" must be "+c,st.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new st("Unknown option "+s,st.ERR_BAD_OPTION)}}const op={assertOptions:aO,validators:yg},lr=op.validators;let $s=class{constructor(e){this.defaults=e||{},this.interceptors={request:new hS,response:new hS}}request(e,n){return C(this,null,function*(){try{return yield this._request(e,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch(a){}}throw i}})}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=da(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&op.assertOptions(i,{silentJSONParsing:lr.transitional(lr.boolean),forcedJSONParsing:lr.transitional(lr.boolean),clarifyTimeoutError:lr.transitional(lr.boolean)},!1),o!=null&&(se.isFunction(o)?n.paramsSerializer={serialize:o}:op.assertOptions(o,{encode:lr.function,serialize:lr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),op.assertOptions(n,{baseUrl:lr.spelling("baseURL"),withXsrfToken:lr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&se.merge(s.common,s[n.method]);s&&se.forEach(["delete","get","head","post","put","patch","common"],k=>{delete s[k]}),n.headers=bi.concat(a,s);const l=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(c=c&&j.synchronous,l.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let h,p=0,g;if(!c){const k=[vS.bind(this),void 0];for(k.unshift(...l),k.push(...u),g=k.length,h=Promise.resolve(n);p<g;)h=h.then(k[p++],k[p++]);return h}g=l.length;let y=n;for(p=0;p<g;){const k=l[p++],j=l[p++];try{y=k(y)}catch(T){j.call(this,T);break}}try{h=vS.call(this,y)}catch(k){return Promise.reject(k)}for(p=0,g=u.length;p<g;)h=h.then(u[p++],u[p++]);return h}getUri(e){e=da(this.defaults,e);const n=j6(e.baseURL,e.url,e.allowAbsoluteUrls);return v6(n,e.params,e.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(e){$s.prototype[e]=function(n,i){return this.request(da(i||{},{method:e,url:n,data:(i||{}).data}))}});se.forEach(["post","put","patch"],function(e){function n(i){return function(s,a,l){return this.request(da(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}$s.prototype[e]=n(),$s.prototype[e+"Form"]=n(!0)});let lO=class A6{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(l=>{i.subscribe(l),s=l}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,l){i.reason||(i.reason=new fc(s,a,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new A6(function(o){e=o}),cancel:e}}};function cO(t){return function(n){return t.apply(null,n)}}function uO(t){return se.isObject(t)&&t.isAxiosError===!0}const fx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fx).forEach(([t,e])=>{fx[e]=t});function B6(t){const e=new $s(t),n=l6($s.prototype.request,e);return se.extend(n,$s.prototype,e,{allOwnKeys:!0}),se.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return B6(da(t,o))},n}const nn=B6(Nd);nn.Axios=$s;nn.CanceledError=fc;nn.CancelToken=lO;nn.isCancel=S6;nn.VERSION=E6;nn.toFormData=gg;nn.AxiosError=st;nn.Cancel=nn.CanceledError;nn.all=function(e){return Promise.all(e)};nn.spread=cO;nn.isAxiosError=uO;nn.mergeConfig=da;nn.AxiosHeaders=bi;nn.formToJSON=t=>w6(se.isHTMLForm(t)?new FormData(t):t);nn.getAdapter=R6.getAdapter;nn.HttpStatusCode=fx;nn.default=nn;const{Axios:y9,AxiosError:x9,CanceledError:b9,isCancel:v9,CancelToken:k9,VERSION:w9,all:S9,Cancel:T9,isAxiosError:j9,spread:_9,toFormData:I9,AxiosHeaders:C9,HttpStatusCode:R9,formToJSON:E9,getAdapter:A9,mergeConfig:B9}=nn;function sp(t,e,n,i){return Jd(this,null,function*(){try{const s=Ze().currentUser;if(!s)throw new Error("");let a={"x-test-mode":i?"true":"false"};try{const u=yield new sr(s.getIdToken());a.Authorization=`Bearer ${u}`}catch(u){console.error("Failed to get user token:",u)}const l=yield new sr(nn.post("/api/gpt",{messages:[{sender:"user",text:t}],system_prompt:n,userId:s.uid},{headers:a})),c=l.data.reply;if(console.log("API Response:",l.data),c&&c.trim()){const u=c.split("");for(const h of u)yield h,yield new sr(new Promise(p=>setTimeout(p,50)))}else throw console.error("Empty reply from API"),new Error("AI")}catch(o){throw console.error("Error calling GPT API:",o),o instanceof Error?new Error(`API${o.message}`):new Error("")}})}const P6=["Annie.png","berlex.png","Bray.png","Cayly.png","Derxl.png","El.png","Fenny.png","Gily.png","Henny.png","Jesy.png","Karl.png","michy.png","Mily.png","Neysher.png","sandy.png","Sherl.png","Shu.png","Shyly.png"],dO=P6.map(t=>`/avatars/${t}`);P6.map(t=>t.replace(/\.png$/i,""));const wS={"zh-TW":{friend:"",avatarTitle:"",companionPhrase:[" ",""],changeAvatar:"",aiReplyTemplate:t=>`AI${t}...`,aiSystemPrompt:"",speechErrorBrowser:" Chrome/Edge",speechErrorFail:"",speechErrorNoDetect:"",logout:"",inputPlaceholder:"... (Enter )",welcome:t=>`${t} AI `,welcomePickAvatar:t=>`${t}...`,welcomeChat:(t,e)=>`${t}${e}`,whoAmI:"",tapToTalk:"...",aiReplying:"AI ",recognizing:"..."},"zh-CN":{friend:"",avatarTitle:"",companionPhrase:[" ",""],changeAvatar:"",aiReplyTemplate:t=>`AI"${t}"...`,aiSystemPrompt:"",speechErrorBrowser:" Chrome/Edge",speechErrorFail:"",speechErrorNoDetect:"",logout:"",inputPlaceholder:"... (Enter )",welcome:t=>`${t} AI `,welcomePickAvatar:t=>`${t}...`,welcomeChat:(t,e)=>`${t}${e}`,whoAmI:"",tapToTalk:"...",aiReplying:"AI ",recognizing:"..."},en:{friend:"Friend",avatarTitle:"Pick Me as Your Friend",companionPhrase:[" I'm here by the sea,","I'm listening."],changeAvatar:"Change My Avatar",aiReplyTemplate:t=>`AI Chat: I understand what you mean, "${t}", let me hear more from you...`,aiSystemPrompt:"You are a warm, empathetic virtual person. Please respond in an encouraging and positive tone.",speechErrorBrowser:"This browser does not support speech recognition. Please use Chrome/Edge.",speechErrorFail:"Speech recognition failed, please try again.",speechErrorNoDetect:"No speech detected, please try again.",logout:"Logout",inputPlaceholder:"Or, type text directly... (Enter to send)",welcome:t=>`Hi, ${t}, I'm your AI friend. You can start talking to me now!`,welcomePickAvatar:t=>`Hi, ${t}, pick my avatar and let's chat freely!`,welcomeChat:(t,e)=>`${t}: Hi, ${e}, what do you want to talk about today?`,whoAmI:"Who do you want me to be?",tapToTalk:"Tap to start voice chat...",aiReplying:"AI is replying, type a new message to interrupt.",recognizing:"Recognizing..."},ja:{friend:"",avatarTitle:"",companionPhrase:[" ",""],changeAvatar:"",aiReplyTemplate:t=>`AI${t}...`,aiSystemPrompt:"",speechErrorBrowser:"Chrome/Edge",speechErrorFail:"",speechErrorNoDetect:"",logout:"",inputPlaceholder:"... (Enter)",welcome:t=>`${t}AI`,welcomePickAvatar:t=>`${t}`,welcomeChat:(t,e)=>`${t}${e}`,whoAmI:"",tapToTalk:"",aiReplying:"AI",recognizing:"..."},ko:{friend:"",avatarTitle:"  ",companionPhrase:["    ,","  ."],changeAvatar:"  ",aiReplyTemplate:t=>`AI :   , "${t}",  ...`,aiSystemPrompt:"      .    .",speechErrorBrowser:"     . Chrome/Edge .",speechErrorFail:"  .  .",speechErrorNoDetect:"  .  .",logout:"",inputPlaceholder:",   ... (Enter )",welcome:t=>`, ${t}.   AI .      !`,welcomePickAvatar:t=>`, ${t}.      !`,welcomeChat:(t,e)=>`${t}: , ${e},    ?`,whoAmI:"  ?",tapToTalk:"   ...",aiReplying:"AI  .      .",recognizing:" ..."},vi:{friend:"Bn b",avatarTitle:"Chn ti lm bn ca bn",companionPhrase:[" Em  y bn b bin,","Em ang lng nghe y."],changeAvatar:"Thay i Avatar ca ti",aiReplyTemplate:t=>`Tr chuyn AI: Ti hiu  bn, "${t}", hy cho ti nghe thm...`,aiSystemPrompt:"Bn l mt ngi o m p, ng cm. Vui lng tr li bng ging iu khch l v tch cc.",speechErrorBrowser:"Trnh duyt ny khng h tr nhn dng ging ni. Vui lng s dng Chrome/Edge.",speechErrorFail:"Nhn dng ging ni tht bi, vui lng th li.",speechErrorNoDetect:"Khng pht hin thy ging ni, vui lng th li.",logout:"ng xut",inputPlaceholder:"Hoc, nhp vn bn trc tip... (Enter  gi)",welcome:t=>`Cho, ${t}. Ti l ngi bn AI ca bn. By gi bn c th bt u ni chuyn vi ti!`,welcomePickAvatar:t=>`Cho, ${t}, hy chn avatar ca ti v chng ta hy tr chuyn thoi mi!`,welcomeChat:(t,e)=>`${t}: Cho, ${e}, hm nay bn mun ni v iu g?`,whoAmI:"Bn mun ti l ai?",tapToTalk:"Nhn  bt u tr chuyn thoi...",aiReplying:"AI ang tr li, nhp tin nhn mi  ngt.",recognizing:"ang nhn dng..."},th:{friend:"",avatarTitle:"",companionPhrase:[" ,",""],changeAvatar:"",aiReplyTemplate:t=>` AI: , "${t}", ...`,aiSystemPrompt:" ",speechErrorBrowser:"  Chrome/Edge",speechErrorFail:" ",speechErrorNoDetect:" ",logout:"",inputPlaceholder:"... (Enter )",welcome:t=>`, ${t}.  AI  !`,welcomePickAvatar:t=>`, ${t}, !`,welcomeChat:(t,e)=>`${t}: , ${e}, ?`,whoAmI:"?",tapToTalk:"...",aiReplying:"AI , ",recognizing:"..."},la:{friend:"Amicus",avatarTitle:"Elige Me ut Amicum Tuum",companionPhrase:[" Hic adsum ad mare,","Audio."],changeAvatar:"Muta Imaginem Meam",aiReplyTemplate:t=>`AI Curabitur: Intellego quid velis, "${t}", sine me plura a te audire...`,aiSystemPrompt:"Tu es persona virtualis calida et empathetica. Quaeso responde sono hortanti et positivo.",speechErrorBrowser:"Hic navigator recognitionem vocis non sustinet. Quaeso utere Chrome/Edge.",speechErrorFail:"Recognitio vocis defecit, quaeso iterum conare.",speechErrorNoDetect:"Nulla oratio detecta, quaeso iterum conare.",logout:"Exire",inputPlaceholder:"Aut, textum directe scribe... (Enter mittere)",welcome:t=>`Salve, ${t}. Amicus tuus AI sum. Iam potes mecum loqui!`,welcomePickAvatar:t=>`Salve, ${t}, elige imaginem meam et libere loquamur!`,welcomeChat:(t,e)=>`${t}: Salve, ${e}, de quo hodie loqui vis?`,whoAmI:"Quis vis me esse?",tapToTalk:"Tange ut colloquium vocale incipias...",aiReplying:"AI respondet, scribe novum nuntium ad interrumpendum.",recognizing:"Agnoscens..."},ms:{friend:"Kawan",avatarTitle:"Pilih Saya sebagai Kawan Anda",companionPhrase:[" Saya di sini di tepi laut,","Saya sedang mendengar."],changeAvatar:"Tukar Avatar Saya",aiReplyTemplate:t=>`Sembang AI: Saya faham maksud awak, "${t}", beritahu saya lagi...`,aiSystemPrompt:"Anda adalah orang maya yang mesra dan empati. Sila balas dengan nada yang menggalakkan dan positif.",speechErrorBrowser:"Pelayar ini tidak menyokong pengecaman pertuturan. Sila gunakan Chrome/Edge.",speechErrorFail:"Pengecaman pertuturan gagal, sila cuba lagi.",speechErrorNoDetect:"Tiada pertuturan dikesan, sila cuba lagi.",logout:"Log keluar",inputPlaceholder:"Atau, taip teks secara terus... (Enter untuk hantar)",welcome:t=>`Hai, ${t}. Saya kawan AI anda. Anda boleh mula bercakap dengan saya sekarang!`,welcomePickAvatar:t=>`Hai, ${t}, pilih avatar saya dan mari berbual dengan bebas!`,welcomeChat:(t,e)=>`${t}: Hai, ${e}, apa yang anda mahu bualkan hari ini?`,whoAmI:"Awak nak saya jadi siapa?",tapToTalk:"Ketik untuk memulakan sembang suara...",aiReplying:"AI sedang membalas, taip mesej baru untuk mengganggu.",recognizing:"Mengecam..."}},hO={"zh-TW":"","zh-CN":"",en:"Change Avatar",ja:"",ko:" ",th:"",vi:"i avatar",ms:"Tukar Avatar",la:"Muta Imaginem"};function pO(){var ce,Ve,Ke;const t=tt(),[e,n]=m.useState([]),[i,o]=m.useState(""),[s,a]=m.useState(!1),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),[h,p]=m.useState(!1),[g,y]=m.useState(!1),[k,j]=m.useState(""),[T,x]=m.useState(!1),[b,v]=m.useState(""),[z,D]=m.useState(""),[P,_]=m.useState(!1),[S,R]=m.useState(!1),[E,A]=m.useState(""),[B,I]=m.useState(""),[re,Q]=m.useState(!1),[X,de]=m.useState(!1),{lang:V,setLang:ee}=dt(),he=wS[V]||wS["zh-TW"],ve=m.useRef(null),be=m.useRef(null),te=m.useRef(null),{isTestMode:N}=fs(),[O,oe]=m.useState(()=>typeof window!="undefined"?window.innerWidth<=768:!1),ge=Ze(ir),[je,Ce]=m.useState(ge.currentUser),[He,J]=m.useState(!1),H={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log Keluar",la:"Exire"},Le={"zh-TW":{privacy:"",terms:"",deletion:""},"zh-CN":{privacy:"",terms:"",deletion:""},en:{privacy:"Privacy Policy",terms:"Terms of Service",deletion:"Data Deletion"},ja:{privacy:"",terms:"",deletion:""},ko:{privacy:" ",terms:"",deletion:" "},th:{privacy:"",terms:"",deletion:""},vi:{privacy:"Chnh sch bo mt",terms:"iu khon s dng",deletion:"Xa d liu"},ms:{privacy:"Dasar Privasi",terms:"Terma Perkhidmatan",deletion:"Pemadaman Data"},la:{privacy:"Politica Privata",terms:"Termini Servitii",deletion:"Deletio Datorum"}};m.useEffect(()=>{const me=()=>oe(window.innerWidth<=768);return me(),window.addEventListener("resize",me),()=>{window.removeEventListener("resize",me)}},[]),m.useEffect(()=>{const me=ri(ge,Ee=>{Ce(Ee),J(!0)});return()=>me()},[ge]),m.useEffect(()=>{if(!re)return;const me=Ee=>{ve.current&&!ve.current.contains(Ee.target)&&Q(!1)};return document.addEventListener("click",me),()=>document.removeEventListener("click",me)},[re]),m.useEffect(()=>{if(!X)return;const me=Ee=>{be.current&&!be.current.contains(Ee.target)&&de(!1)};return document.addEventListener("mousedown",me),()=>document.removeEventListener("mousedown",me)},[X]);const[Y,ae]=m.useState(!1),Ie=m.useRef(null),[xe,_e]=m.useState(!1),{checkPermission:we,recordUsage:qe}=Bd(),[gt,ht]=m.useState(!1),[St,_t]=m.useState(!1),[U,L]=m.useState(null),W=()=>{const me=Ze().currentUser;return me&&me.displayName||localStorage.getItem("nickname")||he.friend},[Qe,at]=m.useState(W()),[M,Se]=m.useState(()=>localStorage.getItem("lastUid")),[Pe,$e]=m.useState(()=>!localStorage.getItem("avatarWelcomed")),[G,Fe]=m.useState(()=>!localStorage.getItem("aiAvatar")),[De,q]=m.useState(""),le=m.useRef(null);m.useEffect(()=>{localStorage.setItem("lang",V),at(W());const me=window.SpeechRecognition||window.webkitSpeechRecognition;me?(te.current=new me,te.current.continuous=!0,te.current.interimResults=!0,te.current.lang=V,te.current.onresult=Ee=>{let Me="",Tt="";for(let lt=Ee.resultIndex;lt<Ee.results.length;++lt)Ee.results[lt].isFinal?Tt+=Ee.results[lt][0].transcript:Me+=Ee.results[lt][0].transcript;if(o(B+Tt+Me),Tt){const lt=B+Tt;I(un=>un+Tt),C(this,null,function*(){const un={id:`user-${Date.now()}`,text:lt,sender:"user"};n(Fi=>[...Fi,un]),o(""),l.current&&clearTimeout(l.current);const fn=`ai-${Date.now()}`;n(Fi=>[...Fi,{id:fn,text:"",sender:"ai",status:"streaming"}]),a(!0);try{const Fi=yield sp(lt,V,he.aiSystemPrompt,N);let mo="";try{for(var Ye=Ia(Fi),or,ys,$t;or=!(ys=yield Ye.next()).done;or=!1){const dn=ys.value;mo+=dn,n(Pt=>Pt.map(Kt=>Kt.id===fn?We(ke({},Kt),{text:mo}):Kt))}}catch(ys){$t=[ys]}finally{try{or&&(ys=Ye.return)&&(yield ys.call(Ye))}finally{if($t)throw $t[0]}}n(dn=>dn.map(Pt=>Pt.id===fn?We(ke({},Pt),{status:"done"}):Pt))}catch(Fi){console.error("Error in AI pipeline: ",Fi);const mo=Fi instanceof Error?Fi.message:"";n(dn=>dn.map(Pt=>Pt.id===fn?We(ke({},Pt),{text:`API${mo}`,status:"done"}):Pt))}finally{a(!1)}})}},te.current.onerror=Ee=>{console.error("Speech recognition error",Ee.error);let Me="";switch(Ee.error){case"no-speech":Me=he.speechErrorNoDetect;break;case"audio-capture":case"network":Me=he.speechErrorFail;break;default:Me=""}A(Me),R(!1),y(!1)},te.current.onend=()=>{R(!1)}):A(he.speechErrorBrowser)},[V,he.speechErrorBrowser,he.speechErrorFail,he.speechErrorNoDetect,g,B]),m.useEffect(()=>{te.current&&(te.current.onend=()=>{R(!1),Y&&g&&!xe&&(Ie.current=setTimeout(()=>{!g||xe||(i.trim()&&($(i),o(""),I("")),setTimeout(()=>{g&&Y&&!xe&&(te.current.start(),R(!0))},500))},100))})},[Y,g,i,xe]),m.useEffect(()=>{var Me,Tt;const me=localStorage.getItem("aiAvatar");me?(j(me),x(!1)):x(!0);const Ee=(Me=Ze().currentUser)==null?void 0:Me.uid;Ee!==M&&(localStorage.removeItem("aiAvatar"),localStorage.removeItem("avatarWelcomed"),j(""),Se(Ee||null),Ee&&localStorage.setItem("lastUid",Ee)),Ze().currentUser&&at(((Tt=Ze().currentUser)==null?void 0:Tt.displayName)||he.friend)},[M,he.friend]),m.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[e]);const rt=me=>{j(me),localStorage.setItem("aiAvatar",me),x(!1),Pe&&(n([{id:"welcome-1",text:he.welcomeChat(pe(me),Qe),sender:"ai"}]),localStorage.setItem("avatarWelcomed","true"),$e(!1))},$=(...Ee)=>C(this,[...Ee],function*(me=i){if(!me.trim())return;const Me=yield we("aiChat");if(!Me.allowed){if(N){const dn={id:`user-${Date.now()}`,text:me,sender:"user"};n(Kt=>[...Kt,dn]),o(""),I(""),l.current&&clearTimeout(l.current);const Pt=`ai-${Date.now()}`;n(Kt=>[...Kt,{id:Pt,text:"",sender:"ai",status:"streaming"}]),a(!0);try{const Kt=yield sp(me,V,he.aiSystemPrompt,N);let vi="";try{for(var un=Ia(Kt),fn,Ye,or;fn=!(Ye=yield un.next()).done;fn=!1){const ki=Ye.value;vi+=ki,n(wi=>wi.map(wa=>wa.id===Pt?We(ke({},wa),{text:vi}):wa))}}catch(Ye){or=[Ye]}finally{try{fn&&(Ye=un.return)&&(yield Ye.call(un))}finally{if(or)throw or[0]}}n(ki=>ki.map(wi=>wi.id===Pt?We(ke({},wi),{status:"done"}):wi))}catch(Kt){console.error("Error in AI pipeline: ",Kt);const vi=Kt instanceof Error?Kt.message:"";n(ki=>ki.map(wi=>wi.id===Pt?We(ke({},wi),{text:`API${vi}`,status:"done"}):wi))}finally{a(!1)}return}Me.isFreeUser?_t(!0):(Me.canRenew,L(Me),ht(!0));return}const Tt={id:`user-${Date.now()}`,text:me,sender:"user"};n(dn=>[...dn,Tt]),o(""),I(""),l.current&&clearTimeout(l.current);const lt=`ai-${Date.now()}`;n(dn=>[...dn,{id:lt,text:"",sender:"ai",status:"streaming"}]),a(!0);try{const dn=yield sp(me,V,he.aiSystemPrompt,N);let Pt="";try{for(var ys=Ia(dn),$t,Fi,mo;$t=!(Fi=yield ys.next()).done;$t=!1){const Kt=Fi.value;Pt+=Kt,n(vi=>vi.map(ki=>ki.id===lt?We(ke({},ki),{text:Pt}):ki))}}catch(Fi){mo=[Fi]}finally{try{$t&&(Fi=ys.return)&&(yield Fi.call(ys))}finally{if(mo)throw mo[0]}}n(Kt=>Kt.map(vi=>vi.id===lt?We(ke({},vi),{status:"done"}):vi)),_(!0),yield qe("aiChat",2)}catch(dn){console.error("Error in AI pipeline: ",dn),n(Pt=>Pt.map(Kt=>Kt.id===lt?We(ke({},Kt),{text:"Oops, something went wrong.",status:"done"}):Kt))}finally{a(!1),_(!1)}}),pe=me=>{if(!me)return"";const Ee=me.split("/");return Ee[Ee.length-1].replace(/\.png$/i,"")},nt=()=>C(this,null,function*(){if(te.current)if(g||Y||S)te.current.stop(),y(!1),R(!1),ae(!1),Ie.current&&clearTimeout(Ie.current),_e(!0);else{const me=yield we("aiChat");if(!me.allowed){if(N){I(""),o(""),te.current.start(),y(!0),R(!0),A(""),ae(!0),_e(!1);return}me.isFreeUser?_t(!0):(me.canRenew,L(me),ht(!0));return}I(""),o(""),te.current.start(),y(!0),R(!0),A(""),ae(!0),_e(!1),yield qe("aiChat",1)}}),pt=me=>{var Me;const Ee=(Me=me.target.files)==null?void 0:Me[0];if(Ee){if(!Ee.type.startsWith("image/")){alert("");return}if(Ee.size>5*1024*1024){alert(" 5MB");return}const Tt=new FileReader;Tt.onload=lt=>{var fn;const un=(fn=lt.target)==null?void 0:fn.result;q(un),rt(un)},Tt.readAsDataURL(Ee)}},it=()=>{var me;(me=le.current)==null||me.click()};m.useEffect(()=>{!g&&!Y&&_e(!1)},[g,Y]);const K=()=>{ht(!1),L(null)};return He?r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"#f0f2f5"},children:[O?r.jsx(Ar,{}):r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":V==="zh-TW"||V==="zh-CN"?" Restarter ":V==="en"?"Learn about Restarter platform":V==="ja"?"Restarter ":V==="ko"?"Restarter   ":V==="th"?" Restarter":V==="vi"?"Tm hiu v nn tng Restarter":V==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:V==="zh-TW"?" Restarter":V==="zh-CN"?" Restarter":V==="en"?" RestarterWho We Are":V==="ja"?" Restarter":V==="ko"?" Restarter ":V==="th"?" Restarter":V==="vi"?" RestarterChng ti l ai":V==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":V==="zh-TW"?"":V==="zh-CN"?"":V==="en"?"Provide feedback and suggestions":V==="ja"?"":V==="ko"?"  ":V==="th"?"":V==="vi"?"Cung cp phn hi  xut":V==="ms"?"Berikan maklum balas dan cadangan":"Praebe consilia et suggestiones",role:"button",children:V==="zh-TW"?" ":V==="zh-CN"?" ":V==="en"?" FeedbackWe Want to Hear You":V==="ja"?" ":V==="ko"?"    ":V==="th"?" ":V==="vi"?" Hp gp Chng ti mun lng nghe bn":V==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),je?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:je.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:je.displayName||je.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(ge)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:H[V]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:V==="zh-TW"?"/":V==="zh-CN"?"/":V==="en"?"Register / Login":V==="ja"?"/":V==="ko"?"/":V==="th"?"/":V==="vi"?"ng k/ng nhp":V==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:ve,children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>Q(me=>!me),children:[V==="zh-TW"?"":V==="zh-CN"?"":V==="en"?"English":V==="ja"?"":V==="ko"?"":V==="th"?"":V==="vi"?"Ting Vit":V==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),re&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(me=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:me===V?"#6B5BFF":"#232946",fontWeight:me===V?700:500,background:me===V?"#f3f0ff":"#fff"},onClick:()=>{ee(me),Q(!1)},children:me==="zh-TW"?"":me==="zh-CN"?"":me==="en"?"English":me==="ja"?"":me==="ko"?"":me==="th"?"":me==="vi"?"Ting Vit":me==="ms"?"Bahasa Melayu":"Latin"},me))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:be,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>de(me=>!me),onMouseOver:me=>{me.currentTarget.style.background="#6B5BFF",me.currentTarget.style.color="#fff"},onMouseOut:me=>{me.currentTarget.style.background="#fff",me.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),X&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:V==="zh-TW"||V==="zh-CN"?"":V==="en"?"Legal Documents":V==="ja"?"":V==="ko"?" ":V==="th"?"":V==="vi"?"Ti liu php l":V==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:Le,titleKey:"privacy",path:"/privacy-policy"},{key:"terms",title:Le,titleKey:"terms",path:"/terms"},{key:"data",title:Le,titleKey:"deletion",path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(me=>{var Ee;return r.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"11px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(me.path),de(!1)},onMouseOver:Me=>{Me.currentTarget.style.background="#f3f0ff",Me.currentTarget.style.color="#6B5BFF"},onMouseOut:Me=>{Me.currentTarget.style.background="#fff",Me.currentTarget.style.color="#232946"},children:me.titleKey?((Ee=me.title[V])==null?void 0:Ee[me.titleKey])||me.title["zh-TW"][me.titleKey]:me.title[V]||me.title["zh-TW"]},me.key)})]})]})]}),T&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:100},children:r.jsxs("div",{style:{background:"#fff",padding:24,borderRadius:12,textAlign:"center",position:"relative"},children:[r.jsx("button",{onClick:()=>x(!1),style:{position:"absolute",top:12,right:12,background:"none",border:"none",fontSize:24,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsx("h2",{children:he.avatarTitle}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16,margin:"24px 0"},children:[dO.slice(0,15).map(me=>r.jsx("img",{src:me,alt:pe(me),onClick:()=>rt(me),style:{width:80,height:80,borderRadius:"50%",cursor:"pointer",objectFit:"cover"}},me)),r.jsx("div",{style:{width:80,height:80,borderRadius:"50%",border:"2px dashed #6B5BFF",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",background:"#f8f8ff",color:"#6B5BFF",fontSize:12,fontWeight:600},onClick:it,children:""})]}),r.jsx("input",{ref:le,type:"file",accept:"image/*",style:{display:"none"},onChange:pt})]})}),!k&&!T&&r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:24,textAlign:"center"},children:[r.jsx("p",{style:{fontSize:18,marginBottom:24},children:he.welcomePickAvatar(Qe)}),r.jsx("button",{onClick:()=>x(!0),style:{padding:"10px 20px",borderRadius:8,background:"#1877f2",color:"#fff",border:"none",fontWeight:700,fontSize:16},children:he.avatarTitle})]}),k&&r.jsx("main",{ref:u,className:"chat-main-container",style:{flex:1,overflowY:"auto",padding:"20px",paddingLeft:"20px",paddingTop:"200px",maxHeight:"calc(100vh - 240px)",scrollBehavior:"smooth",boxSizing:"border-box",display:"flex",flexDirection:"column-reverse"},children:r.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",minHeight:"100%",display:"flex",flexDirection:"column-reverse"},children:[r.jsx("div",{style:{height:"20px"}}),e.slice().reverse().map(me=>r.jsx("div",{style:{display:"flex",justifyContent:me.sender==="user"?"flex-end":"center",margin:"15px 0",wordWrap:"break-word",width:"100%"},children:r.jsxs("div",{style:{backgroundColor:me.sender==="user"?"#0084ff":"#e4e6eb",color:me.sender==="user"?"#fff":"#000",padding:"10px 14px",borderRadius:18,maxWidth:"60%",wordBreak:"break-word",whiteSpace:"pre-wrap",lineHeight:"1.3",fontSize:"14px"},children:[me.text,me.status==="streaming"&&"..."]})},me.id)),e.length===0&&r.jsx("div",{style:{textAlign:"center",color:"#888",marginTop:40},children:r.jsx("p",{style:{fontSize:18},children:he.welcomeChat(pe(k),Qe)})})]})}),k&&r.jsxs("footer",{style:{padding:"10px 20px 10px 20px",backgroundColor:"#fff",borderTop:"1px solid #ddd",position:"relative",minHeight:"160px",boxSizing:"border-box"},children:[r.jsx("div",{style:{maxWidth:800,margin:"0 auto",display:"flex",alignItems:"flex-start",justifyContent:"center"},children:r.jsxs("div",{style:{flex:1,marginLeft:0,marginRight:0},children:[r.jsxs("div",{className:"mobile-avatars-row",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"0 8px"},children:[r.jsxs("div",{className:"mobile-ai-avatar",style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("div",{style:{width:80,height:80,borderRadius:"50% / 45%",border:"4px solid #2196f3",display:"flex",alignItems:"center",justifyContent:"center",background:"#fff",overflow:"hidden"},children:r.jsx("div",{style:{width:72,height:72,minWidth:72,minHeight:72,borderRadius:"50%",overflow:"hidden",position:"relative"},children:r.jsx("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:r.jsx(FW,{avatar:k,videoUrl:b,audioUrl:z,isSpeaking:P,size:72})})})}),r.jsx("button",{onClick:()=>x(!0),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"4px 8px",fontWeight:600,fontSize:10,cursor:"pointer",boxShadow:"0 2px 4px rgba(107, 91, 255, 0.3)",whiteSpace:"nowrap"},children:hO[V]})]}),r.jsx("div",{style:{flex:1,textAlign:"center",padding:"0 12px"},children:r.jsxs("div",{style:{fontSize:14,color:"#666",lineHeight:"1.4"},children:[r.jsx("span",{style:{fontWeight:700,color:"#ff9800"},children:pe(k)||"Fenny"}),r.jsx("br",{}),r.jsx("span",{style:{color:"#1976d2"},children:"..."}),r.jsx("br",{}),r.jsx("span",{style:{color:"#1976d2"},children:((ce=Ze().currentUser)==null?void 0:ce.displayName)||((Ve=Ze().currentUser)==null?void 0:Ve.email)||""}),r.jsx("br",{}),r.jsx("span",{style:{color:"#666"},children:" "})]})}),r.jsx("div",{style:{width:80,height:80,borderRadius:"50% / 45%",border:"4px solid #2196f3",display:"flex",alignItems:"center",justifyContent:"center",background:"#fff",overflow:"visible"},children:r.jsx("img",{src:((Ke=Ze().currentUser)==null?void 0:Ke.photoURL)||"/ctx-logo.png",alt:"user",style:{width:72,height:72,minWidth:72,minHeight:72,borderRadius:"50%",objectFit:"cover",border:"none",verticalAlign:"bottom"}})})]}),r.jsx("div",{style:{display:"flex",alignItems:"flex-end",height:80},children:r.jsx("input",{ref:c,type:"text",value:i,onChange:me=>o(me.target.value),onKeyPress:me=>me.key==="Enter"&&$(),placeholder:s?he.aiReplying:he.inputPlaceholder,style:{width:"100%",padding:12,borderRadius:18,border:"1px solid #ccc"},disabled:s||S})}),r.jsxs("div",{className:"chat-action-row-mobile",style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:12,gap:16},children:[r.jsx("button",{onClick:()=>$(),disabled:s||!i,style:{padding:"10px 28px",borderRadius:8,border:"none",background:"#1976d2",color:"#fff",fontWeight:700,fontSize:16,cursor:s||!i?"not-allowed":"pointer"},children:""}),r.jsx("button",{onClick:nt,disabled:s,style:{padding:16,borderRadius:"50%",border:"none",background:g||Y||S?"#ff4d4d":"#1877f2",color:"#fff",cursor:"pointer",fontSize:20},children:g||Y||S?"":""})]}),r.jsxs("div",{className:"chat-action-row-desktop",style:{width:"100%",display:"none",flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:12,gap:16},children:[r.jsx("button",{onClick:()=>$(),disabled:s||!i,style:{padding:"10px 28px",borderRadius:8,border:"none",background:"#1976d2",color:"#fff",fontWeight:700,fontSize:16,cursor:s||!i?"not-allowed":"pointer"},children:""}),r.jsx("button",{onClick:nt,disabled:s,style:{padding:16,borderRadius:"50%",border:"none",background:g||Y||S?"#ff4d4d":"#1877f2",color:"#fff",cursor:"pointer",fontSize:20},children:g||Y||S?"":""})]}),r.jsxs("div",{style:{height:40,display:"flex",alignItems:"center",justifyContent:"center"},children:[E&&r.jsx("p",{style:{color:"red",margin:0},children:E}),!E&&!i&&!S&&!s&&!g&&!Y&&r.jsx("p",{style:{color:"#888",margin:0,cursor:"pointer"},onClick:nt,children:he.tapToTalk}),!E&&S&&r.jsx("p",{style:{color:"#888",margin:0},children:he.recognizing}),!E&&(i||s||g||Y)&&r.jsx("p",{style:{color:"transparent",margin:0},children:""})]})]})}),r.jsx("div",{style:{textAlign:"center",marginTop:10,fontSize:12,color:"#aaa"},children:r.jsxs("p",{children:[he.companionPhrase[0],he.companionPhrase[1]]})})]}),gt&&U&&r.jsx(mc,{isOpen:gt,onClose:K,currentPlan:U.currentPlan,remainingDays:U.remainingDays,usedTokens:U.usedTokens,totalTokens:U.totalTokens}),St&&r.jsx(a6,{isOpen:St,onClose:()=>_t(!1),featureName:"AI "})]}):r.jsx("div",{style:{textAlign:"center",marginTop:"30vh",fontSize:24},children:"..."})}const mO="modulepreload",gO=function(t){return"/"+t},SS={},Gl=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=gO(c),c in SS)return;SS[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":mO,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Cs=Ze(ir),fO={"zh-TW":{heroLeftTop:"",heroLeftMain:"",heroLeftSub:"",heroLeftYellow:"",heroRightTop:"...",heroRightMain:"",heroRightSub:"",heroRightYellow:"",title:"Restarter ",email:" *",password:"(6)*",nickname:"*",age:"*",selectAge:"*",country:"()*",city:"()",interest:"*",eventType:"**",whatToImprove:"*",uploadAvatar:"",male:"",female:"",genderRequired:"()",register:" ",registering:"...",errorAvatar:"",errorGender:"",errorEmailFormat:"",errorPasswordFormat:"8",errorNicknameFormat:"6-16",errorAgeFormat:"1899",errorCountry:"/",errorRegion:"",errorInterest:"",errorEventType:"",errorImprovement:"",formTopSlogan:"",login:"",terms:"/",privacy:"",deletion:"",googleLogin:" Google ",appleLogin:" Apple "},"zh-CN":{heroLeftTop:"",heroLeftMain:"",heroLeftSub:"",heroLeftYellow:"",heroRightTop:"...",heroRightMain:"",heroRightSub:"",heroRightYellow:"",title:"Restarter ",email:" *",password:" (8) *",nickname:" (6-16) *",age:"*",selectAge:"*",country:"()*",city:"()",interest:"*",eventType:"**",whatToImprove:"*",uploadAvatar:"",male:"",female:"",genderRequired:"()",register:" ",registering:"...",errorAvatar:"",errorGender:"",errorEmailFormat:"",errorPasswordFormat:"8",errorNicknameFormat:"6-16",errorAgeFormat:"1899",errorCountry:"/",errorRegion:"",errorInterest:"",errorEventType:"",errorImprovement:"",formTopSlogan:"",login:"",terms:"/",privacy:"",deletion:"",googleLogin:" Google ",appleLogin:" Apple "},en:{heroLeftTop:"Redemption is not a crime,",heroLeftMain:"just went down the wrong path for too long.",heroLeftSub:"",heroLeftYellow:"Wildflowers bloom bravely!",heroRightTop:"I want a new start...",heroRightMain:"Every experience is a unique chapter,",heroRightSub:"not a barrier to growth.",heroRightYellow:"Rise from the ashes!",title:"Restarter Registration",email:"Email *required",password:"Password (min 8 chars, letter & number) *required",nickname:"Nickname (6-16 chars) *required",age:"Age*optional",selectAge:"Select age range",country:"Country (Region)*optional",city:"City (optional)",interest:"Interest*optional",eventType:"History Event**optional",whatToImprove:"What to improve*optional",uploadAvatar:"Upload Avatar",male:"Male",female:"Female",genderRequired:"(*required)",register:" Register",registering:"Registering...",errorAvatar:"Please upload an avatar.",errorGender:"Please select a gender.",errorEmailFormat:"Invalid email format.",errorPasswordFormat:"Password must be at least 8 characters long and contain both letters and numbers.",errorNicknameFormat:"Nickname must be 6-16 characters long.",errorAgeFormat:"Age must be between 18 and 99.",errorCountry:"Please select a country.",errorRegion:"Please enter a city.",errorInterest:"Please select an interest.",errorEventType:"Please select an event type.",errorImprovement:"Please select an item to improve.",formTopSlogan:"It's not wrong to rise up!",login:"Login",terms:"Terms/Statement",privacy:"Privacy Policy",deletion:"Data Deletion",googleLogin:"Sign in with Google",appleLogin:"Sign in with Apple"},ja:{heroLeftTop:"",heroLeftMain:"",heroLeftSub:"",heroLeftYellow:"",heroRightTop:"...",heroRightMain:"",heroRightSub:"",heroRightYellow:"",title:"Restarter ",email:" *",password:" (8) *",nickname:" (6-16) *",age:"*",selectAge:"",country:"/*",city:"()",interest:"*",eventType:"**",whatToImprove:"*",uploadAvatar:"",male:"",female:"",genderRequired:"(*)",register:" ",registering:"...",errorAvatar:"",errorGender:"",errorEmailFormat:"",errorPasswordFormat:"8",errorNicknameFormat:"616",errorAgeFormat:"1899",errorCountry:"",errorRegion:"",errorInterest:"",errorEventType:"",errorImprovement:"",formTopSlogan:"",login:"",terms:"/",privacy:"",deletion:"",googleLogin:"Google",appleLogin:"Apple"},ko:{heroLeftTop:"  ,",heroLeftMain:"     .",heroLeftSub:"",heroLeftYellow:"  !",heroRightTop:"  ...",heroRightMain:"   ,",heroRightSub:"  .",heroRightYellow:" !",title:"Restarter ",email:" *",password:" ( 8, / ) *",nickname:" (6-16) *",age:"*",selectAge:" ",country:"/*",city:"( )",interest:"*",eventType:" **",whatToImprove:"  *",uploadAvatar:" ",male:"",female:"",genderRequired:"(*)",register:" ",registering:" ...",errorAvatar:" .",errorGender:" .",errorEmailFormat:"   .",errorPasswordFormat:"  8 ,     .",errorNicknameFormat:" 6-16 .",errorAgeFormat:" 18 99  .",errorCountry:" .",errorRegion:" .",errorInterest:" .",errorEventType:"  .",errorImprovement:"  .",formTopSlogan:"   !",login:"",terms:"/",privacy:"",deletion:"  ",googleLogin:"Google ",appleLogin:"Apple "},th:{heroLeftTop:"",heroLeftMain:"",heroLeftSub:"",heroLeftYellow:"!",heroRightTop:"...",heroRightMain:"",heroRightSub:"",heroRightYellow:"!",title:"Restarter ",email:" *",password:" ( 8 , ) *",nickname:" (6-16 ) *",age:"*",selectAge:"",country:"/*",city:" ()",interest:"*",eventType:"**",whatToImprove:"*",uploadAvatar:"",male:"",female:"",genderRequired:"(*)",register:" ",registering:"...",errorAvatar:"",errorGender:"",errorEmailFormat:"",errorPasswordFormat:" 8 ",errorNicknameFormat:" 6-16 ",errorAgeFormat:" 18  99 ",errorCountry:"",errorRegion:"",errorInterest:"",errorEventType:"",errorImprovement:"",formTopSlogan:"!",login:"",terms:"/",privacy:"",deletion:"",googleLogin:" Google",appleLogin:" Apple"},vi:{heroLeftTop:"S chuc li khng phi l ti c,",heroLeftMain:"ch l i sai ng qu lu.",heroLeftSub:"",heroLeftYellow:"Hoa di n r dng cm!",heroRightTop:"Ti mun mt khi u mi...",heroRightMain:"Mi tri nghim l mt chng c o,",heroRightSub:"Khng phi l ro cn cho s pht trin.",heroRightYellow:"Vn ln t ng tro tn!",title:"ng k Restarter",email:"Email *bt buc",password:"Mt khu (ti thiu 8 k t, gm ch v s) *bt buc",nickname:"Bit danh (6-16 k t) *bt buc",age:"Tui*khng bt buc",selectAge:"Chn  tui",country:"Quc gia/Khu vc*khng bt buc",city:"Thnh ph (ty chn)",interest:"S thch*khng bt buc",eventType:"S kin  tri qua**khng bt buc",whatToImprove:"iu mun ci thin*khng bt buc",uploadAvatar:"Ti ln hnh i din",male:"Nam",female:"N",genderRequired:"(*bt buc)",register:" ng k",registering:"ang ng k...",errorAvatar:"Vui lng ti ln nh i din.",errorGender:"Vui lng chn gii tnh.",errorEmailFormat:"nh dng email khng hp l.",errorPasswordFormat:"Mt khu phi di t nht 8 k t v cha c ch ci v s.",errorNicknameFormat:"Bit danh phi di t 6-16 k t.",errorAgeFormat:"Tui phi t 18 n 99.",errorCountry:"Vui lng chn mt quc gia.",errorRegion:"Vui lng nhp thnh ph.",errorInterest:"Vui lng chn mt s thch.",errorEventType:"Vui lng chn mt loi s kin.",errorImprovement:"Vui lng chn mt mc  ci thin.",formTopSlogan:"Vn ln khng phi l sai!",login:"ng nhp",terms:"iu khon/Tuyn b",privacy:"Chnh sch bo mt",deletion:"Chnh sch xa d liu",googleLogin:"ng nhp bng Google",appleLogin:"ng nhp bng Apple"},ms:{heroLeftTop:"Penebusan bukanlah jenayah,",heroLeftMain:"hanya tersalah jalan terlalu lama.",heroLeftSub:"",heroLeftYellow:"Bunga liar mekar dengan berani!",heroRightTop:"Saya mahu permulaan yang baru...",heroRightMain:"Setiap pengalaman adalah satu bab yang unik,",heroRightSub:"bukan penghalang kepada pertumbuhan.",heroRightYellow:"Bangkit dari abu!",title:"Pendaftaran Restarter",email:"E-mel *diperlukan",password:"Kata laluan (min 8 aksara, huruf & nombor) *diperlukan",nickname:"Nama samaran (6-16 aksara) *diperlukan",age:"Umur*pilihan",selectAge:"Pilih julat umur",country:"Negara/Wilayah*pilihan",city:"Bandar (pilihan)",interest:"Minat*pilihan",eventType:"Peristiwa Bersejarah**pilihan",whatToImprove:"Apa yang ingin diperbaiki*pilihan",uploadAvatar:"Muat naik gambar profil",male:"Lelaki",female:"Perempuan",genderRequired:"(*diperlukan)",register:" Daftar",registering:"Mendaftar...",errorAvatar:"Sila muat naik avatar.",errorGender:"Sila pilih jantina.",errorEmailFormat:"Format e-mel tidak sah.",errorPasswordFormat:"Kata laluan mesti sekurang-kurangnya 8 aksara dan mengandungi kedua-dua huruf dan nombor.",errorNicknameFormat:"Nama samaran mestilah 6-16 aksara.",errorAgeFormat:"Umur mestilah antara 18 dan 99.",errorCountry:"Sila pilih negara.",errorRegion:"Sila masukkan bandar.",errorInterest:"Sila pilih minat.",errorEventType:"Sila pilih jenis acara.",errorImprovement:"Sila pilih item untuk diperbaiki.",formTopSlogan:"Bukan salah untuk bangkit!",login:"Log masuk",terms:"Terma/Penyata",privacy:"Dasar Privasi",deletion:"Dasar Pemadaman Data",googleLogin:"Log masuk dengan Google",appleLogin:"Log masuk dengan Apple"},la:{heroLeftTop:"Redemptio non est crimen,",heroLeftMain:"modo errasse diu.",heroLeftSub:"",heroLeftYellow:"Flores feri fortiter efflorescunt!",heroRightTop:"Novum initium volo...",heroRightMain:"Omnis experientia unicum capitulum est,",heroRightSub:"non impedimentum incrementi.",heroRightYellow:"Resurge ex cineribus!",title:"Restarter Inscriptio",email:"Email *requiritur",password:"Password (min 8 chars, letter & number) *requiritur",nickname:"Nickname (6-16 chars) *requiritur",age:"Aetas*optio",selectAge:"Selecta aetatis spatium",country:"Patria (Regio)*optio",city:"Urbs (optio)",interest:"Studium*optio",eventType:"Eventus Historiae**optio",whatToImprove:"Quid emendare vis*optio",uploadAvatar:"Upload Avatar",male:"Male",female:"Female",genderRequired:"(*required)",register:" Register",registering:"Registering...",errorAvatar:"Please upload an avatar.",errorGender:"Please select a gender.",errorEmailFormat:"Invalid email format.",errorPasswordFormat:"Password must be at least 8 characters long and contain both letters and numbers.",errorNicknameFormat:"Nickname must be 6-16 characters long.",errorAgeFormat:"Age must be between 18 and 99.",errorCountry:"Please select a country.",errorRegion:"Please enter a city.",errorInterest:"Please select an interest.",errorEventType:"Please select an event type.",errorImprovement:"Please select an item to improve.",formTopSlogan:"Surgere non est peccatum!",login:"Inire",terms:"Termini/Declaratio",privacy:"Consilium Privacy",deletion:"Norma Deletionis Datae",googleLogin:"Intra cum Google",appleLogin:"Intra cum Apple"}},TS={"zh-TW":"","zh-CN":"",en:"Please complete your profile first",ja:"",ko:"   ",th:"",vi:"Vui lng hon thin h s c nhn trc",ms:"Sila lengkapkan profil anda terlebih dahulu",la:"Quaeso prius profile tuum comple"},jS={"zh-TW":"","zh-CN":"",en:"Every Restarter is still one of us.",ja:"",ko:" Restarter    !",th:"!",vi:"Mi ngi c nh hnh u l mt thnh vin ca chng ti!",ms:"Setiap Restarter masih satu di antara kita!",la:"Omnis Restarter adhuc unus ex nobis est."},yO={"zh-TW":"Restarter   / ","zh-CN":"Restarter   / ",en:"Restarter is a co-pilot/partner for Restarters.",ja:"Restarter ",ko:"Restarter    .",th:"Restarter  Restarters.",vi:"Restarter l phi cng ph hoc i tc cho Restarters.",ms:"Restarter adalah kopilot/pasukan untuk Restarters.",la:"Restarter est co-pilotus/socius pro Restarters."},xO={"zh-TW":"Restarter  / ","zh-CN":"Restarter  / ",en:"Restarter is an emotional steward/productivity assistant for Restarters.",ja:"Restarter ",ko:"Restarter      .",th:"Restarter  Restarters.",vi:"Restarter l ngi qun l cm xc v ngi tr gip sn xut cho Restarters.",ms:"Restarter adalah pengurus emosi / pembantu produktiviti untuk Restarters.",la:"Restarter est motus oeconomus/producentis adiutor pro Restarters."},F6={"zh-TW":["","","","","","","","","","","AI","","","",""],"zh-CN":["","","","","","","","","","","AI","","","",""],en:["Economy","Sports","Reading","Movie","Travel","Friendship","Singing","E-commerce","Business","Computer","AI","Pets","Learning Skills","Quiet time alone","Other"],ja:["","","","","","","","EC","","","AI","","","",""],ko:["","","","",""," "," ","","","","AI",""," ","  ",""],th:["","","","","","","","","","","AI","","","",""],vi:["Kinh t","Th thao","c sch","Phim nh","Du lch","Tnh bn","Ca ht","Thng mi in t","Kinh doanh","My tnh","AI","Th cng","Hc k nng"," mt mnh yn tnh","Khc"],ms:["Ekonomi","Sukan","Membaca","Filem","Melancong","Persahabatan","Menyanyi","E-dagang","Perniagaan","Komputer","AI","Haiwan Peliharaan","Belajar Kemahiran","Masa sunyi bersendirian","Lain-lain"],la:["Oeconomia","Ludi","Lectio","Pellicula","Iter","Amicitia","Cantus","E-commercium","Negotium","Computatrum","AI","Animalia Domestica","Discere Artes","Tempus quietum solus","Aliud"]},z6={"zh-TW":["","","","","","","","","","","","","","","","","","",""],"zh-CN":["","","","","","","","","","","","","","","","","","",""],en:["Taiwan","China","Japan","Korea","Malaysia","Singapore","Indonesia","Vietnam","Philippines","UK","France","Germany","USA","Canada","Africa","Europe","South America","Middle East","Other"],ja:["","","","","","","","","","","","","","","","","","",""],ko:["","","","","","","","","","","","","","","","","","",""],th:["","","","","","","","","","","","","","","","","","",""],vi:["i Loan","Trung Quc","Nht Bn","Hn Quc","Malaysia","Singapore","Indonesia","Vit Nam","Philippines","Anh","Php","c","M","Canada","Chu Phi","Chu u","Nam M","Trung ng","Khc"],ms:["Taiwan","China","Jepun","Korea","Malaysia","Singapura","Indonesia","Vietnam","Filipina","UK","Perancis","Jerman","AS","Kanada","Afrika","Eropah","Amerika Selatan","Timur Tengah","Lain-lain"],la:["Taivania","Sina","Iaponia","Corea","Malaisia","Singapura","Indonesia","Vietnamia","Philippinae","UK","Gallia","Germania","USA","Canada","Africa","Europa","America Meridionalis","Oriens Medius","Aliud"]},bO={"zh-TW":["","","","","","","","","/",""," / ",""]},vO={"zh-TW":["","","","","","",""],"zh-CN":["","","","","","",""],en:["Interpersonal","Motivation","Habits","Work","Emotions","Self-discipline","Other"],ja:["","","","","","",""],ko:["","","","","","",""],th:["","","","","","",""],vi:["Quan h gia cc c nhn"," ch chin u","Thi quen","Cng vic","Cm xc","K lut t gic","Khc"],ms:["Antara peribadi","Semangat juang","Tabiat","Kerja","Emosi","Disiplin diri","Lain-lain"],la:["Interpersonalis","Animus","Consuetudines","Opus","Affectus","Disciplina sui","Aliud"]},N6=["18-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70+"];function kO(t){return/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t)}function wO(t){return/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/.test(t)}function SO(t){return!(!t||t.trim()==="")}function _S(t){if(!t)return null;const e=t.match(/^(Restarter)(.*)$/);return e?r.jsxs("span",{children:[r.jsx("span",{style:{color:"#fff",fontWeight:700},children:"Restarter"}),r.jsx("span",{style:{color:"#ffd700",fontWeight:700},children:e[2]})]}):t}function TO({t,setShowLogin:e,navigate:n,setShowReset:i}){const[o,s]=m.useState(""),[a,l]=m.useState(""),[c,u]=m.useState(""),h=p=>C(this,null,function*(){p.preventDefault(),u("");try{yield(yield kR(Cs,o,a)).user.reload(),e(!1),n("/")}catch(g){g.code==="auth/user-not-found"||g.code==="auth/wrong-password"||g.code==="auth/invalid-credential"?u(""):g.code==="auth/user-disabled"?u(""):u(g.message||"")}});return r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:200},children:r.jsxs("div",{style:{background:"white",padding:32,borderRadius:16,width:"90%",maxWidth:400,position:"relative",boxShadow:"0 8px 32px #0000004d"},children:[r.jsx("button",{onClick:()=>e(!1),style:{position:"absolute",top:8,right:12,background:"none",border:"none",fontSize:28,cursor:"pointer",color:"#888"},children:""}),r.jsx("h2",{style:{textAlign:"center",color:"#333",marginBottom:24},children:t.login}),c&&r.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem"},children:c}),r.jsxs("form",{onSubmit:h,children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[r.jsx("input",{type:"email",autoComplete:"off",placeholder:t.email,value:o,onChange:p=>s(p.target.value),className:"reg-input",required:!0}),r.jsx("input",{type:"password",autoComplete:"off",placeholder:t.password,value:a,onChange:p=>l(p.target.value),className:"reg-input",required:!0})]}),r.jsx("button",{type:"submit",style:{width:"100%",marginTop:24,background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"white",border:"none",borderRadius:8,padding:"14px 0",fontSize:18,fontWeight:700,cursor:"pointer"},children:t.login}),r.jsx("div",{style:{textAlign:"right",marginTop:8},children:r.jsx("span",{href:"#",style:{color:"#6B5BFF",fontSize:14,textDecoration:"underline",cursor:"pointer"},onClick:p=>{p.preventDefault(),i(!0)},children:""})})]})]})})}const Lc={border:"none",borderRadius:28,padding:0,fontSize:16,fontWeight:800,cursor:"pointer",boxShadow:"0 2px 12px #a777e355",display:"flex",alignItems:"center",justifyContent:"center",gap:8,width:"100%",height:"40px"},IS={width:18,height:18,marginRight:6,verticalAlign:"middle"};function jO(){const t=tt(),e=ad(),n=new URLSearchParams(e.search),{lang:i,setLang:o}=dt();m.useEffect(()=>{localStorage.setItem("lang",i)},[i]),m.useEffect(()=>{Gl(()=>C(this,null,function*(){const{getAuth:G}=yield Promise.resolve().then(()=>Qw);return{getAuth:G}}),void 0).then(({getAuth:G})=>{G().currentUser&&t("/")})},[t]),m.useEffect(()=>{C(this,null,function*(){var Fe;try{const{getRedirectResult:De}=yield Gl(()=>C(this,null,function*(){const{getRedirectResult:le}=yield Promise.resolve().then(()=>Qw);return{getRedirectResult:le}}),void 0),q=yield De(Cs);if(q){console.log("Redirect user.uid:",q.user.uid),yield q.user.reload(),console.log("user reload ");const le=yield ro(kn(Ct,"users",q.user.uid));console.log("Firestore :",{exists:le.exists(),data:le.data(),completed:(Fe=le.data())==null?void 0:Fe.completed}),!le.exists()||!le.data()||!le.data().completed?(console.log(" /CompleteProfile"),t("/CompleteProfile")):(console.log(" /"),t("/"))}}catch(De){console.error(" redirect :",De)}})},[t]);const s=n.get("needProfile")==="1",a=fO[i],[l,c]=m.useState(""),[u,h]=m.useState(""),[p,g]=m.useState(""),[y,k]=m.useState(""),[j,T]=m.useState(""),[x,b]=m.useState(""),[v,z]=m.useState(""),[D,P]=m.useState(null),[_,S]=m.useState(""),[R,E]=m.useState(""),[A,B]=m.useState(!1),[I,re]=m.useState(""),[Q,X]=m.useState(""),[de,V]=m.useState(!1),[ee,he]=m.useState(0),[ve,be]=m.useState("idle"),[te,N]=m.useState(""),O=m.useRef(null),oe=m.useRef(null);m.useEffect(()=>{if(!A)return;const G=setInterval(()=>{he(Fe=>(Fe+1)%4)},400);return()=>clearInterval(G)},[A]);const[ge,je]=m.useState(!1),[Ce,He]=m.useState(!1),[J,H]=m.useState(!1),[Le,Y]=m.useState(!1),[ae,Ie]=m.useState(""),[xe,_e]=m.useState(!1),[we,qe]=m.useState(!1),gt=()=>C(this,null,function*(){if(console.log(":",ae),!ae){E("");return}console.log(":",ae),console.log(" email:",l),B(!0),E("");try{const G={nickname:p,password:u,gender:v,country:y,region:j,age:x,interest:I,improvement:Q},Fe=yield fetch(vu("/email-verification/verify-code"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,code:ae})});console.log(" API :",Fe.status);const De=yield Fe.json();console.log(" API :",De),De.success?yield _t():(B(!1),E(De.error||""))}catch(G){B(!1),E(G.message||"")}}),ht=()=>C(this,null,function*(){qe(!0),E("");try{const G={nickname:p,password:u,gender:v,country:y,region:j,age:x,interest:I,improvement:Q};console.log(":",l);const De=yield(yield fetch(vu("/email-verification/send-code"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,registrationData:G})})).json();De.success?(Ie(""),E(""),Y(!0),He(!1)):E(De.error||"")}catch(G){console.error(":",G),E("")}finally{qe(!1)}}),St=G=>C(this,null,function*(){G.preventDefault(),E(""),je(!1);let Fe=setTimeout(()=>je(!0),1500);try{if(!D){E(a.errorAvatar);return}if(!v){E(a.errorGender);return}if(!kO(l)){E(a.errorEmailFormat);return}if(!wO(u)){E(a.errorPasswordFormat);return}if(!SO(p)){E(a.errorNicknameFormat);return}if(!x){E(a.errorAgeFormat);return}if(!y){E(a.errorCountry);return}H(!0);const De={nickname:p,password:u,gender:v,country:y,region:j,age:x,interest:I,improvement:Q};console.log(" email :",l);const q=yield fetch(vu("/email-verification/send-code"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,registrationData:De})});console.log("Email API :",q.status);const le=yield q.json();if(console.log("Email API :",le),le.success)_e(!0),Y(!0),He(!1),Ie(""),H(!1),clearTimeout(Fe),je(!1),E("");else throw new Error(le.error||"")}catch(De){console.error(":",De),E(De.message||""),H(!1),clearTimeout(Fe),je(!1)}}),_t=()=>C(this,null,function*(){var Fe,De,q;B(!0);let G=setTimeout(()=>je(!0),1500);try{const le=yield zb(Cs,l,u);yield om(le.user,{displayName:p});let rt="";if(D){const $=gW(kW,`avatars/${le.user.uid}/${D.name}`),pe=pW($,D);let nt=null;yield Promise.race([new Promise((pt,it)=>{pe.on("state_changed",null,K=>{nt=K,it(K)},()=>C(this,null,function*(){rt=yield mW(pe.snapshot.ref),pt()}))}),new Promise((pt,it)=>setTimeout(()=>{nt=new Error(""),it(nt)},1e4))]).catch(pt=>{throw nt||pt}),yield om(le.user,{photoURL:rt})}yield _d(kn(Ct,"profiles",le.user.uid),{nickname:p,email:l,avatar:rt,gender:v,country:y,region:j,age:x,interest:I,improvement:Q,createdAt:new Date,updatedAt:new Date}),localStorage.removeItem("aiAvatar"),localStorage.removeItem("avatarWelcomed"),B(!1),clearTimeout(G),je(!1),t("/")}catch(le){(Fe=le==null?void 0:le.message)!=null&&Fe.includes("Failed to fetch")||(De=le==null?void 0:le.message)!=null&&De.includes("NetworkError")||(q=le==null?void 0:le.message)!=null&&q.includes("ECONNREFUSED")?E(""):E((le==null?void 0:le.message)||""),B(!1),clearTimeout(G),je(!1)}}),U=()=>C(this,null,function*(){const G=new mr;try{console.log(" Google ..."),B(!0),je(!1);let Fe=setTimeout(()=>je(!0),1500);const De=window.innerWidth<=768;console.log(":",De);let q;if(De)q=yield ep(Cs,G);else{q=yield ep(Cs,G),clearTimeout(Fe),je(!1),B(!1),t("/");return}clearTimeout(Fe),je(!1),B(!1),console.log("Google user.uid:",q.user.uid),t("/")}catch(Fe){B(!1),je(!1),console.error("Google :",Fe);let De="Google "+Fe.message;Fe.code==="auth/popup-closed-by-user"?De="":Fe.code==="auth/popup-blocked"?De="":Fe.code==="auth/network-request-failed"?De="":Fe.code==="auth/too-many-requests"&&(De=""),console.log("Google :",Fe.code),console.log("Google :",De),alert(De)}}),L=()=>C(this,null,function*(){var Fe;const G=new fl("apple.com");try{console.log(" Apple ...");const q=(yield ep(Cs,G)).user;console.log("Apple user.uid:",q.uid),yield q.reload(),console.log("user reload ");const le=yield ro(kn(Ct,"users",q.uid));console.log("Firestore :",{exists:le.exists(),data:le.data(),completed:(Fe=le.data())==null?void 0:Fe.completed}),!le.exists()||!le.data()||!le.data().completed?(console.log(" /CompleteProfile"),t("/CompleteProfile")):(console.log(" /"),t("/"))}catch(De){console.error("Apple :",De);let q="Apple "+De.message;De.code==="auth/popup-closed-by-user"?q="":De.code==="auth/popup-blocked"?q="":De.code==="auth/network-request-failed"?q="":De.code==="auth/too-many-requests"&&(q=""),console.log("Apple :",De.code),console.log("Apple :",q),alert(q)}});function W(){return C(this,null,function*(){var Fe,De;if(!((De=(Fe=O.current)==null?void 0:Fe.value)==null?void 0:De.trim())){be("invalid"),N(""),setTimeout(()=>{var q;(q=O.current)==null||q.focus()},100);return}be("ok"),N(""),setTimeout(()=>{var q;(q=oe.current)==null||q.focus()},200)})}e.pathname;const[Qe,at]=m.useState(!1),[M,Se]=m.useState(""),[Pe,$e]=m.useState("");return r.jsxs("div",{style:{minHeight:"100vh",background:"#fff",position:"relative"},children:[s&&r.jsx("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",fontSize:22,color:"#374151",fontWeight:600,textAlign:"center"},children:TS[i]||TS["zh-TW"]}),r.jsx("div",{style:{position:"relative"},children:r.jsxs("div",{style:{minHeight:"100vh",background:"url('/city-blur.jpg') center/cover no-repeat",position:"relative",display:"flex",flexDirection:"column"},children:[window.innerWidth<=768?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>window.history.back(),style:{position:"fixed",top:16,left:16,zIndex:1e3,background:"rgba(255,255,255,0.9)",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#667eea",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",height:"36px"},onMouseEnter:G=>{G.currentTarget.style.background="#667eea",G.currentTarget.style.color="#fff",G.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:G=>{G.currentTarget.style.background="rgba(255,255,255,0.9)",G.currentTarget.style.color="#667eea",G.currentTarget.style.transform="translateY(0)"},children:[" ",i==="zh-TW"||i==="zh-CN"?"":i==="en"?"Back":i==="ja"?"":i==="ko"?"":i==="vi"?"Quay Li":i==="th"?"":i==="la"?"Regredi":i==="ms"?"Kembali":"Back"]}),r.jsx("div",{style:{position:"fixed",top:16,right:16,zIndex:1e3},children:r.jsx(Ir,{style:{background:"rgba(255,255,255,0.9)",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",color:"#667eea",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",width:"60px",minWidth:"60px",maxWidth:"60px",height:"36px",cursor:"pointer"}})}),r.jsx("div",{style:{position:"fixed",top:60,left:"50%",transform:"translateX(-50%)",zIndex:100},children:r.jsx("span",{style:{fontWeight:900,fontSize:18,color:"#ffd700",letterSpacing:1,textShadow:"0 2px 8px #23294688",whiteSpace:"nowrap",textAlign:"left",lineHeight:"1.2",marginLeft:"8px"},children:jS[i]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>window.history.back(),style:{position:"fixed",top:24,left:24,zIndex:1e3,background:"rgba(255,255,255,0.9)",border:"none",borderRadius:"25px",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#667eea",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},onMouseEnter:G=>{G.currentTarget.style.background="#667eea",G.currentTarget.style.color="#fff",G.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:G=>{G.currentTarget.style.background="rgba(255,255,255,0.9)",G.currentTarget.style.color="#667eea",G.currentTarget.style.transform="translateY(0)"},children:i==="zh-TW"||i==="zh-CN"?"":i==="en"?"Back":i==="ja"?"":i==="ko"?"":i==="vi"?"Quay Li":i==="th"?"":i==="la"?"Regredi":i==="ms"?"Kembali":"Back"}),r.jsx("div",{style:{position:"fixed",top:24,left:"50%",transform:"translateX(-50%)",zIndex:100},children:r.jsx("span",{style:{fontWeight:900,fontSize:24,color:"#ffd700",letterSpacing:2,textShadow:"0 2px 8px #23294688",whiteSpace:"nowrap",textAlign:"left",marginLeft:"12px"},children:jS[i]})}),r.jsxs("select",{value:window.lang||"zh-TW",onChange:G=>{const Fe=G.target.value;window.lang=Fe,localStorage.setItem("lang",Fe),window.location.reload()},style:{position:"fixed",top:24,right:120,zIndex:10001,background:"rgba(255,255,255,0.9)",border:"none",borderRadius:"25px",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",color:"#667eea",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",width:"80px",minWidth:"80px",maxWidth:"80px",outline:"none"},onMouseEnter:G=>{G.currentTarget.style.background="#667eea",G.currentTarget.style.color="#fff",G.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:G=>{G.currentTarget.style.background="rgba(255,255,255,0.9)",G.currentTarget.style.color="#667eea",G.currentTarget.style.transform="translateY(0)"},children:[r.jsx("option",{value:"zh-TW",children:""}),r.jsx("option",{value:"zh-CN",children:""}),r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"ja",children:""}),r.jsx("option",{value:"ko",children:""}),r.jsx("option",{value:"vi",children:"Ting Vit"}),r.jsx("option",{value:"th",children:""}),r.jsx("option",{value:"la",children:"Latin"}),r.jsx("option",{value:"ms",children:"Bahasa Melayu"})]})]}),r.jsxs("div",{style:{display:"flex",flex:1,minHeight:"100vh",alignItems:"stretch",justifyContent:"center",width:"100%",marginTop:window.innerWidth<=768?120:60,flexDirection:window.innerWidth<=768?"column":"row"},children:[r.jsxs("div",{style:{flex:1,display:window.innerWidth<=768?"none":"flex",flexDirection:"column",alignItems:"center",background:"rgba(60,40,20,0.18)",padding:"0 12px",minHeight:"calc(100vh - 60px)",boxSizing:"border-box",justifyContent:"space-between"},children:[r.jsx("div",{style:{position:"relative",width:"100%",textAlign:"center",paddingTop:78},children:r.jsx("div",{style:{fontSize:18,fontWeight:700,textShadow:"0 2px 8px #23294688"},children:_S(yO[i])})}),r.jsx("img",{src:"/left-hero.png",alt:"left hero",style:{width:300,maxWidth:"98%",objectFit:"contain"}}),r.jsxs("div",{style:{paddingBottom:80,textAlign:"center"},children:[r.jsxs("div",{style:{color:"#fff",fontWeight:700,fontSize:22,margin:"12px 0 8px"},children:[a.heroLeftTop,r.jsx("br",{}),a.heroLeftMain,r.jsx("br",{}),a.heroLeftSub]}),r.jsx("div",{style:{color:"#ffd700",fontWeight:700,fontSize:18},children:a.heroLeftYellow})]})]}),de&&r.jsx(TO,{t:a,setShowLogin:V,navigate:t,setShowReset:at}),r.jsx("div",{style:{flex:window.innerWidth<=768?"1":"0 1 500px",display:"flex",justifyContent:"center",alignItems:"center",padding:window.innerWidth<=768?"10px":"20px 0",width:window.innerWidth<=768?"100%":"auto"},children:r.jsxs("form",{onSubmit:St,style:{background:"#ffffffcc",borderRadius:20,padding:window.innerWidth<=768?"20px 16px":"24px 32px",width:"100%",maxWidth:window.innerWidth<=768?"100%":500,boxShadow:"0 8px 32px #0000004d",position:"relative",boxSizing:"border-box",margin:window.innerWidth<=768?"0 10px":"0"},children:[r.jsx("img",{src:"/ctx-logo.png",alt:"Logo",style:{width:window.innerWidth<=768?60:100,height:window.innerWidth<=768?60:100,position:"absolute",top:5,left:5,zIndex:0,opacity:1}}),r.jsxs("div",{style:{position:"relative",zIndex:1},children:[r.jsx("div",{style:{width:"100%",textAlign:"center",fontWeight:900,fontSize:window.innerWidth<=768?20:26,color:"#ffd700",marginBottom:8,textShadow:"0 2px 4px #00000055"},children:a.formTopSlogan}),r.jsx("h2",{style:{textAlign:"center",color:"#333",marginBottom:16,fontSize:window.innerWidth<=768?24:28,fontWeight:800},children:a.title}),R&&r.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem"},children:R}),Le&&r.jsxs("div",{style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white",padding:"16px",borderRadius:"12px",marginBottom:"1rem",textAlign:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:[r.jsx("div",{style:{fontSize:"20px",marginBottom:"8px"},children:""}),r.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:""}),r.jsxs("div",{style:{fontSize:"14px",marginBottom:"12px"},children:[" ",l]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:ae,onChange:G=>Ie(G.target.value),placeholder:" 6 ",disabled:A,style:{width:"150px",padding:"8px 12px",borderRadius:"6px",border:"none",fontSize:"16px",textAlign:"center",opacity:A?.6:1,cursor:A?"not-allowed":"text"},maxLength:6}),r.jsx("button",{type:"button",onClick:gt,disabled:!ae||ae.length!==6||A,style:{background:A?"#6b7280":ae&&ae.length===6?"#10b981":"#6b7280",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",cursor:ae&&ae.length===6&&!A?"pointer":"not-allowed",transition:"all 0.2s ease",transform:(ae&&ae.length===6&&!A,"scale(1)"),boxShadow:ae&&ae.length===6&&!A?"0 2px 8px rgba(16, 185, 129, 0.3)":"none"},onMouseEnter:G=>{ae&&ae.length===6&&!A&&(G.currentTarget.style.background="#059669",G.currentTarget.style.transform="scale(1.05)",G.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.4)")},onMouseLeave:G=>{ae&&ae.length===6&&!A&&(G.currentTarget.style.background="#10b981",G.currentTarget.style.transform="scale(1)",G.currentTarget.style.boxShadow="0 2px 8px rgba(16, 185, 129, 0.3)")},onMouseDown:G=>{ae&&ae.length===6&&!A&&(G.currentTarget.style.transform="scale(0.95)")},onMouseUp:G=>{ae&&ae.length===6&&!A&&(G.currentTarget.style.transform="scale(1.05)")},children:A?"...":""})]}),r.jsx("button",{type:"button",onClick:ht,disabled:we,style:{background:we?"#6b7280":"#3b82f6",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:we?"not-allowed":"pointer",transition:"all 0.2s ease",transform:"scale(1)",boxShadow:we?"none":"0 2px 8px rgba(59, 130, 246, 0.3)"},onMouseEnter:G=>{we||(G.currentTarget.style.background="#2563eb",G.currentTarget.style.transform="scale(1.05)",G.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.4)")},onMouseLeave:G=>{we||(G.currentTarget.style.background="#3b82f6",G.currentTarget.style.transform="scale(1)",G.currentTarget.style.boxShadow="0 2px 8px rgba(59, 130, 246, 0.3)")},onMouseDown:G=>{we||(G.currentTarget.style.transform="scale(0.95)")},onMouseUp:G=>{we||(G.currentTarget.style.transform="scale(1.05)")},children:we?"...":""})]})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",width:"100%",minWidth:0},children:[r.jsx("input",{type:"text",style:{display:"none"},autoComplete:"username"}),r.jsx("input",{type:"password",style:{display:"none"},autoComplete:"current-password"}),r.jsx("input",{type:"email",autoComplete:"new-password",placeholder:a.email,value:l,onChange:G=>c(G.target.value),style:{gridColumn:"1 / -1",width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"},className:"reg-input",required:!0}),r.jsx("input",{type:"password",autoComplete:"new-password",placeholder:a.password,value:u,onChange:G=>h(G.target.value),style:{gridColumn:"1 / -1",width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"},className:"reg-input",required:!0}),r.jsx("input",{type:"text",autoComplete:"off",placeholder:a.nickname,value:p,onChange:G=>{g(G.target.value),be("idle"),N("")},onBlur:W,className:"reg-input",style:{width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",color:"#888"},required:!0,ref:O}),te&&r.jsx("div",{style:{gridColumn:"1 / -1",color:ve==="ok"?"#1a7f1a":ve==="invalid"||ve==="exists"?"red":"#333",fontSize:14,marginTop:-8,marginBottom:4},children:te}),r.jsxs("select",{value:x,onChange:G=>b(G.target.value),className:"reg-input",style:{width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",color:x?"#333":"#888",background:"#fff"},required:!0,children:[r.jsx("option",{value:"",style:{color:"#888"},children:a.selectAge}),N6.map(G=>r.jsx("option",{value:G,children:G},G))]}),r.jsxs("select",{value:y,onChange:G=>k(G.target.value),className:"reg-input",style:{width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",color:y?"#333":"#888",background:"#fff"},required:!0,children:[r.jsx("option",{value:"",style:{color:"#888"},children:a.country}),(z6[i]||[]).map(G=>r.jsx("option",{value:G,children:G},G))]}),r.jsx("input",{type:"text",placeholder:a.city,value:j,onChange:G=>T(G.target.value),className:"reg-input",style:{width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"}}),r.jsxs("select",{value:I,onChange:G=>re(G.target.value),className:"reg-input",style:{width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",color:I?"#333":"#888",background:"#fff"},children:[r.jsx("option",{value:"",style:{color:"#888"},children:a.interest}),(F6[i]||[]).map(G=>r.jsx("option",{value:G,children:G},G))]}),r.jsxs("select",{value:Q,onChange:G=>X(G.target.value),className:"reg-input",style:{gridColumn:"1 / -1",width:"100%",minWidth:0,maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",color:Q?"#333":"#888",background:"#fff"},children:[r.jsx("option",{value:"",style:{color:"#888"},children:a.whatToImprove}),(vO[i]||[]).map(G=>r.jsx("option",{value:G,children:G},G))]}),r.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",marginBottom:8},children:r.jsxs("label",{htmlFor:"avatar-upload",style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[r.jsx("div",{style:{width:64,height:64,borderRadius:"50%",overflow:"hidden",background:"#eee",border:"2px solid #b6b6f6",marginBottom:4},children:_?r.jsx("img",{src:_,alt:"avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("span",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",color:"#bbb",fontSize:32},children:"+"})}),r.jsx("span",{style:{color:"#6B5BFF",fontWeight:700,fontSize:15},children:a.uploadAvatar}),r.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:G=>{if(G.target.files&&G.target.files[0]){P(G.target.files[0]);const Fe=new FileReader;Fe.onload=De=>{var q;return S((q=De.target)==null?void 0:q.result)},Fe.readAsDataURL(G.target.files[0])}}})]})}),r.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",alignItems:"center",gap:18,justifyContent:"center",marginBottom:8},children:[r.jsx("span",{style:{fontWeight:600,color:"#6B5BFF",fontSize:15},children:a.genderRequired}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[r.jsx("input",{type:"radio",name:"gender",value:"male",checked:v==="male",onChange:()=>z("male"),required:!0}),r.jsx("span",{children:a.male})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[r.jsx("input",{type:"radio",name:"gender",value:"female",checked:v==="female",onChange:()=>z("female"),required:!0}),r.jsx("span",{children:a.female})]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr",gap:8,margin:"16px 0 8px 0"},children:[Ce?r.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"8px"},children:[r.jsx("p",{style:{color:"#6B5BFF",fontWeight:600,marginBottom:"4px"},children:"  email"}),r.jsx("p",{style:{color:"#666",fontSize:"14px"},children:""})]}),r.jsxs("div",{style:{background:"#f8f9ff",padding:"16px",borderRadius:"8px",border:"1px solid #e0e7ff",textAlign:"center"},children:[r.jsx("p",{style:{color:"#6B5BFF",fontWeight:600,marginBottom:"8px"},children:"  email"}),r.jsxs("p",{style:{color:"#666",fontSize:"14px",marginBottom:"12px"},children:["",r.jsx("strong",{children:l})]}),r.jsx("p",{style:{color:"#666",fontSize:"12px"},children:" "})]}),r.jsx("button",{type:"button",onClick:()=>{He(!1),E("")},style:We(ke({},Lc),{background:"#f5f5f5",color:"#666",border:"1px solid #ddd",width:"120px"}),children:" "})]}):r.jsxs("button",{type:"submit",disabled:A||J,style:We(ke({},Lc),{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"white",opacity:A||J?.6:1,cursor:A||J?"not-allowed":"pointer"}),children:[A?r.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:18},children:[a.registering,".".repeat(ee+1)]}):J?r.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:18},children:"..."}):r.jsx("span",{style:{marginRight:10},children:""}),!A&&!J&&a.register]}),r.jsxs("button",{type:"button",onClick:()=>V(!0),disabled:A,style:We(ke({},Lc),{background:"linear-gradient(90deg, #89f7fe, #66a6ff)",color:"white",opacity:A?.6:1,cursor:A?"not-allowed":"pointer"}),children:[r.jsx("span",{style:{marginRight:10},children:""}),a.login]}),r.jsxs("button",{type:"button",onClick:U,disabled:A,style:We(ke({},Lc),{background:"#fff",color:"#333",opacity:A?.6:1,cursor:A?"not-allowed":"pointer"}),children:[r.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",style:IS}),a.googleLogin]}),r.jsxs("button",{type:"button",onClick:L,disabled:A,style:We(ke({},Lc),{background:"#000",color:"#fff",opacity:A?.6:1,cursor:A?"not-allowed":"pointer"}),children:[r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg",alt:"Apple",style:We(ke({},IS),{filter:"invert(1)"})}),a.appleLogin]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:24,gap:8,flexDirection:"row",textAlign:"center",fontSize:12,flexWrap:"nowrap",overflow:"hidden"},children:[r.jsx("span",{onClick:()=>t("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",fontSize:12,flex:1,textAlign:"center",whiteSpace:"nowrap",padding:"4px 8px",cursor:"pointer"},children:a.privacy||""}),r.jsx("span",{style:{color:"#666",fontSize:12},children:"/"}),r.jsx("button",{type:"button",onClick:()=>t("/terms"),style:{background:"none",border:"none",color:"#666",textDecoration:"underline",cursor:"pointer",fontSize:12,flex:1,textAlign:"center",whiteSpace:"nowrap"},children:a.terms}),r.jsx("span",{style:{color:"#666",fontSize:12},children:"/"}),r.jsx("span",{onClick:()=>t("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",fontSize:12,flex:1,textAlign:"center",whiteSpace:"nowrap",padding:"4px 8px",cursor:"pointer"},children:a.deletion||""})]})]})]})}),r.jsxs("div",{style:{flex:1,display:window.innerWidth<=768?"none":"flex",flexDirection:"column",alignItems:"center",background:"rgba(60,40,20,0.18)",padding:"0 12px",minHeight:"calc(100vh - 60px)",boxSizing:"border-box",justifyContent:"space-between"},children:[r.jsx("div",{style:{position:"relative",width:"100%",textAlign:"center",paddingTop:78},children:r.jsx("div",{style:{fontSize:18,fontWeight:700,textShadow:"0 2px 8px #23294688"},children:_S(xO[i])})}),r.jsx("img",{src:"/right-hero.png",alt:"right hero",style:{width:280,maxWidth:"98%",objectFit:"contain"}}),r.jsxs("div",{style:{paddingBottom:80,textAlign:"center"},children:[r.jsx("div",{style:{color:"#fff",fontWeight:700,fontSize:22,margin:"12px 0 8px"},children:a.heroRightMain}),r.jsx("div",{style:{color:"#ffd700",fontWeight:700,fontSize:18},children:a.heroRightYellow})]})]})]}),r.jsx("div",{style:{position:"fixed",bottom:10,left:36,color:"#fff",textShadow:"0 1px 2px #000",fontSize:14,zIndex:10},children:"CTX Goodlife Copyright 2025"})]})}),Qe&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:28,minWidth:280,maxWidth:340,width:"90vw",position:"relative",display:"flex",flexDirection:"column",gap:12},children:[r.jsx("button",{type:"button",onClick:()=>at(!1),style:{position:"absolute",top:10,right:12,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsx("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:""}),r.jsx("input",{type:"email",value:M,onChange:G=>Se(G.target.value),placeholder:" email",style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"6px 10px",fontSize:15}}),r.jsx("button",{onClick:()=>C(this,null,function*(){$e("");try{yield vR(Cs,M),$e("")}catch(G){$e(" email ")}}),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:14,padding:"6px 18px",fontWeight:700,fontSize:15,cursor:"pointer",alignSelf:"center"},children:""}),Pe&&r.jsx("div",{style:{color:"#6B5BFF",fontWeight:700,textAlign:"center",marginTop:8},children:Pe})]})}),ge&&r.jsx("div",{style:{color:"#ff9800",textAlign:"center",marginTop:8,fontWeight:600},children:"..."})]})}const Oc={"zh-TW":{back:" ",title:"",chat:"",task:"",noLink:"",goal:""},"zh-CN":{back:" ",title:"",chat:"",task:"",noLink:"",goal:""},en:{back:" Back",title:"My Links",chat:"Chat",task:"Co-Task",noLink:"No links established",goal:"Goal: "},ja:{back:" ",title:"",chat:"",task:"",noLink:"",goal:""},ko:{back:"  ",title:" ",chat:"",task:" ",noLink:"   ",goal:": "},th:{back:" ",title:"",chat:"",task:"",noLink:"",goal:": "},vi:{back:" Quay li",title:"Lin kt ca ti",chat:"Tr chuyn",task:"Nhim v chung",noLink:"Cha c lin kt no",goal:"Mc tiu: "},ms:{back:" Kembali",title:"Pautan Saya",chat:"Sembang",task:"Tugas Bersama",noLink:"Belum ada pautan yang dibuat",goal:"Matlamat: "},la:{back:" Redire",title:"Nexus Mei",chat:"Colloquium",task:"Munus Commune",noLink:"Nullae nexus constitutae",goal:"Propositum: "}},_O={"zh-TW":{connected:"",pending:"",rejected:""},"zh-CN":{connected:"",pending:"",rejected:""},en:{connected:"Connected",pending:"Pending",rejected:"Rejected"},ja:{connected:"",pending:"",rejected:""},ko:{connected:"",pending:" ",rejected:""},th:{connected:"",pending:"",rejected:""},vi:{connected:" kt ni",pending:"ang ch",rejected:" b t chi"},ms:{connected:"Telah dihubungkan",pending:"Menunggu",rejected:"Ditolak"},la:{connected:"Coniunctus",pending:"Exspectans",rejected:"Reiectus"}},Ih={"zh-TW":"","zh-CN":"",en:"Remove",ja:"",ko:" ",th:"",vi:"Hy lin kt",ms:"Buang Pautan",la:"Remove"},Ch={"zh-TW":"","zh-CN":"",en:"Cancel Invite",ja:"",ko:" ",th:"",vi:"Hy li mi",ms:"Batal Jemputan",la:"Invitationem Remove"};function yx(t){const e=tt(),{lang:n,setLang:i}=dt(),[o,s]=m.useState([]),[a,l]=m.useState(null),[c,u]=m.useState(!0),[h,p]=m.useState(null),[g,y]=m.useState(null),k=n;m.useEffect(()=>{const b=ri(Tr,v=>C(this,null,function*(){v?(l(v),yield j(v.uid)):e("/")}));return()=>b()},[e]);const j=b=>C(this,null,function*(){try{u(!0);const v=xn(Ct,"links"),z=ei(v,bn("user1Id","==",b)),D=ei(v,bn("user2Id","==",b)),[P,_]=yield Promise.all([Ii(z),Ii(D)]),S=[];P.forEach(R=>{const E=R.data();S.push(ke({id:R.id},E))}),_.forEach(R=>{const E=R.data();S.push({id:R.id,user1Id:E.user2Id,user1Name:E.user2Name,user2Id:E.user1Id,user2Name:E.user1Name,role:E.role,goal:E.goal,status:E.status,createdAt:E.createdAt})}),s(S),u(!1)}catch(v){console.error("Error loading links:",v),u(!1)}}),T=b=>C(this,null,function*(){try{yield Jp(kn(Ct,"links",b)),p(null),alert(Ih[k]+" ")}catch(v){console.error("Error removing link:",v),alert("")}}),x=b=>C(this,null,function*(){try{yield Jp(kn(Ct,"links",b)),y(null),alert(Ch[k]+" ")}catch(v){console.error("Error canceling link:",v),alert("")}});return c?r.jsx("div",{style:t.embedded?{width:"100%",background:"none",minHeight:"unset",boxShadow:"none",padding:0}:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#fff",fontSize:18},children:"..."})}):r.jsxs("div",{style:t.embedded?{width:"100%",background:"none",minHeight:"unset",boxShadow:"none",padding:0}:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:40},children:[!t.embedded&&r.jsx("button",{onClick:()=>e("/friend"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:Oc[k].back}),!t.embedded&&r.jsx(Ir,{}),r.jsxs("div",{style:{maxWidth:500,margin:t.embedded?"0 auto":"40px auto",background:"#fff",borderRadius:16,boxShadow:t.embedded?"none":"0 2px 8px #0001",padding:32},children:[r.jsx("h2",{style:{fontWeight:700,fontSize:22,marginBottom:24},children:Oc[k].title}),o.length===0&&r.jsx("div",{style:{color:"#888"},children:Oc[k].noLink}),o.map(b=>r.jsxs("div",{style:{marginBottom:24,borderBottom:"1px solid #eee",paddingBottom:16,opacity:b.status==="rejected"?.5:1},children:[r.jsxs("div",{style:{fontWeight:600},children:[b.user2Name,"",b.role,""]}),r.jsxs("div",{style:{color:"#666",margin:"8px 0"},children:[Oc[k].goal,b.goal]}),r.jsx("div",{style:{color:b.status==="connected"?"#23c6e6":b.status==="pending"?"#e6b800":"#e4572e",fontWeight:700,marginBottom:8},children:_O[k][b.status]}),r.jsxs("div",{style:{display:"flex",gap:12},children:[b.status==="connected"&&r.jsx("button",{onClick:()=>e("/chatroom"),style:{background:"#8ec6f7",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:Oc[k].chat}),b.status==="connected"&&r.jsx("button",{onClick:()=>p(b.id),style:{background:"#eee",color:"#888",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:Ih[k]}),b.status==="pending"&&r.jsx("button",{onClick:()=>y(b.id),style:{background:"#eee",color:"#888",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:Ch[k]})]})]},b.id))]}),h&&r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#0006",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:32,boxShadow:"0 2px 16px #0002",minWidth:280},children:[r.jsx("div",{style:{fontWeight:700,fontSize:18,marginBottom:18},children:Ih[k]}),r.jsxs("div",{style:{display:"flex",gap:16,justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>p(null),style:{background:"#eee",color:"#888",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:""}),r.jsx("button",{onClick:()=>T(h),style:{background:"#e4572e",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:Ih[k]})]})]})}),g&&r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#0006",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:32,boxShadow:"0 2px 16px #0002",minWidth:280},children:[r.jsx("div",{style:{fontWeight:700,fontSize:18,marginBottom:18},children:Ch[k]}),r.jsxs("div",{style:{display:"flex",gap:16,justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>y(null),style:{background:"#eee",color:"#888",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:""}),r.jsx("button",{onClick:()=>x(g),style:{background:"#e4572e",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:Ch[k]})]})]})})]})}const cr={"zh-TW":{back:" ",title:"",accept:"",reject:"",noInvite:"",goal:""},"zh-CN":{back:" ",title:"",accept:"",reject:"",noInvite:"",goal:""},en:{back:" Back",title:"Invitations",accept:"Accept",reject:"Reject",noInvite:"No new invitations",goal:"Goal: "},ja:{back:" ",title:"",accept:"",reject:"",noInvite:"",goal:""},ko:{back:"  ",title:" ",accept:"",reject:"",noInvite:"  ",goal:": "},th:{back:" ",title:"",accept:"",reject:"",noInvite:"",goal:": "},vi:{back:" Quay li",title:"Thng bo mi",accept:"Chp nhn",reject:"T chi",noInvite:"Khng c li mi mi",goal:"Mc tiu: "},ms:{back:" Kembali",title:"Notis Jemputan",accept:"Terima",reject:"Tolak",noInvite:"Tiada jemputan baru",goal:"Matlamat: "},la:{back:" Redire",title:"Notitia Invitationis",accept:"Accipe",reject:"Reici",noInvite:"Nullae invitationes novae",goal:"Propositum: "}};function xx(t){const[e,n]=m.useState([]),{lang:i,setLang:o}=dt(),[s,a]=m.useState(null),[l,c]=m.useState(!0),[u,h]=m.useState(null),p=tt();m.useEffect(()=>{let k;const j=ri(Tr,T=>C(this,null,function*(){T?(a(T),k=yield g(T.uid)):p("/")}));return()=>{j(),k&&k()}},[p]);const g=k=>C(this,null,function*(){try{c(!0);const j=xn(Ct,"invites"),T=ei(j,bn("toUserId","==",k),bn("status","==","pending"));return ed(T,b=>{const v=[];b.forEach(z=>{v.push(ke({id:z.id},z.data()))}),n(v),c(!1)})}catch(j){console.error("Error loading invites:",j),c(!1);return}}),y=(k,j)=>C(this,null,function*(){if(s)try{const T=kn(Ct,"invites",k);if(j){yield Xp(T,{status:"accepted"});const x=e.find(b=>b.id===k);x&&(yield $o(xn(Ct,"links"),{user1Id:x.fromUserId,user1Name:x.fromUserName,user2Id:x.toUserId,user2Name:x.toUserName,role:x.role,goal:x.goal,status:"connected",createdAt:new Date})),h(cr[i].accept+" "),setTimeout(()=>h(null),2e3)}else yield Xp(T,{status:"rejected"}),h(cr[i].reject+" "),setTimeout(()=>h(null),2e3)}catch(T){console.error("Error handling invite:",T),alert("")}});return l?r.jsx("div",{style:t.embedded?{width:"100%",background:"none",minHeight:"unset",boxShadow:"none",padding:0}:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#fff",fontSize:18},children:"..."})}):!l&&e.length===0?r.jsxs("div",{style:t.embedded?{width:"100%",background:"none",minHeight:"unset",boxShadow:"none",padding:0}:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:40},children:[!t.embedded&&r.jsx("button",{onClick:()=>p("/friend"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:cr[i].back}),r.jsx(Ir,{}),r.jsxs("div",{style:{maxWidth:500,margin:t.embedded?"0 auto":"40px auto",background:"#fff",borderRadius:16,boxShadow:t.embedded?"none":"0 2px 8px #0001",padding:32},children:[r.jsx("h2",{style:{fontWeight:700,fontSize:22,marginBottom:24},children:cr[i].title}),r.jsx("div",{style:{color:"#888",textAlign:"center",fontSize:18},children:cr[i].noInvite})]})]}):r.jsxs("div",{style:t.embedded?{width:"100%",background:"none",minHeight:"unset",boxShadow:"none",padding:0}:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:40},children:[u&&r.jsx("div",{style:{position:"fixed",top:40,left:"50%",transform:"translateX(-50%)",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:18,borderRadius:16,boxShadow:"0 4px 24px #6B5BFF22",padding:"18px 36px",zIndex:99999,textAlign:"center",letterSpacing:1},children:u}),!t.embedded&&r.jsx("button",{onClick:()=>p("/friend"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:cr[i].back}),r.jsx(Ir,{}),r.jsxs("div",{style:{maxWidth:500,margin:t.embedded?"0 auto":"40px auto",background:"#fff",borderRadius:16,boxShadow:t.embedded?"none":"0 2px 8px #0001",padding:32},children:[r.jsx("h2",{style:{fontWeight:700,fontSize:22,marginBottom:24},children:cr[i].title}),e.map(k=>r.jsxs("div",{style:{marginBottom:24,borderBottom:"1px solid #eee",paddingBottom:16},children:[r.jsxs("div",{style:{fontWeight:600},children:[k.fromUserName,"  ",k.role]}),r.jsxs("div",{style:{color:"#666",margin:"8px 0"},children:[cr[i].goal,k.goal]}),r.jsx("button",{onClick:()=>y(k.id,!0),style:{marginRight:12,background:"#8ec6f7",color:"#fff",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:cr[i].accept}),r.jsx("button",{onClick:()=>y(k.id,!1),style:{background:"#eee",color:"#888",border:"none",borderRadius:6,padding:"6px 18px",fontWeight:700,cursor:"pointer"},children:cr[i].reject})]},k.id))]})]})}const Nt={backToHome:{"zh-TW":" ","zh-CN":" ",ja:" ",en:" Back",ko:" ",th:" ",vi:" Quay li",ms:" Kembali",la:" Redire"},logout:{"zh-TW":"","zh-CN":"",ja:"",en:"Logout",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},pageTitle:{"zh-TW":"","zh-CN":"",ja:"",en:"Project Butterfly",ko:"  ",th:"",vi:"Ti sinhK hoch i tc",ms:"Lahir SemulaRancangan Rakan Kongsi",la:"RenasciturPropositum Socius"},editProfile:{"zh-TW":"","zh-CN":"",ja:"",en:"Edit My Profile",ko:"  ",th:"",vi:"Chnh sa h s ca ti",ms:"Sunting Profil Saya",la:"Meum Profilum Muta"},partnerRoleTitle:{"zh-TW":"","zh-CN":"",ja:"",en:"I'm looking for a",ko:"   ",th:"",vi:"Vai tr i tc ti ang tm",ms:"Peranan Rakan Kongsi Yang Saya Cari",la:"Partem Socii Quam Quro"},peer:{"zh-TW":"","zh-CN":"",ja:"",en:"Peer",ko:"",th:"",vi:"Bn ng hnh",ms:"Rakan Sebaya",la:"Par"},mentor:{"zh-TW":"","zh-CN":"",ja:"",en:"Mentor",ko:" ",th:"",vi:"Ngi hng dn",ms:"Mentor Kehidupan",la:"Mentor"},skillPartner:{"zh-TW":"","zh-CN":"",ja:"",en:"Skill Partner",ko:" ",th:"",vi:"i tc k nng",ms:"Rakan Kemahiran",la:"Socius Peritiae"},mainGoalTitle:{"zh-TW":"","zh-CN":"",ja:"",en:"My Main Goal",ko:"  ",th:"",vi:"Mc tiu chnh ca ti",ms:"Matlamat Utama Saya",la:"Meum Propositum Principale"},allGoals:{"zh-TW":"","zh-CN":"",ja:"",en:"All Goals",ko:" ",th:"",vi:"Tt c mc tiu",ms:"Semua Matlamat",la:"Omnia Proposita"},goalLabel:{"zh-TW":"","zh-CN":"",ja:"",en:"Goal",ko:"",th:"",vi:"Mc tiu",ms:"Matlamat",la:"Propositum"},goalOptions:{jobSeeking:{"zh-TW":"","zh-CN":"",en:"Job Seeking",ja:"",ko:"",th:"",vi:"Tm vic",ms:"Mencari Kerja",la:"Quaerere Opus"},learnNewSkills:{"zh-TW":"","zh-CN":"",en:"Learn New Skills",ja:"",ko:"  ",th:"",vi:"Hc k nng mi",ms:"Belajar Kemahiran Baru",la:"Disce Novas Artes"},emotionalSupport:{"zh-TW":"","zh-CN":"",en:"Emotional Support",ja:"",ko:" ",th:"",vi:"H tr tinh thn",ms:"Sokongan Emosi",la:"Auxilium Emotionale"},networking:{"zh-TW":"","zh-CN":"",en:"Networking",ja:"",ko:"",th:"",vi:"Xy dng mng li",ms:"Rangkaian",la:"Nexus Creare"},startupPrep:{"zh-TW":"","zh-CN":"",en:"Startup Prep",ja:"",ko:" ",th:"",vi:"Chun b khi nghip",ms:"Persediaan Permulaan",la:"Praeparatio Negotii"}},pass:{"zh-TW":"","zh-CN":"",ja:"",en:"Pass",ko:"",th:"",vi:"B qua",ms:"Langkau",la:"Transilire"},like:{"zh-TW":"","zh-CN":"",ja:"",en:"Connect",ko:"",th:"",vi:"Kt ni",ms:"Berhubung",la:"Coniungere"},noMoreUsers:{"zh-TW":"","zh-CN":"",ja:"",en:"No more partners for now. Please try again later.",ko:"    .   .",th:" ",vi:"Hin ti khng c i tc no khc. Vui lng th li sau.",ms:"Tiada lagi rakan kongsi buat masa ini. Sila cuba lagi nanti.",la:"Nulli socii nunc. Quaeso, postea iterum conare."},profileModal:{nameLabel:{"zh-TW":" / Name","zh-CN":" / Name",en:"Name",ja:"",ko:"",th:"",vi:"Bit danh",ms:"Nama Panggilan",la:"Nomen"},bioLabel:{"zh-TW":" / Bio","zh-CN":" / Bio",en:"Bio",ja:"",ko:"",th:"",vi:"Tiu s",ms:"Bio",la:"Descriptio"},goalLabel:{"zh-TW":" / Main Goal","zh-CN":" / Main Goal",en:"Main Goal",ja:"",ko:" ",th:"",vi:"Mc tiu chnh",ms:"Matlamat Utama",la:"Propositum Principale"},skillsLabel:{"zh-TW":" / Skills","zh-CN":" / Skills",en:"Skills",ja:"",ko:"",th:"",vi:"K nng",ms:"Kemahiran",la:"Artes"},selectDefault:{"zh-TW":"","zh-CN":"",en:"Please select",ja:"",ko:"",th:"",vi:"Vui lng chn",ms:"Sila pilih",la:"Quaeso selige"},cancelButton:{"zh-TW":"","zh-CN":"",en:"Cancel",ja:"",ko:"",th:"",vi:"Hy b",ms:"Batal",la:"Abrogare"},saveButton:{"zh-TW":"","zh-CN":"",en:"Save",ja:"",ko:"",th:"",vi:"Lu",ms:"Simpan",la:"Servare"},avatarLabel:{"zh-TW":" / Avatar","zh-CN":" / Avatar",en:"Avatar",ja:"",ko:"",th:"",vi:"nh i din",ms:"Avatar",la:"Imago"},uploading:{"zh-TW":"...","zh-CN":"...",en:"Uploading...",ja:"...",ko:" ...",th:"...",vi:"ang ti ln...",ms:"Memuat naik...",la:"Imponens..."}},chatroom:{"zh-TW":"","zh-CN":"",en:"Chat Room",ja:"",ko:"",th:"",vi:"Phng chat",ms:"Bilik Sembang",la:"Cella Colloquii"},invites:{"zh-TW":"","zh-CN":"",en:"Invitations",ja:"",ko:" ",th:"",vi:"Thng bo mi",ms:"Notis Jemputan",la:"Notitia Invitationis"},mylinks:{"zh-TW":"","zh-CN":"",en:"My Links",ja:"",ko:" ",th:"",vi:"Lin kt ca ti",ms:"Pautan Saya",la:"Nexus Mei"},returnFriendStories:{"zh-TW":"","zh-CN":"",en:"Return to Friend Stories",ja:"",ko:"  ",th:"",vi:"Quay li cu chuyn bn b",ms:"Kembali ke Cerita Rakan",la:"Redi ad Fabulas Amicorum"},hello:{"zh-TW":"","zh-CN":"",ja:"",en:"Hello,",ko:",",th:",",vi:"Xin cho,",ms:"Hai,",la:"Salve,"},partnerTitle:{"zh-TW":"","zh-CN":"",ja:"",en:"Find a Partner",ko:" ",th:"",vi:"Tm bn ng hnh",ms:"Cari Rakan Kongsi",la:"Socius Quaerere"},partnerSubtitle:{"zh-TW":"","zh-CN":"",ja:"",en:"Please select your target partner",ko:"  ",th:"",vi:"Vui lng chn i tc mc tiu",ms:"Sila pilih rakan kongsi sasaran anda",la:"Quaeso selige socium propositum tuum"},noPartnerYet:{"zh-TW":"...","zh-CN":"...",ja:"",en:" Your partner will appear soon. Please be patient.",ko:"     .  .",th:" ",vi:" Bn ng hnh ca bn s xut hin sm. Vui lng i  ch i...",ms:" Rakan kongsi anda akan muncul segera. Sila tunggu dengan sabar...",la:" Socius tuus apparebit. Quaeso, patientia attendas..."}},IO={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"};function CO(){const t=tt(),[e,n]=m.useState(null),{lang:i,setLang:o}=dt(),[s,a]=m.useState([]),[l,c]=m.useState([]),[u,h]=m.useState(0),[p,g]=m.useState("peer"),[y,k]=m.useState(""),[j,T]=m.useState(!1),[x,b]=m.useState({name:"",bio:"",goal:"",skills:"",avatar:"",customSkill:"",country:"",gender:""}),[v,z]=m.useState({name:"",bio:"",goal:"",skills:"",avatar:"",customSkill:"",country:"",gender:""}),[D,P]=m.useState(""),[_,S]=m.useState(null),[R,E]=m.useState(null),[A,B]=m.useState(!0),[I,re]=m.useState("main"),[Q,X]=m.useState("none"),[de,V]=m.useState(null),[ee,he]=m.useState(!1);m.useRef(u);const ve=m.useRef(null);m.useEffect(()=>{if(!ee)return;const O=oe=>{ve.current&&!ve.current.contains(oe.target)&&he(!1)};return document.addEventListener("click",O),()=>document.removeEventListener("click",O)},[ee]),m.useEffect(()=>{const O=ri(Tr,oe=>C(this,null,function*(){if(oe){n(oe);const ge=kn(Ct,"profiles",oe.uid),je=yield ro(ge);if(je.exists()){const Ce=je.data();b({name:Ce.nickname||Ce.name||"",bio:Ce.bio,goal:Ce.goal,skills:Ce.skills,avatar:Ce.avatar,customSkill:Ce.customSkill||"",country:Ce.country||"",gender:Ce.gender||""})}else{const Ce={name:oe.displayName||"",bio:"",goal:"",skills:"",avatar:oe.photoURL||"/avatars/Derxl.png",customSkill:"",country:"",gender:""};b(Ce),yield _d(ge,Ce)}yield be(oe.uid)}else t("/")}));return()=>O()},[Tr,Ct,t]);const be=O=>C(this,null,function*(){try{B(!0);const oe=xn(Ct,"profiles"),ge=ei(oe,bn("__name__","!=",O)),je=yield Ii(ge),Ce=[];je.forEach(He=>{const J=He.data();Ce.push({id:He.id,name:J.name||"Unknown",goal:J.goal||"learnNewSkills",role:J.role||"peer",bio:J.bio||{"zh-TW":"No bio available","zh-CN":"",en:"No bio available",ja:"",ko:" ",th:"",vi:"Khng c tiu s",ms:"Tiada bio",la:"Nulla descriptio"},avatar:J.avatar||"/avatars/Derxl.png",skills:J.skills||"",createdAt:J.createdAt,country:J.country||"",gender:J.gender||""})}),a(Ce),c(Ce)}catch(oe){console.error("Error loading users:",oe)}finally{B(!1)}}),te=(O,oe)=>C(this,null,function*(){if(e)try{const ge={fromUserId:e.uid,fromUserName:x.name,fromUserAvatar:x.avatar,fromUserCountry:x.country||"",fromUserGender:x.gender||"",fromUserEmail:e.email||"",fromUserNickname:x.name||"",toUserId:O,toUserName:oe.name,role:oe.role,goal:oe.goal,status:"pending",createdAt:_b()};yield $o(xn(Ct,"invites"),ge),V(Nt.like[i]+" "),setTimeout(()=>V(null),2e3)}catch(ge){console.error("Error sending invite:",ge),alert("")}});m.useMemo(()=>Array(l.length).fill(0).map(O=>mn.createRef()),[l.length]),m.useEffect(()=>{if(s.length>0){const O=s.filter(oe=>{const ge=oe.role===p,je=y?oe.goal===y:!0;return ge&&je});c(O),h(O.length-1)}},[p,y,s]),m.useEffect(()=>{j&&(z(x),P(x.avatar),E(null),S(null))},[j,x]),l[u];const N=["jobSeeking","learnNewSkills","emotionalSupport","networking","startupPrep"];return m.useEffect(()=>{if(!localStorage.getItem("lang")){const O=navigator.language;let oe="zh-TW";O.startsWith("zh-CN")?oe="zh-CN":O.startsWith("zh-TW")?oe="zh-TW":O.startsWith("ja")?oe="ja":O.startsWith("ko")?oe="ko":O.startsWith("th")?oe="th":O.startsWith("vi")?oe="vi":O.startsWith("ms")?oe="ms":O.startsWith("la")?oe="la":O.startsWith("en")&&(oe="en"),o(oe),localStorage.setItem("lang",oe)}},[o]),m.useEffect(()=>{if(Q==="in"){const O=document.getElementById("user-card");O&&O.animate([{transform:"translateX(-120%) scale(0.4)",opacity:0},{transform:"translateX(0) scale(1)",opacity:1}],{duration:400}),setTimeout(()=>X("none"),400)}},[Q]),r.jsxs("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",position:"relative"},children:[window.innerWidth<=768?r.jsxs("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",background:"url('/green_hut.png') center center / cover no-repeat fixed"},children:[r.jsx(Ar,{}),r.jsxs("div",{style:{marginTop:60,padding:"16px",flex:1,overflowY:"auto"},children:[r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",marginBottom:16,boxShadow:"0 2px 12px #6B5BFF22"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[r.jsx("div",{style:{fontSize:24},children:""}),r.jsx("div",{style:{fontWeight:700,fontSize:14,color:"#6B5BFF"},children:Nt.hello?Nt.hello[i]:""}),r.jsx("img",{src:x.avatar,alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}}),r.jsx("div",{style:{fontWeight:700,fontSize:14,color:"#333"},children:x.name})]}),r.jsxs("div",{style:{background:"rgba(128,128,128,0.1)",borderRadius:12,padding:"16px",marginBottom:16,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#6B5BFF",textAlign:"center",marginBottom:8},children:Nt.partnerTitle?Nt.partnerTitle[i]:""}),r.jsx("div",{style:{fontSize:12,color:"#888",textAlign:"center",marginBottom:12},children:Nt.partnerSubtitle?Nt.partnerSubtitle[i]:""}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:N.map(O=>r.jsx("button",{onClick:()=>{k(O),re("main")},style:{flex:"1 1 calc(50% - 4px)",padding:"8px 4px",borderRadius:8,border:y===O?"2px solid #23c6e6":"1px solid #eee",background:y===O?"#e6f7ff":"#fff",color:y===O?"#23c6e6":"#333",fontWeight:600,fontSize:12,cursor:"pointer",boxShadow:y===O?"0 2px 8px #23c6e622":"0 1px 4px #0001"},children:Nt.goalOptions[O][i]},O))})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsx("button",{onClick:()=>t("/chatroom"),style:{padding:"8px",borderRadius:8,border:I==="chat"?"2px solid #8ec6f7":"1px solid #eee",background:I==="chat"?"#e6f7ff":"#fff",color:I==="chat"?"#23c6e6":"#333",fontWeight:600,fontSize:14,cursor:"pointer"},children:Nt.chatroom[i]}),r.jsx("button",{onClick:()=>re("invites"),style:{padding:"8px",borderRadius:8,border:I==="invites"?"2px solid #6B5BFF":"1px solid #eee",background:I==="invites"?"#f5f4ff":"#fff",color:I==="invites"?"#6B5BFF":"#333",fontWeight:600,fontSize:14,cursor:"pointer"},children:Nt.invites[i]}),r.jsx("button",{onClick:()=>re("links"),style:{padding:"8px",borderRadius:8,border:I==="links"?"2px solid #6B5BFF":"1px solid #eee",background:I==="links"?"#f5f4ff":"#fff",color:I==="links"?"#6B5BFF":"#333",fontWeight:600,fontSize:14,cursor:"pointer"},children:Nt.mylinks[i]}),r.jsxs("span",{href:"/storywall",style:{padding:"8px",borderRadius:8,border:"1px solid #23c6e6",background:"#fff",color:"#23c6e6",fontWeight:600,fontSize:14,cursor:"pointer",textAlign:"center",textDecoration:"none",display:"block"},children:[Nt.returnFriendStories[i]," "]})]})]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",minHeight:400},children:[I==="main"&&r.jsx(r.Fragment,{children:(()=>{var ge,je;const O=l.filter(Ce=>!y||Ce.goal===y);if(O.length===0)return r.jsx("div",{style:{textAlign:"center",color:"#e74c3c",fontSize:16,marginTop:40,fontWeight:700},children:((ge=Nt.noPartnerYet)==null?void 0:ge[i])||"..."});const oe=O[u>=0&&u<O.length?u:0];return oe?r.jsxs("div",{id:"user-card",style:{textAlign:"center",transition:"box-shadow 0.2s, transform 0.4s",transform:Q==="in"?"translateX(-120%) scale(0.4)":Q==="out"?"translateX(120%) scale(0.4)":"translateX(0) scale(1)",opacity:1},onAnimationEnd:()=>{Q==="in"&&X("none")},children:[r.jsx("img",{src:oe.avatar,alt:"avatar",style:{width:80,height:80,borderRadius:"50%",objectFit:"cover",border:"3px solid #6B5BFF",marginBottom:12}}),r.jsx("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",marginBottom:8},children:oe.name}),r.jsxs("div",{style:{color:"#888",fontSize:14,marginBottom:4},children:["/",oe.country||""]}),r.jsxs("div",{style:{color:"#888",fontSize:14,marginBottom:4},children:["",oe.gender||""]}),r.jsxs("div",{style:{color:"#888",fontSize:14,marginBottom:4},children:["",((je=Nt.goalOptions[oe.goal])==null?void 0:je[i])||oe.goal]}),r.jsxs("div",{style:{color:"#888",fontSize:14,marginBottom:16},children:["",oe.skills||""]})]}):null})()}),I==="chat"&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20,justifyContent:"center",alignItems:"center",minHeight:"50vh",padding:"20px 0"},children:[r.jsxs("div",{style:{background:"rgba(128,128,128,0.15)",borderRadius:16,padding:"24px",boxShadow:"0 6px 16px rgba(0,0,0,0.2)",width:"95%",maxWidth:320,border:"1px solid rgba(128,128,128,0.2)"},children:[r.jsx("div",{style:{fontWeight:800,fontSize:20,color:"#6B5BFF",marginBottom:16,textAlign:"center"},children:""}),r.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:15,lineHeight:1.4},children:","})]}),r.jsxs("div",{style:{background:"rgba(128,128,128,0.15)",borderRadius:16,padding:"24px",boxShadow:"0 6px 16px rgba(0,0,0,0.2)",width:"95%",maxWidth:320,border:"1px solid rgba(128,128,128,0.2)"},children:[r.jsx("div",{style:{fontWeight:800,fontSize:20,color:"#6B5BFF",marginBottom:16,textAlign:"center"},children:""}),r.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:15,lineHeight:1.4},children:",!"})]})]}),I==="links"&&r.jsx(yx,{embedded:!0}),I==="invites"&&r.jsx(xx,{embedded:!0})]}),r.jsx("div",{style:{width:"100%",margin:"0 auto",marginTop:24},children:r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>t("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" Restarter"}),r.jsx("span",{onClick:()=>t("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" "})]})})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},children:i==="zh-TW"?" Restarter":i==="zh-CN"?" Restarter":i==="en"?" RestarterWho We Are":i==="ja"?" Restarter":i==="ko"?" Restarter ":i==="th"?" Restarter":i==="vi"?" RestarterChng ti l ai":i==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},children:i==="zh-TW"?" ":i==="zh-CN"?" ":i==="en"?" FeedbackWe Want to Hear You":i==="ja"?" ":i==="ko"?"    ":i==="th"?" ":i==="vi"?" Hp gp Chng ti mun lng nghe bn":i==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),e?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:e.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:e.displayName||e.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(Tr)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:IO[i]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:i==="zh-TW"?"/":i==="zh-CN"?"/":i==="en"?"Register / Login":i==="ja"?"/":i==="ko"?"/":i==="th"?"/":i==="vi"?"ng k/ng nhp":i==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:ve,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>he(O=>!O),onMouseOver:O=>{O.currentTarget.style.background="#6B5BFF",O.currentTarget.style.color="#fff"},onMouseOut:O=>{O.currentTarget.style.background="#fff",O.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),ee&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:i==="zh-TW"||i==="zh-CN"?"":i==="en"?"Legal Documents":i==="ja"?"":i==="ko"?" ":i==="th"?"":i==="vi"?"Ti liu php l":i==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:{"zh-TW":"","zh-CN":"",en:"Privacy Policy",ja:"",ko:" ",th:"",vi:"Chnh sch bo mt",ms:"Dasar Privasi",la:"Politica Privata"},path:"/privacy-policy"},{key:"terms",title:{"zh-TW":"/","zh-CN":"/",en:"Terms & Conditions",ja:"",ko:"",th:"",vi:"iu khon & iu kin",ms:"Terma & Syarat",la:"Termini & Conditiones"},path:"/terms"},{key:"data",title:{"zh-TW":"","zh-CN":"",en:"Data Deletion",ja:"",ko:" ",th:"",vi:"Xa d liu",ms:"Pemadaman Data",la:"Deletio Datorum"},path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(O=>r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(O.path),he(!1)},onMouseOver:oe=>{oe.currentTarget.style.background="#f3f0ff",oe.currentTarget.style.color="#6B5BFF"},onMouseOut:oe=>{oe.currentTarget.style.background="#fff",oe.currentTarget.style.color="#232946"},children:O.title[i]||O.title["zh-TW"]},O.key))]})]})]}),r.jsx("div",{style:{position:"fixed",left:0,top:0,width:340,height:"100vh",background:"rgba(255,255,255,0.95)",borderRight:"1px solid #eee",overflowY:"auto",zIndex:2,padding:"24px 16px"},children:r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"20px",marginBottom:24,boxShadow:"0 2px 12px #6B5BFF22"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16},children:[r.jsx("div",{style:{fontSize:32},children:""}),r.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#6B5BFF"},children:Nt.hello?Nt.hello[i]:""}),r.jsx("img",{src:x.avatar,alt:"avatar",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",border:"3px solid #6B5BFF"}}),r.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#333"},children:x.name})]}),r.jsxs("div",{style:{background:"rgba(128,128,128,0.1)",borderRadius:12,padding:"20px",marginBottom:24,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:12},children:Nt.partnerTitle?Nt.partnerTitle[i]:""}),r.jsx("div",{style:{fontSize:14,color:"#888",textAlign:"center",marginBottom:20},children:Nt.partnerSubtitle?Nt.partnerSubtitle[i]:""}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:N.map(O=>r.jsx("button",{onClick:()=>{k(O),re("main")},style:{width:"100%",padding:"12px 16px",borderRadius:10,border:y===O?"2px solid #23c6e6":"1.5px solid #eee",background:y===O?"#e6f7ff":"#fff",color:y===O?"#23c6e6":"#333",fontWeight:700,fontSize:15,cursor:"pointer",boxShadow:y===O?"0 2px 8px #23c6e622":"0 2px 8px #0001",transition:"all 0.2s",outline:"none",borderLeft:y===O?"6px solid #23c6e6":"6px solid transparent",marginBottom:0},children:Nt.goalOptions[O][i]},O))})]}),r.jsx("button",{onClick:()=>t("/chatroom"),style:{width:"100%",marginBottom:12,padding:"12px 0",borderRadius:10,border:I==="chat"?"2px solid #8ec6f7":"1.5px solid #eee",background:I==="chat"?"#e6f7ff":"#fff",color:I==="chat"?"#23c6e6":"#333",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:I==="chat"?"0 2px 8px #23c6e622":"0 2px 8px #0001",transition:"all 0.2s"},children:Nt.chatroom[i]}),r.jsx("button",{onClick:()=>re("invites"),style:{width:"100%",marginBottom:12,padding:"12px 0",borderRadius:10,border:I==="invites"?"2px solid #6B5BFF":"1.5px solid #eee",background:I==="invites"?"#f5f4ff":"#fff",color:I==="invites"?"#6B5BFF":"#333",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:I==="invites"?"0 2px 8px #6B5BFF22":"0 2px 8px #0001",transition:"all 0.2s"},children:Nt.invites[i]}),r.jsx("button",{onClick:()=>re("links"),style:{width:"100%",marginBottom:12,padding:"12px 0",borderRadius:10,border:I==="links"?"2px solid #6B5BFF":"1.5px solid #eee",background:I==="links"?"#f5f4ff":"#fff",color:I==="links"?"#6B5BFF":"#333",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:I==="links"?"0 2px 8px #6B5BFF22":"0 2px 8px #0001",transition:"all 0.2s"},children:Nt.mylinks[i]}),r.jsxs("span",{href:"/storywall",style:{width:"100%",marginBottom:12,padding:"12px 0",borderRadius:10,border:"1.5px solid #23c6e6",background:"#fff",color:"#23c6e6",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #23c6e622",textAlign:"center",textDecoration:"none",display:"block",transition:"all 0.2s"},children:[Nt.returnFriendStories[i]," "]})]})}),r.jsx("div",{style:{position:"fixed",left:340,top:60,width:"calc(100vw - 340px)",height:"calc(100vh - 60px)",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center",background:"url('/green_hut.png') center center / cover no-repeat fixed",zIndex:1,pointerEvents:"auto",paddingLeft:0},children:r.jsxs("div",{style:{width:"100%",maxWidth:900,marginTop:60},children:[I==="main"&&r.jsx(r.Fragment,{children:(()=>{var ge,je;const O=l.filter(Ce=>!y||Ce.goal===y);if(O.length===0)return r.jsx("div",{style:{textAlign:"center",color:"#e74c3c",fontSize:18,marginTop:40,fontWeight:700},children:((ge=Nt.noPartnerYet)==null?void 0:ge[i])||"..."});const oe=O[u>=0&&u<O.length?u:0];return oe?r.jsxs("div",{id:"user-card",style:{width:340,margin:"0 auto",background:"#fff",borderRadius:18,boxShadow:"0 2px 16px #6B5BFF22",padding:32,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",minHeight:380,transition:"box-shadow 0.2s, transform 0.4s",transform:Q==="in"?"translateX(-120%) scale(0.4)":Q==="out"?"translateX(120%) scale(0.4)":"translateX(0) scale(1)",opacity:1},onAnimationEnd:()=>{Q==="in"&&X("none")},children:[r.jsx("img",{src:oe.avatar,alt:"avatar",style:{width:88,height:88,borderRadius:"50%",objectFit:"cover",border:"3px solid #6B5BFF",marginBottom:16}}),r.jsx("div",{style:{fontWeight:800,fontSize:22,color:"#6B5BFF",marginBottom:8},children:oe.name}),r.jsxs("div",{style:{color:"#888",fontSize:15,marginBottom:4},children:["/",oe.country||""]}),r.jsxs("div",{style:{color:"#888",fontSize:15,marginBottom:4},children:["",oe.gender||""]}),r.jsxs("div",{style:{color:"#888",fontSize:15,marginBottom:4},children:["",((je=Nt.goalOptions[oe.goal])==null?void 0:je[i])||oe.goal]}),r.jsxs("div",{style:{color:"#888",fontSize:15,marginBottom:12},children:["",oe.skills||""]}),r.jsxs("div",{style:{display:"flex",gap:16,marginTop:24},children:[r.jsx("button",{onClick:()=>{const Ce=document.getElementById("user-card");Ce&&(X("out"),Ce.animate([{transform:"translateX(0) scale(1)",opacity:1},{transform:"translateX(120%) scale(0.4)",opacity:0}],{duration:400})),setTimeout(()=>{h(He=>(X("in"),(He-1+O.length)%O.length))},400)},style:{padding:"10px 28px",borderRadius:8,border:"1.5px solid #bbb",background:"#fff",color:"#888",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001",transition:"all 0.2s"},children:""}),r.jsx("button",{onClick:()=>te(oe.id,oe),style:{padding:"10px 28px",borderRadius:8,border:"1.5px solid #6B5BFF",background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #6B5BFF22",transition:"all 0.2s"},children:""})]})]}):null})()}),I==="chat"&&r.jsx("div",{children:""}),I==="links"&&r.jsx(yx,{embedded:!0}),I==="invites"&&r.jsx(xx,{embedded:!0})]})})]}),de&&r.jsx("div",{style:{position:"fixed",top:32,left:"50%",transform:"translateX(-50%)",background:"#1976d2",color:"#fff",padding:"14px 32px",borderRadius:16,fontSize:18,fontWeight:700,zIndex:9999,boxShadow:"0 2px 16px #1976d288",letterSpacing:1,textAlign:"center",opacity:.97},children:de})]})}function RO(){try{return JSON.parse(localStorage.getItem("messages")||"[]")}catch(t){return[]}}function EO(){const t=localStorage.getItem("userId")||"",e=RO(),n=localStorage.getItem("lang")||"zh-TW",i={"zh-TW":{title:"",noMessages:"",messageFrom:"",aboutPost:""},"zh-CN":{title:"",noMessages:"",messageFrom:"",aboutPost:""},en:{title:"My Inbox",noMessages:"No messages received yet",messageFrom:"message:",aboutPost:'About your post: "'},ja:{title:"",noMessages:"",messageFrom:"",aboutPost:""},ko:{title:" ",noMessages:"   ",messageFrom:":",aboutPost:'  : "'},vi:{title:"Hp th ca ti",noMessages:"Cha c tin nhn no",messageFrom:"tin nhn:",aboutPost:'V bi ng ca bn: "'},th:{title:"",noMessages:"",messageFrom:":",aboutPost:': "'},la:{title:"Mea Inbox",noMessages:"Nondum epistulae receptae",messageFrom:"epistula:",aboutPost:'De tuo post: "'},ms:{title:"Peti Surat Saya",noMessages:"Belum ada mesej diterima",messageFrom:"mesej:",aboutPost:'Mengenai siaran anda: "'}},o=i[n]||i.en,s=e.flatMap(a=>(a.comments||[]).filter(l=>l.toUserId===t).map(l=>We(ke({},l),{post:a.text,from:a.user.name})));return r.jsx("div",{className:"modern-bg",style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{className:"modern-container",style:{maxWidth:600,width:"100%",margin:"0 auto",padding:32},children:[r.jsx("h2",{style:{textAlign:"center",color:"#6B5BFF",fontWeight:900,marginBottom:24},children:o.title}),s.length===0&&r.jsx("div",{style:{color:"#bbb",textAlign:"center"},children:o.noMessages}),s.map((a,l)=>r.jsxs("div",{style:{background:"#f7f7ff",borderRadius:12,padding:16,boxShadow:"0 2px 8px #6B5BFF11",marginBottom:16},children:[r.jsxs("div",{style:{color:"#6B5BFF",fontWeight:700},children:[a.from," ",o.messageFrom]}),r.jsx("div",{style:{color:"#232946",margin:"8px 0"},children:a.content}),r.jsxs("div",{style:{color:"#6B4F27",fontSize:14},children:[o.aboutPost,a.post,""]})]},l))]})})}const CS={"zh-TW":{title:"AI ",comingSoon:"",playing:"...",playAudio:""},"zh-CN":{title:"AI ",comingSoon:"",playing:"...",playAudio:""},en:{title:"AI-Styled Reply",comingSoon:"Experience coming soon, stay tuned!",playing:"Playing...",playAudio:"Play Audio"},ja:{title:"AI",comingSoon:"",playing:"...",playAudio:""},ko:{title:"AI  ",comingSoon:"    !",playing:" ...",playAudio:" "},vi:{title:"Tr li theo phong cch AI",comingSoon:"Tri nghim sp ra mt, hy theo di!",playing:"ang pht...",playAudio:"Pht m thanh"},th:{title:" AI",comingSoon:"  !",playing:"...",playAudio:""},la:{title:"Responsum Stilo AI",comingSoon:"Experientia mox praesto erit, mane exspectans!",playing:"Ludens...",playAudio:"Sonum redde"},ms:{title:"Balasan Gaya AI",comingSoon:"Pengalaman akan datang, nantikan!",playing:"Sedang dimainkan...",playAudio:"Mainkan Audio"}};function AO(){const[t,e]=mn.useState(!1),[n,i]=mn.useState(()=>localStorage.getItem("lang")||"zh-TW"),o=CS[n]||CS["zh-TW"];mn.useEffect(()=>{localStorage.setItem("lang",n)},[n]);const s=()=>{e(!0),setTimeout(()=>e(!1),3e3)};return r.jsxs("div",{className:"modern-bg",style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[r.jsx(Ir,{}),r.jsxs("div",{className:"modern-container",style:{maxWidth:480,width:"100%",margin:"0 auto",textAlign:"center",padding:48,borderRadius:18,background:"rgba(60,40,20,0.18)",boxShadow:"0 4px 24px #0002"},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontWeight:900,fontSize:28,marginBottom:24},children:o.title}),r.jsx("div",{style:{color:"#6B4F27",fontSize:22,fontWeight:700},children:o.comingSoon}),r.jsx("button",{onClick:s,style:{padding:"6px 18px",borderRadius:8,background:"#6c63ff",color:"#fff",border:"none",fontWeight:700,fontSize:16,marginTop:8},disabled:t,children:t?o.playing:o.playAudio})]})]})}const BO=[{code:"zh-TW",label:""},{code:"zh-CN",label:""},{code:"en",label:"EN"},{code:"ja",label:""},{code:"ko",label:""},{code:"vi",label:"Ting Vit"},{code:"th",label:""},{code:"la",label:"Latina"},{code:"ms",label:"Bahasa Melayu"}],RS={"zh-TW":{title:"",comingSoon:"",playing:"...",playAudio:""},"zh-CN":{title:"",comingSoon:"",playing:"...",playAudio:""},en:{title:"Realistic TTS",comingSoon:"Experience coming soon, stay tuned!",playing:"Playing...",playAudio:"Play Audio"},ja:{title:"",comingSoon:"",playing:"...",playAudio:""},ko:{title:"  ",comingSoon:"    !",playing:" ...",playAudio:" "},vi:{title:"u ra ging ni thc t",comingSoon:"Tri nghim sp ra mt, hy theo di!",playing:"ang pht...",playAudio:"Pht m thanh"},th:{title:"",comingSoon:"  !",playing:"...",playAudio:""},la:{title:"Sermo Verus Output",comingSoon:"Experientia mox praesto erit, mane exspectans!",playing:"Ludens...",playAudio:"Sonum redde"},ms:{title:"Output Suara Realistik",comingSoon:"Pengalaman akan datang, nantikan!",playing:"Sedang dimainkan...",playAudio:"Mainkan Audio"}};function ES(){const[t,e]=mn.useState(!1),[n,i]=mn.useState("zh-TW"),o=RS[n]||RS["zh-TW"];mn.useEffect(()=>{const a=localStorage.getItem("lang");a&&BO.find(l=>l.code===a)&&i(a)},[]),mn.useEffect(()=>{localStorage.setItem("lang",n)},[n]);const s=()=>{e(!0),setTimeout(()=>e(!1),2e3)};return r.jsxs("div",{className:"modern-bg",style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[r.jsx("div",{style:{position:"absolute",top:24,right:36,zIndex:100},children:r.jsx(Ir,{})}),r.jsxs("div",{className:"modern-container",style:{maxWidth:480,width:"100%",margin:"0 auto",textAlign:"center",padding:48,borderRadius:18,background:"rgba(60,40,20,0.18)",boxShadow:"0 4px 24px #0002"},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontWeight:900,fontSize:28,marginBottom:24},children:o.title}),r.jsx("div",{style:{color:"#6B4F27",fontSize:22,fontWeight:700},children:o.comingSoon}),r.jsx("button",{onClick:s,style:{padding:"6px 18px",borderRadius:8,background:"#6c63ff",color:"#fff",border:"none",fontWeight:700,fontSize:16,marginTop:8},disabled:t,children:t?o.playing:o.playAudio})]})]})}const D6=({onTestModeChange:t})=>{const[e,n]=m.useState(!1);m.useEffect(()=>{const o=localStorage.getItem("testMode")==="true";n(o),t(o)},[t]);const i=()=>{const o=!e;n(o),localStorage.setItem("testMode",o.toString()),t(o)};return r.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[r.jsx("button",{onClick:i,style:{background:e?"#ff6b6b":"#4ecdc4",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease",minWidth:"80px"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.05)"},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)"},children:e?" ON":" OFF"}),e&&r.jsx("div",{style:{background:"rgba(255, 107, 107, 0.9)",color:"white",padding:"6px 10px",borderRadius:"6px",fontSize:"10px",textAlign:"center",maxWidth:"120px",lineHeight:"1.2"},children:""})]})},AS={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},Da={"zh-TW":{privacy:"",terms:"/",deletion:""},"zh-CN":{privacy:"",terms:"/",deletion:""},en:{privacy:"Privacy Policy",terms:"Terms/Statement",deletion:"Data Deletion"},ja:{privacy:"",terms:"/",deletion:""},ko:{privacy:"",terms:"/",deletion:"  "},th:{privacy:"",terms:"/",deletion:""},vi:{privacy:"Chnh sch bo mt",terms:"iu khon/Tuyn b",deletion:"Gii thch xa d liu"},ms:{privacy:"Dasar Privasi",terms:"Terma/Penyata",deletion:"Penerangan Pemadaman Data"},la:{privacy:"Consilium de Privata",terms:"Termini/Declaratio",deletion:"Explicatio Deletionis Datae"}},BS={"zh-TW":{back:"",logout:"",title:"",subtitle:"",steps:[{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"}],submit:"",loading:"...",next:"",finish:"",finishSub:"",error:"",retry:""},"zh-CN":{back:"",logout:"",title:"",subtitle:"",steps:[{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"},{title:"",desc:"",placeholder:"...(300)"}],submit:"",loading:"...",next:"",finish:"",finishSub:"",error:"",retry:""},en:{back:"Back to Home",logout:"Logout",title:"Restart Journey",subtitle:"Step by step out of the mist, see a new self",steps:[{title:"Step 1: Misty Valley",desc:"Write about a recent event that made you feel strong emotions. No need to judge yourself, just describe what happened, how you felt, and how it affected you.",placeholder:"Write your story here...(300 words max)"},{title:"Step 2: Hill of Hope",desc:"Review the event you just wrote. Did you make any small effort or try anything in that situation? Even if it was minor, write it down.",placeholder:"Write your effort or attempt...(300 words max)"},{title:"Step 3: Forest of Courage",desc:"Based on your discovered effort or resources, set a small action you are willing to try, and write down the difficulties you expect and how you plan to face them.",placeholder:"Write your action and expected difficulties...(300 words max)"},{title:"Step 4: Stream of Wisdom",desc:"Reflect on your action experience. What did you learn? Any new discoveries or insights?",placeholder:"Write your learning and insights...(300 words max)"},{title:"Step 5: Summit of Restart",desc:"Summarize all your experiences and write a blessing or expectation for your future self. If you face difficulties again, how will you encourage yourself?",placeholder:"Write your blessing or expectation...(300 words max)"}],submit:"Submit for Guidance",loading:"Please wait...",next:"Next Step",finish:"Congratulations on completing your restart journey!",finishSub:"Please continue to be kind to yourself in the future!",error:"An error occurred, please try again later.",retry:"Try Again"},ja:{back:"",logout:"",title:"",subtitle:"",steps:[{title:"1",desc:"",placeholder:"...(300)"},{title:"2",desc:"",placeholder:"...(300)"},{title:"3",desc:"",placeholder:"...(300)"},{title:"4",desc:"",placeholder:"...(300)"},{title:"5",desc:"",placeholder:"...(300)"}],submit:"",loading:"...",next:"",finish:"",finishSub:"",error:"",retry:""},ko:{back:"",logout:"",title:"  ",subtitle:"   ,   ",steps:[{title:"1:  ",desc:"     .   ,    ,       .",placeholder:"   ...(300 )"},{title:"2:  ",desc:"   ,        .    .",placeholder:"  ...(300 )"},{title:"3:  ",desc:"   ,      ,    .",placeholder:"   ...(300 )"},{title:"4:  ",desc:"  ,      .",placeholder:"   ...(300 )"},{title:"5:  ",desc:"         .        .",placeholder:"      ...(300 )"}],submit:" ",loading:" ...",next:" ",finish:"  !",finishSub:"   !",error:" .    .",retry:" "},th:{back:"",logout:"",title:"",subtitle:" ",steps:[{title:" 1: ",desc:"    ",placeholder:"...(300 )"},{title:" 2: ",desc:"   ",placeholder:"...(300 )"},{title:" 3: ",desc:"   ",placeholder:"...(300 )"},{title:" 4: ",desc:"  ",placeholder:"...(300 )"},{title:" 5: ",desc:"  ",placeholder:"...(300 )"}],submit:"",loading:"...",next:"",finish:"!",finishSub:"!",error:" ",retry:""},vi:{back:"V trang ch",logout:"ng xut",title:"Th thch nhim v hng ngy",subtitle:"Tng bc vt qua sng m, khm ph bn thn mi",steps:[{title:"Bc 1: Thung lng sng m",desc:"Vit v mt s kin gn y khin bn cm xc mnh. Khng cn phn xt bn thn, ch cn m t din bin, cm xc v nh hng ca n.",placeholder:"Vit cu chuyn ca bn ti y...(300 t)"},{title:"Bc 2: i hy vng",desc:"Xem li s kin va vit, bn c n lc hoc th iu g nh khng? D nh cng hy ghi li.",placeholder:"Vit n lc hoc iu bn  th...(300 t)"},{title:"Bc 3: Rng dng cm",desc:"Da trn n lc hoc ngun lc va pht hin, hy t ra mt hnh ng nh mun th, d on kh khn v cch i mt.",placeholder:"Vit hnh ng v kh khn d on...(300 t)"},{title:"Bc 4: Sui tr tu",desc:"Xem li tri nghim hnh ng, bn hc c g? C pht hin hay nhn thc mi khng?",placeholder:"Vit iu bn hc c hoc nhn ra...(300 t)"},{title:"Bc 5: nh ti khi ng",desc:"Tng hp mi tri nghim, vit li chc hoc k vng cho bn thn tng lai. Nu gp kh khn, bn s ng vin mnh th no?",placeholder:"Vit li chc hoc k vng...(300 t)"}],submit:"Gi v nhn hng dn",loading:"Vui lng ch...",next:"Bc tip theo",finish:"Chc mng bn  hon thnh hnh trnh ti khi ng!",finishSub:"Hy tip tc yu thng bn thn nh!",error:" xy ra li, vui lng th li sau.",retry:"Th li"},la:{back:"Redi ad domum",logout:"Exire",title:"Provocatio Cotidiana",subtitle:"Gradatim e nebula progredere, novum te aspice",steps:[{title:"Gradus I: Vallis Nebulosa",desc:"Scribe de re nuper te vehementer commotum. Te ipsum iudicare noli, sed simpliciter rem, sensus tuos, et effectus describas.",placeholder:"Hic fabulam tuam scribe...(300 verba)"},{title:"Gradus II: Collis Spei",desc:"Recense rem modo scriptam. In illa condicione quid parvum conatus es? Etiam minima, scribe.",placeholder:"Conatum tuum scribe...(300 verba)"},{title:"Gradus III: Silva Virtutis",desc:"Ex conatu aut opibus inventis, parvam actionem temptare velis, difficultates praevides et quomodo eas superaturus sis scribe.",placeholder:"Actionem et difficultates scribe...(300 verba)"},{title:"Gradus IV: Rivus Sapientiae",desc:"Recense experientiam actionis. Quid didicisti? Quid novi invenisti?",placeholder:"Quae didicisti scribe...(300 verba)"},{title:"Gradus V: Culmen Renovationis",desc:"Omnia experientia colligens, votum aut spem tibi futuro scribe. Si iterum difficultates occurrant, quomodo te hortaberis?",placeholder:"Votum aut spem scribe...(300 verba)"}],submit:"Mitte et consilium pete",loading:"Exspecta quaeso...",next:"Ad gradum proximum",finish:"Iter renovationis confecisti!",finishSub:"Te ipsum semper cura!",error:"Error factus est, quaeso postea repete.",retry:"Iterum conare"},ms:{back:"Kembali ke Laman Utama",logout:"Log keluar",title:"Cabaran Misi Harian",subtitle:"Melangkah keluar dari kabus, temui diri baharu",steps:[{title:"Langkah 1: Lembah Berkabus",desc:"Tulis tentang peristiwa baru-baru ini yang membuatkan anda beremosi kuat. Tidak perlu menilai diri, hanya gambarkan peristiwa, perasaan dan kesannya.",placeholder:"Tulis kisah anda di sini...(300 patah perkataan)"},{title:"Langkah 2: Bukit Harapan",desc:"Imbas kembali peristiwa tadi, adakah anda berusaha atau mencuba sesuatu walaupun kecil? Catatkan walaupun kecil.",placeholder:"Tulis usaha atau percubaan anda...(300 patah perkataan)"},{title:"Langkah 3: Hutan Keberanian",desc:"Berdasarkan usaha atau sumber yang ditemui, tetapkan tindakan kecil yang ingin dicuba, jangka cabaran dan cara menghadapinya.",placeholder:"Tulis tindakan dan cabaran dijangka...(300 patah perkataan)"},{title:"Langkah 4: Sungai Kebijaksanaan",desc:"Imbas kembali pengalaman tindakan anda, apa yang anda pelajari? Ada penemuan atau kesedaran baharu?",placeholder:"Tulis apa yang anda pelajari...(300 patah perkataan)"},{title:"Langkah 5: Puncak Permulaan Semula",desc:"Gabungkan semua pengalaman, tulis harapan atau ucapan untuk diri masa depan. Jika hadapi cabaran lagi, bagaimana anda akan beri semangat pada diri?",placeholder:"Tulis harapan atau ucapan...(300 patah perkataan)"}],submit:"Hantar & mohon panduan",loading:"Sila tunggu...",next:"Langkah seterusnya",finish:"Tahniah, anda telah tamat perjalanan permulaan semula!",finishSub:"Teruskan sayangi diri anda!",error:"Ralat berlaku, sila cuba lagi kemudian.",retry:"Cuba lagi"}};function PS(){var ee,he,ve,be;const t=tt(),e=Ze(),{lang:n,setLang:i}=dt(),[o,s]=m.useState(null),[a,l]=m.useState(!1),[c,u]=m.useState(!1),h=m.useRef(null),p=m.useRef(null),[g,y]=m.useState(!1),k=BS["zh-TW"],j=BS[n]||k,T=We(ke(ke({},k),j),{steps:j.steps||k.steps,submit:j.submit||k.submit,loading:j.loading||k.loading,next:j.next||k.next,finish:j.finish||k.finish,finishSub:j.finishSub||k.finishSub,error:j.error||k.error,retry:j.retry||k.retry}),[x,b]=m.useState(0),[v,z]=m.useState(""),[D,P]=m.useState([]),[_,S]=m.useState(""),[R,E]=m.useState(!1),[A,B]=m.useState(!1),[I,re]=m.useState(!1),Q=(ee=T.steps)==null?void 0:ee[x];m.useEffect(()=>{const te=ri(e,N=>{s(N)});return()=>te()},[]),m.useEffect(()=>{const te=()=>re(window.innerWidth<=768);return te(),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]),m.useEffect(()=>{const te=N=>{h.current&&!h.current.contains(N.target)&&l(!1),p.current&&!p.current.contains(N.target)&&u(!1)};return(a||c)&&document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[a,c]),m.useEffect(()=>{var te;if(_&&x===(((te=T.steps)==null?void 0:te.length)||0)-1){B(!0);const N=setTimeout(()=>B(!1),3e3);return()=>clearTimeout(N)}},[_,x]);const X=te=>C(this,null,function*(){te.preventDefault(),E(!0),S("");try{console.log("Sending request to /api/mission-ai with:",{step:x,input:v,history:D});const N=yield fetch("/api/mission-ai",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({step:x,input:v,history:D})});if(console.log("Response status:",N.status),!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const O=yield N.json();console.log("Response data:",O),S(O.reply||"AI"),P(oe=>[...oe,v])}catch(N){console.error("Error in handleSubmit:",N),S(""+(N instanceof Error?N.message:""))}finally{E(!1)}}),de=()=>{z(""),S(""),b(x+1)},V=()=>r.jsxs("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},children:[r.jsx("iframe",{src:"https://embed.lottiefiles.com/animation/85716",style:{width:400,height:400,border:"none",background:"transparent"},title:"fireworks1"}),r.jsx("iframe",{src:"https://embed.lottiefiles.com/animation/85716",style:{width:400,height:400,border:"none",background:"transparent",position:"absolute",left:"20vw",top:"10vh"},title:"fireworks2"}),r.jsx("iframe",{src:"https://embed.lottiefiles.com/animation/85716",style:{width:400,height:400,border:"none",background:"transparent",position:"absolute",right:"20vw",top:"20vh"},title:"fireworks3"})]});return r.jsxs("div",{style:{minHeight:"100vh",width:"100vw",position:"relative",overflowX:"hidden",background:"url('/mountain.png') center center / cover no-repeat fixed, linear-gradient(to bottom, #eaf6ff 0%, #f7fafc 100%)"},children:[I?r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:100,background:"rgba(255,255,255,0.95)",padding:"8px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 8px #0001"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:r.jsx("img",{src:"/ctx-logo.png",alt:"logo",style:{width:72,height:72,cursor:"pointer"},onClick:()=>t("/")})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:o.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}}),r.jsx("span",{style:{color:"#6B5BFF",fontWeight:600,fontSize:12,maxWidth:60,overflow:"hidden",textOverflow:"ellipsis"},children:o.displayName||o.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(e)}),style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px",borderRadius:4,fontWeight:600,border:"1px solid #ff6347",color:"#ff6347",background:"#fff",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s"},children:AS[n]})]}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"1px solid #1976d2",borderRadius:6,fontWeight:600,fontSize:12,padding:"4px 8px"},children:n==="zh-TW"?"":n==="zh-CN"?"":n==="en"?"Register":n==="ja"?"":n==="ko"?"":n==="th"?"":n==="vi"?"ng k":n==="ms"?"Daftar":"Registrare"}),r.jsx(Ir,{style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px"}}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:h,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:12,padding:"8px 10px",minWidth:44,height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>l(te=>!te),onMouseOver:te=>{te.currentTarget.style.background="#5a4fd9",te.currentTarget.style.borderColor="#5a4fd9"},onMouseOut:te=>{te.currentTarget.style.background="#6B5BFF",te.currentTarget.style.borderColor="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),a&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:n==="zh-TW"||n==="zh-CN"?"":n==="en"?"Legal Documents":n==="ja"?"":n==="ko"?" ":n==="th"?"":n==="vi"?"Ti liu php l":n==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:Da,titleKey:"privacy",path:"/privacy-policy"},{key:"terms",title:Da,titleKey:"terms",path:"/terms"},{key:"data",title:Da,titleKey:"deletion",path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(te=>{var N;return r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(te.path),l(!1)},onMouseOver:O=>{O.currentTarget.style.background="#f3f0ff",O.currentTarget.style.color="#6B5BFF"},onMouseOut:O=>{O.currentTarget.style.background="#fff",O.currentTarget.style.color="#232946"},children:te.titleKey?((N=te.title[n])==null?void 0:N[te.titleKey])||te.title["zh-TW"][te.titleKey]:te.title[n]||te.title["zh-TW"]},te.key)})]})]})]})]}):r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsx("div",{style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":n==="zh-TW"||n==="zh-CN"?" Restarter ":n==="en"?"Learn about Restarter platform":n==="ja"?"Restarter ":n==="ko"?"Restarter   ":n==="th"?" Restarter":n==="vi"?"Tm hiu v nn tng Restarter":n==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:n==="zh-TW"?" Restarter":n==="zh-CN"?" Restarter":n==="en"?" RestarterWho We Are":n==="ja"?" Restarter":n==="ko"?" Restarter ":n==="th"?" Restarter":n==="vi"?" RestarterChng ti l ai":n==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":n==="zh-TW"?"":n==="zh-CN"?"":n==="en"?"Provide feedback and suggestions":n==="ja"?"":n==="ko"?"  ":n==="th"?"":n==="vi"?"Cung cp phn hi v  xut":n==="ms"?"Berikan maklum balas dan cadangan":"Praebe consilia et suggestiones",role:"button",children:n==="zh-TW"?" ":n==="zh-CN"?" ":n==="en"?" FeedbackWe Want to Hear You":n==="ja"?" ":n==="ko"?"    ":n==="th"?" ":n==="vi"?" Hp gp Chng ti mun lng nghe bn":n==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),o?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:o.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:o.displayName||o.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(e)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:AS[n]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:n==="zh-TW"?"/":n==="zh-CN"?"/":n==="en"?"Register / Login":n==="ja"?"/":n==="ko"?"/":n==="th"?"/":n==="vi"?"ng k/ng nhp":n==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:p,children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>u(te=>!te),children:[n==="zh-TW"?"":n==="zh-CN"?"":n==="en"?"English":n==="ja"?"":n==="ko"?"":n==="th"?"":n==="vi"?"Ting Vit":n==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),c&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(te=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:te===n?"#6B5BFF":"#232946",fontWeight:te===n?700:500,background:te===n?"#f3f0ff":"#fff"},onClick:()=>{i(te),u(!1)},children:te==="zh-TW"?"":te==="zh-CN"?"":te==="en"?"English":te==="ja"?"":te==="ko"?"":te==="th"?"":te==="vi"?"Ting Vit":te==="ms"?"Bahasa Melayu":"Latin"},te))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:h,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>l(te=>!te),onMouseOver:te=>{te.currentTarget.style.background="#6B5BFF",te.currentTarget.style.color="#fff"},onMouseOut:te=>{te.currentTarget.style.background="#fff",te.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),a&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:n==="zh-TW"||n==="zh-CN"?"":n==="en"?"Legal Documents":n==="ja"?"":n==="ko"?" ":n==="th"?"":n==="vi"?"Ti liu php l":n==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:Da,titleKey:"privacy",path:"/privacy-policy"},{key:"terms",title:Da,titleKey:"terms",path:"/terms"},{key:"data",title:Da,titleKey:"deletion",path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(te=>{var N;return r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(te.path),l(!1)},onMouseOver:O=>{O.currentTarget.style.background="#f3f0ff",O.currentTarget.style.color="#6B5BFF"},onMouseOut:O=>{O.currentTarget.style.background="#fff",O.currentTarget.style.color="#232946"},children:te.titleKey?((N=te.title[n])==null?void 0:N[te.titleKey])||te.title["zh-TW"][te.titleKey]:te.title[n]||te.title["zh-TW"]},te.key)})]})]})]}),r.jsx(D6,{onTestModeChange:y}),r.jsxs("div",{style:{width:"100%",maxWidth:500,margin:"120px auto 20px auto",padding:"16px 24px",background:"rgba(255,255,255,0.95)",borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},children:[r.jsxs("h1",{style:{fontWeight:900,fontSize:24,color:"#6B5BFF",margin:0,lineHeight:1,textShadow:"0 2px 8px #6B5BFF88",textAlign:"center"},children:[r.jsx("span",{role:"img","aria-label":"mission",children:""})," "]}),r.jsx("p",{style:{fontSize:14,color:"#666",margin:"8px 0 0 0",textAlign:"center",lineHeight:1.4,fontWeight:400,whiteSpace:"nowrap"},children:""})]}),r.jsxs("div",{style:{maxWidth:600,margin:"0 auto",padding:I?"1rem 0 2rem 0":"2rem 0 2rem 0",background:"rgba(255,255,255,0.92)",borderRadius:24,boxShadow:"0 8px 32px rgba(0,0,0,0.08)",marginTop:I?"120px":"20px"},children:[r.jsx("h1",{style:{textAlign:"center",fontWeight:700,fontSize:"2rem",marginBottom:8},children:T.title}),r.jsx("div",{style:{textAlign:"center",color:"#666",marginBottom:32},children:T.subtitle}),r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:32,boxShadow:"0 2px 8px #0001",marginBottom:24},children:[r.jsx("div",{style:{fontWeight:700,fontSize:"1.3rem",color:"#2a5d8f",marginBottom:8},children:(Q==null?void 0:Q.title)||""}),r.jsx("div",{style:{color:"#333",marginBottom:24},children:(Q==null?void 0:Q.desc)||""}),r.jsxs("form",{onSubmit:X,children:[r.jsx("textarea",{value:v,onChange:te=>z(te.target.value),placeholder:(Q==null?void 0:Q.placeholder)||"",style:{width:"100%",minHeight:100,borderRadius:8,border:"1px solid #ccc",padding:12,marginBottom:16},required:!0}),r.jsx("button",{type:"submit",disabled:R||!v,style:{width:"100%",background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:18,border:"none",borderRadius:8,padding:"12px 0",cursor:R?"not-allowed":"pointer",opacity:R?.99:1,filter:"none",textShadow:"none",transition:"background 0.18s"},children:R?T.loading:T.submit})]}),_&&r.jsx("div",{style:{marginTop:24,background:"#f5f5f5",borderRadius:8,padding:16,color:"#2a5d8f"},children:_}),_&&x<(((he=T.steps)==null?void 0:he.length)||0)-1&&r.jsx("button",{onClick:de,style:{marginTop:16,width:"100%",background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:16,border:"none",borderRadius:8,padding:"10px 0",cursor:"pointer",transition:"background 0.18s"},children:T.next}),_&&x===(((ve=T.steps)==null?void 0:ve.length)||0)-1&&r.jsxs("div",{style:{marginTop:24,textAlign:"center",color:"#e6b800",fontWeight:700,fontSize:20},children:[T.finish,r.jsx("br",{}),r.jsx("span",{style:{fontSize:16,color:"#888"},children:T.finishSub}),A&&r.jsx(V,{}),r.jsx("div",{style:{marginTop:24},children:r.jsx("button",{onClick:()=>{b(0),z(""),P([]),S("")},style:{background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:16,border:"none",borderRadius:8,padding:"10px 32px",cursor:"pointer",marginTop:8,boxShadow:"0 2px 8px #0001",transition:"background 0.18s"},children:T.retry})})]})]}),r.jsx("div",{style:{textAlign:"center",color:"#aaa",fontSize:14},children:(T.steps||[]).map((te,N)=>r.jsx("span",{style:{display:"inline-block",width:18,height:18,borderRadius:"50%",background:N<=x?"#8ec6f7":"#e0e0e0",margin:"0 4px",border:N===x?"2px solid #2a5d8f":"none",transition:"all 0.2s"}},N))})]}),_&&x===(((be=T.steps)==null?void 0:be.length)||0)-1&&A&&r.jsx(V,{})]})}const PO={encouragement:"/videos/encouragement.mp4",reproach:"/videos/reproach.mp4",motivation:"/videos/motivation.mp4",disappointment:"/videos/disappointment.mp4",joy:"/videos/joy.mp4",lost:"/videos/lost.mp4",breakthrough:"/videos/breakthrough.mp4",clarity:"/videos/clarity.mp4",reluctance:"/videos/reluctance.mp4",confusion:"/videos/confusion.mp4",affection:"/videos/affection.mp4",regret:"/videos/regret.mp4",admiration:"/videos/admiration.mp4",teasing:"/videos/teasing.mp4"};function FO(a){var l=a,{reactionType:t,onEnd:e,style:n,className:i="",autoPlay:o=!0}=l,s=Av(l,["reactionType","onEnd","style","className","autoPlay"]);const c=m.useRef(null);return m.useEffect(()=>{o&&c.current&&(c.current.currentTime=0,c.current.play())},[t,o]),r.jsx("div",We(ke({className:`video-reaction-player ${i}`,style:ke({position:"fixed",left:0,top:0,width:"100vw",height:"100vh",zIndex:3e3,background:"rgba(0,0,0,0.32)",display:"flex",alignItems:"center",justifyContent:"center"},n)},s),{children:r.jsx("video",{ref:c,src:PO[t],style:{maxWidth:"90vw",maxHeight:"80vh",borderRadius:18,boxShadow:"0 8px 32px #0008",background:"#000"},autoPlay:o,onEnded:e,controls:!1,playsInline:!0})}))}const M6=m.createContext({setVideoReaction:()=>{}});function zO(){return m.useContext(M6)}function NO({children:t}){const[e,n]=m.useState(null);return r.jsxs(M6.Provider,{value:{setVideoReaction:n},children:[t,e&&r.jsx(FO,{reactionType:e,onEnd:()=>n(null)})]})}const Dt={backToHome:{"zh-TW":" ","zh-CN":" ",ja:" ",en:" Home",ko:"  ",th:" ",vi:" V trang ch",ms:" Kembali ke Laman Utama",la:" Ad domum redire"},back:{"zh-TW":" ","zh-CN":" ",ja:" ",en:" Back",ko:"  ",th:" ",vi:" Quay li",ms:" Kembali",la:" Redire"},logout:{"zh-TW":"","zh-CN":"",ja:"",en:"Logout",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},pageTitle:{"zh-TW":" PairTalk","zh-CN":" PairTalk",ja:" PairTalk",en:"PairTalk",ko:"",th:"",vi:"Tr chuyn i",ms:"PairTalk",la:"PairTalk"},subtitle:{"zh-TW":"","zh-CN":"",en:"Friendship after hardship is the most precious, no one is afraid to take the first step!",ja:"",ko:"    ,        !",th:" !",vi:"Tnh bn sau gian kh l qu gi nht, khng ai ngi bc bc u tin!",ms:"Persahabatan selepas kesusahan adalah yang paling berharga, tiada siapa yang takut untuk mengambil langkah pertama!",la:"Amicitia post aerumnas pretiosissima est, nemo primum gradum timere metuit!"},matchStatus:{"zh-TW":"","zh-CN":"",ja:"",en:"Match Status",ko:" ",th:"",vi:"Tnh trng ghp i",ms:"Status Padanan",la:"Status Par"},empty:{"zh-TW":"...","zh-CN":"...",en:"No matches yet. Waiting for a companion...",ja:"...",ko:"  .   ...",th:" ...",vi:"Cha c ai c ghp i. ang ch h thng tm bn ng hnh...",ms:"Tiada padanan lagi. Menunggu teman...",la:"Nulli pares adhuc. Socium exspectans..."},todayMatch:{"zh-TW":"","zh-CN":"",ja:"",en:"Today's Match:",ko:" :",th:":",vi:"Ghp i hm nay:",ms:"Padanan Hari Ini:",la:"Par Hodiernus:"},timeLeft:{"zh-TW":"","zh-CN":"",ja:"",en:"Time Left:",ko:" :",th:":",vi:"Thi gian cn li:",ms:"Masa Tinggal:",la:"Tempus Reliquum:"},archive:{"zh-TW":"","zh-CN":"",ja:"",en:"Archive",ko:"",th:"",vi:"Lu tr",ms:"Arkib",la:"Archivum"},rematch:{"zh-TW":"","zh-CN":"",ja:"",en:"Rematch",ko:"",th:"",vi:"Ghp li",ms:"Padan semula",la:"Repar"},history:{"zh-TW":"","zh-CN":"",ja:"",en:"History",ko:"",th:"",vi:"Lch s",ms:"Sejarah",la:"Historia"},viewDetails:{"zh-TW":"","zh-CN":"",ja:"",en:"View Details",ko:"  ",th:"",vi:"Xem chi tit",ms:"Lihat Butiran",la:"Singula Videre"},hideDetails:{"zh-TW":"","zh-CN":"",ja:"",en:"Hide",ko:"",th:"",vi:"n",ms:"Sembunyi",la:"Celare"},nickname:{"zh-TW":"","zh-CN":"",ja:"",en:"Nickname",ko:"",th:"",vi:"Bit danh",ms:"Nama Samaran",la:"Agnomen"},country:{"zh-TW":"","zh-CN":"",ja:"",en:"Country",ko:"",th:"",vi:"Quc gia",ms:"Negara",la:"Natio"},age:{"zh-TW":"","zh-CN":"",ja:"",en:"Age",ko:"",th:"",vi:"Tui",ms:"Umur",la:"Aetas"},gender:{"zh-TW":"","zh-CN":"",ja:"",en:"Gender",ko:"",th:"",vi:"Gii tnh",ms:"Jantina",la:"Genus"},interest:{"zh-TW":"","zh-CN":"",ja:"",en:"Interest",ko:"",th:"",vi:"S thch",ms:"Minat",la:"Studium"},eventType:{"zh-TW":"","zh-CN":"",ja:"",en:"Event Type",ko:" ",th:"",vi:"Loi s kin",ms:"Jenis Acara",la:"Genus Eventus"},bio:{"zh-TW":"","zh-CN":"",ja:"",en:"Bio",ko:"",th:"",vi:"Tiu s",ms:"Bio",la:"Bio"},sendGift:{"zh-TW":"","zh-CN":"",ja:"",en:"Send Gift",ko:" ",th:"",vi:"Gi qu",ms:"Hantar Hadiah",la:"Donum Mittere"},sendEmail:{"zh-TW":"Email","zh-CN":"Email",ja:"",en:"Send Email",ko:" ",th:"",vi:"Gi Email",ms:"Hantar E-mel",la:"Epistulam Mittere"},next:{"zh-TW":"","zh-CN":"",ja:"",en:"Next",ko:"",th:"",vi:"Tip",ms:"Seterusnya",la:"Proximus"},lastPage:{"zh-TW":"","zh-CN":"",ja:"",en:"Last page",ko:" ",th:"",vi:"Trang cui",ms:"Halaman terakhir",la:"Pagina Ultima"}},DO=[{id:1,partner:"",status:"active",aiGuide:""},{id:2,partner:"Sandy",status:"archived",aiGuide:""}],If=[{id:1,nickname:"Alice",country:"",age:28,gender:"female",email:"alice@example.com",bio:"",interest:"",eventType:"",avatar:"/avatars/female1.jpg"},{id:2,nickname:"Bob",country:"",age:32,gender:"male",email:"bob@example.com",bio:"",interest:"",eventType:"",avatar:"/avatars/male1.jpg"}],FS={"zh-TW":{male:"",female:"",other:""},"zh-CN":{male:"",female:"",other:""},en:{male:"Male",female:"Female",other:"Other"},ja:{male:"",female:"",other:""},ko:{male:"",female:"",other:""},th:{male:"",female:"",other:""},vi:{male:"Nam",female:"N",other:"Khc"},ms:{male:"Lelaki",female:"Perempuan",other:"Lain-lain"},la:{male:"Mas",female:"Femina",other:"Aliud"}},zS=[{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],MO={"zh-TW":"","zh-CN":"",en:"yrs",ja:"",ko:"",th:"",vi:"tui",ms:"tahun",la:"anni"};function WO(){var R,E,A,B;const t=tt(),e=Ze(),n=((R=e.currentUser)==null?void 0:R.email)||"",i=dt(),[o,s]=m.useState(JSON.parse(localStorage.getItem("pairs")||"[]")||DO),[a,l]=m.useState(300),[c,u]=m.useState(((E=o.find(I=>I.status==="active"))==null?void 0:E.id)||null),[h,p]=m.useState("AI"),[g,y]=m.useState(0),k=If[g],[j,T]=m.useState(!1),[x,b]=m.useState(zS[0].value),{setVideoReaction:v}=zO();mn.useEffect(()=>{if(c){const I=setInterval(()=>l(re=>re>0?re-1:0),1e3);return()=>clearInterval(I)}},[c]);const z=I=>{s(o.map(re=>re.id===I?We(ke({},re),{status:"archived"}):re)),localStorage.setItem("pairs",JSON.stringify(o.map(re=>re.id===I?We(ke({},re),{status:"archived"}):re))),v("disappointment")},D=()=>{v("breakthrough")},P=()=>{alert(`${x}  ${k.nickname}`)},_=()=>{window.location.href=`mailto:${k.email}?subject=PairTalk&body=Hi${n?`&from=${n}`:""}`},S=()=>{if(If.length<=1||g===If.length-1){alert(Dt.lastPage[i]);return}T(!1),y(I=>I+1)};return r.jsxs("div",{className:"modern-bg",style:{background:"url('/valley.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsxs("div",{style:{position:"absolute",top:0,left:0,zIndex:100,display:"flex",alignItems:"center",padding:"18px 32px 0 32px",background:"transparent"},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/"),style:{fontWeight:700,fontSize:18,padding:"6px 16px",borderRadius:8,border:"1.5px solid #6B5BFF",background:"#fff",color:"#6B5BFF",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s",marginRight:8},onMouseOver:I=>{I.currentTarget.style.background="#6B5BFF",I.currentTarget.style.color="#fff"},onMouseOut:I=>{I.currentTarget.style.background="#fff",I.currentTarget.style.color="#6B5BFF"},children:Dt.backToHome[i]}),window.location.pathname!=="/pairtalk"&&r.jsx("button",{className:"topbar-btn",onClick:()=>t(-1),style:{fontWeight:700,fontSize:18,padding:"6px 16px",borderRadius:8,border:"1.5px solid #6B5BFF",background:"#fff",color:"#6B5BFF",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s",marginLeft:8},onMouseOver:I=>{I.currentTarget.style.background="#6B5BFF",I.currentTarget.style.color="#fff"},onMouseOut:I=>{I.currentTarget.style.background="#fff",I.currentTarget.style.color="#6B5BFF"},children:Dt.back[i]})]}),r.jsxs("div",{style:{position:"absolute",top:0,right:0,zIndex:100,display:"flex",alignItems:"center",padding:"18px 32px 0 32px",background:"transparent",gap:12},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(e),localStorage.clear(),window.location.href="/"}),style:{fontWeight:700,fontSize:18,padding:"6px 16px",borderRadius:8,border:"1.5px solid #6B5BFF",background:"#fff",color:"#6B5BFF",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s"},onMouseOver:I=>{I.currentTarget.style.background="#6B5BFF",I.currentTarget.style.color="#fff"},onMouseOut:I=>{I.currentTarget.style.background="#fff",I.currentTarget.style.color="#6B5BFF"},children:Dt.logout[i]}),r.jsx(Ir,{})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[r.jsxs("h2",{style:{fontSize:"2.2rem",fontWeight:900,color:"#6B5BFF",textShadow:"0 2px 12px #6B5BFF88, 0 4px 24px #0008",letterSpacing:1,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px #6B5BFF22",padding:"12px 32px",margin:0,marginBottom:24,display:"flex",alignItems:"center",gap:12},children:[" ",Dt.pageTitle[i]]}),r.jsxs("div",{style:{maxWidth:540,width:"100%",background:"#fff",borderRadius:16,padding:32,boxShadow:"0 4px 24px #0002",display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx("div",{style:{fontSize:22,color:"#6B5BFF",fontWeight:900,marginBottom:24,textAlign:"center",textShadow:"0 2px 12px #6B5BFF88, 0 4px 24px #0008"},children:Dt.subtitle[i]}),r.jsx("h2",{style:{fontSize:28,fontWeight:900,marginBottom:18},children:Dt.pageTitle[i]}),r.jsxs("div",{style:{marginTop:18},children:[r.jsx("b",{children:Dt.matchStatus[i]}),r.jsx("div",{style:{marginTop:8},children:Dt.empty[i]})]}),c?r.jsxs("div",{style:{marginBottom:16},children:[r.jsx("b",{children:Dt.todayMatch[i]})," ",(A=o.find(I=>I.id===c))==null?void 0:A.partner,r.jsxs("div",{style:{marginTop:8,color:"#6B5BFF"},children:[Dt.timeLeft[i],Math.floor(a/60),":",(a%60).toString().padStart(2,"0")]}),r.jsx("div",{style:{marginTop:8,color:"#23c6e6"},children:(B=o.find(I=>I.id===c))==null?void 0:B.aiGuide}),r.jsx("div",{style:{marginTop:8,color:"#614425"},children:h}),r.jsx("button",{onClick:()=>z(c),style:{marginTop:10,borderRadius:8,background:"#eee",color:"#6B5BFF",border:"none",fontWeight:700,padding:"6px 18px"},children:Dt.archive[i]}),r.jsx("button",{onClick:D,style:{marginTop:10,marginLeft:10,borderRadius:8,background:"#6B5BFF",color:"#fff",border:"none",fontWeight:700,padding:"6px 18px"},children:Dt.rematch[i]})]}):r.jsx("div",{style:{color:"#614425",fontSize:18,textAlign:"center",marginTop:40},children:Dt.empty[i]}),r.jsxs("div",{style:{marginTop:18},children:[r.jsx("b",{children:Dt.history[i]}),r.jsx("ul",{style:{marginTop:8,paddingLeft:0,listStyle:"none"},children:o.filter(I=>I.status==="archived").map((I,re)=>r.jsxs("li",{style:{background:"#f7f7ff",borderRadius:8,padding:10,marginBottom:8},children:[r.jsx("div",{style:{fontWeight:700},children:I.partner}),r.jsx("div",{style:{color:"#614425",marginTop:4},children:I.aiGuide})]},re))})]}),r.jsxs("div",{style:{width:"100%",maxWidth:420,margin:"0 auto",background:"#f7f7ff",borderRadius:16,padding:24,boxShadow:"0 2px 12px #6B5BFF11",marginBottom:24,textAlign:"center",position:"relative"},children:[r.jsx("img",{src:k.avatar,alt:"avatar",style:{width:72,height:72,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF",background:"#eee",marginBottom:12}}),r.jsx("div",{style:{fontWeight:700,fontSize:20,color:"#6B5BFF",marginBottom:6},children:k.nickname}),r.jsxs("div",{style:{color:"#614425",fontSize:16,marginBottom:6},children:[k.country," / ",k.age,MO[i]," / ",FS[i][k.gender]]}),r.jsx("button",{onClick:()=>T(I=>!I),style:{margin:"8px 0",padding:"6px 18px",borderRadius:8,fontWeight:700,background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",cursor:"pointer",fontSize:15,transition:"background 0.18s, color 0.18s, box-shadow 0.18s"},onMouseOver:I=>{I.currentTarget.style.background="#6B5BFF",I.currentTarget.style.color="#fff",I.currentTarget.style.boxShadow="0 6px 32px #6B5BFF99"},onMouseOut:I=>{I.currentTarget.style.background="#fff",I.currentTarget.style.color="#6B5BFF",I.currentTarget.style.boxShadow="none"},children:j?Dt.hideDetails[i]:Dt.viewDetails[i]}),j&&r.jsxs("div",{style:{marginTop:8,color:"#232946",fontSize:15,background:"#fff",borderRadius:8,padding:12,boxShadow:"0 2px 8px #6B5BFF11",display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[r.jsx("img",{src:k.avatar,alt:"avatar",style:{width:72,height:72,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF",background:"#eee",marginBottom:6}}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.nickname[i],""]}),k.nickname]}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.country[i],""]}),k.country]}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.age[i],""]}),k.age]}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.gender[i],""]}),FS[i][k.gender]]}),r.jsxs("div",{children:[r.jsx("b",{children:"Email"}),k.email]}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.interest[i],""]}),k.interest]}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.eventType[i],""]}),k.eventType]}),r.jsxs("div",{children:[r.jsxs("b",{children:[Dt.bio[i],""]}),k.bio]})]}),r.jsxs("div",{style:{marginTop:14,display:"flex",flexDirection:"row",gap:10,justifyContent:"center",alignItems:"center"},children:[r.jsx("select",{value:x,onChange:I=>b(I.target.value),style:{padding:"6px 12px",borderRadius:8,border:"1.5px solid #6B5BFF",fontSize:18},children:zS.map(I=>r.jsx("option",{value:I.value,children:I.label},I.value))}),r.jsx("button",{onClick:P,style:{padding:"6px 18px",borderRadius:8,fontWeight:700,background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",fontSize:16,transition:"background 0.18s, box-shadow 0.18s"},onMouseOver:I=>{I.currentTarget.style.background="linear-gradient(135deg, #3a2fff 60%, #0e7fd6 100%)",I.currentTarget.style.boxShadow="0 6px 32px #6B5BFF99"},onMouseOut:I=>{I.currentTarget.style.background="linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",I.currentTarget.style.boxShadow="none"},children:Dt.sendGift[i]}),r.jsx("button",{onClick:_,style:{padding:"6px 18px",borderRadius:8,fontWeight:700,background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",fontSize:16,transition:"background 0.18s, color 0.18s, box-shadow 0.18s"},onMouseOver:I=>{I.currentTarget.style.background="#6B5BFF",I.currentTarget.style.color="#fff",I.currentTarget.style.boxShadow="0 6px 32px #6B5BFF99"},onMouseOut:I=>{I.currentTarget.style.background="#fff",I.currentTarget.style.color="#6B5BFF",I.currentTarget.style.boxShadow="none"},children:Dt.sendEmail[i]})]}),r.jsx("button",{onClick:S,style:{position:"absolute",right:18,bottom:0,transform:"translateY(60px)",padding:"8px 24px",borderRadius:8,fontWeight:700,background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",fontSize:16,boxShadow:"0 2px 8px #6B5BFF33",transition:"background 0.18s, box-shadow 0.18s, transform 0.18s",cursor:"pointer"},onMouseOver:I=>{I.currentTarget.style.background="linear-gradient(135deg, #3a2fff 60%, #0e7fd6 100%)",I.currentTarget.style.boxShadow="0 6px 32px #6B5BFF99",I.currentTarget.style.transform="translateY(55px) scale(1.04)"},onMouseOut:I=>{I.currentTarget.style.background="linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",I.currentTarget.style.boxShadow="0 2px 8px #6B5BFF33",I.currentTarget.style.transform="translateY(60px)"},children:Dt.next[i]})]})]})]}),r.jsx("div",{style:{width:"100%",margin:"0 auto",marginTop:24,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>t("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>t("/terms"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:"/"}),r.jsx("span",{onClick:()=>t("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>t("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" Restarter"}),r.jsx("span",{onClick:()=>t("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" "})]})})]})}const ws={pageTitle:{"zh-TW":" SkillBox","zh-CN":" SkillBox",en:"SkillBox Scenario Room",ja:" SkillBox",ko:"  SkillBox",th:" SkillBox",vi:"Phng m phng tnh hung SkillBox",ms:"Bilik Senario SkillBox",la:"Camera Scaenarii SkillBox"},subtitle:{"zh-TW":"","zh-CN":"",en:"Hone your conversation skills here for any challenge.",ja:"",ko:"      .",th:"",vi:"Rn luyn k nng tr chuyn ca bn  y cho mi th thch.",ms:"Asah kemahiran perbualan anda di sini untuk sebarang cabaran.",la:"Hic peritiam colloquii tui exacue ad quamvis provocationem."},selectScenario:{"zh-TW":"","zh-CN":"",en:"Select a scenario to start practicing",ja:"",ko:"   ",th:"",vi:"Chn mt kch bn  bt u luyn tp",ms:"Pilih senario untuk mula berlatih",la:"Scaenarium elige ut exercere incipias"},startPractice:{"zh-TW":"","zh-CN":"",en:"Enter Simulation",ja:"",ko:" ",th:"",vi:"Vo m phng",ms:"Masuk Simulasi",la:"Intra Simulationem"},scenarioDifficulty:{"zh-TW":"","zh-CN":"",en:"Difficulty",ja:"",ko:"",th:"",vi:" kh",ms:"Kesukaran",la:"Difficultas"},cancelButton:{"zh-TW":"","zh-CN":"",en:"Cancel",ja:"",ko:"",th:"",vi:"Hy",ms:"Batal",la:"Abstinere"}};function LO(){var z,D,P;const t=tt();Ze();const{lang:e}=dt(),n=e||localStorage.getItem("lang")||"zh-TW",[i,o]=m.useState(null),[s,a]=m.useState([]),[l,c]=m.useState(!0),[u,h]=m.useState(!1),[p,g]=m.useState(null),[y,k]=m.useState(!1),j=m.useRef(null),T={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"};m.useEffect(()=>{C(this,null,function*(){c(!0);try{const S=yield fetch(`/locales/${n}/scenarios.json`);if(!S.ok)throw new Error("Failed to fetch scenarios");const R=yield S.json();a(R)}catch(S){console.error("Error fetching scenarios:",S),a([])}finally{c(!1)}})},[n]),m.useEffect(()=>{if(!y)return;const _=S=>{j.current&&!j.current.contains(S.target)&&k(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[y]);const x=_=>{g(_),o(_.id),h(!0)},b=()=>{i?t(`/skillbox/${i}`):alert(ws.selectScenario[n])},v=()=>{h(!1),g(null),o(null)};return l?r.jsx("div",{children:"Loading scenarios..."}):r.jsxs("div",{className:"modern-bg",style:{background:"url('/plains.png') center center / cover no-repeat fixed",minHeight:"100vh",width:"100vw",overflow:"hidden",position:"relative"},children:[r.jsx("div",{className:"mobile-shared-header",children:r.jsx(Ar,{})}),window.innerWidth>768?r.jsxs("div",{className:"desktop-topbar",children:[r.jsx("div",{className:"fixed-logo-box",style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",className:"fixed-logo-img",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},children:n==="zh-TW"?" Restarter":n==="zh-CN"?" Restarter":n==="en"?" RestarterWho We Are":n==="ja"?" Restarter":n==="ko"?" Restarter ":n==="th"?" Restarter":n==="vi"?" RestarterChng ti l ai":n==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},children:n==="zh-TW"?" ":n==="zh-CN"?" ":n==="en"?" FeedbackWe Want to Hear You":n==="ja"?" ":n==="ko"?"    ":n==="th"?" ":n==="vi"?" Hp gp Chng ti mun lng nghe bn":n==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),Ze().currentUser?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:((z=Ze().currentUser)==null?void 0:z.photoURL)||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:((D=Ze().currentUser)==null?void 0:D.displayName)||((P=Ze().currentUser)==null?void 0:P.email)||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Ze().signOut()}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:T[n]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:n==="zh-TW"?"/":n==="zh-CN"?"/":n==="en"?"Register / Login":n==="ja"?"/":n==="ko"?"/":n==="th"?"/":n==="vi"?"ng k/ng nhp":n==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:j,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>k(_=>!_),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),y&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:""})}),[{key:"privacy",title:"",path:"/privacy-policy"},{key:"terms",title:"",path:"/terms"},{key:"data",title:"",path:"/data-deletion"},{key:"ai",title:"AI",path:"/ai-statement"},{key:"mental",title:"",path:"/mental-health-disclaimer"},{key:"cookie",title:"Cookie",path:"/cookie-policy"},{key:"children",title:"",path:"/children-privacy"},{key:"international",title:"",path:"/international-users"},{key:"security",title:"",path:"/security-statement"},{key:"update",title:"",path:"/update-notification"}].map(_=>r.jsx("div",{style:{padding:"8px 16px",cursor:"pointer",color:"#232946",fontSize:"13px",transition:"all 0.2s ease",borderRadius:"4px",margin:"2px 8px"},onClick:()=>{t(_.path),k(!1)},children:_.title},_.key))]})]})]})]}):null,window.innerWidth>768?r.jsx("div",{style:{width:"100%",maxWidth:500,margin:"120px auto 0 auto",padding:"16px 24px",background:"rgba(255,255,255,0.95)",borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:r.jsxs("h1",{style:{fontWeight:900,fontSize:18,color:"#6B5BFF",margin:0,lineHeight:1,textShadow:"0 2px 8px #6B5BFF88",textAlign:"center"},children:[r.jsx("span",{role:"img","aria-label":"skillbox",children:""})," ",ws.pageTitle[n]]})}):null,r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:"100%",padding:window.innerWidth<=768?"16px":"24px",marginTop:window.innerWidth<=768?80:20,minHeight:"calc(100vh - 120px)",overflowY:"auto"},children:[window.innerWidth<=768&&r.jsxs("h1",{style:{fontSize:22,fontWeight:900,color:"#6B5BFF",marginBottom:12,textAlign:"center",background:"rgba(255,255,255,0.95)",padding:"12px 20px",borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsx("span",{role:"img","aria-label":"skillbox",children:""}),"  SkillBox"]}),r.jsx("div",{style:{fontSize:16,color:"#4A4A4A",fontWeight:500,marginBottom:20,textAlign:"center",background:"rgba(255,255,255,0.7)",padding:"8px 16px",borderRadius:8},children:ws.subtitle[n]}),r.jsxs("div",{style:{maxWidth:800,width:window.innerWidth<=768?"95%":"90%",background:"#fff",borderRadius:16,padding:window.innerWidth<=768?"20px 16px":"24px 32px",boxShadow:"0 4px 24px #0002",display:"flex",flexDirection:"column",alignItems:"center",margin:window.innerWidth<=768?"0 8px":"0"},children:[r.jsx("h3",{style:{fontSize:24,fontWeight:700,color:"#6B5BFF",marginBottom:24},children:ws.selectScenario[n]}),r.jsx("div",{style:{width:"100%",display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(2, 1fr)":"repeat(auto-fit, minmax(200px, 1fr))",gap:window.innerWidth<=768?"16px":"24px"},children:s.map(_=>r.jsxs("div",{onClick:()=>x(_),style:{background:i===_.id?"linear-gradient(135deg, #6B5BFF 0%, #4D8FFF 100%)":"#e8e6ff",color:i===_.id?"#fff":"#2D2D2D",borderRadius:12,padding:window.innerWidth<=768?16:20,boxShadow:i===_.id?"0 8px 24px #6B5BFF66":"0 4px 12px #0000001a",cursor:"pointer",transition:"all 0.3s ease",border:i===_.id?"2px solid #fff":"2px solid transparent",transform:i===_.id?"translateY(-5px)":"none",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:window.innerWidth<=768?36:48,marginBottom:window.innerWidth<=768?8:12},children:_.emoji}),r.jsx("h4",{style:{fontSize:window.innerWidth<=768?16:18,fontWeight:700,margin:"0 0 8px 0"},children:_.title}),r.jsx("p",{style:{fontSize:window.innerWidth<=768?12:14,margin:"0 0 12px 0",opacity:.8,minHeight:window.innerWidth<=768?"32px":"40px"},children:_.description}),r.jsxs("div",{style:{fontWeight:600,fontSize:14,padding:"4px 12px",borderRadius:16,background:i===_.id?"rgba(255,255,255,0.2)":"rgba(107, 91, 255, 0.1)",color:i===_.id?"#fff":"#6B5BFF"},children:[ws.scenarioDifficulty[n],": ",_.difficulty]})]},_.id))})]})]}),u&&p&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:v,children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:"32px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",maxWidth:400,width:"90%",textAlign:"center",position:"relative"},onClick:_=>_.stopPropagation(),children:[r.jsx("button",{onClick:v,style:{position:"absolute",top:12,right:12,background:"none",border:"none",fontSize:24,cursor:"pointer",color:"#999",width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background-color 0.2s"},onMouseOver:_=>_.currentTarget.style.backgroundColor="#f0f0f0",onMouseOut:_=>_.currentTarget.style.backgroundColor="transparent",children:""}),r.jsx("div",{style:{fontSize:48,marginBottom:16},children:p.emoji}),r.jsx("h3",{style:{fontSize:20,fontWeight:700,color:"#6B5BFF",margin:"0 0 8px 0"},children:p.title}),r.jsx("p",{style:{fontSize:14,color:"#666",margin:"0 0 16px 0",lineHeight:1.5},children:p.description}),r.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[r.jsx("button",{onClick:v,style:{padding:"10px 20px",borderRadius:8,border:"1px solid #ddd",background:"#f8f9fa",color:"#666",cursor:"pointer",fontSize:14,fontWeight:600,transition:"all 0.2s"},onMouseOver:_=>_.currentTarget.style.background="#e9ecef",onMouseOut:_=>_.currentTarget.style.background="#f8f9fa",children:ws.cancelButton[n]||""}),r.jsx("button",{onClick:b,style:{padding:"10px 24px",borderRadius:8,border:"none",background:"linear-gradient(135deg, #6B5BFF 0%, #4D8FFF 100%)",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:700,transition:"all 0.2s",boxShadow:"0 4px 12px rgba(107, 91, 255, 0.3)"},onMouseOver:_=>_.currentTarget.style.transform="translateY(-1px)",onMouseOut:_=>_.currentTarget.style.transform="translateY(0)",children:ws.startPractice[n]})]})]})}),r.jsx("style",{children:`
        @media (min-width: 768px) {
          .mobile-shared-header {
            display: none !important;
          }
        }
        @media (max-width: 767px) {
          .mobile-shared-header {
            display: block !important;
          }
        }
      `})]})}const OO={"zh-TW":r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter "}),r.jsx("h2",{children:""}),r.jsx("p",{children:"Restarter  AI "}),r.jsx("p",{children:""}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("p",{children:""}),r.jsx("h2",{children:"AI "}),r.jsx("p",{children:" AI "}),r.jsxs("ul",{children:[r.jsx("li",{children:" AI "}),r.jsx("li",{children:" AI "}),r.jsx("li",{children:" AI "})]}),r.jsx("p",{children:" AI "}),r.jsx("p",{children:""}),r.jsx("h3",{children:"AI "}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:" AI "}),r.jsx("li",{children:" Restarter "}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:" Restarter "})]}),"zh-CN":r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter "}),r.jsx("h2",{children:""}),r.jsx("p",{children:"Restarter  AI "}),r.jsx("p",{children:""}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("p",{children:""}),r.jsx("h2",{children:"AI "}),r.jsx("p",{children:" AI "}),r.jsxs("ul",{children:[r.jsx("li",{children:" AI "}),r.jsx("li",{children:" AI "}),r.jsx("li",{children:" AI "})]}),r.jsx("p",{children:" AI "}),r.jsx("p",{children:""}),r.jsx("h3",{children:"AI "}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:" AI "}),r.jsx("li",{children:" Restarter "}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:" Restarter "})]}),en:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter Terms of Use and Ex-Offender Declaration"}),r.jsx("h2",{children:"1. Platform Philosophy Statement"}),r.jsx("p",{children:"Restarter is an AI platform dedicated to helping ex-offenders rebuild social, psychological, and life confidence. Through emotional guidance, role-playing, and task challenges, we help users release negative emotions, rebuild goals and confidence, and guide them to gradually build inner motivation and action confidence."}),r.jsx("p",{children:"We believe that every ex-offender deserves respect and a new recognition. Even if you have made mistakes, you will not be labeled here."}),r.jsx("h2",{children:"2. User Identity and Code of Conduct"}),r.jsx("p",{children:"This platform welcomes individuals who have served sentences, undergone rehabilitation, received judicial protection, experienced bullying, or wish to start over due to social exclusion."}),r.jsx("p",{children:"To ensure community safety and trust, the following behaviors are strictly prohibited:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Impersonating others or providing misleading registration information"}),r.jsx("li",{children:"Spreading hate, discrimination, violence, pornography, or illegal content"}),r.jsx("li",{children:"Uploading images that infringe on others' portrait rights or sensitive data"})]}),r.jsx("p",{children:"Those who violate the above terms may have their accounts and access immediately terminated by the platform."}),r.jsx("h2",{children:"3. AI Usage and Responsibility Statement"}),r.jsx("p",{children:"The AI dialogues, suggestions, and role simulations provided by the platform are for companionship, practice, and personal growth reference only, and do not constitute legal, medical, or psychological professional advice."}),r.jsxs("ul",{children:[r.jsx("li",{children:"The platform is not legally responsible for decisions made by users based on AI output"}),r.jsx("li",{children:"The platform does not guarantee that AI dialogues are completely accurate or consistent with real situations"}),r.jsx("li",{children:"Do not distribute AI dialogue content as public reference information"})]}),r.jsx("p",{children:"We have set up basic risk filtering and dialogue restrictions, but AI may still produce biased or misunderstood outputs."}),r.jsx("p",{children:"If you encounter inappropriate content, please notify us through the reporting mechanism, and we will continue to optimize the model."}),r.jsx("h3",{children:"3.1 AI Dialogue Content Usage Guidelines"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Do not ask for or input others' private information (such as address or criminal record)"}),r.jsx("li",{children:"Do not use AI to simulate violence, self-harm, or induce illegal behavior"}),r.jsx("li",{children:"Do not distribute false or fraudulent information in the name of Restarter"}),r.jsx("li",{children:"All dialogue data is used only for anonymous model optimization, not for personal tracking"}),r.jsx("li",{children:"The platform reserves the right to cooperate with legal authorities if necessary"}),r.jsx("li",{children:"Users under 18 must have parental consent to use this platform"}),r.jsx("li",{children:"The platform prohibits automated crawling or unauthorized system integration"}),r.jsx("li",{children:"Users are responsible for the legal risks of the content they input"})]}),r.jsx("h2",{children:"4. Data Processing and Privacy Statement"}),r.jsx("p",{children:"The platform only collects the most basic registration information, such as nickname, email, and language preference."}),r.jsx("p",{children:"All data is stored encrypted and will not be sold to third parties or used for commercial marketing."}),r.jsx("p",{children:"Users can request account deletion at any time and ask the system to clear all their records."}),r.jsx("h2",{children:"5. Account Suspension and Termination Rights"}),r.jsx("p",{children:"The platform reserves the right to terminate any user's account that violates these terms at any time without prior notice."}),r.jsx("p",{children:"If an account is inactive for a long period, the platform will proactively send reminders and reserves the right to suspend the account."}),r.jsx("p",{children:"Users can deactivate their accounts and delete all data records at any time."}),r.jsx("h2",{children:"6. Amendments and Final Interpretation"}),r.jsx("p",{children:"The platform reserves the right to modify these terms at any time in accordance with laws, policies, and service optimization."}),r.jsx("p",{children:"Major changes will be announced on the platform and via email notifications to users."}),r.jsx("p",{children:"The final interpretation of these terms belongs to the Restarter platform."})]}),ja:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter "}),r.jsx("h2",{children:"1. "}),r.jsx("p",{children:"Restarter AI"}),r.jsx("p",{children:""}),r.jsx("h2",{children:"2. "}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("p",{children:""}),r.jsx("h2",{children:"3. AI"}),r.jsx("p",{children:"AI"}),r.jsxs("ul",{children:[r.jsx("li",{children:"AI"}),r.jsx("li",{children:"AI"}),r.jsx("li",{children:"AI"})]}),r.jsx("p",{children:"AI"}),r.jsx("p",{children:""}),r.jsx("h3",{children:"3.1 AI"}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:"AI"}),r.jsx("li",{children:"Restarter"}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:"18"}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:"4. "}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:"5. "}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:"6. "}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:"6. "}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("p",{children:"Restarter"})]}),ko:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter    "}),r.jsx("h2",{children:"1.   "}),r.jsx("p",{children:"Restarter  , ,     AI .  , ,          ,         ."}),r.jsx("p",{children:"        .     ."}),r.jsx("h2",{children:"2.     "}),r.jsx("p",{children:"    ,   ,   ,    ,         ."}),r.jsx("p",{children:"       :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"       "}),r.jsx("li",{children:", , , ,   "}),r.jsx("li",{children:"       "})]}),r.jsx("p",{children:"            ."}),r.jsx("h2",{children:"3. AI    "}),r.jsx("p",{children:"  AI , ,   , ,   ,    ."}),r.jsxs("ul",{children:[r.jsx("li",{children:" AI       "}),r.jsx("li",{children:" AI       "}),r.jsx("li",{children:"AI       "})]}),r.jsx("p",{children:"     , AI     ."}),r.jsx("p",{children:"          ."}),r.jsx("h3",{children:"3.1 AI    "}),r.jsxs("ul",{children:[r.jsx("li",{children:" (,  )  "}),r.jsx("li",{children:"AI   "}),r.jsx("li",{children:"Restarter     "}),r.jsx("li",{children:"      ,   "}),r.jsx("li",{children:"    "}),r.jsx("li",{children:"18    "}),r.jsx("li",{children:"    "}),r.jsx("li",{children:"      "})]}),r.jsx("h2",{children:"4.     "}),r.jsx("p",{children:"  , ,      ."}),r.jsx("p",{children:"   , 3   ."}),r.jsx("p",{children:"       "}),r.jsx("h2",{children:"5.     "}),r.jsx("p",{children:"          ."}),r.jsx("p",{children:"         "}),r.jsx("p",{children:"       "}),r.jsx("h2",{children:"6.     "}),r.jsx("p",{children:"       ."}),r.jsx("p",{children:"      "}),r.jsx("p",{children:"  Restarter  "})]}),th:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter "}),r.jsx("h2",{children:"1. "}),r.jsx("p",{children:"Restarter  AI         "}),r.jsx("p",{children:"  "}),r.jsx("h2",{children:"2. "}),r.jsx("p",{children:"     "}),r.jsx("p",{children:" :"}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:"    "}),r.jsx("li",{children:""})]}),r.jsx("p",{children:" "}),r.jsx("h2",{children:"3.  AI "}),r.jsx("p",{children:"AI      "}),r.jsxs("ul",{children:[r.jsx("li",{children:" AI"}),r.jsx("li",{children:" AI "}),r.jsx("li",{children:" AI "})]}),r.jsx("p",{children:" AI "}),r.jsx("p",{children:"  "}),r.jsx("h3",{children:"3.1  AI"}),r.jsxs("ul",{children:[r.jsx("li",{children:" (  )"}),r.jsx("li",{children:" AI   "}),r.jsx("li",{children:" Restarter "}),r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:" 18  "}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:"4. "}),r.jsx("p",{children:"    "}),r.jsx("p",{children:""}),r.jsx("p",{children:""}),r.jsx("h2",{children:"5. "}),r.jsx("p",{children:""}),r.jsx("p",{children:" "}),r.jsx("p",{children:""}),r.jsx("h2",{children:"6. "}),r.jsx("p",{children:"  "}),r.jsx("p",{children:""}),r.jsx("p",{children:" Restarter"})]}),vi:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter iu khon s dng v Tuyn b hon lng"}),r.jsx("h2",{children:"1. Tuyn b trit l nn tng"}),r.jsx("p",{children:"Restarter l nn tng AI gip ngi hon lng xy dng li s t tin x hi, tm l v cuc sng. Thng qua hng dn cm xc, nhp vai v th thch nhim v, chng ti gip ngi dng gii ta cm xc tiu cc, xy dng li mc tiu v s t tin, ng thi hng dn ngi dng tng bc xy dng ng lc ni ti v s t tin hnh ng."}),r.jsx("p",{children:"Chng ti tin rng mi ngi hon lng u xng ng c tn trng v cng nhn li. D bn tng mc sai lm,  y bn s khng b dn nhn."}),r.jsx("h2",{children:"2. Danh tnh v quy tc hnh vi ca ngi dng"}),r.jsx("p",{children:"Nn tng ny cho n nhng ngi tng b kt n, men thuc, correctionem acceperunt, tutela iudiciali fruuntur, vexationem passi sunt, aut ob exclusionem socialem iterum incipere cupiunt."}),r.jsx("p",{children:"Bagi memastikan keselamatan dan kepercayaan komuniti, haec acta stricte vetantur:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Personae alienae simulationem aut falsam informationem praebere"}),r.jsx("li",{children:"Odium, discriminationem, violentiam, pornographiam, contenta illicita disseminare"}),r.jsx("li",{children:"Imagines iura aliorum vel data sensitiva violantes onerare"})]}),r.jsx("p",{children:"Qui haec violaverint, suggestum statim rationem et usum intercludere potest."}),r.jsx("h2",{children:"3. Usus AI et Declaratio Responsabilitatis"}),r.jsx("p",{children:"Colloquia, consilia, simulationesque AI a suggesto praebita tantum ad comitatum, exercitationem, progressionemque personalem spectant, non ad consilium legale, medicum, psychologicumque."}),r.jsxs("ul",{children:[r.jsx("li",{children:"Suggestum non tenetur de decisionibus ex AI ortis"}),r.jsx("li",{children:"Non praestat colloquia AI semper recta autcongruentia esse"}),r.jsx("li",{children:"Ne dissemines colloquia AI ut informationem publicam"})]}),r.jsx("p",{children:"Filtra periculorum et restrictiones sermonum posuimus, sed AI adhuc praeiudicium aut errorem gignere potest."}),r.jsx("p",{children:"Si quid incommodum inveneris, per mechanismum referendi nos certiorem facias; modelum continue emendabimus."}),r.jsx("h3",{children:"3.1 Praecepta Usus Colloquiorum AI"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Ne quaeras aut inseras informationes privatas aliorum (ut domicilium, delicta)"}),r.jsx("li",{children:"Ne AI adhibeas ad violentiam, sui laesionem, aut actus illicitos simulandos"}),r.jsx("li",{children:"Ne dissemines falsa aut fraudulenta sub nomine Restarter"}),r.jsx("li",{children:"Omnia colloquia ad optimizationem anonymam tantum, non ad tracking personalem"}),r.jsx("li",{children:"Suggestum, si opus sit, cum auctoritatibus legalibus cooperabitur"}),r.jsx("li",{children:"Usoribus minoribus XVIII annis consensus parentum requiritur"}),r.jsx("li",{children:"Automata aut systemata non auctorata vetantur"}),r.jsx("li",{children:"Usor ipse de periculis legalibus contentorum suorum respondet"})]}),r.jsx("h2",{children:"4. Processus Datae et Declaratio Privacy"}),r.jsx("p",{children:"Suggestum tantum colligit notitias adnotationis fundamentales, ut cognomen, email, linguam praeoptatam."}),r.jsx("p",{children:"Omnia data cryptate servantur nec tertiis partibus venduntur nec ad mercaturam adhibentur."}),r.jsx("p",{children:"Usor rationem suam et omnia data delere potest quovis tempore"}),r.jsx("h2",{children:"5. Ius Suspensionis et Terminationis Rationis"}),r.jsx("p",{children:"Suggestum ius habet rationem usoris qui haec violat statim sine praevia notitia suspendere"}),r.jsx("p",{children:"Si ratio diu non utatur, suggestum admonitionem mittet et ius suspensionis retinebit"}),r.jsx("p",{children:"Usor rationem suam et omnia data delere potest quovis tempore"}),r.jsx("h2",{children:"6. Emendationes et Interpretatio Finalis"}),r.jsx("p",{children:"Suggestum ius habet haec emendandi pro legibus, consiliis, et optimizatione servitii"}),r.jsx("p",{children:"Mutationes maximi momenti per systema et email nuntiabuntur"}),r.jsx("p",{children:"Ius interpretationis finalis harum condicionum Restarter suggestui reservatur"})]}),ms:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter Terma Penggunaan dan Pengisytiharan Bekas Banduan"}),r.jsx("h2",{children:"1. Kenyataan Falsafah Platform"}),r.jsx("p",{children:"Restarter ialah platform AI yang membantu bekas banduan membina semula keyakinan sosial, psikologi dan kehidupan. Melalui bimbingan emosi, lakonan peranan dan cabaran tugasan, kami membantu pengguna melepaskan emosi negatif, membina semula matlamat dan keyakinan, serta membimbing mereka membina motivasi dalaman dan keyakinan bertindak secara berperingkat."}),r.jsx("p",{children:"Kami percaya setiap bekas banduan layak dihormati dan diiktiraf semula. Etiamsi peccaveris, hic non amplius notaberis."}),r.jsx("h2",{children:"2. Identiti dan Tatakelakuan Pengguna"}),r.jsx("p",{children:"Platform ini mengalu-alukan individu yang pernah dipenjarakan, abusus vicerunt, correctionem acceperunt, tutela iudiciali fruuntur, vexationem passi sunt, aut ob exclusionem socialem iterum incipere cupiunt."}),r.jsx("p",{children:"Bagi memastikan keselamatan dan kepercayaan komuniti, haec acta stricte vetantur:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Personae alienae simulationem aut falsam informationem praebere"}),r.jsx("li",{children:"Odium, discriminationem, violentiam, pornographiam, contenta illicita disseminare"}),r.jsx("li",{children:"Imagines iura aliorum vel data sensitiva violantes onerare"})]}),r.jsx("p",{children:"Qui haec violaverint, suggestum statim rationem et usum intercludere potest."}),r.jsx("h2",{children:"3. Usus AI et Declaratio Responsabilitatis"}),r.jsx("p",{children:"Colloquia, consilia, simulationesque AI a suggesto praebita tantum ad comitatum, exercitationem, progressionemque personalem spectant, non ad consilium legale, medicum, psychologicumque."}),r.jsxs("ul",{children:[r.jsx("li",{children:"Suggestum non tenetur de decisionibus ex AI ortis"}),r.jsx("li",{children:"Non praestat colloquia AI semper recta autcongruentia esse"}),r.jsx("li",{children:"Ne dissemines colloquia AI ut informationem publicam"})]}),r.jsx("p",{children:"Filtra periculorum et restrictiones sermonum posuimus, sed AI adhuc praeiudicium aut errorem gignere potest."}),r.jsx("p",{children:"Si quid incommodum inveneris, per mechanismum referendi nos certiorem facias; modelum continue emendabimus."}),r.jsx("h3",{children:"3.1 Praecepta Usus Colloquiorum AI"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Ne quaeras aut inseras informationes privatas aliorum (ut domicilium, delicta)"}),r.jsx("li",{children:"Ne AI adhibeas ad violentiam, sui laesionem, aut actus illicitos simulandos"}),r.jsx("li",{children:"Ne dissemines falsa aut fraudulenta sub nomine Restarter"}),r.jsx("li",{children:"Omnia colloquia ad optimizationem anonymam tantum, non ad tracking personalem"}),r.jsx("li",{children:"Suggestum, si opus sit, cum auctoritatibus legalibus cooperabitur"}),r.jsx("li",{children:"Usoribus minoribus XVIII annis consensus parentum requiritur"}),r.jsx("li",{children:"Automata aut systemata non auctorata vetantur"}),r.jsx("li",{children:"Usor ipse de periculis legalibus contentorum suorum respondet"})]}),r.jsx("h2",{children:"4. Processus Datae et Declaratio Privacy"}),r.jsx("p",{children:"Suggestum tantum colligit notitias adnotationis fundamentales, ut cognomen, email, linguam praeoptatam."}),r.jsx("p",{children:"Omnia data cryptate servantur nec tertiis partibus venduntur nec ad mercaturam adhibentur."}),r.jsx("p",{children:"Usor rationem suam et omnia data delere potest quovis tempore"}),r.jsx("h2",{children:"5. Ius Suspensionis et Terminationis Rationis"}),r.jsx("p",{children:"Suggestum ius habet rationem usoris qui haec violat statim sine praevia notitia suspendere"}),r.jsx("p",{children:"Si ratio diu non utatur, suggestum admonitionem mittet et ius suspensionis retinebit"}),r.jsx("p",{children:"Usor rationem suam et omnia data delere potest quovis tempore"}),r.jsx("h2",{children:"6. Emendationes et Interpretatio Finalis"}),r.jsx("p",{children:"Suggestum ius habet haec emendandi pro legibus, consiliis, et optimizatione servitii"}),r.jsx("p",{children:"Mutationes maximi momenti per systema et email nuntiabuntur"}),r.jsx("p",{children:"Ius interpretationis finalis harum condicionum Restarter suggestui reservatur"})]}),la:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter Condiciones Usus et Declaratio Redemptorum"}),r.jsx("h2",{children:"1. Propositum et Philosophia"}),r.jsx("p",{children:"Restarter est suggestum AI adiuuans redemptos fiduciam socialem, animi, vitae restituere. Per ductum animi, partes simulandas, provocationesque, utentes adiuvat ad vitia superanda, metas restituendas, fiduciamque recuperandam, simulque gradatim motivum internum et fiduciam agendi aedificare."}),r.jsx("p",{children:"Censemus omnes redemptos dignos esse honore et recognitione nova. Etiamsi peccaveris, hic non amplius notaberis."}),r.jsx("h2",{children:"2. Identitas et Regulae Usoris"}),r.jsx("p",{children:"Haec suggestum recipit eos qui poenam egerunt, abusus vicerunt, correctionem acceperunt, tutela iudiciali fruuntur, vexationem passi sunt, aut ob exclusionem socialem iterum incipere cupiunt."}),r.jsx("p",{children:"Ad salutem et fidem communitatis tuendam, haec acta stricte vetantur:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Personae alienae simulationem aut falsam informationem praebere"}),r.jsx("li",{children:"Odium, discriminationem, violentiam, pornographiam, contenta illicita disseminare"}),r.jsx("li",{children:"Imagines iura aliorum vel data sensitiva violantes onerare"})]}),r.jsx("p",{children:"Qui haec violaverint, suggestum statim rationem et usum intercludere potest."}),r.jsx("h2",{children:"3. Usus AI et Declaratio Responsabilitatis"}),r.jsx("p",{children:"Colloquia, consilia, simulationesque AI a suggesto praebita tantum ad comitatum, exercitationem, progressionemque personalem spectant, non ad consilium legale, medicum, psychologicumque."}),r.jsxs("ul",{children:[r.jsx("li",{children:"Suggestum non tenetur de decisionibus ex AI ortis"}),r.jsx("li",{children:"Non praestat colloquia AI semper recta autcongruentia esse"}),r.jsx("li",{children:"Ne dissemines colloquia AI ut informationem publicam"})]}),r.jsx("p",{children:"Filtra periculorum et restrictiones sermonum posuimus, sed AI adhuc praeiudicium aut errorem gignere potest."}),r.jsx("p",{children:"Si quid incommodum inveneris, per mechanismum referendi nos certiorem facias; modelum continue emendabimus."}),r.jsx("h3",{children:"3.1 Praecepta Usus Colloquiorum AI"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Ne quaeras aut inseras informationes privatas aliorum (ut domicilium, delicta)"}),r.jsx("li",{children:"Ne AI adhibeas ad violentiam, sui laesionem, aut actus illicitos simulandos"}),r.jsx("li",{children:"Ne dissemines falsa aut fraudulenta sub nomine Restarter"}),r.jsx("li",{children:"Omnia colloquia ad optimizationem anonymam tantum, non ad tracking personalem"}),r.jsx("li",{children:"Suggestum, si opus sit, cum auctoritatibus legalibus cooperabitur"}),r.jsx("li",{children:"Usoribus minoribus XVIII annis consensus parentum requiritur"}),r.jsx("li",{children:"Automata aut systemata non auctorata vetantur"}),r.jsx("li",{children:"Usor ipse de periculis legalibus contentorum suorum respondet"})]}),r.jsx("h2",{children:"4. Processus Datae et Declaratio Privacy"}),r.jsx("p",{children:"Suggestum tantum colligit notitias adnotationis fundamentales, ut cognomen, email, linguam praeoptatam."}),r.jsx("p",{children:"Omnia data cryptate servantur nec tertiis partibus venduntur nec ad mercaturam adhibentur."}),r.jsx("p",{children:"Usor rationem suam et omnia data delere potest quovis tempore"}),r.jsx("h2",{children:"5. Ius Suspensionis et Terminationis Rationis"}),r.jsx("p",{children:"Suggestum ius habet rationem usoris qui haec violat statim sine praevia notitia suspendere"}),r.jsx("p",{children:"Si ratio diu non utatur, suggestum admonitionem mittet et ius suspensionis retinebit"}),r.jsx("p",{children:"Usor rationem suam et omnia data delere potest quovis tempore"}),r.jsx("h2",{children:"6. Emendationes et Interpretatio Finalis"}),r.jsx("p",{children:"Suggestum ius habet haec emendandi pro legibus, consiliis, et optimizatione servitii"}),r.jsx("p",{children:"Mutationes maximi momenti per systema et email nuntiabuntur"}),r.jsx("p",{children:"Ius interpretationis finalis harum condicionum Restarter suggestui reservatur"})]})},VO={"zh-TW":"","zh-CN":"",en:"Back",ja:"",ko:"",th:"",vi:"Quay li",ms:"Kembali",la:"Revertere"};function UO(){const[t,e]=m.useState(localStorage.getItem("lang")||"zh-TW"),n=tt();return m.useEffect(()=>{const i=()=>e(localStorage.getItem("lang")||"zh-TW");return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),m.useEffect(()=>{const i=setInterval(()=>{const o=localStorage.getItem("lang")||"zh-TW";o!==t&&e(o)},300);return()=>clearInterval(i)},[t]),r.jsxs("div",{style:{minHeight:"100vh",background:"#111827",color:"white",padding:"2rem",display:"flex",flexDirection:"column"},children:[r.jsxs("button",{onClick:()=>n("/",{replace:!0}),style:{position:"absolute",top:32,left:36,zIndex:10,backgroundColor:"#374151",color:"white",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:16},children:[" ",VO[t]||""]}),r.jsx("div",{style:{flex:"1 0 auto"},children:r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"#fff",color:"#111",borderRadius:16,padding:32,position:"relative"},children:[OO[t],r.jsx("div",{style:{textAlign:"center",marginTop:48,color:"#888",fontSize:16},children:"CTX Goodlife Copyright 2025"})]})}),r.jsx("div",{style:{width:"100%",margin:"0 auto",marginTop:24,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>n("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>n("/terms"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:"/"}),r.jsx("span",{onClick:()=>n("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>n("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" Restarter"}),r.jsx("span",{onClick:()=>n("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" "})]})})]})}const Cf={backToScenarios:{"zh-TW":" ","zh-CN":" ",ja:" ",en:" Back to Scenarios",ko:"  ",th:" ",vi:" Quay li danh sch kch bn",ms:" Kembali ke Senarai Senario",la:" Ad indicem scaenariorum redire"},yourTurn:{"zh-TW":"","zh-CN":"",ja:"",en:"Your turn",ko:" ",th:"",vi:"n lt bn",ms:"Giliran anda",la:"Tua vice est"},send:{"zh-TW":"","zh-CN":"",ja:"",en:"Send",ko:"",th:"",vi:"Gi",ms:"Hantar",la:"Mitte"}},NS={category:{"zh-TW":"","zh-CN":"",en:"Category",ja:"",ko:"",th:"",vi:"Phn loi",ms:"Kategori",la:"Categoria"},difficulty:{"zh-TW":"","zh-CN":"",en:"Difficulty",ja:"",ko:"",th:"",vi:" kh",ms:"Kesukaran",la:"Difficultas"}},qO={hard:{"zh-TW":"","zh-CN":"",en:"Hard",ja:"",ko:"",th:"",vi:"Kh",ms:"Sukar",la:"Difficile"},medium:{"zh-TW":"","zh-CN":"",en:"Medium",ja:"",ko:"",th:"",vi:"Trung bnh",ms:"Sederhana",la:"Mediocris"},easy:{"zh-TW":"","zh-CN":"",en:"Easy",ja:"",ko:"",th:"",vi:"D",ms:"Mudah",la:"Facilis"}};function HO(t,e,n){const i=t.find(o=>o.id===e);return i?i.translations&&i.translations[n]?ke(ke({},i),i.translations[n]):i:null}function DS(){var O,oe;const t=tt(),{scenarioId:e}=SP(),n=e||"",i=Ze(),o=localStorage.getItem("lang")||"zh-TW",[s,a]=m.useState(null),[l,c]=m.useState([]),[u,h]=m.useState(""),[p,g]=m.useState(!0),y=m.useRef(null),[k,j]=m.useState(""),T=ge=>{j(ge),setTimeout(()=>j(""),1800)},[x,b]=m.useState(!1),[v,z]=m.useState(!1),[D,P]=m.useState(""),[_,S]=m.useState(""),R=m.useRef(null),[E,A]=m.useState(!1),{checkPermission:B,recordUsage:I}=Bd(),[re,Q]=m.useState(!1),[X,de]=m.useState(null),{isTestMode:V}=fs();function ee(ge){return!(!ge||ge.trim().length<12)}m.useEffect(()=>{if(typeof window!="undefined"&&("webkitSpeechRecognition"in window||"SpeechRecognition"in window)){const ge=window.webkitSpeechRecognition||window.SpeechRecognition;R.current=new ge,R.current.continuous=!0,R.current.interimResults=!0,R.current.lang=o==="zh-TW"?"zh-TW":o==="zh-CN"?"zh-CN":o==="en"?"en-US":o==="ja"?"ja-JP":o==="ko"?"ko-KR":"zh-TW",R.current.onresult=je=>{let Ce="",He="";for(let J=je.resultIndex;J<je.results.length;J++)je.results[J].isFinal?Ce+=je.results[J][0].transcript:He+=je.results[J][0].transcript;if(Ce){const J=Ce.trim();h(J),S(J),R.current.stop(),setTimeout(()=>{J&&J.length>=2&&he(J)},300)}else He&&h(He.trim())},R.current.onerror=je=>{console.error("Speech recognition error",je.error);let Ce="";switch(je.error){case"no-speech":Ce="";break;case"audio-capture":case"network":Ce="";break;default:Ce=""}Ce&&P(Ce),z(!1),b(!1)},R.current.onend=()=>{z(!1),b(!1)}}else P("Chrome/Edge")},[o]),m.useEffect(()=>{e&&C(this,null,function*(){g(!0),console.log("[useEffect] fetchScenarioDetails start, isLoading:",!0);try{const je=yield fetch(`/locales/${o}/scenarios.json`);if(!je.ok)throw new Error("Failed to fetch scenarios");const Ce=yield je.json(),He=HO(Ce,n,o);He?(a(He),c([{sender:"ai",text:He.starting_line||He.system_prompt||""}]),console.log("[useEffect] scenario loaded:",He)):(a(null),console.log("[useEffect] scenario not found"))}catch(je){console.error("[useEffect] Error fetching scenario details:",je),a(null)}finally{g(!1),console.log("[useEffect] fetchScenarioDetails end, isLoading:",!1)}})},[e,o]);const he=ge=>C(this,null,function*(){if(!ge.trim()){T("");return}if(!ee(ge)){T("12");return}if(E||p){T("AI");return}if(!i.currentUser){T("");return}const Ce=yield B("aiChat");if(!Ce.allowed){if(V)return;Ce.canRenew,de(Ce),Q(!0);return}const He=ge;c(J=>[...J,{sender:"user",text:He,id:`user-${Date.now()}`}]),h(""),yield te(He)}),ve=()=>C(this,null,function*(){if(R.current)if(x||v)R.current.stop(),b(!1),z(!1);else{const ge=yield B("aiChat");if(!ge.allowed){if(V){S(""),h(""),R.current.start(),b(!0),z(!0),P("");return}ge.canRenew,de(ge),Q(!0);return}S(""),h(""),R.current.start(),b(!0),z(!0),P("")}}),be=()=>C(this,null,function*(){yield he(u)}),te=ge=>C(this,null,function*(){g(!0),A(!0),console.log("[getAIResponse] called with text:",ge);const je=`ai-${Date.now()}`;c(Le=>[...Le,{sender:"ai",text:"",id:je,status:"streaming"}]);try{const Le=s?`${s.system_prompt||""}

${s.title||""}
${s.description||""}`:"",Y=yield sp(ge,o,Le,V);let ae="";try{for(var Ce=Ia(Y),He,J,H;He=!(J=yield Ce.next()).done;He=!1){const Ie=J.value;ae+=Ie,c(xe=>xe.map(_e=>_e.id===je?We(ke({},_e),{text:ae}):_e))}}catch(J){H=[J]}finally{try{He&&(J=Ce.return)&&(yield J.call(Ce))}finally{if(H)throw H[0]}}c(Ie=>Ie.map(xe=>xe.id===je?We(ke({},xe),{status:"done"}):xe)),console.log("[getAIResponse] AI response completed:",ae),yield I("aiChat",2)}catch(Le){console.error("[getAIResponse] Error getting AI response:",Le);const Y=Le instanceof Error?Le.message:"";c(ae=>ae.map(Ie=>Ie.id===je?We(ke({},Ie),{text:`API${Y}`,status:"done"}):Ie))}finally{g(!1),A(!1),console.log("[getAIResponse] end")}});if(!s)return r.jsxs("div",{style:{textAlign:"center",marginTop:80},children:[r.jsx("div",{style:{fontSize:22,marginBottom:16},children:" Scenario not found."}),r.jsx("button",{onClick:()=>t("/"),style:{padding:"10px 28px",borderRadius:8,background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:16,border:"none",cursor:"pointer"},children:""})]});const N=()=>{Q(!1),de(null)};return r.jsxs("div",{className:"modern-bg",style:{background:"url('/senario.png') center center / cover no-repeat fixed",minHeight:"100vh",width:"100vw",overflow:"hidden",position:"relative"},children:[r.jsx("audio",{ref:y,hidden:!0}),r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:200,display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"18px 32px 0 32px",background:"transparent",width:"100vw",pointerEvents:"auto"},children:r.jsx("button",{className:"topbar-btn",onClick:()=>t("/skillbox",{replace:!0}),style:{fontWeight:700,fontSize:18,padding:"6px 16px",borderRadius:8,border:"1.5px solid #6B5BFF",background:"#fff",color:"#6B5BFF",cursor:"pointer"},children:Cf.backToScenarios[o]})}),r.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",marginTop:window.innerWidth<=768?60:80,overflowY:"auto",maxHeight:window.innerWidth<=768?"calc(100vh - 60px)":"calc(100vh - 80px)",padding:window.innerWidth<=768?"12px 6px":"24px"},children:[r.jsxs("div",{style:{width:window.innerWidth<=768?"88%":"90%",maxWidth:700,background:"rgba(255,255,255,0.97)",borderRadius:16,padding:window.innerWidth<=768?"12px 10px 10px 10px":"32px 32px 18px 32px",boxShadow:"0 4px 24px #0002",display:"flex",flexDirection:"column",alignItems:"center",marginBottom:window.innerWidth<=768?8:0,position:"relative"},children:[r.jsx("div",{style:{fontSize:window.innerWidth<=768?40:54,marginBottom:window.innerWidth<=768?6:8},children:s.emoji}),r.jsx("h2",{style:{color:"#6B5BFF",fontWeight:900,fontSize:window.innerWidth<=768?20:28,marginBottom:window.innerWidth<=768?12:24,textAlign:"center"},children:s.title}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:window.innerWidth<=768?8:12,marginBottom:window.innerWidth<=768?6:8},children:[r.jsxs("span",{style:{fontWeight:600,fontSize:window.innerWidth<=768?12:14,padding:window.innerWidth<=768?"3px 8px":"4px 12px",borderRadius:16,background:"#6B5BFF22",color:"#6B5BFF"},children:[NS.category[o],": ",s.category]}),r.jsxs("span",{style:{fontWeight:600,fontSize:window.innerWidth<=768?12:14,padding:window.innerWidth<=768?"3px 8px":"4px 12px",borderRadius:16,background:"#23c6e622",color:"#23c6e6"},children:[NS.difficulty[o],": ",((O=qO[s.difficulty])==null?void 0:O[o])||s.difficulty]})]}),r.jsx("p",{style:{fontSize:window.innerWidth<=768?14:16,color:"#4A4A4A",textAlign:"center",margin:window.innerWidth<=768?"0 0 6px 0":"0 0 8px 0",lineHeight:1.5},children:s.description}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:window.innerWidth<=768?6:8,marginBottom:window.innerWidth<=768?10:16},children:(oe=s.tags)==null?void 0:oe.map(ge=>r.jsx("span",{style:{fontSize:window.innerWidth<=768?11:13,background:"#f7f7ff",color:"#6B5BFF",borderRadius:12,padding:window.innerWidth<=768?"2px 8px":"2px 10px"},children:ge},ge))})]}),r.jsxs("div",{style:{width:window.innerWidth<=768?"88%":"90%",maxWidth:700,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:window.innerWidth<=768?"14px 12px 16px 12px":"18px 32px 24px 32px",boxShadow:window.innerWidth<=768?"0 6px 32px rgba(0,0,0,0.08)":"0 4px 24px #0002",display:"flex",flexDirection:"column",marginTop:0,marginBottom:window.innerWidth<=768?40:0},children:[r.jsx("div",{style:{minHeight:window.innerWidth<=768?"20vh":"32vh",maxHeight:window.innerWidth<=768?"26vh":"44vh",overflowY:"auto",background:"#f6f7fa",borderRadius:12,padding:window.innerWidth<=768?10:16,marginBottom:window.innerWidth<=768?12:24,display:"flex",flexDirection:"column",gap:"12px",boxShadow:window.innerWidth<=768?"0 3px 12px rgba(107, 91, 255, 0.15)":"0 2px 8px #6B5BFF11"},children:l.map((ge,je)=>r.jsx("div",{style:{alignSelf:ge.sender==="user"?"flex-end":"flex-start",maxWidth:"75%"},children:r.jsx("div",{style:{background:ge.sender==="user"?"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)":"#fff",color:ge.sender==="user"?"#fff":"#4A4A4A",padding:"10px 16px",borderRadius:"18px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},children:ge.text})},je))}),r.jsxs("div",{style:{display:"flex",gap:window.innerWidth<=768?"8px":"12px",alignItems:"center",position:"relative",flexWrap:(window.innerWidth<=768,"nowrap")},children:[r.jsx("button",{onClick:ve,disabled:p,style:{padding:window.innerWidth<=768?12:16,borderRadius:"50%",border:"none",background:x||v?"#ff4d4d":"#1877f2",color:"#fff",cursor:p?"not-allowed":"pointer",fontSize:window.innerWidth<=768?18:20,flexShrink:0,width:window.innerWidth<=768?44:52,height:window.innerWidth<=768?44:52,display:"flex",alignItems:"center",justifyContent:"center"},children:x||v?"":""}),r.jsx("input",{type:"text",value:u,onChange:ge=>h(ge.target.value),placeholder:p?"AI...":Cf.yourTurn[o],disabled:p,style:{flex:1,padding:window.innerWidth<=768?"10px 12px":"12px 16px",borderRadius:12,border:"2px solid #ddd",fontSize:window.innerWidth<=768?14:16,outline:"none",background:p?"#f0f0f0":"#fff",minWidth:0},onKeyDown:ge=>ge.key==="Enter"&&be()}),r.jsx("button",{onClick:be,disabled:p,style:{padding:window.innerWidth<=768?"10px 16px":"12px 24px",borderRadius:12,background:p?"#ccc":"#6B5BFF",color:"#fff",border:"none",fontWeight:700,fontSize:window.innerWidth<=768?14:16,cursor:p?"not-allowed":"pointer",flexShrink:0},children:p?"...":Cf.send[o]}),p&&r.jsx("div",{style:{position:"absolute",right:-36,top:"50%",transform:"translateY(-50%)"},children:r.jsx("span",{className:"loader",style:{display:"inline-block",width:24,height:24,border:"3px solid #6B5BFF",borderTop:"3px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),u&&!ee(u)&&r.jsx("div",{style:{color:"#ff9800",fontSize:15,marginTop:6,fontWeight:600},children:"12"})]})]}),k&&r.jsx("div",{style:{position:"fixed",top:32,left:"50%",transform:"translateX(-50%)",background:"#ff9800",color:"#fff",padding:"12px 32px",borderRadius:16,fontWeight:700,fontSize:18,zIndex:9999,boxShadow:"0 2px 12px #0002"},children:k}),r.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }"}),re&&X&&r.jsx(mc,{isOpen:re,onClose:N,currentPlan:X.currentPlan,remainingDays:X.remainingDays,usedTokens:X.usedTokens,totalTokens:X.totalTokens})]})}const $O=(t,e,n,i)=>{var s,a,l,c;const o=[n,ke({code:e},i||{})];if((a=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&a.forward)return t.services.logger.forward(o,"warn","react-i18next::",!0);Ks(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(c=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&c.warn?t.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},MS={},bx=(t,e,n,i)=>{Ks(n)&&MS[n]||(Ks(n)&&(MS[n]=new Date),$O(t,e,n,i))},W6=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},vx=(t,e,n)=>{t.loadNamespaces(e,W6(t,n))},WS=(t,e,n,i)=>{if(Ks(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return vx(t,n,i);n.forEach(o=>{t.options.ns.indexOf(o)<0&&t.options.ns.push(o)}),t.loadLanguages(e,W6(t,i))},KO=(t,e,n={})=>!e.languages||!e.languages.length?(bx(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,t))return!1}}),Ks=t=>typeof t=="string",GO=t=>typeof t=="object"&&t!==null,QO=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,YO={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},XO=t=>YO[t],JO=t=>t.replace(QO,XO);let ZO={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:JO};const eV=()=>ZO;let tV;const nV=()=>tV,iV=m.createContext();class rV{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const oV=(t,e)=>{const n=m.useRef();return m.useEffect(()=>{n.current=t},[t,e]),n.current},L6=(t,e,n,i)=>t.getFixedT(e,n,i),sV=(t,e,n,i)=>m.useCallback(L6(t,e,n,i),[t,e,n,i]),aV=(t,e={})=>{var z,D,P,_;const{i18n:n}=e,{i18n:i,defaultNS:o}=m.useContext(iV)||{},s=n||i||nV();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new rV),!s){bx(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(E,A)=>Ks(A)?A:GO(A)&&Ks(A.defaultValue)?A.defaultValue:Array.isArray(E)?E[E.length-1]:E,R=[S,{},!1];return R.t=S,R.i18n={},R.ready=!1,R}(z=s.options.react)!=null&&z.wait&&bx(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a=ke(ke(ke({},eV()),s.options.react),e),{useSuspense:l,keyPrefix:c}=a;let u=o||((D=s.options)==null?void 0:D.defaultNS);u=Ks(u)?[u]:u||["translation"],(_=(P=s.reportNamespaces).addUsedNamespaces)==null||_.call(P,u);const h=(s.isInitialized||s.initializedStoreOnce)&&u.every(S=>KO(S,s,a)),p=sV(s,e.lng||null,a.nsMode==="fallback"?u:u[0],c),g=()=>p,y=()=>L6(s,e.lng||null,a.nsMode==="fallback"?u:u[0],c),[k,j]=m.useState(g);let T=u.join();e.lng&&(T=`${e.lng}${T}`);const x=oV(T),b=m.useRef(!0);m.useEffect(()=>{const{bindI18n:S,bindI18nStore:R}=a;b.current=!0,!h&&!l&&(e.lng?WS(s,e.lng,u,()=>{b.current&&j(y)}):vx(s,u,()=>{b.current&&j(y)})),h&&x&&x!==T&&b.current&&j(y);const E=()=>{b.current&&j(y)};return S&&(s==null||s.on(S,E)),R&&(s==null||s.store.on(R,E)),()=>{b.current=!1,s&&S&&(S==null||S.split(" ").forEach(A=>s.off(A,E))),R&&s&&R.split(" ").forEach(A=>s.store.off(A,E))}},[s,T]),m.useEffect(()=>{b.current&&h&&j(g)},[s,c,h]);const v=[k,s,h];if(v.t=k,v.i18n=s,v.ready=h,h||!h&&!l)return v;throw new Promise(S=>{e.lng?WS(s,e.lng,u,()=>S()):vx(s,u,()=>S())})},lV={"zh-TW":{male:"",female:"",other:""},"zh-CN":{male:"",female:"",other:""},en:{male:"Male",female:"Female",other:"Other"},ja:{male:"",female:"",other:""},ko:{male:"",female:"",other:""},th:{male:"",female:"",other:""},vi:{male:"Nam",female:"N",other:"Khc"},ms:{male:"Lelaki",female:"Perempuan",other:"Lain-lain"},la:{male:"Mas",female:"Femina",other:"Aliud"}},cV={"zh-TW":"","zh-CN":"",en:"y/o",ja:"",ko:"",th:"",vi:"tui",ms:"tahun",la:"annos"},zr={"zh-TW":{nickname:"",gender:"",age:"",country:"/",interest:"",eventType:"",improvement:"",email:"Email",bio:""},"zh-CN":{nickname:"",gender:"",age:"",country:"/",interest:"",eventType:"",improvement:"",email:"",bio:""},en:{nickname:"Nickname",gender:"Gender",age:"Age",country:"Country/Region",interest:"Interest",eventType:"Event Type",improvement:"To Improve",email:"Email",bio:"Bio"},ja:{nickname:"",gender:"",age:"",country:"/",interest:"",eventType:"",improvement:"",email:"",bio:""},ko:{nickname:"",gender:"",age:"",country:"/",interest:"",eventType:" ",improvement:"  ",email:"",bio:""},th:{nickname:"",gender:"",age:"",country:"/",interest:"",eventType:"",improvement:"",email:"",bio:""},vi:{nickname:"Bit danh",gender:"Gii tnh",age:"Tui",country:"Quc gia/Khu vc",interest:"S thch",eventType:"Loi s kin",improvement:"iu mun ci thin",email:"Email",bio:"Gii thiu"},ms:{nickname:"Nama panggilan",gender:"Jantina",age:"Umur",country:"Negara/Wilayah",interest:"Minat",eventType:"Jenis Acara",improvement:"Perkara untuk Diperbaiki",email:"Email",bio:"Pengenalan"},la:{nickname:"Cognomen",gender:"Sexus",age:"Aetas",country:"Patria/Regio",interest:"Studium",eventType:"Genus Eventus",improvement:"Emendare",email:"Email",bio:"Introductio"}},LS=({profile:t,variant:e="compact",showAvatar:n=!0,className:i="",style:o={}})=>{var u;const{lang:s}=dt(),a=t.avatar||t.avatarUrl||"/avatars/Derxl.png",l=t.gender?((u=lV[s])==null?void 0:u[t.gender])||t.gender:"",c=cV[s];return e==="compact"?r.jsxs("div",{className:`user-profile-compact ${i}`,style:ke({display:"flex",alignItems:"center",gap:12,marginBottom:2},o),children:[n&&r.jsx("img",{src:a,alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #ececff"}}),r.jsx("span",{style:{fontWeight:600},children:t.nickname||"-"}),r.jsxs("span",{children:[t.age||"-",c]}),r.jsx("span",{children:l}),r.jsxs("span",{children:[t.country||"-",t.region?`/${t.region}`:""]})]}):r.jsxs("div",{className:`user-profile-detailed ${i}`,style:ke({marginTop:10,fontSize:14,color:"#6B5BFF",fontWeight:500,background:"#f7f8fc",borderRadius:8,padding:"8px 12px"},o),children:[n&&r.jsx("div",{style:{textAlign:"center",marginBottom:8},children:r.jsx("img",{src:a,alt:"avatar",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}})}),r.jsxs("div",{children:[zr[s].nickname,"",t.nickname||"-"]}),r.jsxs("div",{children:[zr[s].gender,"",l]}),r.jsxs("div",{children:[zr[s].age,"",t.age||"-",c]}),r.jsxs("div",{children:[zr[s].country,"",t.country||"-"," ",t.region||""]}),r.jsxs("div",{children:[zr[s].interest,"",t.interest||"-"]}),r.jsxs("div",{children:[zr[s].eventType,"",t.eventType||"-"]}),t.improvement&&r.jsxs("div",{children:[zr[s].improvement,"",t.improvement]}),t.email&&r.jsxs("div",{children:[zr[s].email,"",t.email]}),t.bio&&r.jsxs("div",{children:[zr[s].bio,"",t.bio]})]})},ze={pageTitle:{"zh-TW":"ReStoryChain","zh-CN":"ReStoryChain",en:"ReStoryChain",ja:"ReStoryChain",ko:"ReStoryChain",th:"ReStoryChain",vi:"ReStoryChain",ms:"ReStoryChain",la:"ReStoryChain"},encouragement:{"zh-TW":"AI","zh-CN":"AI",en:"AI Encouragement",ja:"AI",ko:"AI ",th:"AI ",vi:"AI ng vin",ms:"AI Galakan",la:"AI Hortatio"},logout:{"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},titlePlaceholder:{"zh-TW":"(30)","zh-CN":"(30)",en:"Enter title (max 30 chars)",ja:"30",ko:" (30 )",th:" ( 30 )",vi:"Nhp tiu  (ti a 30 k t)",ms:"Masukkan tajuk (maks 30 aksara)",la:"Titulum insere (max 30 litterae)"},contentPlaceholder:{"zh-TW":"(500)","zh-CN":"(500)",en:"Enter content (max 500 chars)",ja:"500",ko:" (500 )",th:" ( 500 )",vi:"Nhp ni dung (ti a 500 k t)",ms:"Masukkan kandungan (maks 500 aksara)",la:"Contentum insere (max 500 litterae)"},formTitle:{"zh-TW":"","zh-CN":"",en:"Share Your Story",ja:"",ko:" ",th:"",vi:"Chia s cu chuyn ca bn",ms:"Kongsi Cerita Anda",la:"Communica Fabulas Tuas"},formSubmit:{"zh-TW":"","zh-CN":"",en:"Post",ja:"",ko:"",th:"",vi:"ng",ms:"Hantar",la:"Submittere"},encouragementDefault:{"zh-TW":"","zh-CN":"",en:"Keep going! Your story matters.",ja:"",ko:" !   .",th:"! ",vi:"Tip tc nh! Cu chuyn ca bn rt  ngha.",ms:"Teruskan! Cerita anda penting.",la:"Perge! Fabula tua magni momenti est."},storyQuoteLine1:{"zh-TW":"","zh-CN":"",en:"Some stories are not for explanation, merely for letting go!",ja:"",ko:"         !",th:" !",vi:"C nhng cu chuyn khng phi  gii thch, m ch  bung b!",ms:"Sesetengah cerita bukan untuk dijelaskan, tetapi hanya untuk dilepaskan!",la:"Nonnullae fabulae non ad explicandum, sed tantum ad dimittendum sunt!"},storyQuoteLine2:{"zh-TW":"... ","zh-CN":"... ",en:"Writing it down is also a way to release yourself... Writing it down is also a kind of courage.",ja:"... ",ko:"     ...    .",th:"... ",vi:"Vit ra cng l mt cch tha th cho bn thn... Vit ra cng l mt s dng cm.",ms:"Menulisnya adalah satu cara melepaskan diri... Menulisnya adalah satu keberanian.",la:"Scribere est te ipsum dimittere... Scribere est etiam audacia."},storyQuoteLine3:{"zh-TW":"","zh-CN":"",en:"When someone is willing to speak out, someone else is no longer alone. Sharing is power.",ja:"",ko:"   ,     .  .",th:"  ",vi:"Khi ai  dm ni ra, s c ngi khng cn c n na. Chia s l sc mnh.",ms:"Apabila seseorang sanggup meluahkan, seseorang yang lain tidak lagi keseorangan. Berkongsi adalah kekuatan.",la:"Cum aliquis loqui velit, aliquis non iam solus est. Communicatio est potestas."},blockchainNote:{"zh-TW":" ","zh-CN":" ",en:" Blockchain feature is under development. Currently only a marker function, actual preservation will be available in future versions",ja:" ",ko:"    .    ,       ",th:"   ",vi:" Tnh nng blockchain ang c pht trin. Hin ti ch l chc nng nh du, tnh nng lu tr thc t s c trong phin bn tng lai",ms:" Ciri blockchain sedang dalam pembangunan. Kini hanya fungsi penanda, fungsi pemeliharaan sebenar akan tersedia dalam versi masa hadapan",la:" Blockchain functio in progressu est. Nunc tantum signum functionis, vera conservatio in futuris versionibus praesto erit"},storyPrompt:{"zh-TW":"","zh-CN":"",en:"If you could only leave one story, where would you start?",ja:"",ko:"     ,  ?",th:" ?",vi:"Nu bn ch c th  li mt cu chuyn, bn s bt u t u?",ms:"Jika anda hanya boleh tinggalkan satu cerita, di mana anda akan mula?",la:"Si unam tantum fabulam relinquere posses, unde inciperes?"},partnersStories:{"zh-TW":"","zh-CN":"",en:"Partners' Stories",ja:"",ko:" ",th:"",vi:"Chia s ca cc bn",ms:"Kisah Rakan-rakan",la:"Communicatio Sociorum"},myStories:{"zh-TW":"","zh-CN":"",en:"My Stories",ja:"",ko:" ",th:"",vi:"Cu chuyn ca ti",ms:"Cerita Saya",la:"Fabulae Meae"},friendStories:{"zh-TW":"","zh-CN":"",en:"Friend Stories",ja:"",ko:" ",th:"",vi:"Cu chuyn bn b",ms:"Cerita Rakan",la:"Fabulae Amicorum"},noFriends:{"zh-TW":"","zh-CN":"",en:"You have no friend connections yet, go to",ja:"",ko:"   . ",th:"",vi:"Bn cha c kt ni bn b no, hy n",ms:"Anda masih tiada sambungan rakan, pergi ke",la:"Nondum amicos conexos habes, ad"},goToPairTalk:{"zh-TW":"","zh-CN":"",en:"Go to Friend Zone to connect!",ja:"",ko:" !",th:" Friend Zone !",vi:"n Friend Zone  kt ni!",ms:"ke Friend Zone untuk sambung!",la:"ad Friend Zone coniunge!"},visibilityPrivate:{"zh-TW":"","zh-CN":"",en:"Private",ja:"",ko:"",th:"",vi:"Ring t",ms:"Peribadi",la:"Privatus"},visibilityFriends:{"zh-TW":"","zh-CN":"",en:"Friends Only",ja:"",ko:"",th:"",vi:"Ch bn b",ms:"Hanya Rakan",la:"Amicis Tantum"},visibilityPublic:{"zh-TW":"","zh-CN":"",en:"Public",ja:"",ko:"",th:"",vi:"Cng khai",ms:"Umum",la:"Publicus"},profileLabels:{"zh-TW":`{nickname}
{gender}
{age}
/{country}
{interest}
{eventType}`,"zh-CN":`{nickname}
{gender}
{age}
/{country}
{interest}
{eventType}`,en:`Nickname: {nickname}
Gender: {gender}
Age: {age}
Country/Region: {country}
Interest: {interest}
Event Type: {eventType}`,ja:`{nickname}
{gender}
{age}
/{country}
{interest}
{eventType}`,ko:`: {nickname}
: {gender}
: {age}
/: {country}
: {interest}
 : {eventType}`,th:`: {nickname}
: {gender}
: {age}
/: {country}
: {interest}
: {eventType}`,vi:`Bit danh: {nickname}
Gii tnh: {gender}
Tui: {age}
Quc gia/Khu vc: {country}
S thch: {interest}
Loi s kin: {eventType}`,ms:`Nama panggilan: {nickname}
Jantina: {gender}
Umur: {age}
Negara/Wilayah: {country}
Minat: {interest}
Jenis Acara: {eventType}`,la:`Cognomen: {nickname}
Sexus: {gender}
Aetas: {age}
Patria/Regio: {country}
Studium: {interest}
Genus Eventus: {eventType}`}},Rf=["bg-gradient-to-br from-[#7f8fff] to-[#b6b6f6]","bg-gradient-to-br from-[#ffb6b6] to-[#ffd6e0]","bg-gradient-to-br from-[#6be6ff] to-[#b6f6ff]","bg-gradient-to-br from-[#ffe66b] to-[#ffb86b]"];function OS(t){if(!t||typeof t!="string")return Rf[0];let e=0;for(let n=0;n<t.length;n++)e+=t.charCodeAt(n);return Rf[e%Rf.length]}const It={"zh-TW":{work_restart:"",family_trust:"",social_treatment:"",inner_choice:"",misunderstood_and_recovered:"",restart_path:""},"zh-CN":{work_restart:"",family_trust:"",social_treatment:"",inner_choice:"",misunderstood_and_recovered:"",restart_path:""},en:{work_restart:"Work Restart",family_trust:"Family Trust",social_treatment:"Social Treatment",inner_choice:"Inner Choice",misunderstood_and_recovered:"Misunderstood & Recovered",restart_path:"Restart Path"},ja:{work_restart:"",family_trust:"",social_treatment:"",inner_choice:"",misunderstood_and_recovered:"",restart_path:""},ko:{work_restart:" ",family_trust:" ",social_treatment:" ",inner_choice:" ",misunderstood_and_recovered:" ",restart_path:" "},th:{work_restart:"",family_trust:"",social_treatment:"",inner_choice:"",misunderstood_and_recovered:"",restart_path:""},vi:{work_restart:"Khi ng li cng vic",family_trust:"Nim tin gia nh",social_treatment:"Cch i x ca x hi",inner_choice:"La chn ni tm",misunderstood_and_recovered:"Hiu lm v phc hi",restart_path:"Con ng lm li"},ms:{work_restart:"Mula Kerja Semula",family_trust:"Kepercayaan Keluarga",social_treatment:"Layanan Sosial",inner_choice:"Pilihan Dalaman",misunderstood_and_recovered:"Salah Faham & Pemulihan",restart_path:"Jalan Permulaan Semula"},la:{work_restart:"Opus Renovatum",family_trust:"Fides Familiaris",social_treatment:"Tractatio Socialis",inner_choice:"Electio Interior",misunderstood_and_recovered:"Error et Recuperatio",restart_path:"Iter Renovationis"}},VS={"zh-TW":" ","zh-CN":" ",en:" I agree to preserve this testimony on the blockchain (In Development)",ja:" ",ko:"       ",th:" ",vi:" Ti ng  lu gi cu chuyn ny trn blockchain (ang pht trin)",ms:" Saya bersetuju untuk menyimpan kisah ini di blockchain (Dalam Pembangunan)",la:" Assentior hanc testificationem in blockchain servari (In Progressu)"},Ef={"zh-TW":{private:"",friends:"",public:"",label:""},"zh-CN":{private:"",friends:"",public:"",label:""},en:{private:"Only me",friends:"Friends only",public:"Everyone",label:"Who can see this story?"},ja:{private:"",friends:"",public:"",label:""},ko:{private:" ",friends:" ",public:" ",label:"     ?"},th:{private:"",friends:"",public:"",label:"?"},vi:{private:"Ch mnh ti",friends:"Ch bn b",public:"Mi ngi",label:"Ai c th xem cu chuyn ny?"},ms:{private:"Hanya saya",friends:"Hanya rakan",public:"Semua orang",label:"Siapa boleh melihat cerita ini?"},la:{private:"Solus ego",friends:"Amici tantum",public:"Omnes",label:"Quis hanc historiam videre potest?"}},uV={"zh-TW":{launch:"",ask:"",thanks:" ",success:"",randomEncourage:["","","",""],chain:"",anonymous:"",countryName:{:"",:"",:"",:"",:"",:""},eventTypeName:{:"",:"",:""}},"zh-CN":{launch:"",ask:"",thanks:" ",success:"",randomEncourage:["","","",""],chain:"",anonymous:"",countryName:{:"",:"",:"",:"",:"",:""},eventTypeName:{:"",:"",:""}},en:{launch:"Writing it down is also an act of courage.",ask:"What do you want to talk about this time?",thanks:" Thank you for sharing, this is your story",success:"You wrote beautifully. This experience deserves to be seen.",randomEncourage:["Your past does not define you. Choosing to tell it is your power.","Every story deserves to be heard.","You share your heart, we walk with you.","Your experience is precious, thank you for sharing."],chain:"I want to preserve this story on the blockchain",anonymous:"I want to share anonymously",countryName:{:"China",:"Taiwan",:"Japan",:"Korea",:"USA",:"Other"},eventTypeName:{:"Domestic Violence Perpetrator",:"Domestic Violence Victim",:"Other"}},ja:{launch:"",ask:"",thanks:"",success:"",randomEncourage:[""],chain:"",anonymous:""},ko:{launch:"",ask:"",thanks:"",success:"",randomEncourage:[""],chain:"",anonymous:""},th:{launch:"",ask:"",thanks:"",success:"",randomEncourage:[""],chain:"",anonymous:""},vi:{launch:"",ask:"",thanks:"",success:"",randomEncourage:[""],chain:"",anonymous:""},ms:{launch:"",ask:"",thanks:"",success:"",randomEncourage:[""],chain:"",anonymous:""},la:{launch:"",ask:"",thanks:"",success:"",randomEncourage:[""],chain:"",anonymous:""}};function Af(t,e,n){return C(this,null,function*(){var o;const i={[e]:t};for(const s of n)if(s!==e)try{const l=yield(yield fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,from:e,to:s})})).json();i[s]=l.translated||""}catch(a){try{const c=yield(yield fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${e}&tl=${s}&dt=t&q=${encodeURIComponent(t)}`)).json();i[s]=((o=c[0])==null?void 0:o.map(u=>u[0]).join(""))||""}catch(l){i[s]=""}}return i})}function Ma(t,e){return t.titleLangs&&t.titleLangs[e]||t.title}function Wa(t,e){return t.contentLangs&&t.contentLangs[e]||t.content}const La={"zh-TW":{:"",:"",:"",:"",:"",:""},"zh-CN":{:"",:"",:"",:"",:"",:""},en:{:"China",:"Taiwan",:"Japan",:"Korea",:"USA",:"Other"},ja:{:"",:"",:"",:"",:"",:""},ko:{:"",:"",:"",:"",:"",:""},th:{:"",:"",:"",:"",:"",:""},vi:{:"Trung Quc",:"i Loan",:"Nht Bn",:"Hn Quc",:"M",:"Khc"},ms:{:"China",:"Taiwan",:"Jepun",:"Korea",:"Amerika",:"Lain-lain"},la:{:"Sina",:"Taiwan",:"Iaponia",:"Corea",:"CFA",:"Aliud"}},Oa={"zh-TW":{:"",:"",:""},"zh-CN":{:"",:"",:""},en:{:"Domestic Violence Perpetrator",:"Domestic Violence Victim",:"Other"},ja:{:"",:"",:""},ko:{:" ",:" ",:""},th:{:"",:"",:""},vi:{:"Ngi gy bo lc gia nh",:"Nn nhn bo lc gia nh",:"Khc"},ms:{:"Pelaku Keganasan Rumah Tangga",:"Mangsa Keganasan Rumah Tangga",:"Lain-lain"},la:{:"Violentus Domesticus",:"Victima Violentiae Domesticae",:"Aliud"}},dV=()=>{const t=kd(ir),e=Ze(),n=tt(),{t:i,i18n:o}=aV(),[s,a]=m.useState("zh-TW");m.useEffect(()=>{const L=localStorage.getItem("lang");L&&["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].includes(L)&&a(L)},[]);const[l,c]=m.useState(null),[u,h]=m.useState([]),[p,g]=m.useState(""),[y,k]=m.useState(""),[j,T]=m.useState(""),[x,b]=m.useState(null),[v,z]=m.useState(!1),[D,P]=m.useState(""),[_,S]=m.useState(!1),[R,E]=m.useState("public"),[A,B]=m.useState({tags:{}}),[I,re]=m.useState(null),[Q,X]=m.useState(!1),[de,V]=m.useState(!1),[ee,he]=m.useState(""),[ve,be]=m.useState(null),[te,N]=m.useState(""),[O,oe]=m.useState(!1),[ge,je]=m.useState({}),[Ce,He]=m.useState({}),[J,H]=m.useState({}),[Le,Y]=m.useState(!1),[ae,Ie]=m.useState([]),[xe,_e]=m.useState(!1),[we,qe]=m.useState(!1);m.useEffect(()=>{const L=ri(e,W=>c(W));return()=>L()},[e]),m.useEffect(()=>{C(Zn,null,function*(){const W=ei(xn(t,"stories"),Yp("createdAt","desc")),Qe=yield Ii(W);h(Qe.docs.map(at=>ke({id:at.id},at.data())))})},[t]),m.useEffect(()=>{fetch(`/locales/${s}/tags.json`).then(L=>L.json()).then(L=>B(L)).catch(()=>B({tags:{}}))},[s]),m.useEffect(()=>{let L;if(de){let W=0;L=setInterval(()=>{W=(W+1)%6,he(".".repeat(W))},400)}else he("");return()=>clearInterval(L)},[de]),m.useEffect(()=>{function L(){return C(this,null,function*(){const W=yield Gl(()=>Promise.resolve().then(()=>Zp),void 0).then(at=>at.getDocs(at.collection(t,"profiles"))),Qe={};W.forEach(at=>{const M=at.data();M.nickname&&(Qe[M.nickname]=M),M.name&&(Qe[M.name]=M)}),He(Qe)})}L()},[]),m.useEffect(()=>{function L(){return C(this,null,function*(){const W=yield Gl(()=>Promise.resolve().then(()=>Zp),void 0).then(at=>at.getDocs(at.collection(t,"profiles"))),Qe={};W.forEach(at=>{const M=at.data();M.email&&(Qe[M.email]=M)}),H(Qe)})}L()},[]),m.useEffect(()=>{l&&C(Zn,null,function*(){const W=xn(t,"links"),Qe=ei(W,bn("user1Id","==",l.uid),bn("status","==","connected")),at=ei(W,bn("user2Id","==",l.uid),bn("status","==","connected")),[M,Se]=yield Promise.all([Ii(Qe),Ii(at)]),Pe=new Set;M.forEach($e=>Pe.add($e.data().user2Id)),Se.forEach($e=>Pe.add($e.data().user1Id)),Ie(Array.from(Pe))})},[l]),m.useEffect(()=>{const L=W=>{const Qe=W.target;!Qe.closest(".language-selector")&&!Qe.closest(".legal-menu")&&(qe(!1),_e(!1))};return(we||xe)&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[we,xe]);const gt=()=>C(Zn,null,function*(){if(!p.trim()||!y.trim())return;V(!0),X(!1);let L=0;const W=setInterval(()=>{L=(L+1)%6,he(".".repeat(L))},400);try{z(!0);const[Qe,at,M]=yield Promise.all([fetch("/api/gpt/encourage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story:y})}).then(le=>le.json()).catch(()=>({encouragement:""})),Af(p,s,["zh-TW","zh-CN","en"]),Af(y,s,["zh-TW","zh-CN","en"])]),Se=Qe.encouragement||"",Pe=Se?yield Af(Se,s,["zh-TW","zh-CN","en"]):{},$e=uV[U].randomEncourage,G=$e[Math.floor(Math.random()*$e.length)];N(G),yield $o(xn(t,"stories"),{title:p,content:y,author:(l==null?void 0:l.displayName)||"",authorEmail:(l==null?void 0:l.email)||"",createdAt:new Date,comments:[],likes:0,encouragement:Se,encouragementLangs:Pe,tag:D,visibility:R,onChain:_,titleLangs:at,contentLangs:M}),g(""),k(""),z(!1);const Fe=ei(xn(t,"stories"),Yp("createdAt","desc")),q=(yield Ii(Fe)).docs.map(le=>ke({id:le.id},le.data()));h(q),re(q[0]||null)}catch(Qe){console.error("Error adding story:",Qe),g(""),k(""),z(!1)}finally{clearInterval(W),V(!1)}});function ht(L){return L.encouragementLangs&&L.encouragementLangs[U]?L.encouragementLangs[U]:L.encouragement||ze.encouragementDefault[U]}["intro.sunday","intro.monday","intro.tuesday","intro.wednesday","intro.thursday","intro.friday","intro.saturday"][new Date().getDay()];const St=L=>C(Zn,null,function*(){yield Jp(kn(t,"stories",L)),h(u.filter(W=>W.id!==L)),I&&I.id===L&&re(null)}),_t=L=>{E(L),L!=="public"&&S(!1)},U=s||"zh-TW";return r.jsxs("div",{children:[window.innerWidth<=768?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mobile-shared-header",children:r.jsx(Ar,{})}),r.jsx("div",{style:{marginTop:"80px",marginBottom:16,width:"240px",marginLeft:"auto",marginRight:"auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"12px 16px",boxShadow:"0 2px 12px #6B5BFF22",display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("span",{style:{fontSize:"1.5rem",fontWeight:900,color:"#6B5BFF"},children:""}),r.jsx("span",{style:{fontSize:"1.2rem",fontWeight:900,color:"#6B5BFF"},children:ze.pageTitle[U]})]})}),r.jsxs("div",{style:{marginBottom:16,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:14,color:"#000",fontWeight:600,marginBottom:8},children:ze.storyQuoteLine1[U]}),r.jsx("div",{style:{fontSize:14,color:"#000",fontWeight:600,marginBottom:8},children:ze.storyQuoteLine2[U]}),r.jsx("div",{style:{fontSize:12,color:"#888",fontWeight:500},children:ze.storyQuoteLine3[U]})]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",marginBottom:16,boxShadow:"0 2px 12px #6B5BFF22"},children:[r.jsx("div",{style:{padding:"12px 20px",background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:10,fontWeight:900,fontSize:17,letterSpacing:1,textAlign:"center",marginBottom:16},children:ze.formTitle[U]}),r.jsx("div",{style:{fontSize:16,color:"#6B5BFF",fontWeight:600,marginBottom:16,textAlign:"center"},children:ze.storyPrompt[U]}),r.jsx("input",{value:p,onChange:L=>g(L.target.value),placeholder:ze.titlePlaceholder[U],style:{width:"100%",boxSizing:"border-box",padding:12,borderRadius:16,border:"1px solid #ddd",fontSize:16,marginBottom:8,color:"#232946"}}),r.jsx("textarea",{value:y,onChange:L=>k(L.target.value),rows:3,placeholder:ze.contentPlaceholder[U],style:{width:"100%",height:120,boxSizing:"border-box",padding:12,borderRadius:16,border:"1px solid #ddd",fontSize:16,marginBottom:8,color:"#232946",resize:"none"}}),r.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",marginBottom:8,fontSize:15},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2},children:[r.jsx("input",{type:"radio",name:"visibility",value:"private",checked:R==="private",onChange:()=>_t("private")})," ",ze.visibilityPrivate[U]]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2},children:[r.jsx("input",{type:"radio",name:"visibility",value:"friends",checked:R==="friends",onChange:()=>_t("friends")})," ",ze.visibilityFriends[U]]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2},children:[r.jsx("input",{type:"radio",name:"visibility",value:"public",checked:R==="public",onChange:()=>_t("public")})," ",ze.visibilityPublic[U]]})]}),R==="public"&&r.jsxs("div",{style:{marginBottom:8},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:15},children:[r.jsx("input",{type:"checkbox",checked:_,onChange:L=>S(L.target.checked),style:{marginRight:4}})," ",VS[U]]}),r.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4,fontStyle:"italic"},children:ze.blockchainNote[U]})]}),r.jsx("button",{onClick:gt,disabled:v,style:{padding:"12px 20px",background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:10,fontWeight:900,fontSize:17,letterSpacing:1,cursor:v?"not-allowed":"pointer",opacity:v?.6:1},children:ze.formSubmit[U]})]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",marginBottom:16,boxShadow:"0 2px 12px #6B5BFF22"},children:[r.jsxs("div",{style:{display:"flex",gap:4,marginBottom:16,flexWrap:"nowrap",justifyContent:"space-between"},children:[r.jsxs("button",{onClick:()=>{X(!0),Y(!1),oe(!1),be(null)},style:{padding:"6px 8px",borderRadius:18,border:"none",background:Q?"linear-gradient(90deg,#ffb86b 60%,#6B5BFF 100%)":"#eee",color:Q?"#fff":"#6B5BFF",fontWeight:700,fontSize:12,cursor:"pointer",flex:1,marginRight:4},children:["#",ze.partnersStories[U]]}),r.jsxs("button",{onClick:()=>{Y(!0),X(!1),oe(!1),be(null)},style:{padding:"6px 8px",borderRadius:18,border:"none",background:Le?"linear-gradient(90deg,#23c6e6 60%,#6B5BFF 100%)":"#eee",color:Le?"#fff":"#6B5BFF",fontWeight:700,fontSize:12,cursor:"pointer",flex:1,marginRight:4},children:["#",ze.friendStories[U]]}),r.jsxs("button",{onClick:()=>{oe(!0),X(!1),Y(!1),be(null)},style:{padding:"6px 8px",borderRadius:18,border:"none",background:O?"linear-gradient(90deg,#6B5BFF 60%,#23c6e6 100%)":"#eee",color:O?"#fff":"#6B5BFF",fontWeight:700,fontSize:12,cursor:"pointer",flex:1},children:["#",ze.myStories[U]]})]}),r.jsx("div",{style:{maxHeight:400,overflowY:"auto",width:"100%",paddingRight:6},children:Le?ae.length===0?r.jsxs("div",{style:{color:"#888",fontWeight:600,fontSize:16,padding:"32px 0",textAlign:"center"},children:[ze.noFriends[U],r.jsx("span",{onClick:()=>n("/friend"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,cursor:"pointer"},children:ze.goToPairTalk[U]})]}):u.filter(L=>L.visibility==="friends"&&ae.includes(L.authorEmail)).map(L=>{const W=J[L.authorEmail]||{};return r.jsxs("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 8px #b6b6f622",padding:14,marginBottom:14,cursor:"pointer"},children:[r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",fontSize:16,marginBottom:4},onClick:Qe=>{Qe.stopPropagation(),be(ve===L.id?null:L.id)},children:Ma(L,U)}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,fontSize:"12px",flexWrap:"nowrap",whiteSpace:"nowrap"},children:[r.jsx("img",{src:W.avatar||W.avatarUrl||"/avatars/Derxl.png",alt:"avatar",style:{width:24,height:24,borderRadius:"50%",objectFit:"cover",border:"2px solid #ececff"}}),r.jsx("span",{style:{fontWeight:600},children:W&&W.nickname?W.nickname:"-"}),r.jsxs("span",{children:["",W&&W.age?W.age:"-"]}),r.jsxs("span",{children:["",W&&W.gender?W.gender:"-"]})]}),ve===L.id&&r.jsxs("div",{style:{marginTop:8},children:[r.jsx("div",{style:{color:"#232946",fontSize:14,marginBottom:4,whiteSpace:"pre-line"},children:Wa(L,U)}),r.jsxs("div",{style:{background:"linear-gradient(90deg, #f7f8fc 60%, #e3e6f3 100%)",borderRadius:12,padding:"6px 10px",margin:"6px 0",display:"flex",alignItems:"center",gap:6,boxShadow:"0 2px 8px #b6b6f622",fontSize:12},children:[r.jsxs("span",{style:{color:"#7f8fff",fontWeight:700},children:[" ",ze.encouragement[U],""]}),r.jsx("span",{style:{color:"#4b4b6b",fontWeight:500},children:ht(L)})]}),L.tag&&r.jsx("div",{style:{fontSize:12,color:"#6B5BFF",fontWeight:700,marginBottom:4},children:It[U][L.tag]}),L.onChain&&r.jsx("span",{style:{fontSize:12,color:"#23c6e6",fontWeight:700,marginLeft:8},children:" "}),r.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6B5BFF",fontWeight:500,background:"#f7f8fc",borderRadius:8,padding:"6px 10px"},children:r.jsxs("div",{children:[`${ze.profileLabels[U].split(`
`)[0].split("")[0]}${W&&W.nickname?W.nickname:"-"}`,`${ze.profileLabels[U].split(`
`)[1].split("")[0]}${W&&W.gender?W.gender:"-"}`,`${ze.profileLabels[U].split(`
`)[2].split("")[0]}${W&&W.age?W.age:"-"}`,`${ze.profileLabels[U].split(`
`)[3].split("")[0]}${W&&typeof W.country=="string"&&W.country?La[U][W.country]||W.country:"-"}`,`${ze.profileLabels[U].split(`
`)[4].split("")[0]}${W&&typeof W.interest=="string"&&W.interest?It&&It[U]&&It[U][W.interest]?It[U][W.interest]:W.interest:"-"}`,`${ze.profileLabels[U].split(`
`)[5].split("")[0]}${W&&typeof W.eventType=="string"&&W.eventType?Oa[U][W.eventType]||W.eventType:"-"}`]})})]})]},L.id)}):O?u.filter(L=>L.author===(l==null?void 0:l.displayName)).map(L=>{var Qe;const W=J[L.authorEmail]||{};return r.jsxs("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 8px #b6b6f622",padding:14,marginBottom:14,position:"relative"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white font-extrabold text-sm border-2 border-[#ececff] shadow ${OS(L.author)}`,children:((Qe=L.author)==null?void 0:Qe[0])||"A"}),r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",fontSize:14,cursor:"pointer"},onClick:at=>{at.stopPropagation(),be(ve===L.id?null:L.id)},children:Ma(L,U)}),r.jsx("button",{onClick:()=>St(L.id),style:{marginLeft:"auto",background:"#ff6b6b",color:"#fff",border:"none",borderRadius:6,padding:"2px 8px",fontWeight:700,cursor:"pointer",fontSize:12},children:""})]}),ve===L.id&&r.jsxs("div",{style:{marginTop:8},children:[r.jsx("div",{style:{color:"#232946",fontSize:14,marginBottom:4},children:Wa(L,U)}),r.jsxs("div",{style:{background:"linear-gradient(90deg, #f7f8fc 60%, #e3e6f3 100%)",borderRadius:12,padding:"6px 10px",margin:"6px 0",display:"flex",alignItems:"center",gap:6,boxShadow:"0 2px 8px #b6b6f622",fontSize:12},children:[r.jsxs("span",{style:{color:"#7f8fff",fontWeight:700},children:[" ",ze.encouragement[U],""]}),r.jsx("span",{style:{color:"#4b4b6b",fontWeight:500},children:ht(L)})]}),L.tag&&r.jsx("div",{style:{fontSize:12,color:"#6B5BFF",fontWeight:700,marginBottom:4},children:It[U][L.tag]}),L.onChain&&r.jsx("span",{style:{fontSize:12,color:"#23c6e6",fontWeight:700,marginLeft:8},children:" "}),r.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6B5BFF",fontWeight:500,background:"#f7f8fc",borderRadius:8,padding:"6px 10px"},children:r.jsxs("div",{children:[`${ze.profileLabels[U].split(`
`)[0].split("")[0]}${W&&W.nickname?W.nickname:"-"}`,`${ze.profileLabels[U].split(`
`)[1].split("")[0]}${W&&W.gender?W.gender:"-"}`,`${ze.profileLabels[U].split(`
`)[2].split("")[0]}${W&&W.age?W.age:"-"}`,`${ze.profileLabels[U].split(`
`)[3].split("")[0]}${W&&typeof W.country=="string"&&W.country?La[U][W.country]||W.country:"-"}`,`${ze.profileLabels[U].split(`
`)[4].split("")[0]}${W&&typeof W.interest=="string"&&W.interest?It&&It[U]&&It[U][W.interest]?It[U][W.interest]:W.interest:"-"}`,`${ze.profileLabels[U].split(`
`)[5].split("")[0]}${W&&typeof W.eventType=="string"&&W.eventType?Oa[U][W.eventType]||W.eventType:"-"}`]})})]})]},L.id)}):u.filter(L=>L.visibility==="public").map(L=>{const W=J[L.authorEmail]||{};return r.jsxs("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 8px #b6b6f622",padding:14,marginBottom:14,cursor:"pointer"},children:[r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",fontSize:16,marginBottom:4},onClick:Qe=>{Qe.stopPropagation(),be(ve===L.id?null:L.id)},children:Ma(L,U)}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,fontSize:"12px",flexWrap:"nowrap",whiteSpace:"nowrap"},children:[r.jsx("img",{src:W.avatar||W.avatarUrl||"/avatars/Derxl.png",alt:"avatar",style:{width:24,height:24,borderRadius:"50%",objectFit:"cover",border:"2px solid #ececff"}}),r.jsx("span",{style:{fontWeight:600},children:W&&W.nickname?W.nickname:"-"}),r.jsxs("span",{children:["",W&&W.age?W.age:"-"]}),r.jsxs("span",{children:["",W&&W.gender?W.gender:"-"]})]}),ve===L.id&&r.jsxs("div",{style:{marginTop:8},children:[r.jsx("div",{style:{color:"#232946",fontSize:14,marginBottom:4,whiteSpace:"pre-line"},children:Wa(L,U)}),r.jsxs("div",{style:{background:"linear-gradient(90deg, #f7f8fc 60%, #e3e6f3 100%)",borderRadius:12,padding:"6px 10px",margin:"6px 0",display:"flex",alignItems:"center",gap:6,boxShadow:"0 2px 8px #b6b6f622",fontSize:12},children:[r.jsxs("span",{style:{color:"#7f8fff",fontWeight:700},children:[" ",ze.encouragement[U],""]}),r.jsx("span",{style:{color:"#4b4b6b",fontWeight:500},children:ht(L)})]}),L.tag&&r.jsx("div",{style:{fontSize:12,color:"#6B5BFF",fontWeight:700,marginBottom:4},children:It[U][L.tag]}),L.onChain&&r.jsx("span",{style:{fontSize:12,color:"#23c6e6",fontWeight:700,marginLeft:8},children:" "}),r.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6B5BFF",fontWeight:500,background:"#f7f8fc",borderRadius:8,padding:"6px 10px"},children:r.jsxs("div",{children:[`${ze.profileLabels[U].split(`
`)[0].split("")[0]}${W&&W.nickname?W.nickname:"-"}`,`${ze.profileLabels[U].split(`
`)[1].split("")[0]}${W&&W.gender?W.gender:"-"}`,`${ze.profileLabels[U].split(`
`)[2].split("")[0]}${W&&W.age?W.age:"-"}`,`${ze.profileLabels[U].split(`
`)[3].split("")[0]}${W&&typeof W.country=="string"&&W.country?La[U][W.country]||W.country:"-"}`,`${ze.profileLabels[U].split(`
`)[4].split("")[0]}${W&&typeof W.interest=="string"&&W.interest?It&&It[U]&&It[U][W.interest]?It[U][W.interest]:W.interest:"-"}`,`${ze.profileLabels[U].split(`
`)[5].split("")[0]}${W&&typeof W.eventType=="string"&&W.eventType?Oa[U][W.eventType]||W.eventType:"-"}`]})})]})]},L.id)})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/skytree.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",zIndex:-1}}),r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsx("div",{style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>n("/")})}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>n("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":U==="zh-TW"||U==="zh-CN"?" Restarter ":U==="en"?"Learn about Restarter platform":U==="ja"?"Restarter ":U==="ko"?"Restarter   ":U==="th"?" Restarter":U==="vi"?"Tm hiu v nn tng Restarter":U==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:U==="zh-TW"?" Restarter":U==="zh-CN"?" Restarter":U==="en"?" RestarterWho We Are":U==="ja"?" Restarter":U==="ko"?" Restarter ":U==="th"?" Restarter":U==="vi"?" RestarterChng ti l ai":U==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>n("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":U==="zh-TW"?"":U==="zh-CN"?"":U==="en"?"Provide feedback and suggestions":U==="ja"?"":U==="ko"?"  ":U==="th"?"":U==="vi"?"Cung cp phn hi v  xut":U==="ms"?"Berikan maklum balas dan cadangan":"Praebe consilia et suggestiones",role:"button",children:U==="zh-TW"?" ":U==="zh-CN"?" ":U==="en"?" FeedbackWe Want to Hear You":U==="ja"?" ":U==="ko"?"    ":U==="th"?" ":U==="vi"?" Hp gp Chng ti mun lng nghe bn":U==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),l?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:l.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:l.displayName||l.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(Zn,null,function*(){yield Dn(e)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:ze.logout[U]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>n("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:U==="zh-TW"?"/":U==="zh-CN"?"/":U==="en"?"Register / Login":U==="ja"?"/":U==="ko"?"/":U==="th"?"/":U==="vi"?"ng k/ng nhp":U==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},className:"language-selector",children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>qe(L=>!L),children:[s==="zh-TW"?"":s==="zh-CN"?"":s==="en"?"English":s==="ja"?"":s==="ko"?"":s==="th"?"":s==="vi"?"Ting Vit":s==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),we&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(L=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:L===s?"#6B5BFF":"#232946",fontWeight:L===s?700:500,background:L===s?"#f3f0ff":"#fff"},onClick:()=>{a(L),qe(!1)},children:L==="zh-TW"?"":L==="zh-CN"?"":L==="en"?"English":L==="ja"?"":L==="ko"?"":L==="th"?"":L==="vi"?"Ting Vit":L==="ms"?"Bahasa Melayu":"Latin"},L))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},className:"legal-menu",children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:44,height:"44px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>_e(L=>!L),onMouseOver:L=>{L.currentTarget.style.background="#f3f0ff"},onMouseOut:L=>{L.currentTarget.style.background="#fff"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),xe&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:180,maxWidth:220,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:"#6B5BFF"},children:U==="zh-TW"||U==="zh-CN"?"":U==="en"?"Legal Documents":U==="ja"?"":U==="ko"?" ":U==="th"?"":U==="vi"?"Ti liu php l":U==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:{"zh-TW":"","zh-CN":"",en:"Privacy Policy",ja:"",ko:"",th:"",vi:"Chnh sch bo mt",ms:"Dasar Privasi",la:"Consilium de Privata"},path:"/privacy-policy"},{key:"terms",title:{"zh-TW":"/","zh-CN":"/",en:"Terms/Statement",ja:"/",ko:"/",th:"/",vi:"iu khon/Tuyn b",ms:"Terma/Penyata",la:"Termini/Declaratio"},path:"/terms"},{key:"data",title:{"zh-TW":"","zh-CN":"",en:"Data Deletion",ja:"",ko:"  ",th:"",vi:"Gii thch xa d liu",ms:"Penerangan Pemadaman Data",la:"Explicatio Deletionis Datae"},path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(L=>r.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"11px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{n(L.path),_e(!1)},onMouseOver:W=>{W.currentTarget.style.background="#f3f0ff",W.currentTarget.style.color="#6B5BFF"},onMouseOut:W=>{W.currentTarget.style.background="#fff",W.currentTarget.style.color="#232946"},children:L.title[U]||L.title["zh-TW"]},L.key))]})]})]}),r.jsx("div",{style:{marginTop:"100px",marginBottom:"0px",display:"flex",justifyContent:"center"},children:r.jsx("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px 24px",boxShadow:"0 4px 20px #6B5BFF22",backdropFilter:"blur(10px)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[r.jsx("span",{style:{fontSize:"2rem",fontWeight:900,color:"#6B5BFF"},children:""}),r.jsx("span",{style:{fontSize:"1.5rem",fontWeight:900,color:"#6B5BFF"},children:ze.pageTitle[U]})]})})}),r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:"0px 20px 20px 20px"},children:r.jsxs("div",{className:"modern-container",style:{width:"90%",maxWidth:1e3,display:"flex",flexDirection:"column",gap:32,background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:20,padding:32,boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[r.jsx("p",{style:{fontSize:"1rem",color:"#000",fontWeight:600,margin:"0 0 8px 0",lineHeight:1.5},children:ze.storyQuoteLine1[U]}),r.jsx("p",{style:{fontSize:"1rem",color:"#000",fontWeight:600,margin:"0 0 8px 0",lineHeight:1.5},children:ze.storyQuoteLine2[U]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"#888",fontWeight:500,margin:0,lineHeight:1.4},children:ze.storyQuoteLine3[U]})]}),r.jsxs("div",{style:{display:"flex",gap:32},children:[r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:24},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:16},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",gap:16},children:r.jsx("div",{style:{padding:"12px 20px",background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:10,fontWeight:900,fontSize:17,letterSpacing:1,textAlign:"center"},children:ze.formTitle[U]})}),r.jsx("div",{style:{fontSize:16,color:"#6B5BFF",fontWeight:600,textAlign:"center"},children:ze.storyPrompt[U]})]}),r.jsx("input",{value:p,onChange:L=>g(L.target.value),placeholder:ze.titlePlaceholder[U],style:{width:"100%",boxSizing:"border-box",padding:12,borderRadius:16,border:"1px solid #ddd",fontSize:16,marginBottom:8,color:"#232946"}}),r.jsx("textarea",{value:y,onChange:L=>k(L.target.value),rows:3,placeholder:ze.contentPlaceholder[U],style:{width:"100%",height:120,boxSizing:"border-box",padding:12,borderRadius:16,border:"1px solid #ddd",fontSize:16,marginBottom:8,color:"#232946",resize:"none"}}),r.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",marginBottom:8,fontSize:15},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2},children:[r.jsx("input",{type:"radio",name:"visibility",value:"private",checked:R==="private",onChange:()=>_t("private")})," ",ze.visibilityPrivate[U]]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2},children:[r.jsx("input",{type:"radio",name:"visibility",value:"friends",checked:R==="friends",onChange:()=>_t("friends")})," ",ze.visibilityFriends[U]]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:2},children:[r.jsx("input",{type:"radio",name:"visibility",value:"public",checked:R==="public",onChange:()=>_t("public")})," ",ze.visibilityPublic[U]]})]}),R==="public"&&r.jsxs("div",{style:{marginBottom:8},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:15},children:[r.jsx("input",{type:"checkbox",checked:_,onChange:L=>S(L.target.checked),style:{marginRight:4}})," ",VS[U]]}),r.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4,fontStyle:"italic"},children:ze.blockchainNote[U]})]}),r.jsx("button",{onClick:gt,disabled:v,style:{padding:"12px 20px",background:"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:10,fontWeight:900,fontSize:17,letterSpacing:1,cursor:v?"not-allowed":"pointer",opacity:v?.6:1},children:ze.formSubmit[U]})]}),r.jsxs("div",{style:{flex:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[r.jsxs("div",{style:{display:"flex",gap:10,marginBottom:18},children:[r.jsxs("button",{onClick:()=>{X(!0),Y(!1),oe(!1),be(null)},style:{padding:"8px 18px",borderRadius:18,border:"none",background:Q?"linear-gradient(90deg,#ffb86b 60%,#6B5BFF 100%)":"#eee",color:Q?"#fff":"#6B5BFF",fontWeight:700,fontSize:16,cursor:"pointer"},children:["#",ze.partnersStories[U]]}),r.jsxs("button",{onClick:()=>{Y(!0),X(!1),oe(!1),be(null)},style:{padding:"8px 18px",borderRadius:18,border:"none",background:Le?"linear-gradient(90deg,#23c6e6 60%,#6B5BFF 100%)":"#eee",color:Le?"#fff":"#6B5BFF",fontWeight:700,fontSize:16,cursor:"pointer"},children:["#",ze.friendStories[U]]}),r.jsxs("button",{onClick:()=>{oe(!0),X(!1),Y(!1),be(null)},style:{padding:"8px 18px",borderRadius:18,border:"none",background:O?"linear-gradient(90deg,#6B5BFF 60%,#23c6e6 100%)":"#eee",color:O?"#fff":"#6B5BFF",fontWeight:700,fontSize:16,cursor:"pointer"},children:["#",ze.myStories[U]]})]}),de?r.jsxs("div",{style:{padding:"48px 0",textAlign:"center",color:"#6B5BFF",fontWeight:700,fontSize:22},children:[" AI",ee,r.jsx("div",{style:{fontSize:15,color:"#888",marginTop:12},children:"AI..."})]}):Le?r.jsxs("div",{style:{width:"100%",background:"#fff",borderRadius:18,boxShadow:"0 2px 12px #6B5BFF22",padding:"18px 12px",marginBottom:18},children:[r.jsxs("div",{style:{fontWeight:700,fontSize:18,marginBottom:10,background:"linear-gradient(90deg,#23c6e6 60%,#6B5BFF 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["#",ze.friendStories[U]]}),r.jsx("button",{onClick:()=>{Y(!1),X(!0),oe(!1),be(null)},style:{margin:"0 0 18px 0",padding:"8px 18px",borderRadius:18,border:"none",background:"#eee",color:"#6B5BFF",fontWeight:700,fontSize:16,cursor:"pointer"},children:""}),r.jsx("div",{style:{maxHeight:420,overflowY:"auto",width:"100%",paddingRight:6},children:ae.length===0?r.jsxs("div",{style:{color:"#888",fontWeight:600,fontSize:16,padding:"32px 0",textAlign:"center"},children:[ze.noFriends[U],r.jsx("span",{onClick:()=>n("/friend"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,cursor:"pointer"},children:ze.goToPairTalk[U]})]}):u.filter(L=>L.visibility==="friends"&&ae.includes(L.authorEmail)).map(L=>{const W=J[L.authorEmail]||{};return r.jsxs("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 8px #b6b6f622",padding:14,marginBottom:14,cursor:"pointer"},children:[r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",fontSize:18,cursor:"pointer",marginBottom:4},onClick:Qe=>{Qe.stopPropagation(),be(ve===L.id?null:L.id)},children:Ma(L,U)}),r.jsx(LS,{profile:W,variant:"compact"}),ve===L.id&&r.jsxs("div",{style:{marginTop:10},children:[r.jsx("div",{style:{color:"#232946",fontSize:15,marginBottom:4,whiteSpace:"pre-line"},children:Wa(L,U)}),r.jsxs("div",{style:{background:"linear-gradient(90deg, #f7f8fc 60%, #e3e6f3 100%)",borderRadius:12,padding:"8px 12px",margin:"8px 0",display:"flex",alignItems:"center",gap:8,boxShadow:"0 2px 8px #b6b6f622",fontSize:14},children:[r.jsxs("span",{style:{color:"#7f8fff",fontWeight:700},children:[" ",ze.encouragement[U],""]}),r.jsx("span",{style:{color:"#4b4b6b",fontWeight:500},children:ht(L)})]}),L.tag&&r.jsx("div",{style:{fontSize:14,color:"#6B5BFF",fontWeight:700,marginBottom:4},children:It[U][L.tag]}),L.onChain&&r.jsx("span",{style:{fontSize:14,color:"#23c6e6",fontWeight:700,marginLeft:8},children:" "}),L.visibility&&["private","friends","public"].includes(L.visibility)&&r.jsx("span",{style:{fontSize:13,color:"#888",marginLeft:8},children:Ef[U][L.visibility]}),r.jsx(LS,{profile:W,variant:"detailed"})]})]},L.id)})})]}):O?r.jsxs("div",{style:{width:"100%",background:"#fff",borderRadius:18,boxShadow:"0 2px 12px #6B5BFF22",padding:"18px 12px",marginBottom:18},children:[r.jsxs("div",{style:{fontWeight:700,fontSize:18,marginBottom:10,background:"linear-gradient(90deg,#6B5BFF 0%,#23c6e6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["#",ze.myStories[U]]}),r.jsx("button",{onClick:()=>{oe(!1),X(!0),Y(!1),be(null)},style:{margin:"0 0 18px 0",padding:"8px 18px",borderRadius:18,border:"none",background:"#eee",color:"#6B5BFF",fontWeight:700,fontSize:16,cursor:"pointer"},children:""}),r.jsx("div",{style:{maxHeight:420,overflowY:"auto",width:"100%",paddingRight:6},children:u.filter(L=>L.author===(l==null?void 0:l.displayName)).map(L=>{var Qe;const W=J[L.authorEmail]||{};return r.jsxs("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 8px #b6b6f622",padding:14,marginBottom:14,position:"relative"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-extrabold text-lg border-2 border-[#ececff] shadow ${OS(L.author)}`,children:((Qe=L.author)==null?void 0:Qe[0])||"A"}),r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",fontSize:16,cursor:"pointer"},onClick:at=>{at.stopPropagation(),be(ve===L.id?null:L.id)},children:Ma(L,U)}),r.jsx("button",{onClick:()=>St(L.id),style:{marginLeft:"auto",background:"#ff6b6b",color:"#fff",border:"none",borderRadius:8,padding:"4px 12px",fontWeight:700,cursor:"pointer"},children:""})]}),ve===L.id&&r.jsxs("div",{style:{marginTop:10},children:[r.jsx("div",{style:{color:"#232946",fontSize:15,marginBottom:4},children:Wa(L,U)}),r.jsxs("div",{style:{background:"linear-gradient(90deg, #f7f8fc 60%, #e3e6f3 100%)",borderRadius:12,padding:"8px 12px",margin:"8px 0",display:"flex",alignItems:"center",gap:8,boxShadow:"0 2px 8px #b6b6f622",fontSize:14},children:[r.jsxs("span",{style:{color:"#7f8fff",fontWeight:700},children:[" ",ze.encouragement[U],""]}),r.jsx("span",{style:{color:"#4b4b6b",fontWeight:500},children:ht(L)})]}),L.tag&&r.jsx("div",{style:{fontSize:14,color:"#6B5BFF",fontWeight:700,marginBottom:4},children:It[U][L.tag]}),L.onChain&&r.jsx("span",{style:{fontSize:14,color:"#23c6e6",fontWeight:700,marginLeft:8},children:" "}),L.visibility&&["private","friends","public"].includes(L.visibility)&&r.jsx("span",{style:{fontSize:13,color:"#888",marginLeft:8},children:Ef[U][L.visibility]}),r.jsx("div",{style:{marginTop:10,fontSize:14,color:"#6B5BFF",fontWeight:500,background:"#f7f8fc",borderRadius:8,padding:"8px 12px"},children:r.jsxs("div",{children:[`${ze.profileLabels[U].split(`
`)[0].split("")[0]}${W&&W.nickname?W.nickname:"-"}`,`${ze.profileLabels[U].split(`
`)[1].split("")[0]}${W&&W.gender?W.gender:"-"}`,`${ze.profileLabels[U].split(`
`)[2].split("")[0]}${W&&W.age?W.age:"-"}`,`${ze.profileLabels[U].split(`
`)[3].split("")[0]}${W&&typeof W.country=="string"&&W.country?La[U][W.country]||W.country:"-"}`,`${ze.profileLabels[U].split(`
`)[4].split("")[0]}${W&&typeof W.interest=="string"&&W.interest?It&&It[U]&&It[U][W.interest]?It[U][W.interest]:W.interest:"-"}`,`${ze.profileLabels[U].split(`
`)[5].split("")[0]}${W&&typeof W.eventType=="string"&&W.eventType?Oa[U][W.eventType]||W.eventType:"-"}`]})})]})]},L.id)})})]}):r.jsxs("div",{style:{width:"100%",background:"#fff",borderRadius:18,boxShadow:"0 2px 12px #6B5BFF22",padding:"18px 12px",marginBottom:18},children:[r.jsxs("div",{style:{fontWeight:700,fontSize:18,marginBottom:10,background:"linear-gradient(90deg,#ffb86b 60%,#6B5BFF 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["#",ze.partnersStories[U]]}),r.jsx("button",{onClick:()=>{oe(!0),X(!1),Y(!1),be(null)},style:{margin:"0 0 18px 0",padding:"8px 18px",borderRadius:18,border:"none",background:"#eee",color:"#6B5BFF",fontWeight:700,fontSize:16,cursor:"pointer"},children:""}),r.jsx("div",{style:{maxHeight:420,overflowY:"auto",width:"100%",paddingRight:6},children:u.filter(L=>L.visibility==="public").map(L=>{const W=J[L.authorEmail]||{};return r.jsxs("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 8px #b6b6f622",padding:14,marginBottom:14,cursor:"pointer"},children:[r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",fontSize:18,cursor:"pointer",marginBottom:4},onClick:Qe=>{Qe.stopPropagation(),be(ve===L.id?null:L.id)},children:Ma(L,U)}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:2,fontSize:"14px",flexWrap:"nowrap",whiteSpace:"nowrap"},children:[r.jsx("img",{src:W.avatar||W.avatarUrl||"/avatars/Derxl.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #ececff"}}),r.jsx("span",{style:{fontWeight:600},children:W&&W.nickname?W.nickname:"-"}),r.jsxs("span",{children:["",W&&W.age?W.age:"-"]}),r.jsxs("span",{children:["",W&&W.gender?W.gender:"-"]}),r.jsxs("span",{children:["",W&&typeof W.country=="string"&&W.country?La[U][W.country]||W.country:"-"]}),r.jsxs("span",{children:["",W&&typeof W.interest=="string"&&W.interest?It&&It[U]&&It[U][W.interest]?It[U][W.interest]:W.interest:"-"]}),r.jsxs("span",{children:["",W&&typeof W.eventType=="string"&&W.eventType?Oa[U][W.eventType]||W.eventType:"-"]})]}),ve===L.id&&r.jsxs("div",{style:{marginTop:10},children:[r.jsx("div",{style:{color:"#232946",fontSize:15,marginBottom:4,whiteSpace:"pre-line"},children:Wa(L,U)}),r.jsxs("div",{style:{background:"linear-gradient(90deg, #f7f8fc 60%, #e3e6f3 100%)",borderRadius:12,padding:"8px 12px",margin:"8px 0",display:"flex",alignItems:"center",gap:8,boxShadow:"0 2px 8px #b6b6f622",fontSize:14},children:[r.jsxs("span",{style:{color:"#7f8fff",fontWeight:700},children:[" ",ze.encouragement[U],""]}),r.jsx("span",{style:{color:"#4b4b6b",fontWeight:500},children:ht(L)})]}),L.tag&&r.jsx("div",{style:{fontSize:14,color:"#6B5BFF",fontWeight:700,marginBottom:4},children:It[U][L.tag]}),L.onChain&&r.jsx("span",{style:{fontSize:14,color:"#23c6e6",fontWeight:700,marginLeft:8},children:" "}),L.visibility&&["private","friends","public"].includes(L.visibility)&&r.jsx("span",{style:{fontSize:13,color:"#888",marginLeft:8},children:Ef[U][L.visibility]}),r.jsx("div",{style:{marginTop:10,fontSize:14,color:"#6B5BFF",fontWeight:500,background:"#f7f8fc",borderRadius:8,padding:"8px 12px"},children:r.jsxs("div",{children:[`${ze.profileLabels[U].split(`
`)[0].split("")[0]}${W&&W.nickname?W.nickname:"-"}`,`${ze.profileLabels[U].split(`
`)[1].split("")[0]}${W&&W.gender?W.gender:"-"}`,`${ze.profileLabels[U].split(`
`)[2].split("")[0]}${W&&W.age?W.age:"-"}`,`${ze.profileLabels[U].split(`
`)[3].split("")[0]}${W&&typeof W.country=="string"&&W.country?La[U][W.country]||W.country:"-"}`,`${ze.profileLabels[U].split(`
`)[4].split("")[0]}${W&&typeof W.interest=="string"&&W.interest?It&&It[U]&&It[U][W.interest]?It[U][W.interest]:W.interest:"-"}`,`${ze.profileLabels[U].split(`
`)[5].split("")[0]}${W&&typeof W.eventType=="string"&&W.eventType?Oa[U][W.eventType]||W.eventType:"-"}`]})})]})]},L.id)})})]})]})]})]})})]}),r.jsx("style",{children:`
      @media (min-width: 768px) {
        .mobile-shared-header {
          display: none !important;
        }
      }
      @media (max-width: 767px) {
        .mobile-shared-header {
          display: block !important;
        }
      }
    `})]})},O6=[{id:1,name_zh:"",name_en:"Scribe",icon:"",upgrade_cost:10},{id:2,name_zh:"",name_en:"County Clerk",icon:"",upgrade_cost:10},{id:3,name_zh:"",name_en:"Overseer",icon:"",upgrade_cost:10},{id:4,name_zh:"",name_en:"Inspector",icon:"",upgrade_cost:10},{id:5,name_zh:"",name_en:"Minister",icon:"",upgrade_cost:10},{id:6,name_zh:"",name_en:"Imperial Counselor",icon:"",upgrade_cost:10},{id:7,name_zh:"",name_en:"Chancellor",icon:"",upgrade_cost:10},{id:8,name_zh:"",name_en:"Emperor",icon:"",upgrade_cost:0}];function V6(t){return O6.find(e=>e.id===t)}function hV(t){return O6.find(e=>e.id===t+1)}function pV(t,e){const n=V6(e);return!!n&&n.upgrade_cost>0&&t>=n.upgrade_cost}const mV=m.createContext(void 0);function gV({children:t}){const[e,n]=m.useState(parseInt(localStorage.getItem("badges")||"0",10)),[i,o]=m.useState(parseInt(localStorage.getItem("rankId")||"1",10)),[s,a]=m.useState(!1);function l(){let h=e+1,p=i,g=!1;return pV(h,i)&&(p=i+1,h=0,g=!0,a(!0),setTimeout(()=>a(!1),3e3)),n(h),o(p),localStorage.setItem("badges",String(h)),localStorage.setItem("rankId",String(p)),g}const c=V6(i),u=hV(i);return r.jsx(mV.Provider,{value:{badges:e,rankId:i,rank:c,nextRank:u,promotion:s,addBadge:l,setBadges:n,setRankId:o},children:t})}const U6=m.createContext(void 0),fV=({children:t})=>{const[e,n]=m.useState(!1);return r.jsx(U6.Provider,{value:{isMicOn:e,setMicOn:n},children:t})},yV=()=>{const t=m.useContext(U6);if(t===void 0)throw new Error("useMicStatus must be used within a MicStatusProvider");return t},xV=m.createContext(null);function bV({children:t}){const e=m.useRef(null);return m.useEffect(()=>{try{return console.log(" WebSocket..."),e.current=new WebSocket(jW()),e.current.onopen=()=>{console.log("WebSocket ")},e.current.onerror=n=>{console.error("WebSocket :",n)},e.current.onclose=()=>{console.log("WebSocket ")},()=>{var n;return(n=e.current)==null?void 0:n.close()}}catch(n){console.error("WebSocket :",n)}},[]),r.jsx(xV.Provider,{value:e.current,children:t})}const Bn={logout:{"zh-TW":"","zh-CN":"",ja:"",en:"Logout",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},pageTitle:{"zh-TW":"","zh-CN":"",ja:"",en:"Mood Unlock Box",ko:"  ",th:"",vi:"Hp M Kha Cm Xc",ms:"Kotak Buka Kunci Emosi",la:"Arca Unlock Affectus"},subtitle:{"zh-TW":"","zh-CN":"",ja:"",en:"Daily self-reflection, express your feelings, track emotions, take care of yourself",ko:"  ,  ,  ,  ",th:"   ",vi:"T phn nh mi ngy, by t cm xc, theo di cm xc, chm sc bn thn",ms:"Refleksi diri setiap hari, luahkan perasaan, jejak emosi, jaga diri",la:"Cotidie te ipsum considera, affectus exprime, motus tuos persequere, te ipsum cura"},inputPlaceholder:{"zh-TW":"...(30)","zh-CN":"...(30)",en:"Write your mood... (max 30 chars)",ja:"...(30)",ko:"  ...(30 )",th:"...( 30 )",vi:"Hy vit tm trng ca bn...(ti a 30 k t)",ms:"Tulis perasaan anda...(maksimum 30 aksara)",la:"Animum tuum scribe...(max 30 litterae)"},plantButton:{"zh-TW":"","zh-CN":"",ja:"",en:"Record Today's Mood",ko:"  ",th:"",vi:"Ghi li tm trng hm nay",ms:"Catat Perasaan Hari Ini",la:"Inscribere hodiernum animum"},completeTitle:{"zh-TW":" ","zh-CN":" ",en:" Puzzle Completed! ",ja:" ",ko:"  ! ",th:" ! ",vi:" Hon thnh ghp hnh! ",ms:" Teka-teki Selesai! ",la:" Puzzle Perfectum! "},completeDesc:{"zh-TW":"","zh-CN":"",en:"You have unlocked all mood puzzle pieces. Ready for the next challenge?",ja:"",ko:"   .   !",th:" ?",vi:"Bn  m kha tt c cc mnh ghp cm xc. Sn sng cho th thch tip theo cha?",ms:"Anda telah membuka semua kepingan teka-teki emosi. Sedia untuk cabaran seterusnya?",la:"Omnes partes animi puzzle aperuisti. Paratus es ad provocationem sequentem?"},nextChallenge:{"zh-TW":"{size}x{size}","zh-CN":"{size}x{size}",en:"Next {size}x{size} Challenge",ja:"{size}x{size}",ko:"{size}x{size}  ",th:" {size}x{size} ",vi:"Th thch {size}x{size} tip theo",ms:"Cabaran {size}x{size} Seterusnya",la:"Ad novam provocationem {size}x{size}"},encouragement:{"zh-TW":"","zh-CN":"",en:"Sometimes, recording your feelings is a gentle way to accompany yourself.",ja:"",ko:"       .",th:" ",vi:"i khi, ghi li cm xc l cch du dng  ng hnh cng chnh mnh.",ms:"Kadang-kadang, mencatat perasaan adalah teman yang lembut untuk diri sendiri.",la:"Aliquando, animum inscribere est tibi ipsum leniter comitari."},toastInput:{"zh-TW":"","zh-CN":"",en:"Please enter your mood first!",ja:"",ko:"  !",th:"!",vi:"Vui lng nhp tm trng ca bn trc!",ms:"Sila masukkan perasaan anda dahulu!",la:"Primum animum tuum inscribe!"},invalidMood:{"zh-TW":"","zh-CN":"",en:"Please enter a meaningful mood (not just numbers, symbols, or repeated characters)",ja:"",ko:"   (, ,  )",th:" (  )",vi:"Vui lng nhp tm trng c  ngha (khng ch l s, k hiu hoc k t lp li)",ms:"Sila masukkan perasaan yang bermakna (bukan hanya nombor, simbol atau aksara berulang)",la:"Sententiam significantem inscribe (non solum numeri, signa aut litterae repetitae)"},completeNext:{"zh-TW":"","zh-CN":"",en:"Puzzle completed! Please proceed to the next challenge.",ja:"",ko:"  .   .",th:" ",vi:"Bn  hon thnh mn ny, hy chuyn sang th thch tip theo.",ms:"Tahap ini telah selesai. Sila ke cabaran seterusnya.",la:"Hoc gradum perfecisti. Ad provocationem sequentem procede."},finalCompleteTitle:{"zh-TW":"  ","zh-CN":"  ",en:" You have completed all mood puzzles! ",ja:"  ",ko:"    ! ",th:" ! ",vi:" Bn  hon thnh tt c cc mnh ghp cm xc! ",ms:" Anda telah melengkapkan semua teka-teki emosi! ",la:" Omnes partes animi puzzle perfecisti! "},finalCompleteDesc:{"zh-TW":"","zh-CN":"",en:"You have unlocked every puzzle piece. This is your perseverance and achievement! Keep believing in yourselfevery day ahead is worth celebrating!",ja:"",ko:"   .    !   ,   !",th:" ! !",vi:"Bn  m kha mi mnh ghp. y l s kin tr v thnh tu ca bn! Hy tip tc tin vo bn thn v n mng mi ngy!",ms:"Anda telah membuka semua kepingan teka-teki. Ini adalah ketabahan dan pencapaian anda! Teruskan percaya pada diri sendiri dan raikan setiap hari!",la:"Omnia fragmenta aenigmatis aperuisti. Haec est constantia et perfectio tua! Crede tibi et diem quemque celebra!"}};function vV(){var He,J,H,Le;const t=tt(),e=Ze(),{lang:n,setLang:i}=dt(),[o,s]=m.useState(""),[a,l]=m.useState(!1),[c,u]=m.useState([]),h=((He=e.currentUser)==null?void 0:He.uid)||"",[p,g]=m.useState(!1),[y,k]=m.useState(""),[j,T]=m.useState(!1),[x,b]=m.useState(!1),v=m.useRef(null),z=m.useRef(null),D=new Date().toISOString().slice(0,10);m.useEffect(()=>{if(!x)return;const Y=ae=>{z.current&&!z.current.contains(ae.target)&&b(!1)};return document.addEventListener("click",Y),()=>document.removeEventListener("click",Y)},[x]),m.useEffect(()=>{if(!j)return;const Y=ae=>{v.current&&!v.current.contains(ae.target)&&T(!1)};return document.addEventListener("click",Y),()=>document.removeEventListener("click",Y)},[j]),m.useEffect(()=>{h&&fetch(`/api/mood?userId=${h}`).then(Y=>Y.json()).then(Y=>u(Y))},[h]);const[P,_]=mn.useState(()=>{const Y=localStorage.getItem("puzzleStage");return Y?JSON.parse(Y):{size:3,unlocked:0,completed:!1,lastDate:""}});mn.useEffect(()=>{localStorage.setItem("puzzleStage",JSON.stringify(P))},[P]);const S=P.size||3,R=S+1,A=`/puzzle${S-2}.png`,B=S,I=B*B;function re(Y){return Array.from({length:I},(ae,Ie)=>Ie<Y)}function Q(){const Y={size:R,unlocked:0,completed:!1,lastDate:new Date().toISOString().slice(0,10)};_(Y),u([]),be(null)}const X=()=>C(this,null,function*(){if(!h){k(""),g(!0),setTimeout(()=>g(!1),2e3);return}let Y=!1;if(P.lastDate===D&&(Y=!0),!Y&&Array.isArray(c)){for(const Ie of c)if(Ie&&Array.isArray(Ie.petals)&&Ie.petals.some(xe=>typeof xe.date=="string"&&xe.date.slice(0,10)===D)){Y=!0;break}}if(!Y){const Ie=`mood_${h}_${D}`;localStorage.getItem(Ie)&&(Y=!0)}if(Y){k(""),g(!0),setTimeout(()=>g(!1),2e3);return}if(te){k(Bn.completeNext[n]),g(!0),setTimeout(()=>g(!1),2e3);return}if(!o){k(Bn.toastInput[n]),g(!0),setTimeout(()=>g(!1),2e3);return}const ae=o.replace(/\s/g,"");if(/^\d+$/.test(ae)){k(Bn.invalidMood[n]),g(!0),setTimeout(()=>g(!1),2e3);return}if(/^[\p{P}\p{S}]+$/u.test(ae)){k(Bn.invalidMood[n]),g(!0),setTimeout(()=>g(!1),2e3);return}if(ae.length>=4&&/^(.)\1+$/.test(ae)){k(Bn.invalidMood[n]),g(!0),setTimeout(()=>g(!1),2e3);return}if(ae.length<4){k(Bn.invalidMood[n]),g(!0),setTimeout(()=>g(!1),2e3);return}l(!0);try{yield fetch("/api/mood",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:h,mood:o,date:new Date().toISOString().slice(0,10)+"-"+Math.random()})}),s(""),fetch(`/api/mood?userId=${h}`).then(we=>we.json()).then(we=>u(we)),l(!1),_(we=>We(ke({},we),{unlocked:we.unlocked+1,lastDate:new Date().toISOString().slice(0,10)}));const Ie=`mood_${h}_${D}`;localStorage.setItem(Ie,JSON.stringify({date:D,mood:o,timestamp:Date.now()}));const xe=new Date,_e=xe.getDay();be({date:xe.toISOString().slice(0,10),mood:je[_e],isTodayNewPiece:!0})}catch(Ie){l(!1),k(""),g(!0),setTimeout(()=>g(!1),2e3)}}),de=P.unlocked,V=re(de),[ee,he]=mn.useState(!1),[ve,be]=mn.useState(null),te=de>=I;function N(){const Y={size:3,unlocked:0,completed:!1,lastDate:""};localStorage.setItem("puzzleStage",JSON.stringify(Y)),window.location.reload()}function O(){const Y=We(ke({},P),{unlocked:0,lastDate:""});localStorage.setItem("puzzleStage",JSON.stringify(Y)),window.location.reload()}const oe={};if(Array.isArray(c)&&(console.log(" garden :",c.length),c.forEach((Y,ae)=>{console.log(`garden[${ae}]:`,Y);let Ie=null;Y&&Array.isArray(Y.petals)?Ie=Y.petals:Y&&Array.isArray(Y)?Ie=Y:Y&&typeof Y=="object"&&Y.mood&&Y.date&&(Ie=[Y]),Ie?(console.log(" petals :",Ie),Ie.forEach((xe,_e)=>{if(console.log(`petal[${_e}]:`,xe),xe&&typeof xe.mood=="string"&&typeof xe.date=="string"){const we=xe.date.slice(0,10);oe[we]={mood:xe.mood,date:we},console.log(":",{date:we,mood:xe.mood})}else xe&&typeof xe=="object"&&console.log("petal :",xe)})):console.log(" petals ")})),Object.keys(oe).length===0){console.log("...");for(let Y=0;Y<localStorage.length;Y++){const ae=localStorage.key(Y);if(ae&&ae.startsWith("mood_"))try{const Ie=JSON.parse(localStorage.getItem(ae)||"{}");if(Ie.date&&Ie.mood){const xe=Ie.date.slice(0,10);oe[xe]={mood:Ie.mood,date:xe}}}catch(Ie){console.log(":",ae)}}}const ge=Object.values(oe).sort((Y,ae)=>Y.date.localeCompare(ae.date));console.log("DEBUG garden:",c),console.log("DEBUG moodByDate:",oe),console.log("DEBUG allPetals:",ge);const je=[" ","","","","","",""],Ce={"zh-TW":"","zh-CN":"",en:"Unlock puzzles with your mood",ja:"",ko:"  ",th:"",vi:"M kha ghp hnh bng cm xc",ms:"Buka teka-teki dengan perasaan",la:"Affectibus tuis aenigmata solve"};return r.jsxs("div",{style:{width:"100vw",position:"relative",overflowX:"hidden",background:"url('/snowmountain.png') center center / cover no-repeat fixed, linear-gradient(to bottom, #eaf6ff 0%, #f7fafc 100%)",minHeight:"0"},children:[p&&r.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.98)",color:"#6B5BFF",fontWeight:700,fontSize:20,padding:"28px 48px",borderRadius:18,boxShadow:"0 4px 32px #6B5BFF33",zIndex:3e3,textAlign:"center",letterSpacing:1.5,transition:"opacity 0.3s"},children:y}),window.innerWidth>768&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed-logo-box",style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",className:"fixed-logo-img",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":n==="zh-TW"||n==="zh-CN"?" Restarter ":n==="en"?"Learn about Restarter platform":n==="ja"?"Restarter ":n==="ko"?"Restarter   ":n==="th"?" Restarter":n==="vi"?"Tm hiu v nn tng Restarter":n==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:n==="zh-TW"?" Restarter":n==="zh-CN"?" Restarter":n==="en"?" RestarterWho We Are":n==="ja"?" Restarter":n==="ko"?" Restarter ":n==="th"?" Restarter":n==="vi"?" RestarterChng ti l ai":n==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":n==="zh-TW"?"":n==="zh-CN"?"":n==="en"?"Provide feedback":n==="ja"?"":n==="ko"?" ":n==="th"?"":n==="vi"?"Cung cp phn hi":n==="ms"?"Beri maklum balas":"Praebe consilium",role:"button",children:n==="zh-TW"?" ":n==="zh-CN"?" ":n==="en"?" FeedbackWe Want to Hear You":n==="ja"?" ":n==="ko"?"    ":n==="th"?" ":n==="vi"?" Hp gp Chng ti mun lng nghe bn":n==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:((J=Ze().currentUser)==null?void 0:J.photoURL)||"/ctx-logo.png",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:"2px solid #6B5BFF"}}),r.jsx("span",{style:{color:"#6B5BFF",fontWeight:600,fontSize:12,maxWidth:60,overflow:"hidden",textOverflow:"ellipsis"},children:((H=Ze().currentUser)==null?void 0:H.displayName)||((Le=Ze().currentUser)==null?void 0:Le.email)||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Ze().signOut(),t("/")}),style:{width:"80px",fontSize:14,padding:"6px 10px",height:"28px",borderRadius:4,fontWeight:600,border:"1px solid #ff6347",color:"#ff6347",background:"#fff",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s"},children:Bn.logout[n]})]})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:z,children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>b(Y=>!Y),children:[n==="zh-TW"?"":n==="zh-CN"?"":n==="en"?"English":n==="ja"?"":n==="ko"?"":n==="th"?"":n==="vi"?"Ting Vit":n==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),x&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(Y=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:Y===n?"#6B5BFF":"#232946",fontWeight:Y===n?700:500,background:Y===n?"#f3f0ff":"#fff"},onClick:()=>{i(Y),b(!1)},children:Y==="zh-TW"?"":Y==="zh-CN"?"":Y==="en"?"English":Y==="ja"?"":Y==="ko"?"":Y==="th"?"":Y==="vi"?"Ting Vit":Y==="ms"?"Bahasa Melayu":"Latin"},Y))})]}),r.jsxs("div",{style:{position:"relative",display:"inline-block"},ref:v,children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 12px",minWidth:50,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>T(Y=>!Y),onMouseOver:Y=>{Y.currentTarget.style.background="#6B5BFF",Y.currentTarget.style.color="#fff"},onMouseOut:Y=>{Y.currentTarget.style.background="#fff",Y.currentTarget.style.color="#6B5BFF"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),j&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:200,maxWidth:250,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#6B5BFF"},children:n==="zh-TW"||n==="zh-CN"?"":n==="en"?"Legal Documents":n==="ja"?"":n==="ko"?" ":n==="th"?"":n==="vi"?"Ti liu php l":n==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:"",path:"/privacy-policy"},{key:"terms",title:"",path:"/terms"},{key:"data",title:"",path:"/data-deletion"},{key:"ai",title:"AI",path:"/ai-statement"},{key:"mental",title:"",path:"/mental-health-disclaimer"},{key:"cookie",title:"Cookie",path:"/cookie-policy"},{key:"children",title:"",path:"/children-privacy"},{key:"international",title:"",path:"/international-users"},{key:"security",title:"",path:"/security-statement"},{key:"update",title:"",path:"/update-notification"}].map(Y=>r.jsx("div",{style:{padding:"10px 16px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"13px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(Y.path),T(!1)},onMouseOver:ae=>{ae.currentTarget.style.background="#f3f0ff",ae.currentTarget.style.color="#6B5BFF"},onMouseOut:ae=>{ae.currentTarget.style.background="#fff",ae.currentTarget.style.color="#232946"},children:Y.title},Y.key))]})]})]})]}),window.innerWidth<=768&&r.jsx(Ar,{}),r.jsx("div",{style:{width:"100%",maxWidth:window.innerWidth<=768?280:400,margin:window.innerWidth<=768?"100px auto 20px auto":"120px auto 20px auto",padding:window.innerWidth<=768?"8px 20px":"12px 20px",background:"rgba(255,255,255,0.95)",borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:r.jsxs("h1",{style:{fontWeight:900,fontSize:18,color:"#6B5BFF",margin:0,lineHeight:1,textShadow:"0 2px 8px #6B5BFF88",textAlign:"center"},children:[r.jsx("span",{role:"img","aria-label":"mood",children:""})," ",Bn.pageTitle[n]]})}),r.jsxs("div",{style:{maxWidth:700,margin:window.innerWidth<=768?"0 auto 0 auto":"20px auto 0 auto",padding:window.innerWidth<=768?"2.5rem 2vw 0 2vw":"1.2rem 2vw 0 2vw",background:"rgba(255,255,255,0.92)",borderRadius:24,boxShadow:"0 8px 32px rgba(0,0,0,0.08)",position:"relative"},children:[r.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:12,flexWrap:"nowrap",marginBottom:8},children:r.jsx("span",{style:{fontSize:15,color:"#888",fontWeight:700,letterSpacing:1,textShadow:"0 2px 12px #6B5BFF55",whiteSpace:"nowrap"},children:Ce[n]||Ce.en})}),r.jsx("div",{style:{color:"#888",fontSize:18,marginBottom:0,textAlign:"center",fontWeight:700,letterSpacing:1,textShadow:"0 2px 12px #6B5BFF55"},children:Bn.subtitle[n]}),r.jsxs("div",{style:{width:"100%",textAlign:"center",color:"#232323",fontSize:17,fontWeight:500,margin:"0 0 10px 0",letterSpacing:.5,lineHeight:1.5,textShadow:"0 2px 8px #bbb8"},children:[Bn.encouragement[n],r.jsx("span",{role:"img","aria-label":"rainbow",children:""})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end",gap:12,width:"100%",justifyContent:"center",marginBottom:8},children:[r.jsx("textarea",{value:o,onChange:Y=>s(Y.target.value),placeholder:Bn.inputPlaceholder[n],maxLength:30,rows:3,style:{width:260,minWidth:180,maxWidth:320,padding:12,borderRadius:8,border:"1.5px solid #ddd",fontSize:16,resize:"vertical",marginRight:0}}),r.jsx("button",{onClick:X,disabled:a,style:{width:140,minWidth:100,padding:"14px 0",background:a?"#ccc":"linear-gradient(135deg, #6B5BFF 60%, #23c6e6 100%)",color:"#fff",border:"none",borderRadius:10,fontWeight:900,fontSize:16,letterSpacing:1,cursor:a?"not-allowed":"pointer",transition:"all 0.2s ease",marginLeft:0,marginBottom:0},children:a?"...":Bn.plantButton[n]})]}),r.jsx("div",{style:{borderTop:"1px solid #eee",margin:"16px 0"}}),r.jsx("div",{children:r.jsxs("div",{style:{minHeight:0,background:"#f0f8ff",borderRadius:12,display:"block",color:"#aaa",position:"relative",width:"100%",maxWidth:540,overflow:"hidden",margin:"0 auto",padding:"0 0 24px 0"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${B}, 1fr)`,gridTemplateRows:`repeat(${B}, 1fr)`,width:"100%",maxWidth:"100%",margin:"0 auto",aspectRatio:"1 / 1",position:"relative",zIndex:1,gap:0,background:"#fff",boxShadow:"0 2px 24px #6B5BFF22",boxSizing:"border-box"},children:V.map((Y,ae)=>{const Ie=ge[ae]||null,xe=(Ie==null?void 0:Ie.mood)||"",_e=(Ie==null?void 0:Ie.date)||"",we=Math.floor(ae/B),qe=ae%B,gt=Y&&!!Ie;return r.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:"1/1",overflow:"hidden",position:"relative",border:"none",boxSizing:"border-box",cursor:gt?"pointer":"default",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{console.log(":",{idx:ae,canClick:gt,petal:Ie,date:_e,mood:xe}),gt&&(console.log(" showInfo:",{date:_e,mood:xe}),be({date:_e,mood:xe}))},children:[r.jsx("img",{src:A,alt:"puzzle",style:{width:`calc(100% * ${B})`,height:`calc(100% * ${B})`,objectFit:"cover",position:"absolute",left:`-${qe*100}%`,top:`-${we*100}%`,filter:Y?"none":"blur(8px) grayscale(1) brightness(1.2)",opacity:Y?1:.5,transition:"filter 0.3s, opacity 0.3s"}}),!Y&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32},children:"?"})]},ae)})}),ve&&!te&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>be(null),children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:"32px 40px",boxShadow:"0 4px 32px #0008",minWidth:260,maxWidth:320,textAlign:"center",fontSize:18,fontWeight:700},children:[r.jsx("div",{style:{fontSize:16,color:"#6B5BFF",marginBottom:8},children:ve.date}),r.jsx("div",{style:{fontSize:22,color:"#232946",marginBottom:8},children:ve.mood}),ve.isTodayNewPiece&&r.jsx("div",{style:{fontSize:15,color:"#888",marginTop:8},children:"()"}),r.jsx("div",{style:{fontSize:14,color:"#888"},children:""})]})}),te&&r.jsx(r.Fragment,{children:r.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2,pointerEvents:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",background:"rgba(255,255,255,0.0)"},children:P.size===22?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",maxWidth:"90vw",margin:"0 auto"},children:[r.jsx("div",{style:{fontSize:32,fontWeight:900,color:"#ff9800",textShadow:"0 2px 12px #fff,0 4px 24px #ff980088",letterSpacing:2,marginBottom:12,lineHeight:1.2,wordBreak:"break-word",maxWidth:"100%"},children:Bn.finalCompleteTitle[n]}),r.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#6B5BFF",textShadow:"0 2px 12px #6B5BFF88",letterSpacing:1,lineHeight:1.5,wordBreak:"break-word",maxWidth:"100%",marginBottom:24},children:Bn.finalCompleteDesc[n]}),r.jsx("button",{onClick:N,style:{padding:"14px 40px",background:"linear-gradient(135deg,#6B5BFF 60%,#23c6e6 100%)",color:"#fff",border:"none",borderRadius:16,fontWeight:900,fontSize:22,boxShadow:"0 2px 12px #6B5BFF44",cursor:"pointer",letterSpacing:2,transition:"transform 0.2s",outline:"none",display:"block"},children:""})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{position:"relative",fontSize:24,fontWeight:900,color:"#ff9800",textShadow:"0 2px 12px #fff,0 4px 24px #ff980088",transform:"scale(0.7)",opacity:1,animation:"flyIn1 0.5s 0.1s cubic-bezier(.68,-0.55,.27,1.55) forwards"},children:Bn.completeTitle[n]}),r.jsx("div",{style:{position:"relative",fontSize:20,fontWeight:700,color:"#6B5BFF",marginTop:18,opacity:0,animation:"flyIn2 0.5s 0.6s cubic-bezier(.68,-0.55,.27,1.55) forwards"},children:Bn.completeDesc[n]}),r.jsx("div",{style:{position:"relative",marginTop:32,opacity:0,animation:"flyIn3 0.5s 1.1s cubic-bezier(.68,-0.55,.27,1.55) forwards"},children:r.jsx("button",{type:"button",onClick:Q,style:{padding:"18px 48px",background:"linear-gradient(135deg,#6B5BFF 60%,#23c6e6 100%)",color:"#fff",borderRadius:16,fontWeight:900,fontSize:24,boxShadow:"0 2px 12px #6B5BFF44",border:"none",cursor:"pointer",letterSpacing:2,transition:"transform 0.2s",outline:"none",display:"block"},children:Bn.nextChallenge[n].replace(/\{size\}/g,String(R))})}),r.jsx("style",{children:`
@keyframes flyIn1 { from { opacity:0; transform:translateY(40px) scale(0.7);} to { opacity:1; transform:translateY(0) scale(1);} }
@keyframes flyIn2 { from { opacity:0; transform:translateY(40px) scale(0.7);} to { opacity:1; transform:translateY(0) scale(1);} }
@keyframes flyIn3 { from { opacity:0; transform:translateY(40px) scale(0.7);} to { opacity:1; transform:translateY(0) scale(1);} }
`})]})})})]})})]}),r.jsx("div",{style:{width:"100%",maxWidth:700,margin:"20px auto 0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:12,flexWrap:"wrap"},children:[r.jsx("button",{onClick:O,style:{padding:"8px 16px",background:"linear-gradient(135deg,#ff6b6b 60%,#ff8e8e 100%)",color:"#fff",border:"none",borderRadius:8,fontWeight:700,fontSize:14,cursor:"pointer",letterSpacing:1},children:""}),r.jsx("button",{onClick:N,style:{padding:"8px 16px",background:"linear-gradient(135deg,#4ecdc4 60%,#6bcfc4 100%)",color:"#fff",border:"none",borderRadius:8,fontWeight:700,fontSize:14,cursor:"pointer",letterSpacing:1},children:""})]})}),r.jsx("style",{children:`
        @media (min-width: 768px) {
          .mobile-shared-header {
            display: none !important;
          }
          .desktop-header {
            display: flex !important;
          }
        }
        @media (max-width: 767px) {
          .mobile-shared-header {
            display: block !important;
          }
          .desktop-header {
            display: none !important;
          }
        }
      `})]})}const Rh={"zh-TW":{back:" ",title:"",send:"",placeholder:"..."},"zh-CN":{back:" ",title:"",send:"",placeholder:"..."},en:{back:" Back",title:"Chat Room",send:"Send",placeholder:"Type a message..."},ja:{back:" ",title:"",send:"",placeholder:"..."},ko:{back:"  ",title:"",send:"",placeholder:" ..."},th:{back:" ",title:"",send:"",placeholder:"..."},vi:{back:" Quay li",title:"Phng chat",send:"Gi",placeholder:"Nhp tin nhn..."},ms:{back:" Kembali",title:"Bilik Sembang",send:"Hantar",placeholder:"Taip mesej..."},la:{back:" Redire",title:"Cella Colloquii",send:"Mitte",placeholder:"Nuntium insere..."}};function kV({open:t,onClose:e,roomId:n,friendName:i}){const[o,s]=m.useState(!1),[a,l]=m.useState(!0),[c,u]=m.useState(""),[h,p]=m.useState([]),g=m.useRef(null),y=m.useRef(null),[k,j]=m.useState(null);m.useEffect(()=>{t&&T()},[t]);const T=()=>C(this,null,function*(){try{const D=yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0});j(D),g.current&&(g.current.srcObject=D);const P=D.getAudioTracks()[0];P&&(P.enabled=!1)}catch(D){console.error(":",D),alert("")}}),x=()=>{if(k){const D=k.getAudioTracks()[0];D&&(D.enabled=!D.enabled,s(D.enabled))}},b=()=>{if(k){const D=k.getVideoTracks()[0];D&&(D.enabled=!D.enabled,l(D.enabled))}},v=()=>{if(c.trim()){const D={id:Date.now().toString(),text:c,sender:"",time:new Date().toLocaleTimeString()};p(P=>[...P,D]),u("")}},z=D=>{D.key==="Enter"&&v()};return t?r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#0007",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:24,boxShadow:"0 2px 16px #0003",width:"80%",maxWidth:800,height:"80%",maxHeight:600,position:"relative",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontWeight:700,fontSize:20,margin:0},children:""}),r.jsx("button",{onClick:e,style:{background:"#eee",border:"none",borderRadius:8,padding:"6px 14px",fontWeight:700,cursor:"pointer"},children:""})]}),r.jsxs("div",{style:{display:"flex",flex:1,gap:16},children:[r.jsxs("div",{style:{flex:2,display:"flex",flexDirection:"column",gap:12},children:[r.jsxs("div",{style:{display:"flex",gap:12,flex:1},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:700,marginBottom:8,fontSize:14},children:""}),r.jsx("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:120,background:"#000",borderRadius:8,objectFit:"cover",transform:"scaleX(-1)"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:700,marginBottom:8,fontSize:14},children:i}),r.jsx("video",{ref:y,autoPlay:!0,playsInline:!0,style:{width:"100%",height:120,background:"#000",borderRadius:8,objectFit:"cover"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[r.jsx("button",{onClick:x,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"8px 16px",fontWeight:700,fontSize:14,cursor:"pointer"},children:o?"":""}),r.jsx("button",{onClick:b,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"8px 16px",fontWeight:700,fontSize:14,cursor:"pointer"},children:a?"":""})]})]}),r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",border:"1px solid #eee",borderRadius:8,padding:12},children:[r.jsx("div",{style:{fontWeight:700,marginBottom:8,fontSize:14},children:""}),r.jsx("div",{style:{flex:1,background:"#f7f7f7",borderRadius:6,padding:8,marginBottom:8,overflowY:"auto",minHeight:100},children:h.length===0?r.jsx("div",{style:{fontSize:12,color:"#666",textAlign:"center",marginTop:20},children:""}):h.map(D=>r.jsxs("div",{style:{marginBottom:8,fontSize:12},children:[r.jsx("div",{style:{fontWeight:600,color:"#6B5BFF"},children:D.sender}),r.jsx("div",{style:{color:"#333",marginTop:2},children:D.text}),r.jsx("div",{style:{fontSize:10,color:"#999",marginTop:2},children:D.time})]},D.id))}),r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("input",{value:c,onChange:D=>u(D.target.value),onKeyPress:z,placeholder:"...",style:{flex:1,borderRadius:6,border:"1px solid #ccc",padding:"6px 8px",fontSize:12}}),r.jsx("button",{onClick:v,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:700,fontSize:12,cursor:"pointer"},children:""})]})]})]})]})}):null}function wV(){const[t,e]=m.useState([]),[n,i]=m.useState(null),[o,s]=m.useState([]),[a,l]=m.useState(""),{lang:c,setLang:u}=dt(),[h,p]=m.useState(null),[g,y]=m.useState(!0),k=m.useRef(null),j=tt(),[T,x]=m.useState(!1),{isTestMode:b}=fs();m.useEffect(()=>{const P=ri(Tr,_=>C(this,null,function*(){_?(p(_),yield v(_.uid)):j("/")}));return()=>P()},[j]);const v=P=>C(this,null,function*(){y(!0);const _=xn(Ct,"links"),S=ei(_,bn("user1Id","==",P),bn("status","==","connected")),R=ei(_,bn("user2Id","==",P),bn("status","==","connected")),[E,A]=yield Promise.all([Ii(S),Ii(R)]),B=new Set;E.forEach(re=>B.add(re.data().user2Id)),A.forEach(re=>B.add(re.data().user1Id));const I=[];for(const re of B){const Q=kn(Ct,"profiles",re),X=yield ro(Q);if(X.exists()){const de=X.data();I.push({id:re,name:de.name||"",avatar:de.avatar||"/avatars/Derxl.png",online:!!de.online})}}if(b&&I.push({id:"test-friend-1",name:" 1",avatar:"/avatars/Annie.png",online:!0},{id:"test-friend-2",name:" 2",avatar:"/avatars/Bray.png",online:!1},{id:"test-friend-3",name:" 3",avatar:"/avatars/berlex.png",online:!0}),e(I),y(!1),b&&I.length>0){const re=I.find(Q=>Q.id.startsWith("test-friend-"));re&&i(re)}});m.useEffect(()=>{if(h&&n){if(y(!0),b&&n.id.startsWith("test-friend-")){const R=[{id:"test-msg-1",fromUserId:n.id,fromUserName:n.name,toUserId:h.uid,toUserName:h.displayName||"",text:" ",participants:[h.uid,n.id],createdAt:new Date(Date.now()-3e5)},{id:"test-msg-2",fromUserId:h.uid,fromUserName:h.displayName||"",toUserId:n.id,toUserName:n.name,text:" ",participants:[h.uid,n.id],createdAt:new Date(Date.now()-24e4)},{id:"test-msg-3",fromUserId:n.id,fromUserName:n.name,toUserId:h.uid,toUserName:h.displayName||"",text:"",participants:[h.uid,n.id],createdAt:new Date(Date.now()-18e4)},{id:"test-msg-4",fromUserId:h.uid,fromUserName:h.displayName||"",toUserId:n.id,toUserName:n.name,text:"",participants:[h.uid,n.id],createdAt:new Date(Date.now()-12e4)},{id:"test-msg-5",fromUserId:n.id,fromUserName:n.name,toUserId:h.uid,toUserName:h.displayName||"",text:" ",participants:[h.uid,n.id],createdAt:new Date(Date.now()-6e4)}];s(R),y(!1);return}const P=xn(Ct,"messages"),_=ei(P,bn("participants","array-contains",h.uid),Yp("createdAt","asc")),S=ed(_,R=>{const E=[];R.forEach(A=>{const B=A.data();B.participants.includes(n.id)&&E.push(We(ke({},B),{id:A.id}))}),s(E),y(!1)});return()=>S()}},[h,n,b]),m.useEffect(()=>{var P;(P=k.current)==null||P.scrollIntoView({behavior:"smooth"})},[o]);const z=()=>C(this,null,function*(){if(!(!a.trim()||!h||!n)){if(b&&n.id.startsWith("test-friend-")){const P={id:`test-msg-${Date.now()}`,fromUserId:h.uid,fromUserName:h.displayName||"",toUserId:n.id,toUserName:n.name,text:a,participants:[h.uid,n.id],createdAt:new Date};s(_=>[..._,P]),l("");return}try{const P={fromUserId:h.uid,fromUserName:h.displayName||"",toUserId:n.id,toUserName:n.name,text:a,participants:[h.uid,n.id],createdAt:_b()};yield $o(xn(Ct,"messages"),P),l("")}catch(P){alert("")}}}),D=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),z())};return g?r.jsx("div",{style:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#fff",fontSize:18},children:"..."})}):r.jsxs("div",{style:{background:"url('/green_hut.png') center center / cover no-repeat",minHeight:"100vh",display:(window.innerWidth<=768,"flex"),flexDirection:window.innerWidth<=768?"column":"row",alignItems:window.innerWidth<=768?"center":"flex-start",justifyContent:"center",paddingTop:window.innerWidth<=768?20:40,position:"relative"},children:[r.jsx("button",{onClick:()=>j("/friend"),style:{position:"fixed",top:24,left:24,zIndex:10001,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:""}),window.innerWidth<=768?r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20,justifyContent:"center",alignItems:"center",width:"100%",maxWidth:400,padding:"20px"},children:[b&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.9)",padding:"8px 12px",borderRadius:8,fontSize:12,color:"#666",marginBottom:10},children:[" ",t.length," ",(n==null?void 0:n.name)||""]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",width:"95%",maxWidth:320,border:"2px solid rgba(107,91,255,0.3)"},children:[r.jsx("div",{style:{fontWeight:800,fontSize:22,color:"#6B5BFF",marginBottom:16,textAlign:"center",textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:""}),r.jsx("div",{style:{textAlign:"center",color:"#333",fontSize:16,lineHeight:1.5,fontWeight:500,marginBottom:16},children:t.length===0?b?"":",":""}),t.length>0&&r.jsx("div",{style:{maxHeight:200,overflowY:"auto"},children:t.map(P=>r.jsxs("div",{onClick:()=>P.online&&i(P),style:{display:"flex",alignItems:"center",gap:12,marginBottom:12,cursor:P.online?"pointer":"not-allowed",padding:"8px",borderRadius:8,background:(n==null?void 0:n.id)===P.id?"rgba(107,91,255,0.1)":"transparent",border:(n==null?void 0:n.id)===P.id?"1px solid #6B5BFF":"1px solid transparent",opacity:P.online?1:.5},children:[r.jsx("img",{src:P.avatar,alt:P.name,style:{width:36,height:36,borderRadius:"50%",filter:P.online?"none":"grayscale(1)",border:(n==null?void 0:n.id)===P.id?"2px solid #6B5BFF":"2px solid #eee"}}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:600,color:P.online?"#222":"#aaa",fontSize:14},children:[P.name,b&&P.id.startsWith("test-friend-")&&r.jsx("span",{style:{fontSize:"10px",background:"#ff6b6b",color:"white",padding:"2px 6px",borderRadius:"4px",marginLeft:"6px",fontWeight:"normal"},children:""})]}),r.jsx("div",{style:{fontSize:11,color:P.online?"#23c6e6":"#aaa"},children:P.online?"":""})]})]},P.id))})]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",width:"95%",maxWidth:320,border:"2px solid rgba(107,91,255,0.3)"},children:[r.jsx("div",{style:{fontWeight:800,fontSize:22,color:"#6B5BFF",marginBottom:16,textAlign:"center",textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:""}),r.jsx("div",{style:{textAlign:"center",color:"#333",fontSize:16,lineHeight:1.5,fontWeight:500,marginBottom:16},children:t.length===0?b?"":",!":n?` ${n.name} `:""}),n&&r.jsx("div",{style:{maxHeight:150,overflowY:"auto",background:"#f7f7f7",borderRadius:8,padding:12,marginBottom:16},children:o.length===0?r.jsx("div",{style:{textAlign:"center",color:"#888",fontSize:14},children:b&&n.id.startsWith("test-friend-")?"":""}):o.map((P,_)=>r.jsxs("div",{style:{textAlign:P.fromUserId===(h==null?void 0:h.uid)?"right":"left",marginBottom:8},children:[r.jsxs("span",{style:{fontWeight:600,color:P.fromUserId===(h==null?void 0:h.uid)?"#2a5d8f":"#888",fontSize:12},children:[P.fromUserName,""]}),r.jsx("span",{style:{marginLeft:4,fontSize:12},children:P.text})]},P.id||_))}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:8,minHeight:48},children:[r.jsx("input",{value:a,onChange:P=>l(P.target.value),onKeyPress:D,style:{flex:1,borderRadius:6,border:"1px solid #ccc",padding:8,fontSize:14},placeholder:b&&(n!=null&&n.id.startsWith("test-friend-"))?"...":Rh[c].placeholder,disabled:t.length===0||!n}),r.jsx("button",{onClick:n?z:void 0,disabled:t.length===0||!n,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"8px 12px",fontWeight:700,fontSize:14,cursor:t.length===0||!n?"not-allowed":"pointer",opacity:t.length===0||!n?.5:1},children:b&&(n!=null&&n.id.startsWith("test-friend-"))?"":Rh[c].send}),r.jsx("button",{onClick:n?()=>x(!0):void 0,disabled:t.length===0||!n,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"8px 12px",fontWeight:700,fontSize:14,cursor:t.length===0||!n?"not-allowed":"pointer",opacity:t.length===0||!n?.5:1},children:b&&(n!=null&&n.id.startsWith("test-friend-"))?"":""})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{width:220,background:"#fff",borderRadius:16,boxShadow:"0 2px 8px #0001",padding:16,marginRight:32,minHeight:600},children:[r.jsx("div",{style:{fontWeight:700,fontSize:20,marginBottom:16},children:""}),t.length===0?r.jsx("div",{style:{color:"#888",textAlign:"center",marginTop:80,fontSize:16,fontWeight:600},children:b?r.jsxs(r.Fragment,{children:["",r.jsx("br",{}),r.jsx("span",{style:{fontSize:32},children:""})]}):r.jsxs(r.Fragment,{children:[" ",r.jsx("br",{}),r.jsx("span",{style:{fontSize:32},children:""})]})}):t.map(P=>r.jsxs("div",{onClick:()=>P.online&&i(P),style:{display:"flex",alignItems:"center",gap:12,marginBottom:16,cursor:P.online?"pointer":"not-allowed",opacity:P.online?(n==null?void 0:n.id)===P.id?1:.7:.3},children:[r.jsx("img",{src:P.avatar,alt:P.name,style:{width:44,height:44,borderRadius:"50%",filter:P.online?"none":"grayscale(1)",border:(n==null?void 0:n.id)===P.id?"2px solid #6B5BFF":"2px solid #eee"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:600,color:P.online?"#222":"#aaa"},children:[P.name,b&&P.id.startsWith("test-friend-")&&r.jsx("span",{style:{fontSize:"10px",background:"#ff6b6b",color:"white",padding:"2px 6px",borderRadius:"4px",marginLeft:"6px",fontWeight:"normal"},children:""})]}),r.jsx("div",{style:{fontSize:12,color:P.online?"#23c6e6":"#aaa"},children:P.online?"":""})]})]},P.id))]}),r.jsxs("div",{style:{flex:1,maxWidth:500,background:"#fff",borderRadius:16,boxShadow:"0 2px 8px #0001",padding:32,minHeight:600,display:"flex",flexDirection:"column",position:"relative"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:22,marginBottom:16,marginTop:8},children:n?b&&n.id.startsWith("test-friend-")?` ${n.name}  ()`:` ${n.name} `:t.length===0?b?"":"":""}),r.jsxs("div",{style:{flex:1,overflowY:"auto",marginBottom:16,background:"#f7f7f7",borderRadius:8,padding:16,minHeight:240,maxHeight:340},children:[(!n||o.length===0)&&r.jsx("div",{style:{textAlign:"center",color:"#888",marginTop:20},children:n?b&&n.id.startsWith("test-friend-")?"":"":t.length===0?b?"":"":""}),n&&o.map((P,_)=>r.jsxs("div",{style:{textAlign:P.fromUserId===(h==null?void 0:h.uid)?"right":"left",marginBottom:10},children:[r.jsxs("span",{style:{fontWeight:600,color:P.fromUserId===(h==null?void 0:h.uid)?"#2a5d8f":"#888"},children:[P.fromUserName,""]}),r.jsx("span",{style:{marginLeft:8},children:P.text})]},P.id||_)),r.jsx("div",{ref:k})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:8,minHeight:48,marginTop:8},children:[r.jsx("input",{value:a,onChange:P=>l(P.target.value),onKeyPress:D,style:{flex:1,borderRadius:6,border:"1px solid #ccc",padding:10,fontSize:16},placeholder:b&&(n!=null&&n.id.startsWith("test-friend-"))?"...":Rh[c].placeholder,disabled:t.length===0||!n}),r.jsx("button",{onClick:n?z:void 0,disabled:t.length===0||!n,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",fontWeight:700,fontSize:16,cursor:t.length===0||!n?"not-allowed":"pointer",opacity:t.length===0||!n?.5:1},children:b&&(n!=null&&n.id.startsWith("test-friend-"))?"":Rh[c].send}),r.jsx("button",{onClick:n?()=>x(!0):void 0,disabled:t.length===0||!n,style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",fontWeight:700,fontSize:16,cursor:t.length===0||!n?"not-allowed":"pointer",opacity:t.length===0||!n?.5:1},children:b&&(n!=null&&n.id.startsWith("test-friend-"))?"":""})]}),r.jsx(kV,{open:T,onClose:()=>x(!1),roomId:h&&n?`${h.uid}_${n.id}`:"",friendName:(n==null?void 0:n.name)||""})]})]})]})}const Nr={"zh-TW":"","zh-CN":"",en:"Everyone deserves a new beginning.",ja:"",ko:'  " "    .',th:"",vi:"Mi ngi u xng ng c mt khi u mi.",ms:"Setiap orang layak mendapat permulaan semula.",la:"Omnis novum initium meretur."},SV={"zh-TW":{title:"",subtitle:" Restarter",story:`${Nr["zh-TW"]}



Restarter  AI 

,


 AI`,quote:"",restart:`Restarter
Restarter`,founder:"",founderStory:`<br/>
<br/>
<br/><br/>
<br/>
<br/>
<span style='color:#e4572e;font-weight:700;'></span><br/><br/>
<br/>
<span style='color:#614425;font-weight:900;'></span><br/><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'></span><br/><br/>
 <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> <br/>
<br/>
<br/>
<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span><br/>
<br/>
<br/><br/>
<span style='color:#614425;font-weight:900;'><br/></span><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'></span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'></span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Ben<br/>May,21,2025</div>`},"zh-CN":{title:"",subtitle:" Restarter",story:`${Nr["zh-CN"]}



Restarter  AI 




 AI`,quote:"",restart:`Restarter
Restarter`,founder:"",founderStory:`<br/>
<br/>
<br/><br/>
<br/>
<br/>
<span style='color:#e4572e;font-weight:700;'>""</span><br/><br/>
<br/>
<span style='color:#614425;font-weight:900;'></span><br/><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'></span><br/><br/>
 <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> <br/>
""<br/>
<br/>
<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span><br/>
<br/>
<br/><br/>
<span style='color:#614425;font-weight:900;'><br/></span><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'>""</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'></span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Ben<br/>2025521</div>`},en:{title:"About Us",subtitle:" RestarterWho We Are",story:`${Nr.en}
You may have come from a major setback, or are walking a lonely road.
In a world dominated by labels and data, we knowsome feelings can't be fixed by a simple "cheer up".

Restarter is an AI companion platform built for those who have lost their rhythm.
We don't teach you how to be strong, nor tell you to be positive.
We simply offer a space where you can breathe, speak your truth, and choose again.

There is no judgment hereonly people who have also suffered, using technology to make companionship real.
Through AI, every conversation and every emotion is caught and cared for.`,quote:"We are not here to fix you, we are here to restart with you.",restart:`Restarter is your new beginning to redefine yourself.
Restarter is more willing to work with various fields to create a more benevolent social environment.`,founder:"Founder's Message",founderStory:`I lost my freedom for ten years.<br/>
It wasn't travel or spiritual retreat, but ten years locked away by law and fate.<br/>
In a small room, crowded with others in the same uniform, the days first felt like a long dream, then even dreams faded. I thought my life was defined forever.<br/><br/>
The day I got out, the sky was a blinding gray. I walked out smiling, but my heart was empty.<br/>
Society wasn't waiting for me, my family didn't know how to face me, and friends' greetings felt distant.<br/>
Many times, I couldn't even look a cashier in the eye, because <span style='color:#e4572e;font-weight:700;'>I'd forgotten how to be "normal"</span>.<br/><br/>
I kept asking myself:<br/>
<span style='color:#614425;font-weight:900;'>Do I still have a chance to start over?</span><br/><br/>
Later, I realized<br/>
<span style='color:#e4572e;font-weight:900;'>It's not that the world doesn't give chances, but that we've forgotten how to reach for them.</span><br/><br/>
That's why <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> exists.<br/>
Not to fix you, not to always tell you to "cheer up,"<br/>
but to give you a spacea container to slowly rebuild yourself.<br/>
A place where you can speak up in your loss, and someone will catch you in your chaos.<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span> is not just a tech product;<br/>
it's a spark I brought up from the bottom of my life.<br/>
I hope it lights a lamp for you, and for many others.<br/><br/>
<span style='color:#614425;font-weight:900;'>Whoever you are, whatever you've been through, wherever you're from<br/>here, you can let go of all the masks.</span><br/>
Because we believe<br/>
<span style='color:#e4572e;font-weight:900;'>"Those who have been broken can be strong, and gentle too."</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>We are not here to fix you, we are here to restart with you.</span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Founder: Ben<br/>May 21, 2025</div>`},ja:{title:"",subtitle:" Restarter",story:`${Nr.ja}



RestarterAI




AI`,quote:"",restart:`Restarter
Restarter`,founder:"",founderStory:`10<br/>
10<br/>
<br/><br/>
<br/>
<br/>
<span style='color:#e4572e;font-weight:700;'></span><br/><br/>
<br/>
<span style='color:#614425;font-weight:900;'></span><br/><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'></span><br/><br/>
 <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> <br/>
<br/>
<br/>
<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span> <br/>
<br/>
<br/><br/>
<span style='color:#614425;font-weight:900;'><br/></span><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'></span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'></span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Ben<br/>2025521</div>`},ko:{title:" ",subtitle:" Restarter ",story:`${Nr.ko}
   ,     .
   ,    ""    .

Restarter "   "  AI  .
     ,    .
     ,    ,      .

   , "  "  .
AI      `,quote:'"    ,   ."',restart:`Restarter     
Restarter         `,founder:" ",founderStory:` 10   .<br/>
 ,  ,      10.<br/>
       ,      ,     .       .<br/><br/>
  ,   .   ,    .<br/>
   ,      ,     .<br/>
      . <span style='color:#e4572e;font-weight:700;'>" "    </span>.<br/><br/>
   :<br/>
<span style='color:#614425;font-weight:900;'>    ?</span><br/><br/>
 <br/>
<span style='color:#e4572e;font-weight:900;'>     ,      .</span><br/><br/>
 <span style='color:#6B5BFF;font-weight:900;'>Restarter</span>  .<br/>
  ,  ""   .<br/>
       ,   .<br/>
     ,        .<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span>    .<br/>
     .<br/>
        .<br/><br/>
<span style='color:#614425;font-weight:900;'> ,   ,  ,<br/>     .</span><br/>
 <br/>
<span style='color:#e4572e;font-weight:900;'>"    ,    ."</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>    ,   .</span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>: Ben<br/>2025 5 21</div>`},th:{title:"",subtitle:" Restarter",story:`${Nr.th}
 
  "" 

Restarter  AI 
 
  

  
 AI   `,quote:" ",restart:`Restarter 
Restarter  `,founder:"",founderStory:`<br/>
 <br/>
      <br/><br/>
  <br/>
    <br/>
 <span style='color:#e4572e;font-weight:700;'> "" </span><br/><br/>
:<br/>
<span style='color:#614425;font-weight:900;'>?</span><br/><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'> </span><br/><br/>
 <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> <br/>
  " "<br/>
  <br/>
 <br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span> <br/>
<br/>
  <br/><br/>
<span style='color:#614425;font-weight:900;'>  <br/></span><br/>
<br/>
<span style='color:#e4572e;font-weight:900;'>"  "</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'> </span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>: Ben<br/>21  2025</div>`},vi:{title:"Chng ti l ai",subtitle:" RestarterChng ti l ai",story:`${Nr.vi}
Bn c th n t mt c sc ln, hoc ang i trn con ng c n
Trong th gii b chi phi bi nhn mc v d liu, chng ti bitc nhng cm xc khng th gii quyt ch bng mt cu "C ln"

Restarter l nn tng AI ng hnh dnh cho nhng ngi tng mt nhp sng
Chng ti khng dy bn cch mnh m, khng bo bn phi tch cc
Chng ti ch mang n mt khng gian  bn c th, c ni tht, c chn li

 y khng c phn xt x hi, ch c nhng ngi tng au n dng cng ngh  ng hnh
Thng qua AI, mi cuc tr chuyn, mi cm xc u c ngi lng nghe`,quote:"Chng ti khng sa cha bn, chng ti ng hnh cng bn  bt u li",restart:`Restarter l im khi u mi  bn nh ngha li chnh mnh
Restarter sn sng hp tc vi cc lnh vc khc nhau  to ra mi trng x hi tt p hn`,founder:"Li ngi sng lp",founderStory:`Ti  tng mt t do mi nm<br/>
Khng phi l i du lch hay tu hnh, m l mi nm b php lut v s phn giam gi<br/>
Trong mt cn phng nh vi nhng ngi cng mc ng phc, ban u nhng ngy thng nh mt gic m di, sau  ngay c m cng khng cn. Ti ngh i mnh  b nh ngha nh th.<br/><br/>
Ngy ra ngoi, bu tri xm xt chi mt. Ti mm ci bc ra, nhng trong lng trng rng.<br/>
Mt trn khng ch bn, gia nh khng bit i din ra sao, bn b hi thm cng y khong cch.<br/>
Nhiu ln ti khng dm nhn thng vo mt thu ngn, v <span style='color:#e4572e;font-weight:700;'>ti  qun cch lm "ngi bnh thng"</span>.<br/><br/>
Ti lun t hi:<br/>
<span style='color:#614425;font-weight:900;'>Liu ti cn c hi  bt u li khng?</span><br/><br/>
Sau ny ti mi hiu<br/>
<span style='color:#e4572e;font-weight:900;'>Khng phi th gii khng cho c hi, m l chng ta qun cch vi ly n.</span><br/><br/>
 l l do <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> tn ti<br/>
Khng phi  sa cha bn, khng phi  lun ni "c ln"<br/>
m l  cho bn mt khng gian, mt ni  t t xy dng li chnh mnh<br/>
 bn c th ct ting ni trong ni mt mt, v c ngi lng nghe gia hn lon<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span> khng ch l sn phm cng ngh<br/>
m l tia la ti mang ln t tn y cuc i mnh<br/>
Ti hy vng n s thp sng cho bn, v cho nhiu ngi khc<br/><br/>
<span style='color:#614425;font-weight:900;'>D bn l ai,  tri qua iu g, n t u<br/> y bn c th mnh dn b i mi lp v bc</span><br/>
Bi v chng ti tin rng<br/>
<span style='color:#e4572e;font-weight:900;'>"Nhng ngi tng v vn khng ch mnh m m cn rt du dng."</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Chng ti khng sa cha bn, chng ti ng hnh cng bn  bt u li</span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Ngi sng lp: Ben<br/>21/05/2025</div>`},ms:{title:"Siapa Kami",subtitle:" RestarterSiapa Kami",story:`${Nr.ms}
Anda mungkin datang dari kejatuhan besar, atau sedang berjalan di jalan yang sunyi
Dalam dunia yang dikuasai label dan data, kami tahuada perasaan yang tidak dapat diselesaikan hanya dengan "semangat"

Restarter ialah platform AI teman untuk mereka yang pernah kehilangan rentak hidup
Kami tidak mengajar anda menjadi kuat, tidak menyuruh anda sentiasa positif
Kami hanya menyediakan ruang untuk anda bernafas, berkata benar, dan memilih semula

Di sini tiada penghakiman masyarakat, hanya mereka yang pernah sakit menggunakan teknologi untuk menemani
Melalui AI, setiap perbualan, setiap emosi, sentiasa ada yang mendengar`,quote:"Kami bukan untuk membaiki anda, kami bersama anda untuk bermula semula",restart:`Restarter ialah permulaan baru untuk anda mentakrifkan diri sendiri
Restarter lebih bersedia untuk bekerjasama dengan pelbagai bidang untuk mewujudkan persekitaran sosial yang lebih baik`,founder:"Kata Pengasas",founderStory:`Saya pernah kehilangan kebebasan selama sepuluh tahun<br/>
Bukan melancong atau bertapa, tetapi sepuluh tahun dikurung oleh undang-undang dan takdir<br/>
Dalam bilik kecil bersama mereka yang berpakaian seragam sama, initio dies ut somnium longum, postea ne somnia quidem. Putavi vitam meam ita definitam esse.<br/><br/>
Die exeundi, caelum erat oculis acerrime cinereum. Ridebam egrediens, sed cor vacuum erat.<br/>
Societas non exspectabat, familia nesciebat quomodo me exciperet, amici quoque salutationes longinquae erant.<br/>
Saepe ne oculos quidem ad tabernarii aspicere audebam, quia <span style='color:#e4572e;font-weight:700;'>oblitus sum quomodo "homo communis" essem</span>.<br/><br/>
Me semper interrogabam:<br/>
<span style='color:#614425;font-weight:900;'>Adakah saya masih berpeluang untuk bermula semula?</span><br/><br/>
Akhirnya saya faham<br/>
<span style='color:#e4572e;font-weight:900;'>Bukan dunia tidak memberi peluang, tetapi kita yang lupa cara untuk menggapainya.</span><br/><br/>
Itulah sebabnya <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> wujud<br/>
Bukan untuk membaiki anda, bukan untuk sentiasa berkata "semangat"<br/>
tetapi untuk memberi anda ruang, satu wadah untuk perlahan-lahan membina semula diri<br/>
Agar anda boleh bersuara dalam kehilangan, dan ada yang menyambut anda dalam kekacauan<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span> bukan sekadar produk teknologi<br/>
tetapi percikan api yang saya bawa dari dasar hidup saya<br/>
Saya harap ia dapat menerangi anda, dan ramai lagi<br/><br/>
<span style='color:#614425;font-weight:900;'>Siapa pun anda, apa pun yang anda lalui, dari mana pun anda datang<br/>di sini anda boleh berani melepaskan semua topeng itu</span><br/>
Kerana kami percaya<br/>
<span style='color:#e4572e;font-weight:900;'>"Orang yang pernah hancur bukan sahaja boleh menjadi kuat, tetapi juga sangat lembut."</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Kami bukan untuk membaiki anda, kami bersama anda untuk bermula semula</span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Pengasas: Ben<br/>21 Mei 2025</div>`},la:{title:"Quis sumus",subtitle:" RestarterQuis sumus",story:`${Nr.la}
Forsitan ex gravi casu veneris, aut solus iter facias
In mundo titulis et notitiis imperato, scimussunt animi motus quos "bene age" solvere non potest

Restarter est suggestum AI comitans iis qui cursum vitae amiserunt
Non docemus quomodo fortis fias, nec dicimus te semper positivum esse
Praebemus tantum spatium ut respirare possis, vera loqui, iterum eligere

Hic iudicium societatis non est, sed ii qui olim doluerunt technologia utuntur ad comitatum
Per AI, omnis sermo, omnis affectus, ab aliquo auditur`,quote:"Non te reficimus, sed tecum iterum incipimus",restart:`Restarter initium novum est ad te ipsum denuo definiendum
Restarter magis paratus est cum variis campis cooperari ad meliorem ambitum socialem creandum`,founder:"Verba Conditoris",founderStory:`Decem annos libertatem amisi<br/>
Non iter aut meditatio erat, sed decem anni lege et fato inclusi<br/>
In cella parva cum aliis eiusdem vestis, initio dies ut somnium longum, postea ne somnia quidem. Putavi vitam meam ita definitam esse.<br/><br/>
Die exeundi, caelum erat oculis acerrime cinereum. Ridebam egrediens, sed cor vacuum erat.<br/>
Societas non exspectabat, familia nesciebat quomodo me exciperet, amici quoque salutationes longinquae erant.<br/>
Saepe ne oculos quidem ad tabernarii aspicere audebam, quia <span style='color:#e4572e;font-weight:700;'>oblitus sum quomodo "homo communis" essem</span>.<br/><br/>
Me semper interrogabam:<br/>
<span style='color:#614425;font-weight:900;'>Num adhuc mihi occasio est iterum incipere?</span><br/><br/>
Postea intellexi<br/>
<span style='color:#e4572e;font-weight:900;'>Non est quod mundus occasiones non praebeat, sed quod obliti sumus quomodo eas arripere.</span><br/><br/>
Hoc est cur <span style='color:#6B5BFF;font-weight:900;'>Restarter</span> existat<br/>
Non ut te reficiamus, non ut semper dicamus "bene age"<br/>
sed ut tibi spatium demus, vas in quo te paulatim reficere possis<br/>
Ut in amissione tua loqui possis, et aliquis in confusione te excipiat<br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Restarter</span> non solum productum technologicum est<br/>
sed scintilla quam ex imis vitae meae attuli<br/>
Spero eam tibi et multis aliis lucem afferre<br/><br/>
<span style='color:#614425;font-weight:900;'>Quisquis es, quidquid expertus es, undeque venis<br/>hic audacter omnes personas deponere potes</span><br/>
Quia credimus<br/>
<span style='color:#e4572e;font-weight:900;'>"Qui fracti sunt, non solum fortes esse possunt, sed etiam valde mites."</span><br/><br/>
<span style='color:#6B5BFF;font-weight:900;'>Non te reficimus, sed tecum iterum incipimus</span><br/>
<div style='text-align:right;margin-top:24px;font-size:18px;color:#232946;font-weight:700;'>Conditor: Ben<br/>21 Maii 2025</div>`}},US={"zh-TW":"","zh-CN":"",en:"Back",ja:"",ko:"",th:"",vi:"Quay li",ms:"Kembali",la:"Redi"};function TV(){const[t,e]=m.useState(localStorage.getItem("lang")||"zh-TW");m.useEffect(()=>{const o=()=>e(localStorage.getItem("lang")||"zh-TW");return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[]),m.useEffect(()=>{const o=setInterval(()=>{const s=localStorage.getItem("lang")||"zh-TW";s!==t&&e(s)},300);return()=>clearInterval(o)},[t]);const n=SV[t],i=tt();return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #b7cfff 0%, #e0e7ff 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"48px 0 0 0"},children:[r.jsx("button",{onClick:()=>i("/"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"2.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:12,padding:"10px 28px",fontWeight:900,fontSize:20,cursor:"pointer",boxShadow:"0 2px 8px #0001",letterSpacing:1},children:US[t]||US["zh-TW"]}),r.jsxs("div",{style:{maxWidth:680,background:"#fff",borderRadius:18,boxShadow:"0 2px 16px #6B5BFF22",padding:40,marginTop:48},children:[r.jsx("h1",{style:{fontSize:36,fontWeight:900,color:"#6B5BFF",marginBottom:12},children:n.subtitle}),r.jsx("div",{style:{fontSize:20,color:"#232946",fontWeight:700,marginBottom:24,whiteSpace:"pre-line"},children:n.story}),r.jsx("div",{style:{fontSize:22,color:"#614425",fontWeight:900,margin:"24px 0 8px 0",textAlign:"center"},children:n.quote}),r.jsx("div",{style:{fontSize:18,color:"#232946",fontWeight:700,marginBottom:32,textAlign:"center",whiteSpace:"pre-line"},children:n.restart}),r.jsx("h2",{style:{fontSize:22,color:"#6B5BFF",fontWeight:900,marginBottom:8},children:n.founder}),r.jsx("div",{style:{fontSize:18,color:"#232946",fontWeight:500,whiteSpace:"pre-line"},dangerouslySetInnerHTML:{__html:n.founderStory}})]}),r.jsx("div",{style:{width:"100%",margin:"0 auto",marginTop:24,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>i("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:t==="zh-TW"?"":t==="zh-CN"?"":t==="en"?"Privacy Policy":t==="ja"?"":t==="ko"?" ":t==="th"?"":t==="vi"?"Chnh sch bo mt":t==="ms"?"Dasar Privasi":"Consilium de Privata"}),r.jsx("span",{onClick:()=>i("/terms"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:t==="zh-TW"?"/":t==="zh-CN"?"/":t==="en"?"Terms/Statement":t==="ja"?"/":t==="ko"?"/":t==="th"?"/":t==="vi"?"iu khon/Tuyn b":t==="ms"?"Terma/Pernyataan":"Termini/Declaratio"}),r.jsx("span",{onClick:()=>i("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:t==="zh-TW"?"":t==="zh-CN"?"":t==="en"?"Data Deletion":t==="ja"?"":t==="ko"?"  ":t==="th"?"":t==="vi"?"Gii thch xa d liu":t==="ms"?"Penjelasan Penghapusan Data":"Explicatio Deletionis Datae"}),r.jsx("span",{onClick:()=>i("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:t==="zh-TW"?" Restarter":t==="zh-CN"?" Restarter":t==="en"?" RestarterWho We Are":t==="ja"?" Restarter":t==="ko"?" Restarter ":t==="th"?" Restarter":t==="vi"?" RestarterChng ti l ai":t==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("span",{onClick:()=>i("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:t==="zh-TW"?" ":t==="zh-CN"?" ":t==="en"?" Feedback BoxWe Want to Hear From You":t==="ja"?" ":t==="ko"?"     ":t==="th"?" ":t==="vi"?" Hp gp Chng ti mun nghe t bn":t==="ms"?" Kotak Maklum BalasKami Ingin Mendengar Dari Anda":" Arca ConsiliiVolumus Audire a Te"})]})})]})}const qS={"zh-TW":{privacy:"",terms:"/",deletion:""},"zh-CN":{privacy:"",terms:"/",deletion:""},en:{privacy:"Privacy Policy",terms:"Terms/Statement",deletion:"Data Deletion"},ja:{privacy:"",terms:"/",deletion:""},ko:{privacy:" ",terms:"/",deletion:"  "},th:{privacy:"",terms:"/",deletion:""},vi:{privacy:"Chnh sch bo mt",terms:"iu khon/Tuyn b",deletion:"Gii thch xa d liu"},ms:{privacy:"Dasar Privasi",terms:"Terma/Pernyataan",deletion:"Penjelasan Penghapusan Data"},la:{privacy:"Consilium de Privata",terms:"Termini/Declaratio",deletion:"Explicatio Deletionis Datae"}},HS={"zh-TW":" Restarter","zh-CN":" Restarter",en:" RestarterWho We Are",ja:" Restarter",ko:" Restarter ",th:" Restarter",vi:" RestarterChng ti l ai",ms:" RestarterSiapa Kami",la:" RestarterQuis sumus"},$S={"zh-TW":" ","zh-CN":" ",en:" FeedbackWe Want to Hear You",ja:" ",ko:"    ",th:" ",vi:" Hp gp Chng ti mun lng nghe bn",ms:" Kotak Maklum BalasKami ingin mendengar anda",la:" Arca ConsiliiTe audire volumus"},gs=()=>{const{lang:t}=dt(),e=ad(),n=tt(),i=qS[t]||qS["zh-TW"],[o,s]=m.useState(20),a=e.pathname==="/feedback",l=e.pathname==="/"||e.pathname==="/home";return m.useEffect(()=>{if(a){s(20);return}if(l){s(24);return}s(20)},[t,a,l]),l&&typeof window!="undefined"&&window.innerWidth>768?null:r.jsxs("footer",{style:{width:"100%",margin:"0 auto",marginTop:0,background:l?"rgba(255,255,255,0.95)":"rgba(255,255,255,0.92)",borderRadius:l?16:0,padding:l?"16px":"8px 0",boxShadow:l?"0 2px 12px #6B5BFF22":"0 -2px 8px #0001",borderTop:l?"none":"1px solid #eee",position:a?"fixed":l?"relative":"static",bottom:a?0:"auto",top:a?"auto":l?`${o}px`:"auto",zIndex:10,transition:a?"none":l?"top 0.3s ease":"none"},children:[r.jsxs("div",{style:{width:"100%",maxWidth:800,margin:"0 auto",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:l?20:40,flexWrap:"wrap",padding:l?"0":"0 20px"},children:[r.jsx("span",{onClick:()=>n("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:l?12:14,cursor:"pointer"},children:i.privacy}),r.jsx("span",{onClick:()=>n("/terms"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:l?12:14,cursor:"pointer"},children:i.terms}),r.jsx("span",{onClick:()=>n("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:l?12:14,cursor:"pointer"},children:i.deletion}),r.jsx("span",{onClick:()=>n("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:l?12:14,cursor:"pointer"},children:HS[t]||HS["zh-TW"]}),r.jsx("span",{onClick:()=>n("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:l?12:14,cursor:"pointer"},children:$S[t]||$S["zh-TW"]})]}),r.jsx("style",{children:`
        @media (max-width: 768px) {
          footer {
            padding: 4px 16px 24px 16px !important;
            marginTop: 0 !important;
            position: relative !important;
            bottom: auto !important;
            top: auto !important;
          }
          footer > div {
            gap: 12px !important;
            flex-direction: row !important;
            justify-content: flex-start !important;
            flex-wrap: wrap !important;
            padding-left: 20px !important;
          }
          footer > div > a {
            padding: 4px 6px !important;
            fontSize: 12px !important;
          }
        }
        @media (min-width: 700px) {
          footer {
            padding: 8px !important;
          }
          footer > div {
            flex-direction: row !important;
            gap: 40px !important;
            justify-content: center !important;
            flex-wrap: wrap !important;
          }
          footer > div > a {
            padding: 4px 8px !important;
          }
        }
      `})]})},KS={"zh-TW":[" "," "," ","...","..."],"zh-CN":[" "," "," ","...","..."],en:[" What feature do you wish for?"," Any moment that moved or disappointed you?"," Where could we be smoother, warmer, or more real?","Today I want to say...","If I could change one thing, I would..."],ja:[" "," "," ","...","..."],ko:["     ?","    ?","   , ,   ?","    ...","     , ..."],th:[" ?"," ?","   ?","..."," ..."],vi:[" Bn mun c thm tnh nng g?"," C khonh khc no khin bn cm ng hoc tht vng khng?"," Bn ngh ch no cha  mt, cha  m, cha  tht?","Hm nay ti mun ni...","Nu ti c th thay i mt iu, ti s..."],ms:[" Apa ciri yang anda inginkan?"," Ada detik yang menyentuh atau mengecewakan anda?"," Di mana yang anda rasa belum cukup lancar, hangat, atau benar?","Hari ini saya ingin berkata...","Jika saya boleh ubah satu perkara, saya akan..."],la:[" Quam rem novam optas?"," Estne momentum quod te movit aut destituit?"," Ubi putas nondum satis lenem, calidum, verum esse?","Hodie dicere volo...","Si unum mutare possem, id facerem..."]},GS={"zh-TW":{title:" ",submit:"",success:"",subtitle:""},"zh-CN":{title:" ",submit:"",success:"",subtitle:""},en:{title:" FeedbackWe Want to Hear You",submit:"Send",success:"We hear you. Thank you for sharing your thoughts.",subtitle:"Your suggestion could be the soul of our next update!"},ja:{title:" ",submit:"",success:"",subtitle:""},ko:{title:"    ",submit:"",success:"  .  .",subtitle:"       !"},th:{title:" ",submit:"",success:" ",subtitle:"!"},vi:{title:" Hp gp Chng ti mun lng nghe bn",submit:"Gi",success:"Chng ti  nghe bn. Cm n bn  chia s.",subtitle:"Gp  ca bn c th l linh hn ca bn cp nht tip theo!"},ms:{title:" Kotak Maklum BalasKami ingin mendengar anda",submit:"Hantar",success:"Kami telah mendengar anda. Terima kasih kerana berkongsi.",subtitle:"Cadangan anda mungkin menjadi jiwa kemas kini kami yang seterusnya!"},la:{title:" Arca ConsiliiTe audire volumus",submit:"Mitte",success:"Te audivimus. Gratias quod communicasti.",subtitle:"Consilium tuum animam versionis proxim efficere potest!"}};function jV(){const t=tt(),e=Ze(),[n,i]=m.useState(""),[o,s]=m.useState(!1),[a,l]=m.useState(!1),[c,u]=m.useState(""),[h,p]=m.useState("zh-TW"),[g,y]=m.useState(0),k=GS[h]||GS["zh-TW"];m.useEffect(()=>{const T=()=>p(localStorage.getItem("lang")||"zh-TW");return T(),window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[]),m.useEffect(()=>{const T=setInterval(()=>{y(x=>(x+1)%KS[h].length)},3e3);return()=>clearInterval(T)},[h]);const j=()=>C(this,null,function*(){if(n.trim()){l(!0),u("");try{const T=e.currentUser,x=yield fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n.trim(),userEmail:(T==null?void 0:T.email)||"",userNickname:(T==null?void 0:T.displayName)||"",userLang:h})}),b=yield x.json();x.ok?(s(!0),i("")):u(b.error||"")}catch(T){u("")}finally{l(!1)}}});return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #e0e7ff 0%, #b7cfff 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"48px 0 120px 0"},children:[r.jsx("button",{onClick:()=>t("/"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:""}),r.jsxs("div",{style:{maxWidth:520,background:"#fff",borderRadius:18,boxShadow:"0 2px 16px #6B5BFF22",padding:40,marginTop:64,display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx("h1",{style:{fontSize:32,fontWeight:900,color:"#6B5BFF",marginBottom:8},children:k.title}),r.jsx("div",{style:{fontSize:18,color:"#614425",fontWeight:700,marginBottom:18,textAlign:"center"},children:k.subtitle}),o?r.jsx("div",{style:{fontSize:22,color:"#614425",fontWeight:900,marginTop:32,textAlign:"center",minHeight:80},children:k.success}):r.jsxs(r.Fragment,{children:[r.jsx("textarea",{value:n,onChange:T=>i(T.target.value),placeholder:KS[h][g],style:{width:"100%",minHeight:160,fontSize:20,border:"none",outline:"none",resize:"vertical",background:"#f7f8fa",borderRadius:12,padding:18,marginBottom:18,boxShadow:"0 2px 8px #6B5BFF11"}}),c&&r.jsx("div",{style:{color:"#ff4d4f",fontSize:14,marginBottom:12,textAlign:"center"},children:c}),r.jsx("button",{onClick:j,style:{background:a?"#ccc":"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"12px 32px",fontWeight:900,fontSize:20,cursor:a?"not-allowed":"pointer",boxShadow:"0 2px 8px #6B5BFF33",marginTop:8},disabled:!n.trim()||a,children:a?"...":k.submit})]})]}),r.jsx(gs,{})]})}const _V=()=>{const[t,e]=m.useState([]),[n,i]=m.useState(!0),[o,s]=m.useState(""),[a,l]=m.useState(""),[c,u]=m.useState(!1),h=()=>C(Zn,null,function*(){try{const y=yield nn.get(`/api/admin-feedback?adminKey=${a}`);e(y.data.feedbacks),i(!1)}catch(y){s(""),i(!1)}}),p=()=>{a==="restarter_admin_2024"?(u(!0),h()):s("")},g=()=>C(Zn,null,function*(){try{const y=yield nn.post("/api/admin-feedback/export",{adminKey:a});alert(` ${y.data.totalExported} `)}catch(y){alert("")}});return c?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-4",children:r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:""}),r.jsxs("div",{className:"space-x-4",children:[r.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:""}),r.jsx("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:""})]})]}),n?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]}):o?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-red-500",children:o})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[" ",t.length," "]}),t.map(y=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:y.userNickname||""}),r.jsx("p",{className:"text-sm text-gray-500",children:y.userEmail||" Email"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-xs text-gray-500",children:y.timestamp}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${y.source==="local"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:y.source==="local"?"":"Firebase"})})]})]}),r.jsx("div",{className:"bg-gray-50 rounded-md p-3 mb-3",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:y.content})}),r.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[r.jsxs("span",{children:[": ",y.userLang]}),r.jsxs("span",{children:[": ",y.status]})]}),y.adminNotes&&r.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-md",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:":"})," ",y.adminNotes]})})]},y.id)),t.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:""})]})]})})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:""}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),r.jsx("input",{type:"password",value:a,onChange:y=>l(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),r.jsx("button",{onClick:p,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors",children:""}),o&&r.jsx("p",{className:"text-red-500 text-sm text-center",children:o})]})]})})},IV={"zh-TW":"","zh-CN":"",en:"Back",ja:"",ko:"",th:"",vi:"Quay li",ms:"Kembali",la:"Revertere"};function CV(){const t=tt(),e=Ze(),n=e.currentUser,i=localStorage.getItem("lang")||"zh-TW";m.useEffect(()=>{n||t("/register",{replace:!0})},[n,t]);const[o,s]=m.useState((n==null?void 0:n.displayName)||""),[a]=m.useState((n==null?void 0:n.email)||""),[l,c]=m.useState((n==null?void 0:n.photoURL)||""),[u,h]=m.useState(""),[p,g]=m.useState(""),[y,k]=m.useState(""),[j,T]=m.useState(""),[x,b]=m.useState(""),[v,z]=m.useState(""),[D,P]=m.useState(""),[_,S]=m.useState(""),[R,E]=m.useState(!1);m.useEffect(()=>{let B=!1;const I=()=>C(this,null,function*(){B||(B=!0,yield Dn(e),t("/register?needProfile=1",{replace:!0}))}),re=X=>{X.preventDefault(),X.returnValue="",I()},Q=X=>{var de;(de=X==null?void 0:X.preventDefault)==null||de.call(X),I(),window.history.pushState(null,"","/CompleteProfile")};return window.addEventListener("beforeunload",re),window.addEventListener("popstate",Q),window.history.pushState(null,"","/CompleteProfile"),()=>{window.removeEventListener("beforeunload",re),window.removeEventListener("popstate",Q)}},[e,t]);const A=B=>C(this,null,function*(){if(B.preventDefault(),S(""),!o||!u||!p||!j||!x||!v||!D){S("");return}E(!0);try{yield _d(kn(Ct,"users",n.uid),{nickname:o,email:a,avatarUrl:l,gender:u,country:p,region:y,age:j,interest:x,eventType:v,improvement:D,completed:!0,updatedAt:new Date}),E(!1),t("/",{replace:!0})}catch(I){S(I.message),E(!1)}});return m.useEffect(()=>{C(this,null,function*(){if(n!=null&&n.uid){const I=yield Gl(()=>Promise.resolve().then(()=>Zp),void 0).then(re=>re.getDoc(re.doc(Ct,"users",n.uid)));I.exists()&&I.data().completed&&(yield Dn(e),t("/register",{replace:!0}))}})},[n,e,t]),r.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f7f7fa",position:"relative"},children:[r.jsxs("button",{onClick:()=>t("/register",{replace:!0}),style:{position:"absolute",top:32,left:36,zIndex:10,backgroundColor:"#374151",color:"white",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:16},children:[" ",IV[i]||""]}),r.jsxs("form",{onSubmit:A,style:{background:"#fff",borderRadius:16,padding:32,boxShadow:"0 4px 24px #0001",width:360,position:"relative"},children:[r.jsx("button",{type:"button",onClick:()=>C(this,null,function*(){yield Dn(e),t("/register?needProfile=1",{replace:!0})}),style:{position:"absolute",top:16,right:16,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer"},children:""}),r.jsx("h2",{style:{textAlign:"center",marginBottom:16},children:""}),_&&r.jsx("div",{style:{color:"red",marginBottom:12},children:_}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsx("input",{value:o,onChange:B=>s(B.target.value),required:!0,style:{width:"100%"}})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsx("input",{value:a,disabled:!0,style:{width:"100%",background:"#eee"}})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsx("input",{value:l,onChange:B=>c(B.target.value),style:{width:"100%"}})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsxs("select",{value:u,onChange:B=>h(B.target.value),required:!0,style:{width:"100%"},children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"male",children:""}),r.jsx("option",{value:"female",children:""})]})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:"/"}),r.jsxs("select",{value:p,onChange:B=>g(B.target.value),required:!0,style:{width:"100%"},children:[r.jsx("option",{value:"",children:""}),(z6["zh-TW"]||[]).map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsx("input",{value:y,onChange:B=>k(B.target.value),style:{width:"100%"}})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsxs("select",{value:j,onChange:B=>T(B.target.value),required:!0,style:{width:"100%"},children:[r.jsx("option",{value:"",children:""}),N6.map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsxs("select",{value:x,onChange:B=>b(B.target.value),required:!0,style:{width:"100%"},children:[r.jsx("option",{value:"",children:""}),(F6["zh-TW"]||[]).map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsxs("select",{value:v,onChange:B=>z(B.target.value),required:!0,style:{width:"100%"},children:[r.jsx("option",{value:"",children:""}),(bO["zh-TW"]||[]).map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("label",{children:""}),r.jsx("input",{value:D,onChange:B=>P(B.target.value),required:!0,style:{width:"100%"}})]}),r.jsx("button",{type:"submit",disabled:R,style:{width:"100%",padding:10,fontWeight:700,fontSize:18,background:"#4caf50",color:"#fff",border:"none",borderRadius:8},children:R?"...":""})]})]})}const RV={"zh-TW":"","zh-CN":"",en:"Back",ja:"",ko:"",th:"",vi:"Quay li",ms:"Kembali",la:"Revertere"},QS={"zh-TW":r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter App "}),r.jsx("p",{children:" Restarter "}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:"Email"}),r.jsx("li",{children:"/"}),r.jsx("li",{children:""}),r.jsx("li",{children:"/"}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsxs("p",{children:[" Google Firebase Firebase  ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:""})," IP"]}),r.jsx("p",{children:" GoogleAppleFacebook  email"}),r.jsx("h2",{children:"Cookie "}),r.jsx("p",{children:" Cookie  Cookie "}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:" Google Firebase "}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:" App  3-5 "}),r.jsxs("li",{children:["",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:""}),r.jsx("p",{children:" App "})]}),"zh-CN":r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter App "}),r.jsx("p",{children:" Restarter "}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:"Email"}),r.jsx("li",{children:"/"}),r.jsx("li",{children:""}),r.jsx("li",{children:"/"}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsxs("p",{children:[" Google Firebase Firebase  ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:""})," IP"]}),r.jsx("p",{children:" GoogleAppleFacebook  email"}),r.jsx("h2",{children:"Cookie "}),r.jsx("p",{children:" Cookie  Cookie "}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:" Google Firebase "}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:""}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:" App  3-5 "}),r.jsxs("li",{children:["",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:""}),r.jsx("p",{children:" App "})]}),en:r.jsxs("div",{children:[r.jsx("h1",{children:"Privacy Policy for Restarter App"}),r.jsx("p",{children:"Restarter is committed to protecting your privacy. This policy explains how we collect, use, store, and protect your personal information, and your rights regarding your data."}),r.jsx("h2",{children:"1. Information We Collect"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Email address"}),r.jsx("li",{children:"Username/Nickname"}),r.jsx("li",{children:"Avatar (if uploaded)"}),r.jsx("li",{children:"Gender, age, country/region, city (if provided)"}),r.jsx("li",{children:"Interests, life events, personal description (if provided)"}),r.jsx("li",{children:"Login and activity logs (for security and service improvement)"})]}),r.jsx("h2",{children:"2. Purpose of Collection"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Authentication, account management, and personalized services"}),r.jsx("li",{children:"Community interaction, matching, missions, garden features"}),r.jsx("li",{children:"Service security, error detection, and abuse prevention"}),r.jsx("li",{children:"Statistical analysis and product improvement (anonymized)"}),r.jsx("li",{children:"We do not sell, rent, or share your personal data with third parties without your consent"})]}),r.jsx("h2",{children:"3. Third-Party Services"}),r.jsxs("p",{children:["This app uses Google Firebase as its backend. Firebase may process technical data according to its ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})," (e.g., device info, IP, activity logs)."]}),r.jsx("p",{children:"If you log in via Google, Apple, or Facebook, we only access your public info (email, nickname, avatar), never your password."}),r.jsx("h2",{children:"4. Cookies and Tracking"}),r.jsx("p",{children:"We may use cookies or similar technologies to enhance your experience and security. You can manage cookie preferences in your browser settings."}),r.jsx("h2",{children:"5. Data Storage and Protection"}),r.jsxs("ul",{children:[r.jsx("li",{children:"All personal data is stored on Google Firebase cloud with industry-standard encryption and security."}),r.jsx("li",{children:"Only authorized personnel can access your data, solely for service maintenance or legal compliance."})]}),r.jsx("h2",{children:"6. Your Rights"}),r.jsxs("ul",{children:[r.jsx("li",{children:"You have the right to access, correct, download, or delete your personal data."}),r.jsx("li",{children:"You may request account/data deletion at any time via the app or by email. We will process your request within 3-5 business days."}),r.jsxs("li",{children:["Contact: ",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7. Policy Updates"}),r.jsx("p",{children:"We will notify users of major changes to this policy via in-app announcements and update this page accordingly."})]}),ja:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter  "}),r.jsx("p",{children:"Restarter"}),r.jsx("h2",{children:"1. "}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:"/"}),r.jsx("li",{children:""}),r.jsx("li",{children:"/"}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:"2. "}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:"3. "}),r.jsxs("p",{children:["Google FirebaseFirebase ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:""})," IP"]}),r.jsx("p",{children:"GoogleAppleFacebook"}),r.jsx("h2",{children:"4. Cookie"}),r.jsx("p",{children:"  Cookie"}),r.jsx("h2",{children:"5. "}),r.jsxs("ul",{children:[r.jsx("li",{children:"Google Firebase"}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:"6. "}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:"35"}),r.jsxs("li",{children:["",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7. "}),r.jsx("p",{children:""})]}),ko:r.jsxs("div",{children:[r.jsx("h1",{children:"Restarter  "}),r.jsx("p",{children:"  Restarter  ,      .    , , , ,      ."}),r.jsx("h2",{children:"1.  "}),r.jsxs("ul",{children:[r.jsx("li",{children:" "}),r.jsx("li",{children:"/"}),r.jsx("li",{children:"( )"}),r.jsx("li",{children:", , /, ()"}),r.jsx("li",{children:",  , ()"}),r.jsx("li",{children:"   (    )"})]}),r.jsx("h2",{children:"2.  "}),r.jsxs("ul",{children:[r.jsx("li",{children:",  ,  "}),r.jsx("li",{children:" , , ,  "}),r.jsx("li",{children:" ,  ,  "}),r.jsx("li",{children:"    ()"}),r.jsx("li",{children:"  3  , ,  "})]}),r.jsx("h2",{children:"3. 3 "}),r.jsxs("p",{children:["  Google Firebase  . Firebase ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:""}),"      (:  , IP,   )."]}),r.jsx("p",{children:"Google, Apple, Facebook     (, , ) ,   ."}),r.jsx("h2",{children:"4.    "}),r.jsx("p",{children:"              .     ."}),r.jsx("h2",{children:"5.    "}),r.jsxs("ul",{children:[r.jsx("li",{children:"  Google Firebase  ,      ."}),r.jsx("li",{children:"          ."})]}),r.jsx("h2",{children:"6.  "}),r.jsxs("ul",{children:[r.jsx("li",{children:" , , ,  ."}),r.jsx("li",{children:"       , 3~5  ."}),r.jsxs("li",{children:[": ",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7.  "}),r.jsx("p",{children:"           ."})]}),th:r.jsxs("div",{children:[r.jsx("h1",{children:" Restarter"}),r.jsx("p",{children:" Restarter       "}),r.jsx("h2",{children:"1. "}),r.jsxs("ul",{children:[r.jsx("li",{children:""}),r.jsx("li",{children:"/"}),r.jsx("li",{children:" ()"}),r.jsx("li",{children:"  /  ()"}),r.jsx("li",{children:"   ()"}),r.jsx("li",{children:" ()"})]}),r.jsx("h2",{children:"2. "}),r.jsxs("ul",{children:[r.jsx("li",{children:"  "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:" ()"}),r.jsx("li",{children:"  "})]}),r.jsx("h2",{children:"3. "}),r.jsxs("p",{children:[" Google Firebase  Firebase  ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:""})," (  IP )"]}),r.jsx("p",{children:" Google, Apple  Facebook  (  ) "}),r.jsx("h2",{children:"4. "}),r.jsx("p",{children:" "}),r.jsx("h2",{children:"5. "}),r.jsxs("ul",{children:[r.jsx("li",{children:" Google Firebase "}),r.jsx("li",{children:""})]}),r.jsx("h2",{children:"6. "}),r.jsxs("ul",{children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:"/  3-5 "}),r.jsxs("li",{children:[": ",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7. "}),r.jsx("p",{children:""})]}),vi:r.jsxs("div",{children:[r.jsx("h1",{children:"Chnh sch bo mt cho ng dng Restarter"}),r.jsx("p",{children:"Restarter cam kt bo v quyn ring t ca bn. Chnh sch ny gii thch cch chng ti thu thp, s dng, lu tr v bo v thng tin c nhn ca bn, cng nh quyn ca bn i vi d liu ."}),r.jsx("h2",{children:"1. Thng tin chng ti thu thp"}),r.jsxs("ul",{children:[r.jsx("li",{children:"a ch email"}),r.jsx("li",{children:"Tn ngi dng/Bit danh"}),r.jsx("li",{children:"nh i din (nu ti ln)"}),r.jsx("li",{children:"Gii tnh, tui, quc gia/khu vc, thnh ph (nu cung cp)"}),r.jsx("li",{children:"S thch, s kin cuc sng, m t c nhn (nu cung cp)"}),r.jsx("li",{children:"Nht k ng nhp v hot ng ( bo mt v ci thin dch v)"})]}),r.jsx("h2",{children:"2. Mc ch thu thp"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Xc thc, qun l ti khon v dch v c nhn ha"}),r.jsx("li",{children:"Tng tc cng ng, ghp i, nhim v, tnh nng vn"}),r.jsx("li",{children:"Bo mt dch v, pht hin li v ngn chn lm dng"}),r.jsx("li",{children:"Phn tch thng k v ci tin sn phm (n danh)"}),r.jsx("li",{children:"Chng ti khng bn, cho thu hoc chia s d liu c nhn ca bn vi bn th ba nu khng c s ng  ca bn"})]}),r.jsx("h2",{children:"3. Dch v ca bn th ba"}),r.jsxs("p",{children:["ng dng ny s dng Google Firebase lm backend. Firebase c th x l d liu k thut theo ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:"Chnh sch bo mt"})," (v d: thng tin thit b, IP, nht k hot ng)."]}),r.jsx("p",{children:"Nu bn ng nhp qua Google, Apple hoc Facebook, chng ti ch truy cp thng tin cng khai ca bn (email, bit danh, nh i din), khng bao gi truy cp mt khu ca bn."}),r.jsx("h2",{children:"4. Cookie v theo di"}),r.jsx("p",{children:"Chng ti c th s dng cookie hoc cc cng ngh tng t  nng cao tri nghim v bo mt ca bn. Bn c th qun l cookie trong ci t trnh duyt ca mnh."}),r.jsx("h2",{children:"5. Lu tr v bo v d liu"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Tt c d liu c nhn c lu tr trn m my Google Firebase vi m ha v bo mt tiu chun ngnh."}),r.jsx("li",{children:"Ch nhng nhn vin c y quyn mi c th truy cp d liu ca bn, ch  bo tr dch v hoc tun th php lut."})]}),r.jsx("h2",{children:"6. Quyn ca bn"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Bn c quyn truy cp, chnh sa, ti xung hoc xa d liu c nhn ca mnh."}),r.jsx("li",{children:"Bn c th yu cu xa ti khon/d liu bt c lc no qua ng dng hoc email. Chng ti s x l yu cu ca bn trong vng 3-5 ngy lm vic."}),r.jsxs("li",{children:["Lin h: ",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7. Cp nht chnh sch"}),r.jsx("p",{children:"Chng ti s thng bo cho ngi dng v nhng thay i ln i vi chnh sch ny qua thng bo trong ng dng v cp nht trang ny cho ph hp."})]}),ms:r.jsxs("div",{children:[r.jsx("h1",{children:"Dasar Privasi untuk Aplikasi Restarter"}),r.jsx("p",{children:"Restarter komited untuk melindungi privasi anda. Polisi ini menerangkan bagaimana kami mengumpul, menggunakan, menyimpan dan melindungi maklumat peribadi anda, serta hak anda terhadap data tersebut."}),r.jsx("h2",{children:"1. Maklumat yang Kami Kumpul"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Alamat emel"}),r.jsx("li",{children:"Nama pengguna/Nama samaran"}),r.jsx("li",{children:"Avatar (jika dimuat naik)"}),r.jsx("li",{children:"Jantina, umur, negara/wilayah, bandar (jika diberikan)"}),r.jsx("li",{children:"Minat, peristiwa hidup, keterangan peribadi (jika diberikan)"}),r.jsx("li",{children:"Log masuk dan aktiviti (untuk keselamatan dan penambahbaikan perkhidmatan)"})]}),r.jsx("h2",{children:"2. Tujuan Pengumpulan"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Pengesahan, pengurusan akaun dan perkhidmatan peribadi"}),r.jsx("li",{children:"Interaksi komuniti, padanan, misi, ciri taman"}),r.jsx("li",{children:"Keselamatan perkhidmatan, pengesanan ralat dan pencegahan penyalahgunaan"}),r.jsx("li",{children:"Analisis statistik dan penambahbaikan produk (tanpa nama)"}),r.jsx("li",{children:"Kami tidak akan menjual, menyewa atau berkongsi data peribadi anda dengan pihak ketiga tanpa kebenaran anda"})]}),r.jsx("h2",{children:"3. Perkhidmatan Pihak Ketiga"}),r.jsxs("p",{children:["Aplikasi ini menggunakan Google Firebase sebagai backend. Firebase mungkin memproses data teknikal mengikut ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:"Dasar Privasi"})," (cth: maklumat peranti, IP, log aktiviti)."]}),r.jsx("p",{children:"Jika anda log masuk melalui Google, Apple atau Facebook, kami hanya mengakses maklumat awam anda (emel, nama samaran, avatar), tidak pernah kata laluan anda."}),r.jsx("h2",{children:"4. Kuki dan Penjejakan"}),r.jsx("p",{children:"Kami mungkin menggunakan kuki atau teknologi serupa untuk meningkatkan pengalaman dan keselamatan anda. Anda boleh mengurus pilihan kuki dalam tetapan pelayar anda."}),r.jsx("h2",{children:"5. Penyimpanan dan Perlindungan Data"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Semua data peribadi disimpan di awan Google Firebase dengan penyulitan dan keselamatan piawaian industri."}),r.jsx("li",{children:"Soli homines auctoritate praediti possunt tuas notitias accedere, tantum ad servitium vel leges tuendas."})]}),r.jsx("h2",{children:"6. Hak Anda"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Anda berhak untuk mengakses, membetulkan, memuat turun atau memadam data peribadi anda."}),r.jsx("li",{children:"Anda boleh meminta pemadaman akaun/data pada bila-bila masa melalui aplikasi atau e-mel. Kami akan memproses permintaan anda dalam masa 3-5 hari bekerja."}),r.jsxs("li",{children:["Hubungi: ",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7. Kemas Kini Polisi"}),r.jsx("p",{children:"Kami akan memaklumkan pengguna tentang perubahan besar pada polisi ini melalui pengumuman dalam aplikasi dan mengemas kini halaman ini dengan sewajarnya."})]}),la:r.jsxs("div",{children:[r.jsx("h1",{children:"Consilium Privacy pro Restarter App"}),r.jsx("p",{children:"Restarter ad tuendam tuam privacy studet. Haec consilia explicat quomodo notitias personales colligamus, utamur, condamus, tueamur, et iura tua de notitiis exponat."}),r.jsx("h2",{children:"1. Quae colligimus"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Inscriptionem electronicam"}),r.jsx("li",{children:"Nomen usoris/Sobriquet"}),r.jsx("li",{children:"Avatar (si sublatus)"}),r.jsx("li",{children:"Sexus, aetas, regio/natio, urbs (si praebetur)"}),r.jsx("li",{children:"Studia, eventus vitae, descriptio personalis (si praebetur)"}),r.jsx("li",{children:"Acta login et actio (ad securitatem et emendationem servitii)"})]}),r.jsx("h2",{children:"2. Propositum collectionis"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Authenticatio, administratio rationis, officia personalia"}),r.jsx("li",{children:"Communitas, paria, missiones, hortus"}),r.jsx("li",{children:"Securitas servitii, errorum detectio, abusus praeventio"}),r.jsx("li",{children:"Analysis statistica et emendatio producti (anonymizata)"}),r.jsx("li",{children:"Notitias tuas non vendimus, locamus, nec sine consensu communicamus"})]}),r.jsx("h2",{children:"3. Officia tertiarum partium"}),r.jsxs("p",{children:["Haec app utitur Google Firebase ut backend. Firebase potest notitias technicas tractare secundum ",r.jsx("span",{href:"https://firebase.google.com/support/privacy",target:"_blank",rel:"noopener noreferrer",children:"Consilium Privacy"})," (ex. info de machina, IP, acta actionum)."]}),r.jsx("p",{children:"Si per Google, Apple, Facebook ingredieris, solum publicas notitias tuas accedimus (email, sobriquet, avatar), numquam tesseram tuam."}),r.jsx("h2",{children:"4. Cookies et vestigatio"}),r.jsx("p",{children:"Possumus uti cookies aut similibus technologiis ad experientiam et securitatem tuam augendam. Praeferentias cookies in navigatoris tuis regere potes."}),r.jsx("h2",{children:"5. Reconditio et tutela notitiarum"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Omnes notitiae personales in Google Firebase nube servantur, cum encryptione et securitate industriae."}),r.jsx("li",{children:"Soli homines auctoritate praediti possunt tuas notitias accedere, tantum ad servitium vel leges tuendas."})]}),r.jsx("h2",{children:"6. Iura tua"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Ius habes accedere, corrigere, extrahere, aut delere notitias tuas personales."}),r.jsx("li",{children:"Potes petere deletionem rationis/datae quovis tempore per app vel email. Processum intra 3-5 dies negotiales perficimus."}),r.jsxs("li",{children:["Contactus: ",r.jsx("span",{href:"mailto:rbben521@gmail.com",children:"rbben521@gmail.com"})]})]}),r.jsx("h2",{children:"7. Renovatio consilii"}),r.jsx("p",{children:"De mutationibus maioribus huius consilii usores per nuntios in app certiorem faciemus et hanc paginam proinde renovabimus."})]})};function EV(){const t=localStorage.getItem("lang")||"zh-TW",e=tt();return r.jsxs("div",{style:{minHeight:"100vh",background:"#111827",color:"white",padding:"2rem",display:"flex",flexDirection:"column"},children:[r.jsxs("button",{onClick:()=>e("/",{replace:!0}),style:{position:"absolute",top:32,left:36,zIndex:10,backgroundColor:"#374151",color:"white",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:16},children:[" ",RV[t]||""]}),r.jsx("div",{style:{flex:"1 0 auto"},children:r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"#fff",color:"#111",borderRadius:16,padding:32,position:"relative"},children:[QS[t]||QS["zh-TW"],r.jsx("div",{style:{textAlign:"center",marginTop:48,color:"#888",fontSize:16},children:"CTX Goodlife Copyright 2025"})]})}),r.jsx("div",{style:{width:"100%",margin:"0 auto",marginTop:24,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>e("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>e("/terms"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:"/"}),r.jsx("span",{onClick:()=>e("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>e("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" Restarter"}),r.jsx("span",{onClick:()=>e("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" "})]})})]})}const YS={"zh-TW":r.jsxs("div",{children:[r.jsx("h1",{children:""}),r.jsx("p",{children:" Restarter App "}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:" 3-5 "})]}),"zh-CN":r.jsxs("div",{children:[r.jsx("h1",{children:""}),r.jsx("p",{children:" Restarter App "}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:" 3-5 "})]}),en:r.jsxs("div",{children:[r.jsx("h1",{children:"Data Deletion Policy"}),r.jsx("p",{children:"If you wish to delete your personal data stored in the Restarter App, please contact:"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:"We will complete the deletion process within 3-5 business days."})]}),ja:r.jsxs("div",{children:[r.jsx("h1",{children:""}),r.jsx("p",{children:"Restarter"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:"35"})]}),ko:r.jsxs("div",{children:[r.jsx("h1",{children:"  "}),r.jsx("p",{children:"Restarter        :"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:"3~5     ."})]}),th:r.jsxs("div",{children:[r.jsx("h1",{children:""}),r.jsx("p",{children:" Restarter :"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:" 3-5 "})]}),vi:r.jsxs("div",{children:[r.jsx("h1",{children:"Chnh sch xa d liu"}),r.jsx("p",{children:"Nu bn mun xa d liu c nhn c lu tr trong ng dng Restarter, vui lng lin h:"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:"Chng ti s hon tt vic xa d liu trong vng 3-5 ngy lm vic."})]}),ms:r.jsxs("div",{children:[r.jsx("h1",{children:"Dasar Pemadaman Data"}),r.jsx("p",{children:"Jika anda ingin memadam data peribadi yang disimpan dalam Aplikasi Restarter, sila hubungi:"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:"Kami akan menyelesaikan proses pemadaman dalam masa 3-5 hari bekerja."})]}),la:r.jsxs("div",{children:[r.jsx("h1",{children:"Norma Deletionis Datae"}),r.jsx("p",{children:"Si vis delere data personalia in Restarter App reposita, quaeso contactum:"}),r.jsx("p",{children:r.jsx("strong",{children:"rbben521@gmail.com"})}),r.jsx("p",{children:"Processum deletionis intra 3-5 dies negotiales perficimus."})]})},AV={"zh-TW":"","zh-CN":"",en:"Back",ja:"",ko:"",th:"",vi:"Quay li",ms:"Kembali",la:"Revertere"};function BV(){const t=localStorage.getItem("lang")||"zh-TW",e=tt();return r.jsxs("div",{style:{minHeight:"100vh",background:"#111827",color:"white",padding:"2rem",display:"flex",flexDirection:"column"},children:[r.jsxs("button",{onClick:()=>e("/",{replace:!0}),style:{position:"absolute",top:32,left:36,zIndex:10,backgroundColor:"#374151",color:"white",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:16},children:[" ",AV[t]||""]}),r.jsx("div",{style:{flex:"1 0 auto"},children:r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"#fff",color:"#111",borderRadius:16,padding:32,position:"relative"},children:[YS[t]||YS["zh-TW"],r.jsx("div",{style:{textAlign:"center",marginTop:48,color:"#888",fontSize:16},children:"CTX Goodlife Copyright 2025"})]})}),r.jsx("div",{style:{width:"100%",margin:"0 auto",marginTop:24,background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"16px",boxShadow:"0 2px 12px #6B5BFF22"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>e("/privacy-policy"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>e("/terms"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:"/"}),r.jsx("span",{onClick:()=>e("/data-deletion"),style:{color:"#6B5BFF",textDecoration:"underline",padding:"4px 8px",fontSize:12,cursor:"pointer"},children:""}),r.jsx("span",{onClick:()=>e("/about"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" Restarter"}),r.jsx("span",{onClick:()=>e("/feedback"),style:{color:"#6B5BFF",textDecoration:"underline",fontWeight:700,padding:"4px 8px",fontSize:12,cursor:"pointer"},children:" "})]})})]})}const PV={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},jt={"zh-TW":{title:"&",provide:"",supply:"",need:"",room:"",intro:"",introNeed:"",needBtn:"",rule:" ",msgTo:"",msgPlaceholder:"...",msgSent:"",backToHome:"",sections:{provide:{title:" & ",desc:"",btn:""},need:{title:" or ",desc:"",btn:""},supply:{title:" & ",desc:"",btn:""},room:{title:"",desc:"",btn:""}},modals:{provide:{title:" & ",subtitle:"",experience:"",current:"()",target:"",helpType:"",statement:"50",frequency:"",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:"",messagePlaceholder:"...",sendMessage:"",messageSent:""},need:{title:"",subtitle:"",experience:"",current:"()",target:"",helpType:"",statement:"50",frequency:"",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:"",messagePlaceholder:"...",sendMessage:"",messageSent:""}},options:{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},messages:{messageSent:"",messageFailed:"",noMessages:"",markRead:"",delete:"",confirmDelete:"",inboxTitle:"",messageFrom:"",contactUser:""},date:"",avatar:"",name:"",gender:"",age:"",country:""},"zh-CN":{sections:{provide:{title:" & ",desc:"",btn:""},need:{title:" or ",desc:"",btn:""},supply:{title:" & ",desc:"",btn:""},room:{title:"",desc:"",btn:""}},modals:{provide:{title:" & ",subtitle:"",experience:"",current:"()",target:"",helpType:"",statement:"50",frequency:"",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:"",messagePlaceholder:"...",sendMessage:"",messageSent:""},need:{title:"",subtitle:"",experience:"",current:"()",target:"/",helpType:"",statement:"50",frequency:"",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:"",messagePlaceholder:"...",sendMessage:"",messageSent:""}},options:{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},messages:{messageSent:"",messageFailed:"",noMessages:"",markRead:"",delete:"",confirmDelete:"",inboxTitle:"",messageFrom:"",contactUser:""},date:"",avatar:"",name:"",gender:"",age:"",country:""},en:{sections:{provide:{title:"I can provide help & cooperation room",desc:"Share your expertise, resources or areas you want to collaborate on, so more people can find you.",btn:"I want to provide"},need:{title:"I need help or cooperation house",desc:"Tell us about the difficulties you're currently facing or partners you want to find, so the community can support you.",btn:"I need help"},supply:{title:"Help & cooperation supply circle",desc:"Browse the help and cooperation resources everyone can provide, actively contact each other.",btn:"Explore supply circle"},room:{title:"Enter mutual aid room",desc:"Real-time communication, mutual growth",btn:"Enter mutual aid room"}},modals:{provide:{title:"I can provide help & cooperation",subtitle:"On the restart journey, my experience and advantages might be helpful!",experience:"My experience (multiple choice):",current:"My current situation (multiple choice):",target:"People I want to help first (multiple choice):",helpType:"I can provide help in the form of:",statement:"My special statement (within 50 characters):",frequency:"My help frequency:",cancel:"Cancel",submit:"Submit",other:"Other...",enterPlaceholder:"Please enter...",messageTo:"Message to:",messagePlaceholder:"Please enter message...",sendMessage:"Send message",messageSent:"Request sent successfully!",backToHome:"Back to Home"},need:{title:"I need help",subtitle:"Please describe the difficulties you're facing or areas where you need assistance, so community partners can better help you!",experience:"My experience (multiple choice):",current:"My current situation (multiple choice):",target:"People I want to help first (multiple choice):",helpType:"I can provide help in the form of:",statement:"My special statement (within 50 characters):",frequency:"My help frequency:",cancel:"Cancel",submit:"Submit",other:"Other...",enterPlaceholder:"Please enter...",messageTo:"Message to:",messagePlaceholder:"Please enter message...",sendMessage:"Send message",messageSent:"Request sent successfully!",backToHome:"Back to Home"}},options:{experience:["Successful entrepreneurship","Family reconstruction","Employment guidance","Legal assistance","Addiction recovery experience","Volunteer","Community service","Other"],advantage:["Financial difficulties","No fixed job","Lack of family support","Health problems","Legal disputes","Psychological pressure","Lack of housing","Interpersonal difficulties","Currently starting a business","Other"],target:["Job search/employment assistance","Emergency financial assistance","Psychological counseling/companionship","Legal assistance","Medical assistance","Housing assistance","Family repair","Addiction support","Interpersonal assistance","Life reconstruction","Business guidance","Other"],helpType:["Online","Offline"],frequency:["Daily","Weekly","Monthly","As needed","Other"]},messages:{messageSent:"Message sent successfully!",messageFailed:"Message sending failed, please try again later",noMessages:"No messages yet",markRead:"Mark as read",delete:"Delete",confirmDelete:"Are you sure you want to delete this message? (Once deleted, it cannot be restored)",inboxTitle:"Inbox Messages",messageFrom:" sent you a message:",contactUser:"Contact User"},date:"Date",avatar:"Avatar",name:"Name",gender:"Gender",age:"Age",country:"Country"},ja:{sections:{provide:{title:"",desc:"",btn:""},need:{title:"",desc:"",btn:""},supply:{title:"",desc:"",btn:""},room:{title:"",desc:"",btn:""}},modals:{provide:{title:"",subtitle:"",experience:"",current:"",target:"",helpType:"",statement:"50",frequency:"",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:"",messagePlaceholder:"...",sendMessage:"",messageSent:"",backToHome:""},need:{title:"",subtitle:"",experience:"",current:"",target:"",helpType:"",statement:"50",frequency:"",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:"",messagePlaceholder:"...",sendMessage:"",messageSent:"",backToHome:""}},options:{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},messages:{messageSent:"",messageFailed:"",noMessages:"",markRead:"",delete:"",confirmDelete:"",inboxTitle:"",messageFrom:"",contactUser:"",backToHome:""},date:"",avatar:"",name:"",gender:"",age:"",country:""},ko:{sections:{provide:{title:"      ",desc:"  ,              .",btn:" "},need:{title:"    ",desc:"        .      .",btn:" "},supply:{title:"   ",desc:"        ,   .",btn:"  "},room:{title:"   ",desc:" ,  ",btn:"   "}},modals:{provide:{title:"     ",subtitle:"        !",experience:"  (  ):",current:"   (  ):",target:"     (  ):",helpType:"     :",statement:"   (50 ):",frequency:"    :",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:" :",messagePlaceholder:" ...",sendMessage:" ",messageSent:"  !",backToHome:" "},need:{title:" ",subtitle:"       .         !",experience:"  (  ):",current:"   (  ):",target:"     (  ):",helpType:"     :",statement:"   (50 ):",frequency:"    :",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:" :",messagePlaceholder:" ...",sendMessage:" ",messageSent:"  !",backToHome:" "}},options:{experience:[" "," "," "," ","  ",""," ",""],advantage:[" ","  ","  "," "," "," "," "," ","  ",""],target:[" / ","  "," /"," "," "," "," "," "," "," "," ",""],helpType:["",""],frequency:["","",""," ",""]},messages:{messageSent:"  !",messageFailed:"  .    ",noMessages:"  ",markRead:" ",delete:"",confirmDelete:"  ? (   )",inboxTitle:" ",messageFrom:"  :",contactUser:" ",backToHome:" "},date:"",avatar:"",name:"",gender:"",age:"",country:""},vi:{sections:{provide:{title:"Ti c th cung cp phng tr gip & hp tc",desc:"Chia s chuyn mn, ti nguyn hoc lnh vc bn mun hp tc,  nhiu ngi c th tm thy bn.",btn:"Ti mun cung cp"},need:{title:"Ti cn tr gip hoc nh hp tc",desc:"Hy ni v nhng kh khn bn ang gp phi hoc i tc bn mun tm,  cng ng c th h tr bn.",btn:"Ti cn tr gip"},supply:{title:"Vng trn cung cp tr gip & hp tc",desc:"Duyt qua cc ti nguyn tr gip v hp tc m mi ngi c th cung cp, ch ng lin lc vi nhau.",btn:"Khm ph vng trn cung cp"},room:{title:"Vo phng h tr ln nhau",desc:"Giao tip thi gian thc, cng nhau pht trin",btn:"Vo phng h tr ln nhau"}},modals:{provide:{title:"Ti c th cung cp tr gip & hp tc",subtitle:"Trn hnh trnh khi ng li, kinh nghim v li th ca ti c th hu ch!",experience:"Kinh nghim ca ti (chn nhiu):",current:"Tnh trng hin ti ca ti (chn nhiu):",target:"Nhng ngi ti mun u tin gip  (chn nhiu):",helpType:"Ti c th cung cp tr gip di hnh thc:",statement:"Tuyn b c bit ca ti (trong vng 50 k t):",frequency:"Tn sut ti c th gip:",cancel:"Hy",submit:"Gi",other:"Khc...",enterPlaceholder:"Vui lng nhp...",messageTo:"Nhn tin cho:",messagePlaceholder:"Vui lng nhp tin nhn...",sendMessage:"Gi tin nhn",messageSent:"Yu cu  c gi thnh cng!",backToHome:"V trang ch"},need:{title:"Ti cn tr gip",subtitle:"Vui lng m t nhng kh khn bn ang gp phi hoc nhng lnh vc cn h tr,  cc i tc cng ng c th gip bn tt hn!",experience:"Kinh nghim ca ti (chn nhiu):",current:"Tnh trng hin ti ca ti (chn nhiu):",target:"Nhng ngi ti mun u tin gip  (chn nhiu):",helpType:"Ti c th cung cp tr gip di hnh thc:",statement:"Tuyn b c bit ca ti (trong vng 50 k t):",frequency:"Tn sut ti c th gip:",cancel:"Hy",submit:"Gi",other:"Khc...",enterPlaceholder:"Vui lng nhp...",messageTo:"Nhn tin cho:",messagePlaceholder:"Vui lng nhp tin nhn...",sendMessage:"Gi tin nhn",messageSent:"Yu cu  c gi thnh cng!",backToHome:"V trang ch"}},options:{experience:["Khi nghip thnh cng","Ti thit gia nh","Hng dn vic lm","H tr php l","Kinh nghim cai nghin","Tnh nguyn vin","Dch v cng ng","Khc"],advantage:["Kh khn ti chnh","Khng c vic lm c nh","Thiu h tr gia nh","Vn  sc khe","Tranh chp php l","p lc tm l","Thiu ni ","Kh khn trong mi quan h","ang khi nghip","Khc"],target:["Tm vic/h tr vic lm","H tr ti chnh khn cp","T vn tm l/ng hnh","H tr php l","H tr y t","H tr nh ","Sa cha gia nh","H tr cai nghin","H tr mi quan h","Ti thit cuc sng","Hng dn kinh doanh","Khc"],helpType:["Trc tuyn","Ngoi tuyn"],frequency:["Hng ngy","Hng tun","Hng thng","Theo nhu cu","Khc"]},messages:{messageSent:"Tin nhn  c gi thnh cng!",messageFailed:"Gi tin nhn tht bi, vui lng th li sau",noMessages:"Cha c tin nhn",markRead:"nh du  c",delete:"Xa",confirmDelete:"Bn c chc chn mun xa tin nhn ny khng? (Mt khi xa s khng th khi phc)",inboxTitle:"Tin nhn n",messageFrom:"  gi tin nhn cho bn:",contactUser:"Lin h ngi dng",backToHome:"V trang ch"},date:"Ngy",avatar:"nh i din",name:"Tn",gender:"Gii tnh",age:"Tui",country:"Quc gia"},th:{sections:{provide:{title:"",desc:"    ",btn:""},need:{title:"",desc:" ",btn:""},supply:{title:"",desc:" ",btn:""},room:{title:"",desc:" ",btn:""}},modals:{provide:{title:"",subtitle:" !",experience:" ():",current:" ():",target:" ():",helpType:":",statement:" ( 50 ):",frequency:":",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:":",messagePlaceholder:"...",sendMessage:"",messageSent:"!",backToHome:""},need:{title:"",subtitle:" !",experience:" ():",current:" ():",target:" ():",helpType:":",statement:" ( 50 ):",frequency:":",cancel:"",submit:"",other:"...",enterPlaceholder:"...",messageTo:":",messagePlaceholder:"...",sendMessage:"",messageSent:"!",backToHome:""}},options:{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},messages:{messageSent:"!",messageFailed:" ",noMessages:"",markRead:"",delete:"",confirmDelete:"? ()",inboxTitle:"",messageFrom:"",contactUser:"",backToHome:""},date:"",avatar:"",name:"",gender:"",age:"",country:""},ms:{sections:{provide:{title:"Saya boleh menyediakan bilik bantuan & kerjasama",desc:"Kongsi kepakaran, sumber atau bidang yang anda ingin bekerjasama, supaya lebih ramai orang dapat mencari anda.",btn:"Saya ingin menyediakan"},need:{title:"Saya memerlukan bantuan atau rumah kerjasama",desc:"Beritahu kami tentang kesukaran yang anda hadapi atau rakan kongsi yang anda ingin cari, supaya komuniti dapat menyokong anda.",btn:"Saya memerlukan bantuan"},supply:{title:"Bulatan bekalan bantuan & kerjasama",desc:"Semak imbas sumber bantuan dan kerjasama yang semua orang boleh sediakan, hubungi antara satu sama lain secara aktif.",btn:"Jelajah bulatan bekalan"},room:{title:"Masuk bilik bantuan bersama",desc:"Komunikasi masa nyata, pertumbuhan bersama",btn:"Masuk bilik bantuan bersama"}},modals:{provide:{title:"Saya boleh menyediakan bantuan & kerjasama",subtitle:"Dalam perjalanan memulakan semula, pengalaman dan kelebihan saya mungkin boleh membantu!",experience:"Pengalaman saya (pilihan berganda):",current:"Keadaan semasa saya (pilihan berganda):",target:"Orang yang saya ingin bantu terlebih dahulu (pilihan berganda):",helpType:"Saya boleh menyediakan bantuan dalam bentuk:",statement:"Pernyataan khas saya (dalam 50 aksara):",frequency:"Kekerapan saya boleh membantu:",cancel:"Batal",submit:"Hantar",other:"Lain-lain...",enterPlaceholder:"Sila masukkan...",messageTo:"Mesej kepada:",messagePlaceholder:"Sila masukkan mesej...",sendMessage:"Hantar mesej",messageSent:"Permintaan berjaya dihantar!",backToHome:"Kembali ke Laman Utama"},need:{title:"Saya memerlukan bantuan",subtitle:"Sila terangkan kesukaran yang anda hadapi atau bidang yang memerlukan bantuan, supaya rakan kongsi komuniti dapat membantu anda dengan lebih baik!",experience:"Pengalaman saya (pilihan berganda):",current:"Keadaan semasa saya (pilihan berganda):",target:"Orang yang saya ingin bantu terlebih dahulu (pilihan berganda):",helpType:"Saya boleh menyediakan bantuan dalam bentuk:",statement:"Pernyataan khas saya (dalam 50 aksara):",frequency:"Kekerapan saya boleh membantu:",cancel:"Batal",submit:"Hantar",other:"Lain-lain...",enterPlaceholder:"Sila masukkan...",messageTo:"Mesej kepada:",messagePlaceholder:"Sila masukkan mesej...",sendMessage:"Hantar mesej",messageSent:"Permintaan berjaya dihantar!",backToHome:"Kembali ke Laman Utama"}},options:{experience:["Keusahawanan berjaya","Pembinaan semula keluarga","Bimbingan pekerjaan","Bantuan undang-undang","Pengalaman pemulihan ketagihan","Sukarelawan","Perkhidmatan komuniti","Lain-lain"],advantage:["Kesukaran kewangan","Tiada pekerjaan tetap","Kekurangan sokongan keluarga","Masalah kesihatan","Pertikaian undang-undang","Tekanan psikologi","Kekurangan tempat tinggal","Kesukaran hubungan interpersonal","Sedang memulakan perniagaan","Lain-lain"],target:["Mencari kerja/bantuan pekerjaan","Bantuan kewangan kecemasan","Kaunseling psikologi/teman","Bantuan undang-undang","Bantuan perubatan","Bantuan tempat tinggal","Pembaikan keluarga","Sokongan ketagihan","Bantuan hubungan interpersonal","Pembinaan semula kehidupan","Bimbingan perniagaan","Lain-lain"],helpType:["Dalam talian","Luar talian"],frequency:["Setiap hari","Setiap minggu","Setiap bulan","Mengikut keperluan","Lain-lain"]},messages:{messageSent:"Mesej berjaya dihantar!",messageFailed:"Penghantaran mesej gagal, sila cuba lagi kemudian",noMessages:"Tiada mesej lagi",markRead:"Tandakan sebagai dibaca",delete:"Padam",confirmDelete:"Adakah anda pasti mahu memadamkan mesej ini? (Sebaik sahaja dipadamkan, ia tidak dapat dipulihkan)",inboxTitle:"",messageFrom:"",contactUser:"",backToHome:""},date:"Tarikh",avatar:"Avatar",name:"Nama",gender:"Jantina",age:"Umur",country:"Negara"},la:{sections:{provide:{title:"Possum praebere auxilium & cooperationis cubiculum",desc:"Partiri peritiam, opes vel regiones quas cooperari vis, ut plures te invenire possint.",btn:"Volo praebere"},need:{title:"Egeo auxilii vel cooperationis domus",desc:"Dic nobis de difficultatibus quas nunc patieris vel sociis quos quaeris, ut communitas te sustentare possit.",btn:"Egeo auxilii"},supply:{title:"Auxilii & cooperationis copiae circulus",desc:"Perlustra auxilii et cooperationis opes quas omnes praebere possunt, active inter se communicare.",btn:"Explora copiae circulum"},room:{title:"Intra mutuum auxilium cubiculum",desc:"Temporis realis communicatio, mutuus incrementum",btn:"Intra mutuum auxilium cubiculum"}},modals:{provide:{title:"Possum praebere auxilium & cooperationem",subtitle:"In itinere redintegrationis, mea experientia et commoda forsitan prodesse possunt!",experience:"Mea experientia (multiplex electio):",current:"Mea praesens condicio (multiplex electio):",target:"Homines quos primum adiuvare volo (multiplex electio):",helpType:"Possum praebere auxilium in forma:",statement:"Mea specialis declaratio (intra 50 characteres):",frequency:"Mea auxilii frequentia:",cancel:"Cancella",submit:"Submitte",other:"Alia...",enterPlaceholder:"Quaeso intra...",messageTo:"Nuntius ad:",messagePlaceholder:"Quaeso intra nuntium...",sendMessage:"Mitte nuntium",messageSent:"Petitio feliciter missa est!",backToHome:"Ad domum redire"},need:{title:"Egeo auxilii",subtitle:"Quaeso describe difficultates quas patieris vel regiones quae auxilio indigent, ut socii communitatis te melius adiuvare possint!",experience:"Mea experientia (multiplex electio):",current:"Mea praesens condicio (multiplex electio):",target:"Homines quos primum adiuvare volo (multiplex electio):",helpType:"Possum praebere auxilium in forma:",statement:"Mea specialis declaratio (intra 50 characteres):",frequency:"Mea auxilii frequentia:",cancel:"Cancella",submit:"Submitte",other:"Alia...",enterPlaceholder:"Quaeso intra...",messageTo:"Nuntius ad:",messagePlaceholder:"Quaeso intra nuntium...",sendMessage:"Mitte nuntium",messageSent:"Petitio feliciter missa est!",backToHome:"Ad domum redire"}},options:{experience:["Felix initium negotii","Familiae reconstructio","Orientatio laboris","Auxilium legale","Experientia liberationis ab addictione","Voluntarius","Servitium communitatis","Alia"],advantage:["Difficultates oeconomicae","Nullus labor fixus","Defectus sustentationis familiae","Problema sanitatis","Controversia legalis","Pressura psychologica","Defectus habitationis","Difficultates relationum","Nunc initium negotii faciens","Alia"],target:["Quaerere laborem/auxilium laboris","Auxilium oeconomicum urgentis","Consilium psychologicum/societas","Auxilium legale","Auxilium medicum","Auxilium habitationis","Reparatio familiae","Sustentatio liberationis","Auxilium relationum","Reconstructio vitae","Orientatio negotii","Alia"],helpType:["Online","Offline"],frequency:["Quotidie","Quot hebdomadis","Quot mensibus","Secundum necessitatem","Alia"]},messages:{messageSent:"Nuntius feliciter missus est!",messageFailed:"Missio nuntii defecit, quaeso postea denuo tenta",noMessages:"Nondum nuntii",markRead:"Nota ut lectum",delete:"Dele",confirmDelete:"Esne certus hunc nuntium delere velle? (Semel deletus, restitui non potest)",inboxTitle:"Inbox Messages",messageFrom:" sent you a message:",contactUser:"Contact User",backToHome:"Back to Home"},date:"Dies",avatar:"Imago",name:"Nomen",gender:"Genus",age:"Aetas",country:"Patria"}},FV=t=>{const e=jt[t]||jt["zh-TW"];return[{emoji:"",title:e.sections.provide.title,desc:e.sections.provide.desc,btn:e.sections.provide.btn,color:"#e0f7fa"},{emoji:"",title:e.sections.need.title,desc:e.sections.need.desc,btn:e.sections.need.btn,color:"#fff3e0"},{emoji:"",title:e.sections.supply.title,desc:e.sections.supply.desc,btn:e.sections.supply.btn,color:"#e8f5e9"},{emoji:"",title:e.sections.room.title,desc:e.sections.room.desc,btn:e.sections.room.btn,color:"#f3e5f5"}]},q6=t=>{const e={"zh-TW":{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},"zh-CN":{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},en:{experience:["Successful entrepreneurship","Family reconstruction","Employment guidance","Legal assistance","Addiction recovery experience","Volunteer","Community service","Other"],advantage:["Financial difficulties","No fixed job","Lack of family support","Health problems","Legal disputes","Psychological pressure","Lack of housing","Interpersonal difficulties","Currently starting a business","Other"],target:["Job search/employment assistance","Emergency financial assistance","Psychological counseling/companionship","Legal assistance","Medical assistance","Housing assistance","Family repair","Addiction support","Interpersonal assistance","Life reconstruction","Business guidance","Other"],helpType:["Online","Offline"],frequency:["Daily","Weekly","Monthly","As needed","Other"]},ja:{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},ko:{experience:[" "," "," "," ","  ",""," ",""],advantage:[" ","  ","  "," "," "," "," "," ","  ",""],target:[" / ","  "," /"," "," "," "," "," "," "," "," ",""],helpType:["",""],frequency:["","",""," ",""]},vi:{experience:["Khi nghip thnh cng","Ti thit gia nh","Hng dn vic lm","H tr php l","Kinh nghim cai nghin","Tnh nguyn vin","Dch v cng ng","Khc"],advantage:["Kh khn ti chnh","Khng c vic lm c nh","Thiu h tr gia nh","Vn  sc khe","Tranh chp php l","p lc tm l","Thiu ni ","Kh khn trong mi quan h","ang khi nghip","Khc"],target:["Tm vic/h tr vic lm","H tr ti chnh khn cp","T vn tm l/ng hnh","H tr php l","H tr y t","H tr nh ","Sa cha gia nh","H tr cai nghin","H tr mi quan h","Ti thit cuc sng","Hng dn kinh doanh","Khc"],helpType:["Trc tuyn","Ngoi tuyn"],frequency:["Hng ngy","Hng tun","Hng thng","Theo nhu cu","Khc"]},th:{experience:["","","","","","","",""],advantage:["","","","","","","","","",""],target:["/","","/","","","","","","","","",""],helpType:["",""],frequency:["","","","",""]},ms:{experience:["Keusahawanan berjaya","Pembinaan semula keluarga","Bimbingan pekerjaan","Bantuan undang-undang","Pengalaman pemulihan ketagihan","Sukarelawan","Perkhidmatan komuniti","Lain-lain"],advantage:["Kesukaran kewangan","Tiada pekerjaan tetap","Kekurangan sokongan keluarga","Masalah kesihatan","Pertikaian undang-undang","Tekanan psikologi","Kekurangan tempat tinggal","Kesukaran hubungan interpersonal","Sedang memulakan perniagaan","Lain-lain"],target:["Mencari kerja/bantuan pekerjaan","Bantuan kewangan kecemasan","Kaunseling psikologi/teman","Bantuan undang-undang","Bantuan perubatan","Bantuan tempat tinggal","Pembaikan keluarga","Sokongan ketagihan","Bantuan hubungan interpersonal","Pembinaan semula kehidupan","Bimbingan perniagaan","Lain-lain"],helpType:["Dalam talian","Luar talian"],frequency:["Setiap hari","Setiap minggu","Setiap bulan","Mengikut keperluan","Lain-lain"]},la:{experience:["Felix initium negotii","Familiae reconstructio","Orientatio laboris","Auxilium legale","Experientia liberationis ab addictione","Voluntarius","Servitium communitatis","Alia"],advantage:["Difficultates oeconomicae","Nullus labor fixus","Defectus sustentationis familiae","Problema sanitatis","Controversia legalis","Pressura psychologica","Defectus habitationis","Difficultates relationum","Nunc initium negotii faciens","Alia"],target:["Quaerere laborem/auxilium laboris","Auxilium oeconomicum urgentis","Consilium psychologicum/societas","Auxilium legale","Auxilium medicum","Auxilium habitationis","Reparatio familiae","Sustentatio liberationis","Auxilium relationum","Reconstructio vitae","Orientatio negotii","Alia"],helpType:["Online","Offline"],frequency:["Quotidie","Quot hebdomadis","Quot mensibus","Secundum necessitatem","Alia"]}};return e[t]||e["zh-TW"]};function XS({open:t,onClose:e,userInfo:n,onSubmit:i}){var ee,he,ve,be,te,N,O,oe,ge,je,Ce,He,J,H,Le,Y,ae,Ie,xe,_e,we,qe,gt,ht,St,_t,U,L,W,Qe,at,M,Se,Pe,$e,G,Fe,De,q,le,rt,$,pe,nt,pt,it,K,ce,Ve,Ke,me,Ee,Me,Tt,lt,un,fn;const o=tt(),{lang:s}=dt();m.useEffect(()=>{t&&window.innerWidth<=768&&window.history.pushState({modal:"provide"},"",window.location.pathname)},[t]);const a=q6(s),[l,c]=m.useState([]),[u,h]=m.useState(""),[p,g]=m.useState([]),[y,k]=m.useState(""),[j,T]=m.useState([]),[x,b]=m.useState(""),[v,z]=m.useState(a.helpType[0]),[D,P]=m.useState(""),[_,S]=m.useState(a.frequency[0]),[R,E]=m.useState(""),[A,B]=m.useState(!1),[I,re]=m.useState(!1),[Q,X]=m.useState("");if(!t)return null;const de=(Ye,or,ys)=>{or(Ye.includes(ys)?Ye.filter($t=>$t!==ys):[...Ye,ys])},V=Ye=>C(this,null,function*(){Ye.preventDefault();try{console.log("ProvideModal "),yield i({exp:l,expOther:u,adv:p,advOther:y,target:j,targetOther:x,helpType:v,statement:D,freq:_,freqOther:R}),console.log("ProvideModal ")}catch(or){console.error("ProvideModal :",or)}});return r.jsx("div",{style:{position:"fixed",zIndex:9999,left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:r.jsxs("form",{onSubmit:V,style:{background:"#fff",borderRadius:24,boxShadow:"0 8px 40px #6B5BFF33",padding:24,minWidth:360,width:"100%",maxWidth:"500px",position:"relative",display:"flex",flexDirection:"column",gap:18,maxHeight:"calc(100vh - 32px)","@media (max-width: 768px)":{maxHeight:"calc(100vh - 16px)",margin:"8px",width:"calc(100% - 16px)",minWidth:"auto"}},children:[r.jsx("button",{type:"button",onClick:()=>{e(),window.innerWidth<=768&&o("/HelpLab")},style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:26,color:"#888",cursor:"pointer",fontWeight:700,zIndex:1},children:""}),r.jsxs("div",{style:{overflow:"auto",flex:1,paddingRight:"8px",paddingBottom:"8px",maxHeight:"calc(100vh - 120px)",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth",overscrollBehavior:"contain"},children:[r.jsx("div",{style:{fontWeight:900,fontSize:22,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:((ve=(he=(ee=jt[s])==null?void 0:ee.modals)==null?void 0:he.provide)==null?void 0:ve.title)||" & "}),r.jsx("div",{style:{color:"#888",fontSize:15,textAlign:"center",marginBottom:8},children:((N=(te=(be=jt[s])==null?void 0:be.modals)==null?void 0:te.provide)==null?void 0:N.subtitle)||""}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:6},children:[r.jsx("img",{src:n.avatarUrl,alt:"avatar",style:{width:54,height:54,borderRadius:"50%",border:"2px solid #e0e7ff",objectFit:"cover"}}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx("span",{style:{color:"#1976d2",fontWeight:700,cursor:"pointer",textDecoration:"underline"},onClick:()=>B(!0),children:n.nickname}),r.jsx("span",{style:{color:"#1976d2",fontWeight:500,cursor:"pointer",textDecoration:"underline"},onClick:()=>window.open(`mailto:${n.email}`),children:n.email}),r.jsxs("span",{style:{color:"#555",fontSize:14},children:[n.country,"",n.gender,"",n.age]})]})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:((ge=(oe=(O=jt[s])==null?void 0:O.modals)==null?void 0:oe.provide)==null?void 0:ge.experience)||""}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:14},children:[a.experience.map(Ye=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"checkbox",checked:l.includes(Ye),onChange:()=>de(l,c,Ye)}),Ye]},Ye)),r.jsx("input",{placeholder:((He=(Ce=(je=jt[s])==null?void 0:je.modals)==null?void 0:Ce.provide)==null?void 0:He.other)||"...",value:u,onChange:Ye=>h(Ye.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:((Le=(H=(J=jt[s])==null?void 0:J.modals)==null?void 0:H.provide)==null?void 0:Le.current)||"()"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:14},children:[a.advantage.map(Ye=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"checkbox",checked:p.includes(Ye),onChange:()=>de(p,g,Ye)}),Ye]},Ye)),r.jsx("input",{placeholder:((Ie=(ae=(Y=jt[s])==null?void 0:Y.modals)==null?void 0:ae.provide)==null?void 0:Ie.other)||"...",value:y,onChange:Ye=>k(Ye.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:((we=(_e=(xe=jt[s])==null?void 0:xe.modals)==null?void 0:_e.provide)==null?void 0:we.target)||""}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:14},children:[a.target.map(Ye=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"checkbox",checked:j.includes(Ye),onChange:()=>de(j,T,Ye)}),Ye]},Ye)),r.jsx("input",{placeholder:((ht=(gt=(qe=jt[s])==null?void 0:qe.modals)==null?void 0:gt.provide)==null?void 0:ht.other)||"...",value:x,onChange:Ye=>b(Ye.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:((U=(_t=(St=jt[s])==null?void 0:St.modals)==null?void 0:_t.provide)==null?void 0:U.helpType)||""}),r.jsx("div",{style:{display:"flex",gap:16,fontSize:14},children:a.helpType.map(Ye=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"radio",name:"helptype",checked:v===Ye,onChange:()=>z(Ye)}),Ye]},Ye))}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:((Qe=(W=(L=jt[s])==null?void 0:L.modals)==null?void 0:W.provide)==null?void 0:Qe.statement)||"50"}),r.jsx("input",{maxLength:50,value:D,onChange:Ye=>P(Ye.target.value),placeholder:((Se=(M=(at=jt[s])==null?void 0:at.modals)==null?void 0:M.provide)==null?void 0:Se.enterPlaceholder)||"...",style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"4px 10px",fontSize:14}}),r.jsxs("div",{style:{color:"#888",fontSize:13,textAlign:"right",marginTop:-8},children:[D.length,"/50"]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:((G=($e=(Pe=jt[s])==null?void 0:Pe.modals)==null?void 0:$e.provide)==null?void 0:G.frequency)||""}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:16,fontSize:14},children:[a.frequency.map(Ye=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500,marginRight:12},children:[r.jsx("input",{type:"radio",name:"freq",checked:_===Ye,onChange:()=>S(Ye)}),Ye]},Ye)),r.jsx("input",{placeholder:((q=(De=(Fe=jt[s])==null?void 0:Fe.modals)==null?void 0:De.provide)==null?void 0:q.other)||"...",value:R,onChange:Ye=>E(Ye.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsxs("div",{style:{display:"flex",gap:18,marginTop:18,justifyContent:"center",padding:"8px 0",minHeight:"44px",background:"#fff",zIndex:10,borderTop:"1px solid #f0f0f0",position:"relative"},children:[r.jsx("button",{type:"button",onClick:()=>{e(),window.innerWidth<=768&&o("/HelpLab")},style:{background:"#eee",color:"#555",border:"none",borderRadius:18,padding:"8px 28px",fontWeight:700,fontSize:16,cursor:"pointer",minHeight:"44px",touchAction:"manipulation",flex:1,maxWidth:"120px",userSelect:"none"},children:(($=(rt=(le=jt[s])==null?void 0:le.modals)==null?void 0:rt.provide)==null?void 0:$.cancel)||""}),r.jsx("button",{type:"submit",style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:18,padding:"8px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #a777e355",minHeight:"44px",touchAction:"manipulation",flex:1,maxWidth:"120px",userSelect:"none"},children:((pt=(nt=(pe=jt[s])==null?void 0:pe.modals)==null?void 0:nt.provide)==null?void 0:pt.submit)||""})]}),r.jsx("div",{style:{height:"120px",width:"100%",background:"transparent",flexShrink:0}})]}),A&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:28,minWidth:280,maxWidth:340,width:"90vw",position:"relative",display:"flex",flexDirection:"column",gap:12},children:[r.jsx("button",{type:"button",onClick:()=>B(!1),style:{position:"absolute",top:10,right:12,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsxs("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:[((ce=(K=(it=jt[s])==null?void 0:it.modals)==null?void 0:K.provide)==null?void 0:ce.messageTo)||"",n.nickname]}),r.jsx("textarea",{value:Q,onChange:Ye=>X(Ye.target.value),rows:3,maxLength:100,placeholder:((me=(Ke=(Ve=jt[s])==null?void 0:Ve.modals)==null?void 0:Ke.provide)==null?void 0:me.messagePlaceholder)||"...",style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"6px 10px",fontSize:15,resize:"none"}}),r.jsx("button",{onClick:()=>C(this,null,function*(){B(!1);try{yield fetch("/api/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:Q,toUid:n.uid,toEmail:n.email,toNickname:n.nickname,fromUid:window.currentUserUid||"",fromEmail:window.currentUserEmail||"",fromNickname:window.currentUserNickname||""})}),re(!0),setTimeout(()=>re(!1),1500)}catch(Ye){alert("")}}),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:14,padding:"6px 18px",fontWeight:700,fontSize:15,cursor:"pointer",alignSelf:"center"},children:((Tt=(Me=(Ee=jt[s])==null?void 0:Ee.modals)==null?void 0:Me.provide)==null?void 0:Tt.sendMessage)||""})]})}),I&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.08)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 12px #ffb74d55",padding:"18px 32px",fontWeight:700,color:"#ff4d4f",fontSize:18},children:((fn=(un=(lt=jt[s])==null?void 0:lt.modals)==null?void 0:un.provide)==null?void 0:fn.messageSent)||""})})]})})}function JS({open:t,onClose:e,userInfo:n,onSubmit:i,showMsgSent:o}){tt();const{lang:s}=dt(),a=q6(s);m.useEffect(()=>{t&&window.innerWidth<=768&&window.history.pushState({modal:"need"},"",window.location.pathname)},[t]);const[l,c]=m.useState([]),[u,h]=m.useState(""),[p,g]=m.useState([]),[y,k]=m.useState(""),[j,T]=m.useState([]),[x,b]=m.useState(""),[v,z]=m.useState(a.helpType[0]),[D,P]=m.useState(""),[_,S]=m.useState(a.frequency[0]),[R,E]=m.useState(""),[A,B]=m.useState(!1),[I,re]=m.useState(""),[Q,X]=m.useState(!1);if(!t)return null;const de=(ee,he,ve)=>{he(ee.includes(ve)?ee.filter(be=>be!==ve):[...ee,ve])},V=ee=>C(this,null,function*(){ee.preventDefault();try{console.log("NeedHelpModal "),yield i({exp:l,expOther:u,adv:p,advOther:y,target:j,targetOther:x,helpType:v,statement:D,freq:_,freqOther:R}),console.log("NeedHelpModal ")}catch(he){console.error("NeedHelpModal :",he)}});return r.jsx("div",{style:{position:"fixed",zIndex:9999,left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:r.jsxs("form",{onSubmit:V,style:{background:"#fff",borderRadius:24,boxShadow:"0 8px 40px #6B5BFF33",padding:24,minWidth:360,width:"100%",maxWidth:"500px",position:"relative",display:"flex",flexDirection:"column",gap:18,maxHeight:"calc(100vh - 32px)","@media (max-width: 768px)":{maxHeight:"calc(100vh - 16px)",margin:"8px",width:"calc(100% - 16px)",minWidth:"auto"}},children:[r.jsx("button",{type:"button",onClick:e,style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:26,color:"#888",cursor:"pointer",fontWeight:700,zIndex:1},children:""}),r.jsxs("div",{style:{overflow:"auto",flex:1,paddingRight:"8px",paddingBottom:"8px",maxHeight:"calc(100vh - 120px)",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth",overscrollBehavior:"contain"},children:[r.jsx("div",{style:{fontWeight:900,fontSize:22,color:"#ff4d4f",textAlign:"center",marginBottom:2},children:""}),r.jsx("div",{style:{color:"#888",fontSize:15,textAlign:"center",marginBottom:8},children:""}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:6},children:[r.jsx("img",{src:n.avatarUrl,alt:"avatar",style:{width:54,height:54,borderRadius:"50%",border:"2px solid #e0e7ff",objectFit:"cover"}}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx("span",{style:{color:"#1976d2",fontWeight:700,cursor:"pointer",textDecoration:"underline"},onClick:()=>B(!0),children:n.nickname}),r.jsx("span",{style:{color:"#1976d2",fontWeight:500,cursor:"pointer",textDecoration:"underline"},onClick:()=>window.open(`mailto:${n.email}`),children:n.email}),r.jsxs("span",{style:{color:"#555",fontSize:14},children:[n.country,"",n.gender,"",n.age]})]})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:""}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:14},children:[a.experience.map(ee=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"checkbox",checked:l.includes(ee),onChange:()=>de(l,c,ee)}),ee]},ee)),r.jsx("input",{placeholder:"...",value:u,onChange:ee=>h(ee.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:"()"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:14},children:[a.advantage.map(ee=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"checkbox",checked:p.includes(ee),onChange:()=>de(p,g,ee)}),ee]},ee)),r.jsx("input",{placeholder:"...",value:y,onChange:ee=>k(ee.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:"/"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,fontSize:14},children:[a.target.map(ee=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"checkbox",checked:j.includes(ee),onChange:()=>de(j,T,ee)}),ee]},ee)),r.jsx("input",{placeholder:"...",value:x,onChange:ee=>b(ee.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:""}),r.jsx("div",{style:{display:"flex",gap:16,fontSize:14},children:a.helpType.map(ee=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500},children:[r.jsx("input",{type:"radio",name:"helptype",checked:v===ee,onChange:()=>z(ee)}),ee]},ee))}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:"50"}),r.jsx("input",{maxLength:50,value:D,onChange:ee=>P(ee.target.value),placeholder:"...",style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"4px 10px",fontSize:14}}),r.jsxs("div",{style:{color:"#888",fontSize:13,textAlign:"right",marginTop:-8},children:[D.length,"/50"]}),r.jsx("div",{style:{fontWeight:700,marginTop:8,fontSize:15},children:""}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:16,fontSize:14},children:[a.frequency.map(ee=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontWeight:500,marginRight:12},children:[r.jsx("input",{type:"radio",name:"freq",checked:_===ee,onChange:()=>S(ee)}),ee]},ee)),r.jsx("input",{placeholder:"...",value:R,onChange:ee=>E(ee.target.value),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"2px 8px",minWidth:60,fontSize:14}})]}),r.jsxs("div",{style:{display:"flex",gap:18,marginTop:18,justifyContent:"center",padding:"8px 0",minHeight:"44px",background:"#fff",zIndex:10,borderTop:"1px solid #f0f0f0",position:"relative"},children:[r.jsx("button",{type:"button",onClick:e,style:{background:"#eee",color:"#555",border:"none",borderRadius:18,padding:"8px 28px",fontWeight:700,fontSize:16,cursor:"pointer",minHeight:"44px",touchAction:"manipulation",flex:1,maxWidth:"120px",userSelect:"none"},children:""}),r.jsx("button",{type:"submit",style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:18,padding:"8px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #a777e355",minHeight:"44px",touchAction:"manipulation",flex:1,maxWidth:"120px",userSelect:"none"},children:""})]}),r.jsx("div",{style:{height:"120px",width:"100%",background:"transparent",flexShrink:0}})]}),A&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:28,minWidth:280,maxWidth:340,width:"90vw",position:"relative",display:"flex",flexDirection:"column",gap:12},children:[r.jsx("button",{type:"button",onClick:()=>B(!1),style:{position:"absolute",top:10,right:12,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsxs("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:["",n.nickname]}),r.jsx("textarea",{value:I,onChange:ee=>re(ee.target.value),rows:3,maxLength:100,placeholder:"...",style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"6px 10px",fontSize:15,resize:"none"}}),r.jsx("button",{onClick:()=>C(this,null,function*(){B(!1);try{yield fetch("/api/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:I,toUid:n.uid,toEmail:n.email,toNickname:n.nickname,fromUid:window.currentUserUid||"",fromEmail:window.currentUserEmail||"",fromNickname:window.currentUserNickname||""})}),X(!0),setTimeout(()=>X(!1),1500)}catch(ee){alert("")}}),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:14,padding:"6px 18px",fontWeight:700,fontSize:15,cursor:"pointer",alignSelf:"center"},children:""})]})}),Q&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.08)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{background:"#fff",borderRadius:14,boxShadow:"0 2px 12px #ffb74d55",padding:"18px 32px",fontWeight:700,color:"#ff4d4f",fontSize:18},children:""})})]})})}function zV(){var ht,St,_t,U,L,W,Qe,at;const{lang:t,setLang:e}=dt(),n=tt(),i=FV(t),[o,s]=m.useState(null),[a,l]=m.useState(!1),[c,u]=m.useState(!1),h=m.useRef(null),p=m.useRef(null),{isTestMode:g}=fs();m.useEffect(()=>{const M=ri(S,Se=>{s(Se)});return()=>M()},[]),m.useEffect(()=>{const M=Se=>{window.innerWidth<=768&&n("/HelpLab")};return window.addEventListener("popstate",M),()=>{window.removeEventListener("popstate",M)}},[n]),m.useEffect(()=>{const M=Se=>{h.current&&!h.current.contains(Se.target)&&l(!1),p.current&&!p.current.contains(Se.target)&&u(!1)};return(a||c)&&document.addEventListener("click",M),()=>{document.removeEventListener("click",M)}},[a,c]);const y=M=>{var Pe;const Se={"zh-TW":{title:"&",provide:"",supply:"",need:"",room:"",intro:"",introNeed:"",needBtn:"",rule:" ",msgTo:"",msgPlaceholder:"...",msgSent:"",backToHome:"",back:"",date:"",avatar:"",name:"",gender:"",age:"",country:""},"zh-CN":{title:"&",provide:"",supply:"",need:"",room:"",intro:"",introNeed:"",needBtn:"",rule:" ",msgTo:"",msgPlaceholder:"...",msgSent:"",backToHome:"",back:"",date:"",avatar:"",name:"",gender:"",age:"",country:""},en:{title:"Mutual Help & Cooperation Laboratory",provide:"Provide Help",supply:"Supply Circle",need:"Need Help",room:"Mutual Aid Room",intro:"On the restart journey, we all need each other's support. Please choose how you want to participate:",introNeed:"If you are experiencing difficulties, please tell us, and community partners will actively assist you.",needBtn:"I Need Help",rule:" All information is for internal community communication only, please respect each other's privacy",msgTo:"Message to:",msgPlaceholder:"Please enter message...",msgSent:"Message sent successfully!",backToHome:"Back to Home",back:"Back",date:"Date",avatar:"Avatar",name:"Name",gender:"Gender",age:"Age",country:"Country"},ja:{title:"&",provide:"",supply:"",need:"",room:"",intro:"",introNeed:"",needBtn:"",rule:" ",msgTo:"",msgPlaceholder:"...",msgSent:"",backToHome:"",back:"",date:"",avatar:"",name:"",gender:"",age:"",country:""},ko:{title:" & ",provide:" ",supply:" ",need:" ",room:"  ",intro:"      .    :",introNeed:"   .     .",needBtn:" ",rule:"      ,    ",msgTo:" :",msgPlaceholder:" ...",msgSent:"  !",backToHome:" ",back:"",date:"",avatar:"",name:"",gender:"",age:"",country:""},vi:{title:"Phng th nghim tr gip",provide:"Cung cp tr gip",supply:"Vng trn cung cp",need:"Cn tr gip",room:"Phng h tr ln nhau",intro:"Trn hnh trnh khi ng li, tt c chng ta u cn s h tr ca nhau. Vui lng chn cch bn mun tham gia:",introNeed:"Nu bn ang gp kh khn, hy cho chng ti bit, cc i tc cng ng s tch cc h tr bn.",needBtn:"Ti cn tr gip",rule:" Tt c thng tin ch dnh cho giao tip ni b cng ng, vui lng tn trng quyn ring t ca nhau",msgTo:"Nhn tin cho:",msgPlaceholder:"Vui lng nhp tin nhn...",msgSent:"Tin nhn  c gi thnh cng!",backToHome:"V trang ch",back:"Quay li",date:"Ngy",avatar:"nh i din",name:"Tn",gender:"Gii tnh",age:"Tui",country:"Quc gia"},th:{title:"",provide:"",supply:"",need:"",room:"",intro:"  :",introNeed:"  ",needBtn:"",rule:"  ",msgTo:":",msgPlaceholder:"...",msgSent:"!",backToHome:"",back:"",date:"",avatar:"",name:"",gender:"",age:"",country:""},ms:{title:"Makmal Bantuan & Kerjasama Bersama",provide:"Sediakan Bantuan",supply:"Bulatan Bekalan",need:"Memerlukan Bantuan",room:"Bilik Bantuan Bersama",intro:"Dalam perjalanan memulakan semula, kita semua memerlukan sokongan antara satu sama lain. Sila pilih cara anda ingin mengambil bahagian:",introNeed:"Jika anda menghadapi kesukaran, sila beritahu kami, rakan kongsi komuniti akan membantu anda secara aktif.",needBtn:"Saya Memerlukan Bantuan",rule:" Semua maklumat adalah untuk komunikasi dalaman komuniti sahaja, sila hormati privasi antara satu sama lain",msgTo:"Mesej kepada:",msgPlaceholder:"Sila masukkan mesej...",msgSent:"Mesej berjaya dihantar!",backToHome:"Kembali ke Laman Utama",back:"Kembali",date:"Tarikh",avatar:"Avatar",name:"Nama",gender:"Jantina",age:"Umur",country:"Negara"},la:{title:"Laboratorium Auxilii",provide:"Praebere Auxilium",supply:"Copiae Circulus",need:"Egere Auxilii",room:"Mutuum Auxilium Cubiculum",intro:"In itinere redintegrationis, omnes indigemus sustentatione mutua. Quaeso elige quomodo participare vis:",introNeed:"Si difficultates patieris, quaeso nobis dic, socii communitatis te active adiuvabunt.",needBtn:"Egeo Auxilii",rule:" Omnia notitia ad communicationem internam communitatis tantum sunt, quaeso honora privaciam inter se",msgTo:"Nuntius ad:",msgPlaceholder:"Quaeso intra nuntium...",msgSent:"Nuntius feliciter missus est!",backToHome:"Ad domum redire",back:"Redire",date:"Dies",avatar:"Imago",name:"Nomen",gender:"Sexus",age:"Aetas",country:"Patria"}};return((Pe=Se[t])==null?void 0:Pe[M])||Se["zh-TW"][M]||M},[k,j]=m.useState(!1),[T,x]=m.useState({avatarUrl:"/ctx-logo.png",nickname:"",email:"",country:"",gender:"",age:""}),[b,v]=m.useState("provide"),[z,D]=m.useState([]),[P,_]=m.useState(null),S=Ze(ir),[R,E]=m.useState(""),[A,B]=m.useState(!1),[I,re]=m.useState(null),[Q,X]=m.useState(""),[de,V]=m.useState(!1),[ee,he]=m.useState(!1),[ve,be]=m.useState([]),[te,N]=m.useState(""),[O,oe]=m.useState(!1),[ge,je]=m.useState(!1),[Ce,He]=m.useState([]),[J,H]=m.useState(!1),[Le,Y]=m.useState({});m.useEffect(()=>{if(!o)return;C(this,null,function*(){try{const Se=yield ro(kn(Ct,"profiles",o.uid)),Pe=Se.exists()?Se.data():{};let $e=!1;const G={};if(Pe.country||(G.country="",$e=!0),Pe.gender||(G.gender="",$e=!0),Pe.age||(G.age="30",$e=!0),$e){const{setDoc:Fe}=yield Gl(()=>C(this,null,function*(){const{setDoc:le}=yield Promise.resolve().then(()=>Zp);return{setDoc:le}}),void 0);yield Fe(kn(Ct,"profiles",o.uid),ke(ke({},Pe),G),{merge:!0});const De=yield ro(kn(Ct,"profiles",o.uid)),q=De.exists()?De.data():{};x({avatarUrl:q.avatar||o.photoURL||"/ctx-logo.png",nickname:q.nickname||o.displayName||"Restarter",email:q.email||o.email||"",country:q.country||"",gender:q.gender||"",age:q.age||""});return}x({avatarUrl:Pe.avatar||o.photoURL||"/ctx-logo.png",nickname:Pe.nickname||o.displayName||"Restarter",email:Pe.email||o.email||"",country:Pe.country||"",gender:Pe.gender||"",age:Pe.age||""})}catch(Se){x({avatarUrl:o.photoURL||"/ctx-logo.png",nickname:o.displayName||"Restarter",email:o.email||"",country:"",gender:"",age:""})}})},[o]);function ae(M){return C(this,null,function*(){try{if(console.log(":",M),console.log(":",T),console.log(":",o),!o){console.error(""),E(" "),setTimeout(()=>E(""),3e3);return}const Se=yield $o(xn(Ct,"helpSupplies"),We(ke({},M),{type:"provide",avatarUrl:T.avatarUrl,nickname:T.nickname,email:T.email,country:T.country,gender:T.gender,age:T.age,createdAt:bt.now(),uid:(o==null?void 0:o.uid)||""}));console.log("ID:",Se.id),j(!1),E(" "),setTimeout(()=>E(""),3e3),Ie()}catch(Se){console.error(":",Se),E(" "),setTimeout(()=>E(""),3e3)}})}function Ie(){return C(this,null,function*(){try{console.log("");const M=ei(xn(Ct,"helpSupplies"),bn("type","==","provide")),$e=(yield Ii(M)).docs.map(G=>ke({id:G.id},G.data())).sort((G,Fe)=>{var le,rt,$,pe;const De=((rt=(le=G.createdAt)==null?void 0:le.toDate)==null?void 0:rt.call(le))||new Date(G.createdAt);return(((pe=($=Fe.createdAt)==null?void 0:$.toDate)==null?void 0:pe.call($))||new Date(Fe.createdAt))-De});console.log(":",$e),D($e)}catch(M){console.error(":",M),E(" "),setTimeout(()=>E(""),3e3)}})}m.useEffect(()=>{b==="supply"&&Ie()},[b]);function xe(M,Se){return C(this,null,function*(){if(console.log("",{user:o,fromUid:o==null?void 0:o.uid,toUid:M==null?void 0:M.uid,fromEmail:o==null?void 0:o.email,toEmail:M==null?void 0:M.email,content:Se}),!o){N("user  null");return}if(!o.uid){N("user.uid ");return}if(!(M!=null&&M.uid)){N("toUser.uid ");return}if(!Se.trim()){N("");return}oe(!0),N("");try{yield $o(xn(Ct,"messages"),{toUid:M.uid,toEmail:M.email,toNickname:M.nickname,fromUid:o.uid,fromEmail:o.email,fromNickname:T.nickname,content:Se,timestamp:bt.now(),read:!1}),V(!0),setTimeout(()=>{B(!1),V(!1),X("")},1500)}catch(Pe){N(" (: "+((Pe==null?void 0:Pe.message)||Pe)+")")}finally{oe(!1)}})}function _e(){return C(this,null,function*(){if(!o)return;const M=ei(xn(Ct,"messages"),bn("toUid","==",o.uid),bn("read","==",!1)),Se=yield Ii(M);be(Se.docs.map(Pe=>ke({id:Pe.id},Pe.data())))})}m.useEffect(()=>{_e()},[o,ee]);function we(M){return C(this,null,function*(){yield Xp(kn(Ct,"messages",M),{read:!0}),_e()})}function qe(M){return C(this,null,function*(){try{if(console.log(":",M),console.log(":",T),console.log(":",o),!o){console.error(""),E(" "),setTimeout(()=>E(""),3e3);return}const Se=yield $o(xn(Ct,"helpSupplies"),We(ke({},M),{type:"need",avatarUrl:T.avatarUrl,nickname:T.nickname,email:T.email,country:T.country,gender:T.gender,age:T.age,createdAt:bt.now(),uid:(o==null?void 0:o.uid)||""}));console.log("ID:",Se.id),H(!0),setTimeout(()=>{H(!1),je(!1)},1800),E(" "),setTimeout(()=>E(""),3e3),gt()}catch(Se){console.error(":",Se),E(" "),setTimeout(()=>E(""),3e3)}})}function gt(){return C(this,null,function*(){try{console.log("");const M=ei(xn(Ct,"helpSupplies"),bn("type","==","need")),$e=(yield Ii(M)).docs.map(G=>ke({id:G.id},G.data())).sort((G,Fe)=>{var le,rt,$,pe;const De=((rt=(le=G.createdAt)==null?void 0:le.toDate)==null?void 0:rt.call(le))||new Date(G.createdAt);return(((pe=($=Fe.createdAt)==null?void 0:$.toDate)==null?void 0:pe.call($))||new Date(Fe.createdAt))-De});console.log(":",$e),He($e)}catch(M){console.error(":",M),E(" "),setTimeout(()=>E(""),3e3)}})}return m.useEffect(()=>{b==="room"&&gt()},[b]),r.jsx("div",{style:{width:"100vw",height:"100vh",overflow:"auto",position:"relative"},children:window.innerWidth<=768?r.jsxs("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)"},children:[r.jsx(Ar,{}),r.jsxs("div",{style:{marginTop:60,padding:"16px",flex:1,overflowY:"auto",minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)",paddingBottom:"48px",position:"relative"},children:[ee&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",zIndex:1e4},onClick:()=>he(!1)}),r.jsxs("div",{style:{position:"fixed",top:70,right:36,background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:24,minWidth:320,zIndex:10001},children:[r.jsx("div",{style:{fontWeight:900,fontSize:20,color:"#6B5BFF",marginBottom:12},children:((St=(ht=jt[t])==null?void 0:ht.messages)==null?void 0:St.inboxTitle)||""}),ve.length===0&&r.jsx("div",{style:{color:"#888",fontSize:15},children:((U=(_t=jt[t])==null?void 0:_t.messages)==null?void 0:U.noMessages)||""}),ve.map(M=>{var Se,Pe,$e,G,Fe,De,q,le,rt,$;return r.jsxs("div",{style:{background:"#f7f7ff",borderRadius:12,padding:12,marginBottom:12,boxShadow:"0 2px 8px #6B5BFF11",cursor:"pointer"},onClick:()=>{Y(pe=>We(ke({},pe),{[M.id]:!pe[M.id]}))},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[r.jsxs("div",{style:{fontWeight:700,color:"#1976d2"},children:[M.fromNickname," ",((Pe=(Se=jt[t])==null?void 0:Se.messages)==null?void 0:Pe.messageFrom)||""]}),r.jsx("span",{style:{fontSize:12,color:"#888"},children:Le[M.id]?"":""})]}),Le[M.id]&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:8,padding:12,marginBottom:8,border:"1px solid #e0e7ff"},children:[r.jsx("div",{style:{color:"#232946",marginBottom:8,lineHeight:"1.5"},children:M.content}),r.jsx("div",{style:{color:"#888",fontSize:13,marginBottom:8},children:(De=(G=($e=M.timestamp)==null?void 0:$e.toDate)==null?void 0:(Fe=G.call($e)).toLocaleString)==null?void 0:De.call(Fe)}),r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>window.open(`mailto:${M.fromEmail}`),style:{color:"#6B5BFF",fontWeight:700,textDecoration:"underline",fontSize:13,cursor:"pointer"},children:((le=(q=jt[t])==null?void 0:q.messages)==null?void 0:le.contactUser)||""}),r.jsx("button",{onClick:pe=>{pe.stopPropagation(),we(M.id)},style:{background:"#eee",color:"#6B5BFF",border:"none",borderRadius:6,padding:"4px 12px",fontWeight:700,fontSize:13,cursor:"pointer"},children:(($=(rt=jt[t])==null?void 0:rt.messages)==null?void 0:$.markRead)||""})]})]}),!Le[M.id]&&r.jsx("div",{style:{color:"#666",fontSize:14,fontStyle:"italic"},children:M.content.length>30?`${M.content.substring(0,30)}...`:M.content})]},M.id)})]})]}),R&&r.jsx("div",{style:{position:"fixed",top:40,left:"50%",transform:"translateX(-50%)",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:18,borderRadius:16,boxShadow:"0 4px 24px #6B5BFF22",padding:"18px 36px",zIndex:99999,textAlign:"center",letterSpacing:1},children:R}),r.jsx("div",{style:{width:"100%",maxWidth:700,margin:"20px auto 20px auto",padding:"16px 24px",background:"rgba(255,255,255,0.95)",borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[r.jsxs("h1",{style:{fontWeight:900,fontSize:18,color:"#6B5BFF",margin:0,lineHeight:1,textShadow:"0 2px 8px #6B5BFF88",textAlign:"center"},children:[r.jsx("span",{role:"img","aria-label":"helplab",children:""})," ",y("title")]}),r.jsxs("button",{onClick:()=>he(M=>!M),style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:8},children:[r.jsx("span",{style:{fontSize:24,color:"#6B5BFF"},children:""}),ve.length>0&&r.jsx("span",{style:{position:"absolute",top:0,right:0,minWidth:18,height:18,background:"#ff4d4f",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",color:"#fff",fontWeight:900,fontSize:13,padding:"0 5px",boxShadow:"0 2px 8px #ff4d4f88",zIndex:1},children:ve.length})]})]})}),r.jsxs("div",{style:{maxWidth:600,margin:"0 auto",padding:"20px 16px 0 16px",background:"#fff",borderRadius:32,boxShadow:"0 8px 40px #b6b6f633, 0 1.5px 8px #6B5BFF22",border:"1.5px solid #e0e7ff"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,marginBottom:24},children:[r.jsx("button",{onClick:()=>v("provide"),style:{fontWeight:900,fontSize:18,color:b==="provide"?"#6B5BFF":"#888",background:"#fff",border:b==="provide"?"3px solid #6B5BFF":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #b6b6f633",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("provide")}),r.jsx("button",{onClick:()=>v("supply"),style:{fontWeight:900,fontSize:18,color:b==="supply"?"#6B5BFF":"#888",background:"#fff",border:b==="supply"?"3px solid #6B5BFF":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #b6b6f633",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("supply")}),r.jsx("button",{onClick:()=>v("need"),style:{fontWeight:900,fontSize:18,color:b==="need"?"#ff4d4f":"#888",background:"#fff",border:b==="need"?"3px solid #ff4d4f":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #ffb74d55",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("need")}),r.jsx("button",{onClick:()=>v("room"),style:{fontWeight:900,fontSize:18,color:b==="room"?"#ff4d4f":"#888",background:"#fff",border:b==="room"?"3px solid #ff4d4f":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #ffb74d55",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("room")})]}),b==="provide"&&r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{textAlign:"center",color:"#555",fontSize:18,marginBottom:36},children:y("intro")}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:32,justifyContent:"center"},children:i.map((M,Se)=>r.jsxs("div",{style:{background:M.color,borderRadius:20,boxShadow:"0 4px 24px #0001",padding:"32px 28px",minWidth:260,maxWidth:320,flex:"1 1 260px",display:"flex",flexDirection:"column",alignItems:"center",marginBottom:12},children:[r.jsx("div",{style:{fontSize:48,marginBottom:12},children:M.emoji}),r.jsx("div",{style:{fontWeight:800,fontSize:22,marginBottom:8,color:"#333",letterSpacing:1},children:M.title}),r.jsx("div",{style:{color:"#666",fontSize:15,marginBottom:18,textAlign:"center",minHeight:44},children:M.desc}),Se===0?r.jsx("button",{onClick:()=>{v("provide"),j(!0)},style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #a777e355",marginTop:"auto",transition:"background 0.2s"},children:M.btn}):Se===1?r.jsx("button",{onClick:()=>{v("need"),je(!0)},style:{background:"linear-gradient(90deg, #ff4d4f, #ffb74d)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #ffb74d55",marginTop:"auto",transition:"background 0.2s"},children:M.btn}):Se===2?r.jsx("button",{onClick:()=>v("supply"),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #a777e355",marginTop:"auto",transition:"background 0.2s"},children:M.btn}):r.jsx("button",{onClick:()=>v("room"),style:{background:"linear-gradient(90deg, #ff4d4f, #ffb74d)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #ffb74d55",marginTop:"auto",transition:"background 0.2s"},children:M.btn})]},Se))}),r.jsx("div",{style:{textAlign:"center",color:"#888",fontSize:15,marginTop:40},children:y("rule")}),r.jsx(XS,{open:k,onClose:()=>{j(!1),window.innerWidth<=768&&n("/HelpLab")},userInfo:T,onSubmit:ae})]}),b==="supply"&&r.jsx("div",{style:{marginTop:24},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15,tableLayout:"fixed"},children:[r.jsxs("colgroup",{children:[r.jsx("col",{style:{width:"28%"}}),r.jsx("col",{style:{width:"14%"}}),r.jsx("col",{style:{width:"22%"}}),r.jsx("col",{style:{width:"12%"}}),r.jsx("col",{style:{width:"12%"}}),r.jsx("col",{style:{width:"12%"}})]}),r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f3f3ff",color:"#6B5BFF"},children:[r.jsx("th",{style:{padding:"8px 4px",textAlign:"left"},children:y("date")}),r.jsx("th",{style:{textAlign:"center"},children:y("avatar")}),r.jsx("th",{style:{textAlign:"left"},children:y("name")}),r.jsx("th",{style:{textAlign:"center"},children:y("gender")}),r.jsx("th",{style:{textAlign:"center"},children:y("age")}),r.jsx("th",{style:{textAlign:"center"},children:y("country")})]})}),r.jsx("tbody",{children:z.map((M,Se)=>{var Pe,$e,G,Fe;return r.jsxs(mn.Fragment,{children:[r.jsxs("tr",{style:{cursor:"pointer",borderBottom:"1px solid #eee"},onClick:()=>_(P===Se?null:Se),children:[r.jsx("td",{children:((Fe=(G=($e=(Pe=M.createdAt)==null?void 0:Pe.toDate)==null?void 0:$e.call(Pe))==null?void 0:G.toLocaleString)==null?void 0:Fe.call(G))||""}),r.jsx("td",{children:r.jsx("img",{src:M.avatarUrl||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%"}})}),r.jsx("td",{style:{color:"#1976d2",fontWeight:700,textDecoration:"underline",cursor:"pointer"},onClick:()=>{re(M),B(!0)},children:M.nickname}),r.jsx("td",{children:M.gender}),r.jsx("td",{children:M.age}),r.jsx("td",{children:M.country})]}),P===Se&&r.jsx("tr",{children:r.jsxs("td",{colSpan:6,style:{background:"#f8f8ff",padding:18},children:[r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",marginBottom:8},children:""}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.exp||[]).join(""),M.expOther?`${M.expOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.adv||[]).join(""),M.advOther?`${M.advOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.target||[]).join(""),M.targetOther?`${M.targetOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.helpType]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.statement]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.freq,M.freqOther?`${M.freqOther}`:""]}),r.jsx("div",{style:{marginTop:12},children:r.jsx("span",{onClick:()=>window.open(`mailto:${M.email}`),style:{color:"#6B5BFF",textDecoration:"underline",marginLeft:12,cursor:"pointer"},children:M.email})})]})})]},M.id)})})]})}),b==="need"&&r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{textAlign:"center",color:"#555",fontSize:18,marginBottom:36},children:y("introNeed")}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:32,justifyContent:"center"},children:r.jsx("button",{onClick:()=>je(!0),style:{background:"linear-gradient(90deg, #ff4d4f, #ffb74d)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #ffb74d55",marginTop:"auto",transition:"background 0.2s"},children:y("needBtn")})}),r.jsx(JS,{open:ge,onClose:()=>je(!1),userInfo:T,onSubmit:qe,showMsgSent:J})]}),b==="room"&&r.jsx("div",{style:{marginTop:24},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#fff3e0",color:"#ff4d4f"},children:[r.jsx("th",{style:{padding:"8px 4px",textAlign:"left"},children:y("date")}),r.jsx("th",{style:{textAlign:"center"},children:y("avatar")}),r.jsx("th",{style:{textAlign:"left"},children:y("name")}),r.jsx("th",{style:{textAlign:"center"},children:y("gender")}),r.jsx("th",{style:{textAlign:"center"},children:y("age")}),r.jsx("th",{style:{textAlign:"center"},children:y("country")})]})}),r.jsx("tbody",{children:Ce.map((M,Se)=>{var Pe,$e,G,Fe;return r.jsxs(mn.Fragment,{children:[r.jsxs("tr",{style:{cursor:"pointer",borderBottom:"1px solid #eee"},onClick:()=>_(P===Se?null:Se),children:[r.jsx("td",{children:((Fe=(G=($e=(Pe=M.createdAt)==null?void 0:Pe.toDate)==null?void 0:$e.call(Pe))==null?void 0:G.toLocaleString)==null?void 0:Fe.call(G))||""}),r.jsx("td",{children:r.jsx("img",{src:M.avatarUrl||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%"}})}),r.jsx("td",{style:{color:"#ff4d4f",fontWeight:700,textDecoration:"underline",cursor:"pointer"},onClick:()=>{re(M),B(!0)},children:M.nickname}),r.jsx("td",{children:M.gender}),r.jsx("td",{children:M.age}),r.jsx("td",{children:M.country})]}),P===Se&&r.jsx("tr",{children:r.jsxs("td",{colSpan:6,style:{background:"#fff8f0",padding:18},children:[r.jsx("div",{style:{fontWeight:700,color:"#ff4d4f",marginBottom:8},children:""}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.exp||[]).join(""),M.expOther?`${M.expOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.adv||[]).join(""),M.advOther?`${M.advOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:"/"}),(M.target||[]).join(""),M.targetOther?`${M.targetOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.helpType]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.statement]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.freq,M.freqOther?`${M.freqOther}`:""]}),r.jsx("div",{style:{marginTop:12},children:r.jsx("span",{onClick:()=>window.open(`mailto:${M.email}`),style:{color:"#ff4d4f",textDecoration:"underline",marginLeft:12,cursor:"pointer"},children:M.email})})]})})]},M.id)})})]})})]}),A&&I&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:28,minWidth:280,maxWidth:340,width:"90vw",position:"relative",display:"flex",flexDirection:"column",gap:12},children:[r.jsx("button",{type:"button",onClick:()=>B(!1),style:{position:"absolute",top:10,right:12,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsxs("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:[y("msgTo"),I.nickname]}),r.jsx("textarea",{value:Q,onChange:M=>X(M.target.value),rows:3,maxLength:100,placeholder:y("msgPlaceholder"),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"6px 10px",fontSize:15,resize:"none"}}),te&&r.jsx("div",{style:{color:"#ff4d4f",fontWeight:700,textAlign:"center",marginTop:4},children:te}),r.jsx("button",{onClick:()=>xe(I,Q),disabled:!Q.trim()||O,style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:14,padding:"6px 18px",fontWeight:700,fontSize:15,cursor:!Q.trim()||O?"not-allowed":"pointer",alignSelf:"center",opacity:!Q.trim()||O?.6:1},children:O?"...":""}),de&&r.jsx("div",{style:{color:"#6B5BFF",fontWeight:700,textAlign:"center",marginTop:8},children:y("msgSent")})]})})]})]}):r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)",padding:"0 0 48px 0",position:"relative",overflow:"auto"},children:[r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsx("div",{style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>v("provide")})}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>n("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":t==="zh-TW"||t==="zh-CN"?" Restarter ":t==="en"?"Learn about Restarter platform":t==="ja"?"Restarter ":t==="ko"?"Restarter   ":t==="th"?" Restarter":t==="vi"?"Tm hiu v nn tng Restarter":t==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:t==="zh-TW"?" Restarter":t==="zh-CN"?" Restarter":t==="en"?" RestarterWho We Are":t==="ja"?" Restarter":t==="ko"?" Restarter ":t==="th"?" Restarter":t==="vi"?" RestarterChng ti l ai":t==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>n("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":t==="zh-TW"?"":t==="zh-CN"?"":t==="en"?"Provide feedback and suggestions":t==="ja"?"":t==="ko"?"  ":t==="th"?"":t==="vi"?"Cung cp phn hi v  xut":t==="ms"?"Berikan maklum balas dan cadangan":"Praebe consilia et suggestiones",role:"button",children:t==="zh-TW"?" ":t==="zh-CN"?" ":t==="en"?" FeedbackWe Want to Hear You":t==="ja"?" ":t==="ko"?"    ":t==="th"?" ":t==="vi"?" Hp gp Chng ti mun lng nghe bn":t==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),o?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:o.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:o.displayName||o.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(S)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:PV[t]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>n("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:t==="zh-TW"?"/":t==="zh-CN"?"/":t==="en"?"Register / Login":t==="ja"?"/":t==="ko"?"/":t==="th"?"/":t==="vi"?"ng k/ng nhp":t==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{ref:p,style:{position:"relative",display:"inline-block"},className:"language-selector",children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>u(M=>!M),children:[t==="zh-TW"?"":t==="zh-CN"?"":t==="en"?"English":t==="ja"?"":t==="ko"?"":t==="th"?"":t==="vi"?"Ting Vit":t==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),c&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(M=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:M===t?"#6B5BFF":"#232946",fontWeight:M===t?700:500,background:M===t?"#f3f0ff":"#fff"},onClick:()=>{e(M),u(!1)},children:M==="zh-TW"?"":M==="zh-CN"?"":M==="en"?"English":M==="ja"?"":M==="ko"?"":M==="th"?"":M==="vi"?"Ting Vit":M==="ms"?"Bahasa Melayu":"Latin"},M))})]}),r.jsxs("div",{ref:h,style:{position:"relative",display:"inline-block"},className:"legal-menu",children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:44,height:"44px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>l(M=>!M),onMouseOver:M=>{M.currentTarget.style.background="#f3f0ff"},onMouseOut:M=>{M.currentTarget.style.background="#fff"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),a&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:180,maxWidth:220,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:"#6B5BFF"},children:t==="zh-TW"||t==="zh-CN"?"":t==="en"?"Legal Documents":t==="ja"?"":t==="ko"?" ":t==="th"?"":t==="vi"?"Ti liu php l":t==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:{"zh-TW":"","zh-CN":"",en:"Privacy Policy",ja:"",ko:"",th:"",vi:"Chnh sch bo mt",ms:"Dasar Privasi",la:"Consilium de Privata"},path:"/privacy-policy"},{key:"terms",title:{"zh-TW":"/","zh-CN":"/",en:"Terms/Statement",ja:"/",ko:"/",th:"/",vi:"iu khon/Tuyn b",ms:"Terma/Penyata",la:"Termini/Declaratio"},path:"/terms"},{key:"data",title:{"zh-TW":"","zh-CN":"",en:"Data Deletion",ja:"",ko:"  ",th:"",vi:"Gii thch xa d liu",ms:"Penerangan Pemadaman Data",la:"Explicatio Deletionis Datae"},path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(M=>r.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"11px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{n(M.path),l(!1)},onMouseOver:Se=>{Se.currentTarget.style.background="#f3f0ff",Se.currentTarget.style.color="#6B5BFF"},onMouseOut:Se=>{Se.currentTarget.style.background="#fff",Se.currentTarget.style.color="#232946"},children:M.title[t]||M.title["zh-TW"]},M.key))]})]})]}),r.jsx("div",{style:{position:"fixed",top:16,right:16,zIndex:10001},children:r.jsxs("button",{style:{background:g?"#ff4d4f":"#52c41a",color:"#fff",border:"none",borderRadius:6,padding:"6px 12px",fontSize:12,fontWeight:700,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[" ",g?"ON":"OFF"]})}),r.jsxs("div",{style:{padding:"120px 20px 20px 20px",maxWidth:1200,margin:"0 auto"},children:[ee&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",zIndex:1e4},onClick:()=>he(!1)}),r.jsxs("div",{style:{position:"fixed",top:70,right:36,background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:24,minWidth:320,zIndex:10001},children:[r.jsx("div",{style:{fontWeight:900,fontSize:20,color:"#6B5BFF",marginBottom:12},children:((W=(L=jt[t])==null?void 0:L.messages)==null?void 0:W.inboxTitle)||""}),ve.length===0&&r.jsx("div",{style:{color:"#888",fontSize:15},children:((at=(Qe=jt[t])==null?void 0:Qe.messages)==null?void 0:at.noMessages)||""}),ve.map(M=>{var Se,Pe,$e,G,Fe,De,q,le,rt,$;return r.jsxs("div",{style:{background:"#f7f7ff",borderRadius:12,padding:12,marginBottom:12,boxShadow:"0 2px 8px #6B5BFF11",cursor:"pointer"},onClick:()=>{Y(pe=>We(ke({},pe),{[M.id]:!pe[M.id]}))},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[r.jsxs("div",{style:{fontWeight:700,color:"#1976d2"},children:[M.fromNickname," ",((Pe=(Se=jt[t])==null?void 0:Se.messages)==null?void 0:Pe.messageFrom)||""]}),r.jsx("span",{style:{fontSize:12,color:"#888"},children:Le[M.id]?"":""})]}),Le[M.id]&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:8,padding:12,marginBottom:8,border:"1px solid #e0e7ff"},children:[r.jsx("div",{style:{color:"#232946",marginBottom:8,lineHeight:"1.5"},children:M.content}),r.jsx("div",{style:{color:"#888",fontSize:13,marginBottom:8},children:(De=(G=($e=M.timestamp)==null?void 0:$e.toDate)==null?void 0:(Fe=G.call($e)).toLocaleString)==null?void 0:De.call(Fe)}),r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx("span",{onClick:()=>window.open(`mailto:${M.fromEmail}`),style:{color:"#6B5BFF",fontWeight:700,textDecoration:"underline",fontSize:13,cursor:"pointer"},children:((le=(q=jt[t])==null?void 0:q.messages)==null?void 0:le.contactUser)||""}),r.jsx("button",{onClick:pe=>{pe.stopPropagation(),we(M.id)},style:{background:"#eee",color:"#6B5BFF",border:"none",borderRadius:6,padding:"4px 12px",fontWeight:700,fontSize:13,cursor:"pointer"},children:(($=(rt=jt[t])==null?void 0:rt.messages)==null?void 0:$.markRead)||""})]})]}),!Le[M.id]&&r.jsx("div",{style:{color:"#666",fontSize:14,fontStyle:"italic"},children:M.content.length>30?`${M.content.substring(0,30)}...`:M.content})]},M.id)})]})]}),R&&r.jsx("div",{style:{position:"fixed",top:40,left:"50%",transform:"translateX(-50%)",background:"#fff",color:"#6B5BFF",fontWeight:700,fontSize:18,borderRadius:16,boxShadow:"0 4px 24px #6B5BFF22",padding:"18px 36px",zIndex:99999,textAlign:"center",letterSpacing:1},children:R}),r.jsx("div",{style:{width:"fit-content",margin:"20px auto 20px auto",padding:"12px 20px",background:"rgba(255,255,255,0.95)",borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[r.jsxs("h1",{style:{fontWeight:900,fontSize:18,color:"#6B5BFF",margin:0,lineHeight:1,textShadow:"0 2px 8px #6B5BFF88",textAlign:"center"},children:[r.jsx("span",{role:"img","aria-label":"helplab",children:""})," ",y("title")]}),r.jsxs("button",{onClick:()=>he(M=>!M),style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:8},children:[r.jsx("span",{style:{fontSize:24,color:"#6B5BFF"},children:""}),ve.length>0&&r.jsx("span",{style:{position:"absolute",top:0,right:0,minWidth:18,height:18,background:"#ff4d4f",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",color:"#fff",fontWeight:900,fontSize:13,padding:"0 5px",boxShadow:"0 2px 8px #ff4d4f88",zIndex:1},children:ve.length})]})]})}),r.jsxs("div",{style:{maxWidth:600,margin:"0 auto",padding:"20px 16px 0 16px",background:"#fff",borderRadius:32,boxShadow:"0 8px 40px #b6b6f633, 0 1.5px 8px #6B5BFF22",border:"1.5px solid #e0e7ff"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,marginBottom:24},children:[r.jsx("button",{onClick:()=>v("provide"),style:{fontWeight:900,fontSize:18,color:b==="provide"?"#6B5BFF":"#888",background:"#fff",border:b==="provide"?"3px solid #6B5BFF":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #b6b6f633",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("provide")}),r.jsx("button",{onClick:()=>v("supply"),style:{fontWeight:900,fontSize:18,color:b==="supply"?"#6B5BFF":"#888",background:"#fff",border:b==="supply"?"3px solid #6B5BFF":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #b6b6f633",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("supply")}),r.jsx("button",{onClick:()=>v("need"),style:{fontWeight:900,fontSize:18,color:b==="need"?"#ff4d4f":"#888",background:"#fff",border:b==="need"?"3px solid #ff4d4f":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #ffb74d55",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("need")}),r.jsx("button",{onClick:()=>v("room"),style:{fontWeight:900,fontSize:18,color:b==="room"?"#ff4d4f":"#888",background:"#fff",border:b==="room"?"3px solid #ff4d4f":"2px solid #e0e7ff",borderRadius:16,boxShadow:"0 2px 8px #ffb74d55",padding:"8px 24px",cursor:"pointer",marginBottom:2},children:y("room")})]}),b==="provide"&&r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{textAlign:"center",color:"#555",fontSize:18,marginBottom:36},children:y("intro")}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:32,justifyContent:"center"},children:i.map((M,Se)=>r.jsxs("div",{style:{background:M.color,borderRadius:20,boxShadow:"0 4px 24px #0001",padding:"32px 28px",minWidth:260,maxWidth:320,flex:"1 1 260px",display:"flex",flexDirection:"column",alignItems:"center",marginBottom:12},children:[r.jsx("div",{style:{fontSize:48,marginBottom:12},children:M.emoji}),r.jsx("div",{style:{fontWeight:800,fontSize:22,marginBottom:8,color:"#333",letterSpacing:1},children:M.title}),r.jsx("div",{style:{color:"#666",fontSize:15,marginBottom:18,textAlign:"center",minHeight:44},children:M.desc}),Se===0?r.jsx("button",{onClick:()=>{v("provide"),j(!0)},style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #a777e355",marginTop:"auto",transition:"background 0.2s"},children:M.btn}):Se===1?r.jsx("button",{onClick:()=>{v("need"),je(!0)},style:{background:"linear-gradient(90deg, #ff4d4f, #ffb74d)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #ffb74d55",marginTop:"auto",transition:"background 0.2s"},children:M.btn}):Se===2?r.jsx("button",{onClick:()=>v("supply"),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #a777e355",marginTop:"auto",transition:"background 0.2s"},children:M.btn}):r.jsx("button",{onClick:()=>v("room"),style:{background:"linear-gradient(90deg, #ff4d4f, #ffb74d)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #ffb74d55",marginTop:"auto",transition:"background 0.2s"},children:M.btn})]},Se))}),r.jsx("div",{style:{textAlign:"center",color:"#888",fontSize:15,marginTop:40},children:y("rule")}),r.jsx(XS,{open:k,onClose:()=>{j(!1),window.innerWidth<=768&&n("/HelpLab")},userInfo:T,onSubmit:ae})]}),b==="supply"&&r.jsx("div",{style:{marginTop:24},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15,tableLayout:"fixed"},children:[r.jsxs("colgroup",{children:[r.jsx("col",{style:{width:"28%"}}),r.jsx("col",{style:{width:"14%"}}),r.jsx("col",{style:{width:"22%"}}),r.jsx("col",{style:{width:"12%"}}),r.jsx("col",{style:{width:"12%"}}),r.jsx("col",{style:{width:"12%"}})]}),r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f3f3ff",color:"#6B5BFF"},children:[r.jsx("th",{style:{padding:"8px 4px",textAlign:"left"},children:y("date")}),r.jsx("th",{style:{textAlign:"center"},children:y("avatar")}),r.jsx("th",{style:{textAlign:"left"},children:y("name")}),r.jsx("th",{style:{textAlign:"center"},children:y("gender")}),r.jsx("th",{style:{textAlign:"center"},children:y("age")}),r.jsx("th",{style:{textAlign:"center"},children:y("country")})]})}),r.jsx("tbody",{children:z.map((M,Se)=>{var Pe,$e,G,Fe;return r.jsxs(mn.Fragment,{children:[r.jsxs("tr",{style:{cursor:"pointer",borderBottom:"1px solid #eee"},onClick:()=>_(P===Se?null:Se),children:[r.jsx("td",{children:((Fe=(G=($e=(Pe=M.createdAt)==null?void 0:Pe.toDate)==null?void 0:$e.call(Pe))==null?void 0:G.toLocaleString)==null?void 0:Fe.call(G))||""}),r.jsx("td",{children:r.jsx("img",{src:M.avatarUrl||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%"}})}),r.jsx("td",{style:{color:"#1976d2",fontWeight:700,textDecoration:"underline",cursor:"pointer"},onClick:()=>{re(M),B(!0)},children:M.nickname}),r.jsx("td",{children:M.gender}),r.jsx("td",{children:M.age}),r.jsx("td",{children:M.country})]}),P===Se&&r.jsx("tr",{children:r.jsxs("td",{colSpan:6,style:{background:"#f8f8ff",padding:18},children:[r.jsx("div",{style:{fontWeight:700,color:"#6B5BFF",marginBottom:8},children:""}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.exp||[]).join(""),M.expOther?`${M.expOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.adv||[]).join(""),M.advOther?`${M.advOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.target||[]).join(""),M.targetOther?`${M.targetOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.helpType]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.statement]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.freq,M.freqOther?`${M.freqOther}`:""]}),r.jsx("div",{style:{marginTop:12},children:r.jsx("span",{onClick:()=>window.open(`mailto:${M.email}`),style:{color:"#6B5BFF",textDecoration:"underline",marginLeft:12,cursor:"pointer"},children:M.email})})]})})]},M.id)})})]})}),b==="need"&&r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{textAlign:"center",color:"#555",fontSize:18,marginBottom:36},children:y("introNeed")}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:32,justifyContent:"center"},children:r.jsx("button",{onClick:()=>je(!0),style:{background:"linear-gradient(90deg, #ff4d4f, #ffb74d)",color:"#fff",border:"none",borderRadius:24,padding:"10px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #ffb74d55",marginTop:"auto",transition:"background 0.2s"},children:y("needBtn")})}),r.jsx(JS,{open:ge,onClose:()=>je(!1),userInfo:T,onSubmit:qe,showMsgSent:J})]}),b==="room"&&r.jsx("div",{style:{marginTop:24},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#fff3e0",color:"#ff4d4f"},children:[r.jsx("th",{style:{padding:"8px 4px",textAlign:"left"},children:y("date")}),r.jsx("th",{style:{textAlign:"center"},children:y("avatar")}),r.jsx("th",{style:{textAlign:"left"},children:y("name")}),r.jsx("th",{style:{textAlign:"center"},children:y("gender")}),r.jsx("th",{style:{textAlign:"center"},children:y("age")}),r.jsx("th",{style:{textAlign:"center"},children:y("country")})]})}),r.jsx("tbody",{children:Ce.map((M,Se)=>{var Pe,$e,G,Fe;return r.jsxs(mn.Fragment,{children:[r.jsxs("tr",{style:{cursor:"pointer",borderBottom:"1px solid #eee"},onClick:()=>_(P===Se?null:Se),children:[r.jsx("td",{children:((Fe=(G=($e=(Pe=M.createdAt)==null?void 0:Pe.toDate)==null?void 0:$e.call(Pe))==null?void 0:G.toLocaleString)==null?void 0:Fe.call(G))||""}),r.jsx("td",{children:r.jsx("img",{src:M.avatarUrl||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%"}})}),r.jsx("td",{style:{color:"#ff4d4f",fontWeight:700,textDecoration:"underline",cursor:"pointer"},onClick:()=>{re(M),B(!0)},children:M.nickname}),r.jsx("td",{children:M.gender}),r.jsx("td",{children:M.age}),r.jsx("td",{children:M.country})]}),P===Se&&r.jsx("tr",{children:r.jsxs("td",{colSpan:6,style:{background:"#fff8f0",padding:18},children:[r.jsx("div",{style:{fontWeight:700,color:"#ff4d4f",marginBottom:8},children:""}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.exp||[]).join(""),M.expOther?`${M.expOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),(M.adv||[]).join(""),M.advOther?`${M.advOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:"/"}),(M.target||[]).join(""),M.targetOther?`${M.targetOther}`:""]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.helpType]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.statement]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("b",{children:""}),M.freq,M.freqOther?`${M.freqOther}`:""]}),r.jsx("div",{style:{marginTop:12},children:r.jsx("span",{onClick:()=>window.open(`mailto:${M.email}`),style:{color:"#ff4d4f",textDecoration:"underline",marginLeft:12,cursor:"pointer"},children:M.email})})]})})]},M.id)})})]})})]}),A&&I&&r.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(40,40,80,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF33",padding:28,minWidth:280,maxWidth:340,width:"90vw",position:"relative",display:"flex",flexDirection:"column",gap:12},children:[r.jsx("button",{type:"button",onClick:()=>B(!1),style:{position:"absolute",top:10,right:12,background:"none",border:"none",fontSize:22,color:"#888",cursor:"pointer",fontWeight:700},children:""}),r.jsxs("div",{style:{fontWeight:800,fontSize:18,color:"#6B5BFF",textAlign:"center",marginBottom:2},children:[y("msgTo"),I.nickname]}),r.jsx("textarea",{value:Q,onChange:M=>X(M.target.value),rows:3,maxLength:100,placeholder:y("msgPlaceholder"),style:{border:"1px solid #e0e7ff",borderRadius:8,padding:"6px 10px",fontSize:15,resize:"none"}}),te&&r.jsx("div",{style:{color:"#ff4d4f",fontWeight:700,textAlign:"center",marginTop:4},children:te}),r.jsx("button",{onClick:()=>xe(I,Q),disabled:!Q.trim()||O,style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"#fff",border:"none",borderRadius:14,padding:"6px 18px",fontWeight:700,fontSize:15,cursor:!Q.trim()||O?"not-allowed":"pointer",alignSelf:"center",opacity:!Q.trim()||O?.6:1},children:O?"...":""}),de&&r.jsx("div",{style:{color:"#6B5BFF",fontWeight:700,textAlign:"center",marginTop:8},children:y("msgSent")})]})})]})]})})}const NV={"zh-TW":"","zh-CN":"",en:"Logout",ja:"",ko:"",th:"",vi:"ng xut",ms:"Log keluar",la:"Exire"},Dd=(t,e)=>{try{localStorage.setItem(`emotionRelease_${t}`,JSON.stringify(e))}catch(n){console.log("")}},Md=t=>{try{const e=localStorage.getItem(`emotionRelease_${t}`);return e?JSON.parse(e):null}catch(e){return console.log(""),null}};function DV(){const t=tt(),{lang:e,setLang:n}=dt(),[i,o]=m.useState(null),[s,a]=m.useState(!1),[l,c]=m.useState(null),[u,h]=m.useState(!1),[p,g]=m.useState(!1),y=m.useRef(null),k=m.useRef(null),j=Ze(ir);m.useEffect(()=>{const v=ri(j,z=>{c(z)});return()=>v()},[]),m.useEffect(()=>{const v=z=>{y.current&&!y.current.contains(z.target)&&h(!1),k.current&&!k.current.contains(z.target)&&g(!1)};return(u||p)&&document.addEventListener("click",v),()=>{document.removeEventListener("click",v)}},[u,p]),m.useEffect(()=>{const v=new Image;v.onload=()=>a(!0),v.onerror=()=>a(!0);const z=setTimeout(()=>{a(!0)},3e3);return v.src="/stress.png",()=>clearTimeout(z)},[]);const T=v=>{var D;const z={"zh-TW":{title:"",subtitle:"",farm:"",farmDesc:"",whackAMole:"",whackAMoleDesc:"",fruitPicking:"",fruitPickingDesc:"",targetShooting:"",targetShootingDesc:"",racing:"",racingDesc:"",rhythm:"",rhythmDesc:"",rules:"",back:"",start:"",close:""},"zh-CN":{title:"",subtitle:"",farm:"",farmDesc:"",whackAMole:"",whackAMoleDesc:"",fruitPicking:"",fruitPickingDesc:"",targetShooting:"",targetShootingDesc:"",racing:"",racingDesc:"",rhythm:"",rhythmDesc:"",rules:"",back:"",start:"",close:""},en:{title:"Emotion Release Zone",subtitle:"Simple games, not complicated, easily release your emotions.",farm:"Life Farm",farmDesc:"Click to plant, feel the joy of growth",whackAMole:"Whack-a-Mole",whackAMoleDesc:"Quick clicks to release stress",fruitPicking:"Fruit Picking",fruitPickingDesc:"Click to collect, enjoy the harvest",targetShooting:"Target Shooting",targetShootingDesc:"Aim and shoot, improve focus",racing:"Speed Racing",racingDesc:"Drive racing cars, experience speed and excitement",rhythm:"Music Rhythm",rhythmDesc:"Follow the rhythm, release musical energy",rules:"Game Rules",back:"Back",start:"Start Game",close:"Close"},ja:{title:"",subtitle:"",farm:"",farmDesc:"",whackAMole:"",whackAMoleDesc:"",fruitPicking:"",fruitPickingDesc:"",targetShooting:"",targetShootingDesc:"",racing:"",racingDesc:"",rhythm:"",rhythmDesc:"",rules:"",back:"",start:"",close:""},ko:{title:"  ",subtitle:" ,  ,   .",farm:" ",farmDesc:" ,   ",whackAMole:" ",whackAMoleDesc:"   ",fruitPicking:" ",fruitPickingDesc:" ,   ",targetShooting:" ",targetShootingDesc:" ,  ",racing:" ",racingDesc:" ,   ",rhythm:" ",rhythmDesc:"    ",rules:" ",back:"",start:" ",close:""},vi:{title:"Khu Vc Gii Ta Cm Xc",subtitle:"Tr chi n gin, khng phc tp, d dng gii ta cm xc ca bn.",farm:"Nng Tri Cuc Sng",farmDesc:"Nhp  trng, cm nhn nim vui ca s pht trin",whackAMole:"p Chut",whackAMoleDesc:"Nhp nhanh  gii ta cng thng",fruitPicking:"Hi Tri Cy",fruitPickingDesc:"Nhp  thu hoch, tn hng ma mng",targetShooting:"Bn Bia",targetShootingDesc:"Nhm v bn, ci thin s tp trung",racing:"ua Xe Tc ",racingDesc:"Li xe ua, tri nghim tc  v s phn khch",rhythm:"Nhp iu m Nhc",rhythmDesc:"Theo nhp iu, gii phng nng lng m nhc",rules:"Lut Chi",back:"Quay Li",start:"Bt u Tr Chi",close:"ng"},th:{title:"",subtitle:"  ",farm:"",farmDesc:" ",whackAMole:"",whackAMoleDesc:"",fruitPicking:"",fruitPickingDesc:" ",targetShooting:"",targetShootingDesc:" ",racing:"",racingDesc:" ",rhythm:"",rhythmDesc:" ",rules:"",back:"",start:"",close:""},la:{title:"Zona Emotio Liberationis",subtitle:"Ludi simplices, non complicati, facile libera emotiones tuas.",farm:"Villa Vitae",farmDesc:"Clicca ad plantandum, senti gaudium incrementi",whackAMole:"Talpa Percutere",whackAMoleDesc:"Clicca celeriter ad liberationem tensionis",fruitPicking:"Fructus Colligere",fruitPickingDesc:"Clicca ad colligendum, fruere messe",targetShooting:"Scopum Iaculare",targetShootingDesc:"Intende et iacula, meliora attentionem",racing:"Cursus Velocitatis",racingDesc:"Guberna currus cursus, experire velocitatem et excitationem",rhythm:"Rhythmus Musicae",rhythmDesc:"Sequere rhythmum, libera energiam musicam",rules:"Regulae Ludi",back:"Regredi",start:"Ludum Incipere",close:"Claudere"},ms:{title:"Zon Pelepasan Emosi",subtitle:"Permainan mudah, tidak rumit, mudah melepaskan emosi anda.",farm:"Ladang Kehidupan",farmDesc:"Klik untuk menanam, rasakan kegembiraan pertumbuhan",whackAMole:"Pukul Tikus",whackAMoleDesc:"Klik pantas untuk melepaskan tekanan",fruitPicking:"Kutip Buah",fruitPickingDesc:"Klik untuk mengutip, nikmati hasil tuaian",targetShooting:"Tembak Sasaran",targetShootingDesc:"Arah dan tembak, tingkatkan fokus",racing:"Lumba Kereta Laju",racingDesc:"Pandu kereta lumba, alami kelajuan dan keseronokan",rhythm:"Irama Muzik",rhythmDesc:"Ikut irama, lepaskan tenaga muzik",rules:"Peraturan Permainan",back:"Kembali",start:"Mulakan Permainan",close:"Tutup"}};return((D=z[e])==null?void 0:D[v])||z["zh-TW"][v]||v},x=[{id:"farm",title:T("farm"),description:T("farmDesc"),icon:"",color:"#4CAF50"},{id:"whackAMole",title:T("whackAMole"),description:T("whackAMoleDesc"),icon:"",color:"#FF5722"},{id:"fruitPicking",title:T("fruitPicking"),description:T("fruitPickingDesc"),icon:"",color:"#FF9800"},{id:"targetShooting",title:T("targetShooting"),description:T("targetShootingDesc"),icon:"",color:"#9C27B0"},{id:"racing",title:T("racing"),description:T("racingDesc"),icon:"",color:"#E91E63"},{id:"rhythm",title:T("rhythm"),description:T("rhythmDesc"),icon:"",color:"#00BCD4"}],b=()=>{switch(i){case"farm":return r.jsx(MV,{onClose:()=>o(null)});case"whackAMole":return r.jsx(WV,{onClose:()=>o(null)});case"fruitPicking":return r.jsx(LV,{onClose:()=>o(null)});case"targetShooting":return r.jsx(OV,{onClose:()=>o(null)});case"racing":return r.jsx(VV,{onClose:()=>o(null)});case"rhythm":return r.jsx(UV,{onClose:()=>o(null)});default:return null}};return r.jsxs("div",{style:{minHeight:"100vh",background:s?"linear-gradient(135deg, rgba(102, 126, 234, 0.8) 0%, rgba(118, 75, 162, 0.8) 100%), url('/stress.png')":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"clamp(10px, 2vw, 20px)",fontFamily:"Arial, sans-serif",boxSizing:"border-box",position:"relative"},children:[window.innerWidth<=768&&r.jsx(Ar,{}),window.innerWidth>768&&r.jsxs("div",{style:{position:"fixed",top:8,right:36,zIndex:9999,display:"flex",flexDirection:"row",alignItems:"center",gap:18,pointerEvents:"auto",width:"100%",justifyContent:"flex-end"},children:[r.jsx("div",{style:{position:"fixed",top:16,left:42,display:"flex",flexDirection:"row",alignItems:"center",gap:12,zIndex:1e4,paddingTop:0,marginTop:0},children:r.jsx("img",{src:"/ctx-logo.png",style:{marginBottom:0,width:182,height:182,cursor:"pointer",marginTop:"-40px"},onClick:()=>t("/")})}),r.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:18,marginRight:24},children:[r.jsx("button",{className:"topbar-btn",onClick:()=>t("/about"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:80},"aria-label":e==="zh-TW"||e==="zh-CN"?" Restarter ":e==="en"?"Learn about Restarter platform":e==="ja"?"Restarter ":e==="ko"?"Restarter   ":e==="th"?" Restarter":e==="vi"?"Tm hiu v nn tng Restarter":e==="ms"?"Ketahui tentang platform Restarter":"Cognosce de suggestum Restarter",role:"button",children:e==="zh-TW"?" Restarter":e==="zh-CN"?" Restarter":e==="en"?" RestarterWho We Are":e==="ja"?" Restarter":e==="ko"?" Restarter ":e==="th"?" Restarter":e==="vi"?" RestarterChng ti l ai":e==="ms"?" RestarterSiapa Kami":" RestarterQuis sumus"}),r.jsx("button",{className:"topbar-btn",onClick:()=>t("/feedback"),style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:6,fontWeight:700,fontSize:12,padding:"4px 8px",minWidth:100},"aria-label":e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"Provide feedback and suggestions":e==="ja"?"":e==="ko"?"  ":e==="th"?"":e==="vi"?"Cung cp phn hi v  xut":e==="ms"?"Berikan maklum balas dan cadangan":"Praebe consilia et suggestiones",role:"button",children:e==="zh-TW"?" ":e==="zh-CN"?" ":e==="en"?" FeedbackWe Want to Hear You":e==="ja"?" ":e==="ko"?"    ":e==="th"?" ":e==="vi"?" Hp gp Chng ti mun lng nghe bn":e==="ms"?" Kotak Maklum BalasKami ingin mendengar anda":" Arca ConsiliiTe audire volumus"}),l?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("img",{src:l.photoURL||"/ctx-logo.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"2px solid #90caf9"}}),r.jsx("span",{style:{color:"#1976d2",fontWeight:700,fontSize:16},children:l.displayName||l.email||""}),r.jsx("button",{className:"topbar-btn",onClick:()=>C(this,null,function*(){yield Dn(j)}),style:{background:"#fff",color:"#ff6347",border:"2px solid #ffb4a2",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 14px",marginLeft:6},children:NV[e]})]})}):r.jsx("button",{className:"topbar-btn",onClick:()=>t("/register"),style:{background:"#fff",color:"#1976d2",border:"2px solid #90caf9",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90},children:e==="zh-TW"?"/":e==="zh-CN"?"/":e==="en"?"Register / Login":e==="ja"?"/":e==="ko"?"/":e==="th"?"/":e==="vi"?"ng k/ng nhp":e==="ms"?"Daftar / Log Masuk":"Registrare / Login"})]}),r.jsxs("div",{ref:k,style:{position:"relative",display:"inline-block"},className:"language-selector",children:[r.jsxs("button",{className:"topbar-btn",style:{background:"#6B5BFF",color:"#fff",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:90,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>g(v=>!v),children:[e==="zh-TW"?"":e==="zh-CN"?"":e==="en"?"English":e==="ja"?"":e==="ko"?"":e==="th"?"":e==="vi"?"Ting Vit":e==="ms"?"Bahasa Melayu":"Latin",r.jsx("span",{style:{marginLeft:6},children:""})]}),p&&r.jsx("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:120},children:["zh-TW","zh-CN","en","ja","ko","th","vi","ms","la"].map(v=>r.jsx("div",{style:{padding:"10px 18px",cursor:"pointer",color:v===e?"#6B5BFF":"#232946",fontWeight:v===e?700:500,background:v===e?"#f3f0ff":"#fff"},onClick:()=>{n(v),g(!1)},children:v==="zh-TW"?"":v==="zh-CN"?"":v==="en"?"English":v==="ja"?"":v==="ko"?"":v==="th"?"":v==="vi"?"Ting Vit":v==="ms"?"Bahasa Melayu":"Latin"},v))})]}),r.jsxs("div",{ref:y,style:{position:"relative",display:"inline-block"},className:"legal-menu",children:[r.jsx("button",{className:"topbar-btn",style:{background:"#fff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:8,fontWeight:700,fontSize:16,padding:"8px 10px",minWidth:44,height:"44px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>h(v=>!v),onMouseOver:v=>{v.currentTarget.style.background="#f3f0ff"},onMouseOut:v=>{v.currentTarget.style.background="#fff"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}}),r.jsx("div",{style:{width:"16px",height:"2px",background:"currentColor",borderRadius:"1px"}})]})}),u&&r.jsxs("div",{style:{position:"absolute",right:0,top:"110%",background:"#fff",border:"1.5px solid #6B5BFF",borderRadius:8,boxShadow:"0 4px 16px #0002",zIndex:9999,minWidth:180,maxWidth:220,padding:"8px 0"},children:[r.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #eee",marginBottom:"4px"},children:r.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:"#6B5BFF"},children:e==="zh-TW"||e==="zh-CN"?"":e==="en"?"Legal Documents":e==="ja"?"":e==="ko"?" ":e==="th"?"":e==="vi"?"Ti liu php l":e==="ms"?"Dokumen Undang-undang":"Documenta Iuridica"})}),[{key:"privacy",title:{"zh-TW":"","zh-CN":"",en:"Privacy Policy",ja:"",ko:"",th:"",vi:"Chnh sch bo mt",ms:"Dasar Privasi",la:"Consilium de Privata"},path:"/privacy-policy"},{key:"terms",title:{"zh-TW":"/","zh-CN":"/",en:"Terms/Statement",ja:"/",ko:"/",th:"/",vi:"iu khon/Tuyn b",ms:"Terma/Penyata",la:"Termini/Declaratio"},path:"/terms"},{key:"data",title:{"zh-TW":"","zh-CN":"",en:"Data Deletion",ja:"",ko:"  ",th:"",vi:"Gii thch xa d liu",ms:"Penerangan Pemadaman Data",la:"Explicatio Deletionis Datae"},path:"/data-deletion"},{key:"ai",title:{"zh-TW":"AI","zh-CN":"AI",en:"AI Usage Statement",ja:"AI",ko:"AI  ",th:" AI",vi:"Tuyn b s dng AI",ms:"Penyata Penggunaan AI",la:"Declaratio Usus AI"},path:"/ai-statement"},{key:"mental",title:{"zh-TW":"","zh-CN":"",en:"Mental Health Disclaimer",ja:"",ko:" ",th:"",vi:"Tuyn b min tr sc khe tm thn",ms:"Penafian Kesihatan Mental",la:"Renuntiatio Salutis Mentalis"},path:"/mental-health-disclaimer"},{key:"cookie",title:{"zh-TW":"Cookie","zh-CN":"Cookie",en:"Cookie Policy",ja:"Cookie",ko:" ",th:"",vi:"Chnh sch Cookie",ms:"Dasar Cookie",la:"Politica Cookie"},path:"/cookie-policy"},{key:"children",title:{"zh-TW":"","zh-CN":"",en:"Children's Privacy",ja:"",ko:"  ",th:"",vi:"Bo v quyn ring t tr em",ms:"Privasi Kanak-kanak",la:"Privata Puerorum"},path:"/children-privacy"},{key:"international",title:{"zh-TW":"","zh-CN":"",en:"International Users",ja:"",ko:"  ",th:"",vi:"Tuyn b ngi dng quc t",ms:"Penyata Pengguna Antarabangsa",la:"Declaratio Usuarii Internationalis"},path:"/international-users"},{key:"security",title:{"zh-TW":"","zh-CN":"",en:"Security Statement",ja:"",ko:" ",th:"",vi:"Tuyn b bo mt",ms:"Penyata Keselamatan",la:"Declaratio Securitatis"},path:"/security-statement"},{key:"update",title:{"zh-TW":"","zh-CN":"",en:"Update Notification",ja:"",ko:"  ",th:"",vi:"C ch thng bo cp nht",ms:"Mekanisme Pemberitahuan Kemas Kini",la:"Mechanismus Notificationis Renovationis"},path:"/update-notification"}].map(v=>r.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",color:"#232946",fontWeight:500,background:"#fff",fontSize:"11px",borderBottom:"1px solid #f0f0f0",transition:"all 0.2s ease"},onClick:()=>{t(v.path),h(!1)},onMouseOver:z=>{z.currentTarget.style.background="#f3f0ff",z.currentTarget.style.color="#6B5BFF"},onMouseOut:z=>{z.currentTarget.style.background="#fff",z.currentTarget.style.color="#232946"},children:v.title[e]||v.title["zh-TW"]},v.key))]})]})]}),!s&&r.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.9)",padding:"20px",borderRadius:"10px",zIndex:2e3,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"18px",marginBottom:"10px"},children:"..."}),r.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #667eea",borderRadius:"50%",margin:"0 auto",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:`
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `})]}),i?r.jsx("div",{style:{position:"relative",height:"100vh"},children:b()}):r.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"clamp(20px, 4vw, 40px)",marginTop:window.innerWidth<=768?"clamp(80px, 12vw, 100px)":"clamp(60px, 8vw, 80px)"},children:[r.jsx("h1",{style:{color:"#fff",fontSize:"clamp(1.5rem, 4vw, 2.5rem)",fontWeight:"bold",marginBottom:"10px",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:T("title")}),r.jsx("p",{style:{color:"#fff",fontSize:"clamp(0.8rem, 2vw, 1rem)",opacity:.9,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:T("subtitle")})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"clamp(15px, 3vw, 30px)",padding:"clamp(10px, 2vw, 20px)"},children:x.map(v=>r.jsxs("div",{onClick:()=>o(v.id),style:{background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 8px 32px rgba(0,0,0,0.1)",border:`3px solid ${v.color}`,position:"relative",overflow:"hidden"},onMouseEnter:z=>{z.currentTarget.style.transform="translateY(-5px)",z.currentTarget.style.boxShadow="0 12px 40px rgba(0,0,0,0.2)"},onMouseLeave:z=>{z.currentTarget.style.transform="translateY(0)",z.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.1)"},children:[r.jsx("div",{style:{fontSize:"clamp(3rem, 8vw, 4rem)",marginBottom:"20px",filter:"drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"},children:v.icon}),r.jsx("h3",{style:{color:v.color,fontSize:"clamp(1.2rem, 3vw, 1.5rem)",fontWeight:"bold",marginBottom:"15px"},children:v.title}),r.jsx("p",{style:{color:"#666",fontSize:"clamp(0.9rem, 2vw, 1rem)",lineHeight:"1.5"},children:v.description}),r.jsx("button",{style:{background:v.color,color:"#fff",border:"none",borderRadius:"25px",padding:"clamp(8px, 2vw, 12px) clamp(20px, 4vw, 30px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",fontWeight:"bold",marginTop:"20px",cursor:"pointer",transition:"all 0.3s ease"},children:T("start")})]},v.id))})]})]})}function MV({onClose:t}){const{lang:e}=dt(),[n,i]=m.useState([]),[o,s]=m.useState(0),[a,l]=m.useState("carrot"),[c,u]=m.useState(!1),h=j=>{var x;const T={"zh-TW":{title:"",rules:"",hideRules:"",seedSelection:"",score:"",gameRules:"",plantStage:"",harvestStage:"",plantStep1:"1. 6",plantStep2:"2.   ",plantStep3:"3. ",harvestStep1:"1. ",harvestStep2:"2. ",harvestStep3:"3. ",scoring:"",scoring1:" 10-25",scoring2:" 50-125",scoring3:" 3-8",plant:"",harvest:"",growthTime:"",seconds:"",carrot:"",tomato:"",corn:"",potato:"",strawberry:"",watermelon:""},"zh-CN":{title:"",rules:"",hideRules:"",seedSelection:"",score:"",gameRules:"",plantStage:"",harvestStage:"",plantStep1:"1. 6",plantStep2:"2.   ",plantStep3:"3. ",harvestStep1:"1. ",harvestStep2:"2. ",harvestStep3:"3. ",scoring:"",scoring1:" 10-25",scoring2:" 50-125",scoring3:" 3-8",plant:"",harvest:"",growthTime:"",seconds:"",carrot:"",tomato:"",corn:"",potato:"",strawberry:"",watermelon:""},en:{title:"Life Farm",rules:"Game Rules",hideRules:"Hide Rules",seedSelection:"Seed Selection:",score:"Score",gameRules:"Game Rules",plantStage:"Planting Stage:",harvestStage:"Harvest Stage:",plantStep1:"1. Select seeds (6 crop types available)",plantStep2:"2. Click empty plots to plant  Get planting score",plantStep3:"3. Crops grow automatically (seedlingmature)",harvestStep1:"1. Click mature crops to harvest",harvestStep2:"2. Get higher score after harvest",harvestStep3:"3. Empty plots can be replanted",scoring:"Scoring System:",scoring1:" Planting score: 10-25 points (by crop type)",scoring2:" Harvest score: 50-125 points (by crop type)",scoring3:" Growth time: 3-8 seconds",plant:"Plant",harvest:"Harvest",growthTime:"Growth Time",seconds:"seconds",carrot:"Carrot",tomato:"Tomato",corn:"Corn",potato:"Potato",strawberry:"Strawberry",watermelon:"Watermelon"},ja:{title:"",rules:"",hideRules:"",seedSelection:"",score:"",gameRules:"",plantStage:"",harvestStage:"",plantStep1:"1. 6",plantStep2:"2.   ",plantStep3:"3. ",harvestStep1:"1. ",harvestStep2:"2. ",harvestStep3:"3. ",scoring:"",scoring1:" 10-25",scoring2:" 50-125",scoring3:" 3-8",plant:"",harvest:"",growthTime:"",seconds:"",carrot:"",tomato:"",corn:"",potato:"",strawberry:"",watermelon:""},ko:{title:" ",rules:" ",hideRules:" ",seedSelection:" :",score:"",gameRules:" ",plantStage:" :",harvestStage:" :",plantStep1:"1.   (6 )",plantStep2:"2.        ",plantStep3:"3.    ()",harvestStep1:"1.    ",harvestStep2:"2.      ",harvestStep3:"3.    ",scoring:" :",scoring1:"  : 10-25 ( )",scoring2:"  : 50-125 ( )",scoring3:"  : 3-8",plant:"",harvest:"",growthTime:" ",seconds:"",carrot:"",tomato:"",corn:"",potato:"",strawberry:"",watermelon:""},vi:{title:"Nng Tri Cuc Sng",rules:"Lut Chi",hideRules:"n Lut",seedSelection:"Chn Ht Ging:",score:"im",gameRules:"Lut Chi",plantStage:"Giai on Trng:",harvestStage:"Giai on Thu Hoch:",plantStep1:"1. Chn ht ging (6 loi cy trng)",plantStep2:"2. Nhp vo  trng  trng  Nhn im trng",plantStep3:"3. Cy trng t ng pht trin (mmtrng thnh)",harvestStep1:"1. Nhp vo cy trng thnh  thu hoch",harvestStep2:"2. Nhn im cao hn sau thu hoch",harvestStep3:"3.  trng c th trng li",scoring:"H Thng im:",scoring1:" im trng: 10-25 im (theo loi cy)",scoring2:" im thu hoch: 50-125 im (theo loi cy)",scoring3:" Thi gian pht trin: 3-8 giy",plant:"Trng",harvest:"Thu hoch",growthTime:"Thi gian pht trin",seconds:"giy",carrot:"C Rt",tomato:"C Chua",corn:"Ng",potato:"Khoai Ty",strawberry:"Du Ty",watermelon:"Da Hu"},th:{title:"",rules:"",hideRules:"",seedSelection:":",score:"",gameRules:"",plantStage:":",harvestStage:":",plantStep1:"1.  (6 )",plantStep2:"2.   ",plantStep3:"3.  ()",harvestStep1:"1. ",harvestStep2:"2. ",harvestStep3:"3. ",scoring:":",scoring1:" : 10-25  ()",scoring2:" : 50-125  ()",scoring3:" : 3-8 ",plant:"",harvest:"",growthTime:"",seconds:"",carrot:"",tomato:"",corn:"",potato:"",strawberry:"",watermelon:""},la:{title:"Villa Vitae",rules:"Regulae Ludi",hideRules:"Occulta Regulas",seedSelection:"Selectio Seminis:",score:"Puncta",gameRules:"Regulae Ludi",plantStage:"Stadium Plantandi:",harvestStage:"Stadium Messis:",plantStep1:"1. Elige semina (6 genera culturarum)",plantStep2:"2. Clicca in agros vacuos ad plantandum  Accipe puncta",plantStep3:"3. Culturae crescunt automatice (plantulamaturus)",harvestStep1:"1. Clicca culturas maturas ad messem",harvestStep2:"2. Accipe puncta altiora post messem",harvestStep3:"3. Agri vacui possunt replantari",scoring:"Systema Punctorum:",scoring1:" Puncta plantandi: 10-25 (secundum genus)",scoring2:" Puncta messis: 50-125 (secundum genus)",scoring3:" Tempus crescendi: 3-8 secundis",plant:"Planta",harvest:"Messis",growthTime:"Tempus Crescendi",seconds:"secundis",carrot:"Daucus",tomato:"Lycopersicum",corn:"Zea",potato:"Solanum",strawberry:"Fragaria",watermelon:"Citrullus"},ms:{title:"Ladang Kehidupan",rules:"Peraturan Permainan",hideRules:"Sembunyikan Peraturan",seedSelection:"Pilihan Benih:",score:"Markah",gameRules:"Peraturan Permainan",plantStage:"Peringkat Menanam:",harvestStage:"Peringkat Menuai:",plantStep1:"1. Pilih benih (6 jenis tanaman)",plantStep2:"2. Klik plot kosong untuk menanam  Dapat markah menanam",plantStep3:"3. Tanaman tumbuh secara automatik (anak benihmatang)",harvestStep1:"1. Klik tanaman matang untuk menuai",harvestStep2:"2. Dapat markah lebih tinggi selepas menuai",harvestStep3:"3. Plot kosong boleh ditanam semula",scoring:"Sistem Markah:",scoring1:" Markah menanam: 10-25 mata (mengikut jenis tanaman)",scoring2:" Markah menuai: 50-125 mata (mengikut jenis tanaman)",scoring3:" Masa tumbuh: 3-8 saat",plant:"Tanam",harvest:"Tuai",growthTime:"Masa Tumbuh",seconds:"saat",carrot:"Lobak Merah",tomato:"Tomato",corn:"Jagung",potato:"Kentang",strawberry:"Strawberi",watermelon:"Tembikai"}};return((x=T[e])==null?void 0:x[j])||T["zh-TW"][j]||j};m.useEffect(()=>{const j=Md("farm");j&&(i(j.plants||[]),s(j.score||0))},[]),m.useEffect(()=>{Dd("farm",{plants:n,score:o})},[n,o]);const p=[{id:"carrot",name:"",emoji:"",growthTime:3e3,color:"#FF6B35",plantScore:10,harvestScore:50},{id:"tomato",name:"",emoji:"",growthTime:5e3,color:"#FF4444",plantScore:15,harvestScore:75},{id:"corn",name:"",emoji:"",growthTime:7e3,color:"#FFD700",plantScore:20,harvestScore:100},{id:"potato",name:"",emoji:"",growthTime:4e3,color:"#8B4513",plantScore:12,harvestScore:60},{id:"strawberry",name:"",emoji:"",growthTime:6e3,color:"#FF69B4",plantScore:18,harvestScore:90},{id:"watermelon",name:"",emoji:"",growthTime:8e3,color:"#FF6347",plantScore:25,harvestScore:125}],g=(j,T)=>{if(n.find(z=>z.x===j&&z.y===T))return;const b=p.find(z=>z.id===a);if(!b)return;const v={id:Date.now(),type:a,growth:0,planted:Date.now(),x:j,y:T};i(z=>[...z,v]),s(z=>z+b.plantScore),setTimeout(()=>{i(z=>z.map(D=>D.id===v.id?We(ke({},D),{growth:50}):D))},b.growthTime/2),setTimeout(()=>{i(z=>z.map(D=>D.id===v.id?We(ke({},D),{growth:100}):D))},b.growthTime)},y=j=>{const T=n.find(x=>x.id===j);if(T&&T.growth>=100){const x=p.find(b=>b.id===T.type);i(b=>b.filter(v=>v.id!==j)),s(b=>b+((x==null?void 0:x.harvestScore)||50))}},k=(j,T)=>n.find(x=>x.x===j&&x.y===T);return r.jsx("div",{style:{height:"100vh",background:"linear-gradient(180deg, #87CEEB 0%, #90EE90 100%)",padding:"clamp(10px, 2vw, 20px)",position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"clamp(200px, 25vw, 250px) 1fr",gap:"clamp(10px, 2vw, 20px)",height:"calc(100% - 60px)",marginTop:"60px",overflow:"visible",minHeight:"0",width:"100%"},children:[r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"15px",padding:"clamp(15px, 3vw, 20px)",height:"fit-content",maxHeight:window.innerWidth<=768?"200px":"100%",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",alignSelf:"start",display:window.innerWidth<=768?"none":"block"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"clamp(1.2rem, 3vw, 1.5rem)",fontWeight:"bold",color:"#333"},children:[" ",h("title")]}),r.jsx("button",{onClick:()=>u(!c),style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"15px",padding:"4px 12px",fontSize:"clamp(0.7rem, 1.8vw, 0.8rem)",cursor:"pointer"},children:h(c?"hideRules":"rules")})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{marginBottom:"10px",fontSize:"clamp(1rem, 2.5vw, 1.2rem)",color:"#333",fontWeight:"bold"},children:h("seedSelection")}),p.map(j=>r.jsxs("div",{onClick:()=>l(j.id),style:{padding:"clamp(8px, 2vw, 10px)",margin:"5px 0",borderRadius:"8px",cursor:"pointer",background:a===j.id?"#e8f5e8":"#f5f5f5",border:a===j.id?"2px solid #4CAF50":"2px solid transparent",fontSize:"clamp(0.9rem, 2vw, 1rem)",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease"},children:[r.jsx("span",{style:{fontSize:"1.2em"},children:j.emoji}),r.jsx("span",{children:h(j.id)})]},j.id))]}),r.jsx("div",{style:{marginBottom:"20px"},children:r.jsxs("h4",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",color:"#333",fontWeight:"bold"},children:[h("score"),"",o]})}),c&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:"10px",padding:"12px",marginBottom:"15px",textAlign:"left",fontSize:"clamp(0.7rem, 1.8vw, 0.8rem)",lineHeight:"1.3"},children:[r.jsxs("h4",{style:{marginBottom:"8px",color:"#333"},children:[" ",h("gameRules"),""]}),r.jsx("p",{style:{marginBottom:"6px"},children:r.jsx("strong",{children:h("plantStage")})}),r.jsx("p",{style:{marginBottom:"6px"},children:h("plantStep1")}),r.jsx("p",{style:{marginBottom:"6px"},children:h("plantStep2")}),r.jsx("p",{style:{marginBottom:"6px"},children:h("plantStep3")}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsx("strong",{children:h("harvestStage")})}),r.jsx("p",{style:{marginBottom:"6px"},children:h("harvestStep1")}),r.jsx("p",{style:{marginBottom:"6px"},children:h("harvestStep2")}),r.jsx("p",{style:{marginBottom:"6px"},children:h("harvestStep3")}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsx("strong",{children:h("scoring")})}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("carrot"),"",h("plant"),"+10 ",h("harvest"),"+50"]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("tomato"),"",h("plant"),"+15 ",h("harvest"),"+75"]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("corn"),"",h("plant"),"+20 ",h("harvest"),"+100"]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("potato"),"",h("plant"),"+12 ",h("harvest"),"+60"]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("strawberry"),"",h("plant"),"+18 ",h("harvest"),"+90"]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("watermelon"),"",h("plant"),"+25 ",h("harvest"),"+125"]}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[h("growthTime"),""]})}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("carrot"),"3",h("seconds")]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("tomato"),"5",h("seconds")]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("corn"),"7",h("seconds")]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("potato"),"4",h("seconds")]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("strawberry"),"6",h("seconds")]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[" ",h("watermelon"),"8",h("seconds")]})]})]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.9)",borderRadius:"15px",padding:window.innerWidth<=768?"clamp(5px, 1vw, 10px)":"clamp(10px, 2vw, 20px)",position:"relative",overflow:"visible",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",zIndex:1,minHeight:"0",width:"100%"},children:[window.innerWidth<=768&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",background:"rgba(255,255,255,0.8)",borderRadius:"10px",fontSize:"14px",position:"relative",zIndex:1},children:[r.jsxs("div",{style:{fontWeight:"bold"},children:[h("score"),"",o]}),r.jsx("div",{style:{display:"flex",gap:"8px"},children:p.map(j=>r.jsx("button",{onClick:()=>l(j.id),style:{padding:"4px 8px",borderRadius:"6px",border:a===j.id?"2px solid #4CAF50":"1px solid #ddd",background:a===j.id?"#e8f5e8":"#fff",cursor:"pointer",fontSize:"12px"},children:j.emoji},j.id))})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx("button",{onClick:()=>u(!c),style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"15px",padding:"6px 16px",fontSize:"12px",cursor:"pointer"},children:h(c?"hideRules":"rules")})}),c&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.9)",borderRadius:"10px",padding:"12px",fontSize:"11px",lineHeight:"1.3",textAlign:"left"},children:[r.jsxs("h4",{style:{marginBottom:"6px",color:"#333"},children:[" ",h("gameRules"),""]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:""}),"  "]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:""}),""]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:""}),"+10~25+50~125"]}),r.jsxs("p",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:""}),"3~8"]})]})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gridTemplateRows:"repeat(7, 1fr)",gap:"clamp(5px, 1vw, 10px)",width:"100%",height:"fit-content",minHeight:"0",overflow:"visible"},children:Array.from({length:70},(j,T)=>{const x=T%10,b=Math.floor(T/10),v=k(x,b),z=v?p.find(P=>P.id===v.type):null,D=v&&v.growth>=100;return r.jsx("div",{onClick:()=>{v&&D?y(v.id):v||g(x,b)},style:{background:v?D?"#4CAF50":"#8BC34A":"#DEB887",border:"2px solid #A0522D",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:v&&!D?"not-allowed":"pointer",fontSize:v?"clamp(1.5rem, 4vw, 2rem)":"clamp(0.8rem, 2vw, 1rem)",transition:"all 0.3s ease",position:"relative",aspectRatio:"1",boxShadow:v?"0 2px 8px rgba(0,0,0,0.2)":"none",opacity:v&&!D?.7:1},children:v?r.jsx("div",{style:{fontSize:D?"clamp(1.5rem, 4vw, 2rem)":"clamp(0.8rem, 2vw, 1rem)",opacity:v.growth/100},children:z==null?void 0:z.emoji}):r.jsx("span",{style:{color:"#8B4513",fontSize:"1.5em"},children:"+"})},T)})})]})]})})}function WV({onClose:t}){const{lang:e}=dt(),[n,i]=m.useState(0),[o,s]=m.useState(30),[a,l]=m.useState(!1),[c,u]=m.useState(null),h=m.useRef({}),p=Q=>{var de;const X={"zh-TW":{start:"",restart:"",score:"",time:"",level:"",hits:"",accuracy:"",combo:"",highScore:"",highCombo:"",title:"",rules:"",close:"",gameOver:"",finalScore:"",basicGameplay:"",scoreSystem:"",levelSystem:"",clickMole:"",getScore:"",gameTime:"",seconds:"",moleSpeed:"",baseScore:"",points:"",levelBonus:"",perLevel:"",comboBonus:"",per3Combo:"3",level1:"1",level2:"2",level3:"3",level4:"4",molesFaster:"",moreFrequent:"",extremeSpeed:""},"zh-CN":{start:"",restart:"",score:"",time:"",level:"",hits:"",accuracy:"",combo:"",highScore:"",highCombo:"",title:"",rules:"",close:"",basicGameplay:"",scoreSystem:"",levelSystem:"",clickMole:"",getScore:"",gameTime:"",seconds:"",moleSpeed:"",baseScore:"",points:"",levelBonus:"",perLevel:"",comboBonus:"",per3Combo:"3",level1:"1",level2:"2",level3:"3",level4:"4",molesFaster:"",moreFrequent:"",extremeSpeed:""},en:{start:"Start Game",restart:"Restart",score:"Score",time:"Time",level:"Level",hits:"Hits",accuracy:"Accuracy",combo:"Combo",highScore:"High Score",highCombo:"High Combo",title:"Whack-a-Mole",rules:"Game Rules",close:"Close",basicGameplay:"Basic Gameplay",scoreSystem:"Score System",levelSystem:"Level System",clickMole:"Click appearing moles",getScore:"to get points",gameTime:"Game Time",seconds:"seconds",moleSpeed:"Mole appearance time shortens with level",baseScore:"Base Score",points:"points",levelBonus:"Level Bonus",perLevel:"per level",comboBonus:"Combo Bonus",per3Combo:"per 3 combos",level1:"Level 1",level2:"Level 2",level3:"Level 3",level4:"Level 4",molesFaster:"moles faster",moreFrequent:"more frequent",extremeSpeed:"extreme speed"},ja:{start:"",restart:"",score:"",time:"",level:"",hits:"",accuracy:"",combo:"",highScore:"",highCombo:"",title:"",rules:"",close:"",basicGameplay:"",scoreSystem:"",levelSystem:"",clickMole:"",getScore:"",gameTime:"",seconds:"",moleSpeed:"",baseScore:"",points:"",levelBonus:"",perLevel:"",comboBonus:"",per3Combo:"3",level1:"1",level2:"2",level3:"3",level4:"4",molesFaster:"",moreFrequent:"",extremeSpeed:""},ko:{start:" ",restart:" ",score:"",time:"",level:"",hits:"",accuracy:"",combo:"",highScore:" ",highCombo:" ",title:" ",rules:" ",close:"",basicGameplay:" ",scoreSystem:" ",levelSystem:" ",clickMole:"  ",getScore:"  ",gameTime:" ",seconds:"",moleSpeed:"     ",baseScore:" ",points:"",levelBonus:" ",perLevel:"",comboBonus:" ",per3Combo:"3",level1:" 1",level2:" 2",level3:" 3",level4:" 4",molesFaster:"  ",moreFrequent:" ",extremeSpeed:" "},vi:{start:"Bt u Tr Chi",restart:"Chi Li",score:"im",time:"Thi Gian",level:"Cp ",hits:"Trng",accuracy:" Chnh Xc",combo:"Combo",highScore:"im Cao Nht",highCombo:"Combo Cao Nht",title:"p Chut",rules:"Lut Chi",close:"ng",basicGameplay:"Cch Chi C Bn",scoreSystem:"H Thng im",levelSystem:"H Thng Cp ",clickMole:"Nhp vo chut xut hin",getScore:" nhn im",gameTime:"Thi Gian Chi",seconds:"giy",moleSpeed:"Thi gian xut hin chut rt ngn theo cp ",baseScore:"im C Bn",points:"im",levelBonus:"Thng Cp ",perLevel:"mi cp",comboBonus:"Thng Combo",per3Combo:"mi 3 combo",level1:"Cp 1",level2:"Cp 2",level3:"Cp 3",level4:"Cp 4",molesFaster:"chut nhanh hn",moreFrequent:"thng xuyn hn",extremeSpeed:"tc  cc hn"},th:{start:"",restart:"",score:"",time:"",level:"",hits:"",accuracy:"",combo:"",highScore:"",highCombo:"",title:"",rules:"",close:"",basicGameplay:"",scoreSystem:"",levelSystem:"",clickMole:"",getScore:"",gameTime:"",seconds:"",moleSpeed:"",baseScore:"",points:"",levelBonus:"",perLevel:"",comboBonus:"",per3Combo:" 3 ",level1:" 1",level2:" 2",level3:" 3",level4:" 4",molesFaster:"",moreFrequent:"",extremeSpeed:""},la:{start:"Ludum Incipere",restart:"Iterum Incipere",score:"Puncta",time:"Tempus",level:"Gradus",hits:"Ictus",accuracy:"Accuratio",combo:"Combo",highScore:"Puncta Maxima",highCombo:"Combo Maxima",title:"Talpa Percutere",rules:"Regulae Ludi",close:"Claudere",basicGameplay:"Ludus Basicus",scoreSystem:"Systema Punctorum",levelSystem:"Systema Gradus",clickMole:"Clicca talpam apparentem",getScore:"ut puncta accipias",gameTime:"Tempus Ludi",seconds:"secundis",moleSpeed:"Tempus apparentiae talpae cum gradu brevior fit",baseScore:"Puncta Basica",points:"puncta",levelBonus:"Bonus Gradus",perLevel:"per gradum",comboBonus:"Bonus Combo",per3Combo:"per 3 combos",level1:"Gradus 1",level2:"Gradus 2",level3:"Gradus 3",level4:"Gradus 4",molesFaster:"talpae velociores",moreFrequent:"frequentiores",extremeSpeed:"velocitas extrema"},ms:{start:"Mulakan Permainan",restart:"Mulakan Semula",score:"Markah",time:"Masa",level:"Tahap",hits:"Pukulan",accuracy:"Ketepatan",combo:"Combo",highScore:"Markah Tertinggi",highCombo:"Combo Tertinggi",title:"Pukul Tikus",rules:"Peraturan Permainan",close:"Tutup",basicGameplay:"Cara Bermain Asas",scoreSystem:"Sistem Markah",levelSystem:"Sistem Tahap",clickMole:"Klik tikus yang muncul",getScore:"untuk dapat markah",gameTime:"Masa Permainan",seconds:"saat",moleSpeed:"Masa kemunculan tikus memendek dengan tahap",baseScore:"Markah Asas",points:"markah",levelBonus:"Bonus Tahap",perLevel:"setiap tahap",comboBonus:"Bonus Combo",per3Combo:"setiap 3 combo",level1:"Tahap 1",level2:"Tahap 2",level3:"Tahap 3",level4:"Tahap 4",molesFaster:"tikus lebih cepat",moreFrequent:"lebih kerap",extremeSpeed:"kelajuan melampau"}};return((de=X[e])==null?void 0:de[Q])||X["zh-TW"][Q]||Q},[g,y]=m.useState(0),[k,j]=m.useState(1),[T,x]=m.useState(0),[b,v]=m.useState(0),[z,D]=m.useState(!1),[P,_]=m.useState(0),[S,R]=m.useState(0),[E,A]=m.useState(0);m.useEffect(()=>{const Q=Md("whackAMole");Q&&y(Q.highScore||0)},[]),m.useEffect(()=>{n>g&&(y(n),Dd("whackAMole",{highScore:n}))},[n,g]),m.useEffect(()=>{const Q=T+b;if(Q>0){const X=T/Q;k===1&&X>=.7?j(2):k===2&&X>=.6?j(3):k===3&&X>=.5&&j(4)}},[T,b,k]);const B=()=>n<0?" ":n<50?" ":n<100?" ":n<200?" ":n<300?" ":n<500?" ":" ";m.useEffect(()=>{},[k]),m.useEffect(()=>{const Q=T+b;Q>0&&A(Math.round(T/Q*100))},[T,b]);const I=()=>{l(!0),i(0),s(30),j(1),x(0),v(0),_(0),R(0),A(0),u(null);let Q,X;Q=setInterval(()=>{s(de=>de<=1?(clearInterval(Q),clearInterval(X),l(!1),0):de-1)},1e3),setTimeout(()=>{const de=Math.floor(Math.random()*9);u(de);const ee=setTimeout(()=>{u(null),v(he=>he+1),i(he=>he-1),_(0)},k===1?900:k===2?700:k===3?500:350);h.current[de]=ee},300),X=setInterval(()=>{const de=Math.floor(Math.random()*9);u(de);const ee=setTimeout(()=>{u(null),v(he=>he+1),i(he=>he-1),_(0)},k===1?900:k===2?700:k===3?500:350);h.current[de]=ee},k===1?1100:k===2?900:k===3?700:500)},re=Q=>{c===Q?(i(X=>X+1),x(X=>X+1),_(X=>{const de=X+1;return de>S&&R(de),de}),u(null),h.current[Q]&&(clearTimeout(h.current[Q]),h.current[Q]=null)):(i(X=>X-1),_(0))};return r.jsxs("div",{style:{height:"100vh",background:"linear-gradient(180deg, #8B4513 0%, #A0522D 100%)",padding:"clamp(10px, 2vw, 20px)",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[r.jsx("button",{onClick:t,style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(20px, 4vw, 40px)",background:"#fff",border:"2px solid #6B5BFF",borderRadius:"50%",width:"clamp(40px, 8vw, 50px)",height:"clamp(40px, 8vw, 50px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:20,fontSize:"clamp(1.2rem, 3vw, 1.5rem)",color:"#6B5BFF"},children:""}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.9)",borderRadius:"15px",padding:"clamp(10px, 2vw, 15px)",marginTop:"clamp(60px, 12vw, 80px)",marginBottom:"clamp(8px, 1.5vw, 15px)",textAlign:"center",width:"100%",maxWidth:"300px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("h2",{style:{fontSize:"clamp(1.5rem, 4vw, 2rem)",margin:0},children:[" ",p("title")]}),r.jsx("button",{onClick:()=>D(!z),style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"20px",padding:"5px 15px",fontSize:"clamp(0.8rem, 2vw, 1rem)",cursor:"pointer"},children:p(z?"close":"rules")})]}),z&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:"10px",padding:"10px",marginBottom:"10px",textAlign:"left",fontSize:"clamp(0.7rem, 1.8vw, 0.8rem)",lineHeight:"1.3"},children:[r.jsxs("h4",{style:{marginBottom:"8px",color:"#333"},children:[" ",p("rules"),""]}),r.jsx("p",{style:{marginBottom:"6px"},children:r.jsxs("strong",{children:[p("basicGameplay"),""]})}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",p("clickMole"),"  ",p("getScore")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",p("gameTime"),"30",p("seconds")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",p("moleSpeed")]}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[p("scoreSystem"),""]})}),r.jsx("p",{style:{marginBottom:"6px"},children:"   +1"}),r.jsx("p",{style:{marginBottom:"6px"},children:"   -1"}),r.jsx("p",{style:{marginBottom:"6px"},children:"   -1"}),r.jsx("p",{style:{marginBottom:"6px"},children:"   -1"}),r.jsx("p",{style:{marginBottom:"6px"},children:" 0"}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[p("levelSystem"),""]})}),r.jsx("p",{style:{marginBottom:"6px"},children:" 170%  2"}),r.jsx("p",{style:{marginBottom:"6px"},children:" 260%  3"}),r.jsx("p",{style:{marginBottom:"6px"},children:" 350%  4"}),r.jsx("p",{style:{marginBottom:"6px"},children:" 30"})]}),!z&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",gap:"clamp(6px, 1.5vw, 12px)",justifyContent:"center",flexWrap:"wrap",marginBottom:"8px"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2.2vw, 1rem)"},children:[p("score"),"",n]}),r.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2.2vw, 1rem)"},children:[p("time"),"",o,""]}),r.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2.2vw, 1rem)"},children:[p("level"),"",k]})]}),r.jsxs("div",{style:{display:"flex",gap:"clamp(6px, 1.5vw, 12px)",justifyContent:"center",flexWrap:"wrap",marginBottom:"8px"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.9rem)"},children:[p("hits"),"",T]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.9rem)"},children:[p("accuracy"),"",E,"%"]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.9rem)"},children:[p("combo"),"",P]})]}),r.jsxs("div",{style:{display:"flex",gap:"clamp(6px, 1.5vw, 12px)",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.9rem)"},children:[p("highScore"),"",g]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.9rem)"},children:[p("highCombo"),"",S]})]}),r.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 1rem)",color:"#FF5722",fontWeight:"bold",marginTop:"8px",textAlign:"center"},children:B()}),!a&&r.jsx("button",{onClick:I,style:{background:"#FF5722",color:"#fff",border:"none",borderRadius:"25px",padding:"clamp(6px, 1.5vw, 8px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2.2vw, 1rem)",fontWeight:"bold",marginTop:"10px",cursor:"pointer",transition:"all 0.3s ease"},children:p(o===30?"start":"restart")})]})]}),!z&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"clamp(8px, 1.5vw, 15px)",maxWidth:"300px",width:"100%",marginTop:"10px",padding:"clamp(10px, 2vw, 15px)",background:"rgba(255,255,255,0.9)",borderRadius:"15px",boxSizing:"border-box"},children:Array.from({length:9},(Q,X)=>r.jsx("div",{onClick:()=>re(X),style:{width:"clamp(60px, 10vw, 80px)",height:"clamp(60px, 10vw, 80px)",background:"#654321",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"3px solid #8B4513",position:"relative",overflow:"hidden"},children:c===X&&r.jsx("div",{style:{position:"absolute",bottom:"0",width:"100%",height:"60%",background:"#8B4513",borderRadius:"50% 50% 0 0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(1.5rem, 4vw, 2rem)",animation:"molePop 0.3s ease-out",cursor:"pointer"},children:""})},X))}),r.jsx("style",{children:`
        @keyframes molePop {
          0% { transform: translateY(100%); }
          100% { transform: translateY(0); }
        }
        
        @keyframes whack {
          0% { transform: scale(1); }
          50% { transform: scale(0.8); }
          100% { transform: scale(1); }
        }
        
        @keyframes scorePop {
          0% { opacity: 0; transform: translateY(0); }
          50% { opacity: 1; transform: translateY(-20px); }
          100% { opacity: 0; transform: translateY(-40px); }
        }
      `})]})}function LV({onClose:t}){const{lang:e}=dt(),[n,i]=m.useState(0),[o,s]=m.useState([]),a=re=>{var X;const Q={"zh-TW":{title:"",start:"",restart:"",score:"",time:"",level:"",collected:"",highScore:"",rules:"",close:"",hideRules:"",basicGameplay:"",scoreSystem:"",levelSystem:"",tips:"",newFeatures:"",gameOver:"",clickFruit:"",putFruitInBasket:"",gameTime:"",seconds:"",fruitSpeed:"",apple:"",orange:"",banana:"",strawberry:"",grape:"",peach:"",points:"",level1:"1",level2:"2",level3:"3",level4:"4",fruitFaster:"",moreFrequent:"",extremeSpeed:"",prioritizeHighScore:"",stayFocused:"",buildHighScore:"",fruitFromFourDirections:"",curvedTrajectory:"",realTimeFeedback:"",detailedStats:"",fixedBasketPosition:"",increasedFrequency:""},"zh-CN":{title:"",start:"",restart:"",score:"",time:"",level:"",collected:"",highScore:"",rules:"",close:"",hideRules:"",basicGameplay:"",scoreSystem:"",levelSystem:"",tips:"",newFeatures:"",clickFruit:"",putFruitInBasket:"",gameTime:"",seconds:"",fruitSpeed:"",apple:"",orange:"",banana:"",strawberry:"",grape:"",peach:"",points:"",level1:"1",level2:"2",level3:"3",level4:"4",fruitFaster:"",moreFrequent:"",extremeSpeed:"",prioritizeHighScore:"",stayFocused:"",buildHighScore:"",fruitFromFourDirections:"",curvedTrajectory:"",realTimeFeedback:"",detailedStats:"",fixedBasketPosition:"",increasedFrequency:""},en:{title:"Fruit Picking",start:"Start Game",restart:"Restart",score:"Score",time:"Time",level:"Level",collected:"Collected",highScore:"High Score",rules:"Game Rules",close:"Close",hideRules:"Hide Rules",basicGameplay:"Basic Gameplay",scoreSystem:"Score System",levelSystem:"Level System",tips:"Tips",newFeatures:"New Features",clickFruit:"Click falling fruit to collect points",putFruitInBasket:"Put collected fruit into the basket below",gameTime:"Game Time",seconds:"seconds",fruitSpeed:"Fruit will fall randomly and speed up",apple:"Apple",orange:"Orange",banana:"Banana",strawberry:"Strawberry",grape:"Grape",peach:"Peach",points:"points",level1:"Level 1",level2:"Level 2",level3:"Level 3",level4:"Level 4",fruitFaster:"fruit faster",moreFrequent:"more frequent",extremeSpeed:"extreme speed",prioritizeHighScore:"Prioritize high-score fruits",stayFocused:"Stay focused, react quickly",buildHighScore:"Build high score records",fruitFromFourDirections:"Fruit appears from four directions randomly",curvedTrajectory:"Fruit falls with curved trajectories",realTimeFeedback:"Real-time collection feedback during game",detailedStats:"Detailed statistics when game ends",fixedBasketPosition:"Basket position completely fixed without vibration",increasedFrequency:"Significantly increased fruit appearance frequency"},ja:{title:"",start:"",restart:"",score:"",time:"",level:"",collected:"",highScore:"",rules:"",close:"",hideRules:"",basicGameplay:"",scoreSystem:"",levelSystem:"",tips:"",newFeatures:"",clickFruit:"",putFruitInBasket:"",gameTime:"",seconds:"",fruitSpeed:"",apple:"",orange:"",banana:"",strawberry:"",grape:"",peach:"",points:"",level1:"1",level2:"2",level3:"3",level4:"4",fruitFaster:"",moreFrequent:"",extremeSpeed:"",prioritizeHighScore:"",stayFocused:"",buildHighScore:"",fruitFromFourDirections:"4",curvedTrajectory:"",realTimeFeedback:"",detailedStats:"",fixedBasketPosition:"",increasedFrequency:""},ko:{title:" ",start:" ",restart:" ",score:"",time:"",level:"",collected:"",highScore:" ",rules:" ",close:"",hideRules:" ",basicGameplay:" ",scoreSystem:" ",levelSystem:" ",tips:"",newFeatures:" ",clickFruit:"    ",putFruitInBasket:"    ",gameTime:" ",seconds:"",fruitSpeed:"    ",apple:"",orange:"",banana:"",strawberry:"",grape:"",peach:"",points:"",level1:" 1",level2:" 2",level3:" 3",level4:" 4",fruitFaster:"  ",moreFrequent:" ",extremeSpeed:" ",prioritizeHighScore:"   ",stayFocused:"  ",buildHighScore:"  ",fruitFromFourDirections:"    ",curvedTrajectory:"   ",realTimeFeedback:"    ",detailedStats:"    ",fixedBasketPosition:"     ",increasedFrequency:"    "},vi:{title:"Hi Tri Cy",start:"Bt u Tr Chi",restart:"Chi Li",score:"im",time:"Thi Gian",level:"Cp ",collected:"Thu Hoch",highScore:"im Cao Nht",rules:"Lut Chi",close:"ng",hideRules:"n Lut",basicGameplay:"Cch Chi C Bn",scoreSystem:"H Thng im",levelSystem:"H Thng Cp ",tips:"Mo",newFeatures:"Tnh Nng Mi",clickFruit:"Nhp vo tri cy ri  nhn im",putFruitInBasket:"t tri cy thu hoch vo gi bn di",gameTime:"Thi Gian Chi",seconds:"giy",fruitSpeed:"Tri cy s ri ngu nhin v tng tc",apple:"To",orange:"Cam",banana:"Chui",strawberry:"Du ty",grape:"Nho",peach:"o",points:"im",level1:"Cp 1",level2:"Cp 2",level3:"Cp 3",level4:"Cp 4",fruitFaster:"tri cy nhanh hn",moreFrequent:"thng xuyn hn",extremeSpeed:"tc  cc hn",prioritizeHighScore:"u tin tri cy im cao",stayFocused:"Tp trung, phn ng nhanh",buildHighScore:"Xy dng k lc im cao",fruitFromFourDirections:"Tri cy xut hin t bn hng ngu nhin",curvedTrajectory:"Tri cy ri theo qu o cong",realTimeFeedback:"Phn hi thu hoch thi gian thc trong game",detailedStats:"Thng k chi tit khi kt thc game",fixedBasketPosition:"V tr gi hon ton c nh khng rung",increasedFrequency:"Tn sut xut hin tri cy tng ng k"},th:{title:"",start:"",restart:"",score:"",time:"",level:"",collected:"",highScore:"",rules:"",close:"",hideRules:"",basicGameplay:"",scoreSystem:"",levelSystem:"",tips:"",newFeatures:"",clickFruit:"",putFruitInBasket:"",gameTime:"",seconds:"",fruitSpeed:"",apple:"",orange:"",banana:"",strawberry:"",grape:"",peach:"",points:"",level1:" 1",level2:" 2",level3:" 3",level4:" 4",fruitFaster:"",moreFrequent:"",extremeSpeed:"",prioritizeHighScore:"",stayFocused:"",buildHighScore:"",fruitFromFourDirections:"",curvedTrajectory:"",realTimeFeedback:"",detailedStats:"",fixedBasketPosition:"",increasedFrequency:""},la:{title:"Fructus Colligere",start:"Ludum Incipere",restart:"Iterum Incipere",score:"Puncta",time:"Tempus",level:"Gradus",collected:"Collecta",highScore:"Puncta Maxima",rules:"Regulae Ludi",close:"Claudere",hideRules:"Regulae Occultare",basicGameplay:"Ludus Basicus",scoreSystem:"Systema Punctorum",levelSystem:"Systema Graduum",tips:"Consilia",newFeatures:"Facultates Novae",clickFruit:"Clicca fructus cadentes ut puncta accipias",putFruitInBasket:"Pone fructus collectos in corbem infra",gameTime:"Tempus Ludi",seconds:"secundis",fruitSpeed:"Fructus cadent temere et velocitate crescente",apple:"Malum",orange:"Aurantium",banana:"Musa",strawberry:"Fragum",grape:"Uva",peach:"Persicum",points:"puncta",level1:"Gradus 1",level2:"Gradus 2",level3:"Gradus 3",level4:"Gradus 4",fruitFaster:"fructus velociores",moreFrequent:"frequentiores",extremeSpeed:"velocitas extrema",prioritizeHighScore:"Prioritiza fructus punctis altis",stayFocused:"Mane attentus, reage celeriter",buildHighScore:"Aedifica puncta alta",fruitFromFourDirections:"Fructus apparent ex quattuor directionibus temere",curvedTrajectory:"Fructus cadunt cum trajectoriis curvis",realTimeFeedback:"Feedback collectionis tempore reali in ludo",detailedStats:"Statisticae detaillatae cum ludus finitur",fixedBasketPosition:"Positio corbis omnino fixa sine vibratione",increasedFrequency:"Frequentia fructuum apparendi multum aucta"},ms:{title:"Kutip Buah",start:"Mulakan Permainan",restart:"Mulakan Semula",score:"Markah",time:"Masa",level:"Tahap",collected:"Kutip",highScore:"Markah Tertinggi",rules:"Peraturan Permainan",close:"Tutup",hideRules:"Sembunyikan Peraturan",basicGameplay:"Permainan Asas",scoreSystem:"Sistem Markah",levelSystem:"Sistem Tahap",tips:"Petua",newFeatures:"Ciri Baharu",clickFruit:"Klik buah yang jatuh untuk dapat markah",putFruitInBasket:"Letakkan buah yang dikutip ke dalam bakul di bawah",gameTime:"Masa Permainan",seconds:"saat",fruitSpeed:"Buah akan jatuh secara rawak dan laju bertambah",apple:"Epal",orange:"Oren",banana:"Pisang",strawberry:"Strawberi",grape:"Anggur",peach:"Pic",points:"markah",level1:"Tahap 1",level2:"Tahap 2",level3:"Tahap 3",level4:"Tahap 4",fruitFaster:"buah lebih cepat",moreFrequent:"lebih kerap",extremeSpeed:"kelajuan melampau",prioritizeHighScore:"Utamakan buah markah tinggi",stayFocused:"Kekal fokus, bertindak pantas",buildHighScore:"Bina rekod markah tinggi",fruitFromFourDirections:"Buah muncul dari empat arah secara rawak",curvedTrajectory:"Buah jatuh dengan trajektori melengkung",realTimeFeedback:"Maklum balas kutipan masa nyata semasa permainan",detailedStats:"Statistik terperinci apabila permainan tamat",fixedBasketPosition:"Kedudukan bakul tetap sepenuhnya tanpa getaran",increasedFrequency:"Kekerapan kemunculan buah meningkat dengan ketara"}};return((X=Q[e])==null?void 0:X[re])||Q["zh-TW"][re]||re},[l,c]=m.useState([]),[u,h]=m.useState({}),[p,g]=m.useState([]),[y,k]=m.useState(0),[j,T]=m.useState(!1),[x,b]=m.useState(30),[v,z]=m.useState(!1),[D,P]=m.useState(1),[_,S]=m.useState(0);m.useEffect(()=>{const re=Md("fruitPicking");re&&k(re.highScore||0)},[]),m.useEffect(()=>{if(!v||o.length===0)return;const re=setInterval(()=>{s(Q=>Q.map(de=>{const V=de.curveOffset||0,ee=de.curveSpeed||.05,he=Date.now()*.001,ve=Math.sin(he*ee+V)*4,be=Math.cos(he*ee+V)*2,te=Math.sin(he*ee*2+V)*2,N=Math.cos(he*ee*1.5+V)*1,O=Math.sin(he*ee*.5+V)*3,oe=ve+te+O,ge=be+N;return We(ke({},de),{y:de.y+(de.directionY||de.speed||1)+ge,x:de.x+(de.directionX||de.direction||0)+oe})}).filter(de=>de.y>-20&&de.y<120&&de.x>-20&&de.x<120))},100);return()=>clearInterval(re)},[v,o.length]),m.useEffect(()=>{n>y&&(k(n),Dd("fruitPicking",{highScore:n}))},[n,y]),m.useEffect(()=>{n>=100&&D===1?P(2):n>=250&&D===2?P(3):n>=500&&D===3&&P(4)},[n,D]);const R=[{type:"apple",emoji:"",points:10},{type:"orange",emoji:"",points:15},{type:"banana",emoji:"",points:20},{type:"strawberry",emoji:"",points:25},{type:"grape",emoji:"",points:30},{type:"peach",emoji:"",points:35}],E=()=>{z(!0),i(0),b(30),P(1),S(0),c([]),s([]),h({}),g([]);let re,Q;re=setInterval(()=>{b(X=>X<=1?(clearInterval(re),clearInterval(Q),z(!1),0):X-1)},1e3),setTimeout(()=>{A(),Q=setInterval(()=>{A(),D>=3&&setTimeout(()=>A(),200),D>=4&&setTimeout(()=>A(),400)},D===1?1200:D===2?800:D===3?600:400)},100)},A=()=>{const re=R[Math.floor(Math.random()*R.length)],Q=D===1?1:D===2?1.5:D===3?2:2.5,X=Math.floor(Math.random()*4),de=Math.random()<.3;let V,ee,he,ve;switch(X){case 0:V=Math.random()*80+10,ee=-10,he=(Math.random()-.5)*.3,ve=Q;break;case 1:V=Math.random()*80+10,ee=110,he=(Math.random()-.5)*.3,ve=-Q;break;case 2:V=-10,ee=Math.random()*80+10,he=Q,ve=(Math.random()-.5)*.3;break;case 3:V=110,ee=Math.random()*80+10,he=-Q,ve=(Math.random()-.5)*.3;break;default:V=Math.random()*80+10,ee=-10,he=(Math.random()-.5)*.3,ve=Q}const be={id:Date.now()+Math.random(),x:V,y:ee,type:re.type,emoji:re.emoji,speed:Q,direction:0,directionX:he,directionY:ve,curveOffset:Math.random()*Math.PI*2,curveSpeed:Math.random()*.15+.08};if(s(te=>[...te,be]),de){const te=R[Math.floor(Math.random()*R.length)],N=Math.random()*80+10,oe={id:Date.now()+Math.random()+1,x:N,y:-10,type:te.type,emoji:te.emoji,speed:Q,direction:0,directionX:(Math.random()-.5)*.3,directionY:Q,curveOffset:Math.random()*Math.PI*2,curveSpeed:Math.random()*.15+.08};s(ge=>[...ge,oe])}},B=re=>{const Q=o.find(X=>X.id===re);if(Q){const X=R.find(de=>de.type===Q.type);s(de=>de.filter(V=>V.id!==re)),i(de=>{const V=de+((X==null?void 0:X.points)||10);return V>y&&k(V),V}),S(de=>de+1),c(de=>[...de,{type:Q.type,emoji:Q.emoji}]),h(de=>{const V=ke({},de);return V[Q.type]=(V[Q.type]||0)+1,V}),g(de=>de.find(ee=>ee.type===Q.type)?de.map(ee=>ee.type===Q.type?We(ke({},ee),{count:ee.count+1}):ee):[...de,{type:Q.type,emoji:Q.emoji,count:1}])}},I=()=>_<5?" ":_<10?" ":_<15?" ":_<20?" ":_<25?" ":" ";return m.useEffect(()=>{if(p.length>0&&v){const re=setTimeout(()=>{g([])},3e3);return()=>clearTimeout(re)}},[p,v]),r.jsxs("div",{style:{height:"100vh",background:"linear-gradient(180deg, #87CEEB 0%, #98FB98 100%)",padding:"clamp(10px, 2vw, 20px)",position:"relative",overflow:"hidden",isolation:"isolate"},children:[r.jsx("button",{onClick:t,style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:window.innerWidth>=768?"clamp(10px, 2vw, 15px)":"clamp(20px, 4vw, 40px)",background:"#fff",border:"2px solid #6B5BFF",borderRadius:"50%",width:"clamp(40px, 8vw, 50px)",height:"clamp(40px, 8vw, 50px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:20,fontSize:"clamp(1.2rem, 3vw, 1.5rem)",color:"#6B5BFF"},children:""}),r.jsxs("div",{style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(60px, 12vw, 70px)",background:"rgba(255,255,255,0.9)",borderRadius:"15px",padding:"clamp(12px, 2.5vw, 16px)",zIndex:10,maxWidth:"180px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsxs("h3",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",margin:0,lineHeight:"1.2"},children:[" ",a("title")]}),r.jsx("button",{onClick:()=>T(!j),style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"12px",padding:"2px 8px",fontSize:"clamp(0.6rem, 1.5vw, 0.7rem)",cursor:"pointer"},children:a(j?"hideRules":"rules")})]}),j&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:"10px",padding:"10px",marginBottom:"10px",textAlign:"left",fontSize:"clamp(0.7rem, 1.8vw, 0.8rem)",lineHeight:"1.3",maxHeight:"clamp(200px, 40vh, 300px)",overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",scrollbarColor:"#4CAF50 #f0f0f0"},children:[r.jsxs("h4",{style:{marginBottom:"8px",color:"#333"},children:[" ",a("rules"),""]}),r.jsx("p",{style:{marginBottom:"6px"},children:r.jsxs("strong",{children:[a("basicGameplay"),""]})}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("clickFruit")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("putFruitInBasket")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("gameTime"),"30",a("seconds")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("fruitSpeed")]}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[a("scoreSystem"),""]})}),r.jsxs("p",{style:{marginBottom:"6px"},children:["  ",a("apple"),"10",a("points")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:["  ",a("orange"),"15",a("points")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:["  ",a("banana"),"20",a("points")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:["  ",a("strawberry"),"25",a("points")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:["  ",a("grape"),"30",a("points")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:["  ",a("peach"),"35",a("points")]}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[a("levelSystem"),""]})}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("level1"),"100",a("points"),"  ",a("level2"),"",a("fruitFaster"),""]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("level2"),"250",a("points"),"  ",a("level3"),"",a("moreFrequent"),""]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("level3"),"500",a("points"),"  ",a("level4"),"",a("extremeSpeed"),""]}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[a("tips"),""]})}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("prioritizeHighScore")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("stayFocused")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("buildHighScore")]}),r.jsx("p",{style:{marginBottom:"6px",marginTop:"8px"},children:r.jsxs("strong",{children:[a("newFeatures"),""]})}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("fruitFromFourDirections")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("curvedTrajectory")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("realTimeFeedback")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("detailedStats")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("fixedBasketPosition")]}),r.jsxs("p",{style:{marginBottom:"6px"},children:[" ",a("increasedFrequency")]})]}),!j&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",gap:"clamp(4px, 1vw, 8px)",justifyContent:"center",flexWrap:"wrap",marginBottom:"6px"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)"},children:[a("score"),"",n]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)"},children:[a("time"),"",x,""]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)"},children:[a("level"),"",D]})]}),r.jsxs("div",{style:{display:"flex",gap:"clamp(4px, 1vw, 8px)",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.6rem, 1.5vw, 0.75rem)"},children:[a("collected"),"",_,""]}),r.jsxs("div",{style:{fontSize:"clamp(0.6rem, 1.5vw, 0.75rem)"},children:[a("highScore"),"",y]})]}),r.jsx("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",color:"#FF5722",fontWeight:"bold",marginTop:"6px",textAlign:"center"},children:I()}),!v&&r.jsx("button",{onClick:E,style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"20px",padding:"clamp(5px, 1.2vw, 6px) clamp(12px, 2.5vw, 18px)",fontSize:"clamp(0.8rem, 2vw, 0.9rem)",fontWeight:"bold",marginTop:"8px",cursor:"pointer",transition:"all 0.3s ease"},children:a(x===30?"start":"restart")})]})]}),!v&&x===0&&r.jsx("div",{style:{position:"absolute",bottom:"clamp(120px, 20vw, 140px)",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"15px",flexWrap:"wrap",justifyContent:"center",zIndex:10},children:Object.entries(u).map(([re,Q])=>{const X=R.find(de=>de.type===re);return r.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[r.jsx("span",{style:{fontSize:"clamp(2rem, 5vw, 3rem)",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:X==null?void 0:X.emoji}),r.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"#FF5722",color:"white",borderRadius:"50%",width:"clamp(20px, 4vw, 25px)",height:"clamp(20px, 4vw, 25px)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(0.6rem, 1.5vw, 0.8rem)",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:Q})]},re)})}),r.jsx("div",{style:{position:"fixed",bottom:"clamp(10px, 2vw, 20px)",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:5,width:"clamp(200px, 30vw, 250px)",pointerEvents:"none",userSelect:"none",touchAction:"none",willChange:"auto",backfaceVisibility:"hidden",contain:"layout style paint",isolation:"isolate"},children:r.jsx("div",{style:{background:"#8B4513",width:"clamp(150px, 25vw, 200px)",height:"clamp(75px, 12vw, 100px)",borderRadius:"50% 50% 0 0",border:"4px solid #654321",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(1.5rem, 4vw, 2rem)",overflow:"hidden",position:"relative",zIndex:6,pointerEvents:"none",transform:"translateZ(0)",willChange:"auto",userSelect:"none",touchAction:"none",backfaceVisibility:"hidden",perspective:"none",transformStyle:"flat",contain:"layout style paint",isolation:"isolate"},children:l.length>0?r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:"2px",maxWidth:"90%",maxHeight:"90%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",userSelect:"none",touchAction:"none",willChange:"auto",backfaceVisibility:"hidden"},children:[p.slice(-4).map((re,Q)=>r.jsxs("span",{style:{fontSize:"clamp(0.8rem, 2vw, 1rem)",position:"relative"},children:[re.emoji,r.jsx("span",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#FF5722",color:"white",borderRadius:"50%",width:"clamp(12px, 2.5vw, 16px)",height:"clamp(12px, 2.5vw, 16px)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(0.5rem, 1.2vw, 0.7rem)",fontWeight:"bold"},children:re.count})]},Q)),p.length===0&&l.slice(-6).map((re,Q)=>r.jsx("span",{style:{fontSize:"clamp(0.8rem, 2vw, 1rem)"},children:re.emoji},Q)),l.length>6&&p.length===0&&r.jsxs("span",{style:{fontSize:"clamp(0.6rem, 1.5vw, 0.8rem)",color:"#fff"},children:["+",l.length-6]})]}):r.jsx("span",{style:{color:"#654321"},children:""})})}),o.map(re=>r.jsx("div",{onClick:Q=>{Q.stopPropagation(),Q.preventDefault(),B(re.id)},onTouchStart:Q=>{Q.stopPropagation(),Q.preventDefault(),B(re.id)},style:{position:"absolute",left:`${re.x}%`,top:`${re.y}%`,fontSize:"clamp(1.5rem, 4vw, 2rem)",cursor:"pointer",userSelect:"none",transition:"all 0.1s ease",zIndex:20,touchAction:"manipulation",willChange:"transform",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:re.emoji},re.id))]})}function OV({onClose:t}){const{lang:e}=dt(),[n,i]=m.useState(!1),[o,s]=m.useState(0),a=J=>{var Le;const H={"zh-TW":{title:"",start:"",restart:"",score:"",time:"",combo:"",accuracy:"",highScore:"",rules:"",close:"",hideRules:"",gameOver:"",soundOn:"",soundOff:"",rhythmGame:"",gameplay:"",clickStartButton:"",preciseBubblePop:"",computer:"",preciseClickCenter:"",mobile:"",preciseTouchCenter:"",highAccuracyRequired:"",fastBubbles:"",harderToPop:"",slowBubbles:"",easierToPop:"",emotionBubbleScore:"",angryBubble:"",anxiousBubble:"",depressedBubble:"",stressedBubble:"",irritatedBubble:"",frustratedBubble:"",points:"",specialBubbles:"",bombBubble:"",clearAllNearby:"",goldenBubble:"",doubleScore:"",ghostBubble:"",clickTwice:"",chainBubble:"",clearSameType:"",timeBubble:"",add5Seconds:"5",accuracySystem:"",above:"",triggerPowerMode:"",goodAccuracy:"",below:"",needImproveAccuracy:"",powerMode:"",autoTrigger:"",powerModeEasier:"",last10Seconds:"10",comboSystem:"",continuousPopExtraScore:"",timeLimit:"",sixtySecondsHighestScore:"60",gameGoal:"",precisePopEmotionBubbles:"",accuracyChallenge:"",onlyClickCenterToPop:"",fastBubblesNeedHigherAccuracy:""},"zh-CN":{title:"",start:"",restart:"",score:"",time:"",combo:"",accuracy:"",highScore:"",rules:"",close:"",hideRules:"",gameplay:"",clickStartButton:"",preciseBubblePop:"",computer:"",preciseClickCenter:"",mobile:"",preciseTouchCenter:"",highAccuracyRequired:"",fastBubbles:"",harderToPop:"",slowBubbles:"",easierToPop:"",emotionBubbleScore:"",angryBubble:"",anxiousBubble:"",depressedBubble:"",stressedBubble:"",irritatedBubble:"",frustratedBubble:"",points:"",specialBubbles:"",bombBubble:"",clearAllNearby:"",goldenBubble:"",doubleScore:"",ghostBubble:"",clickTwice:"",chainBubble:"",clearSameType:"",timeBubble:"",add5Seconds:"5",accuracySystem:"",above:"",triggerPowerMode:"",goodAccuracy:"",below:"",needImproveAccuracy:"",powerMode:"",autoTrigger:"",powerModeEasier:"",last10Seconds:"10",comboSystem:"",continuousPopExtraScore:"",timeLimit:"",sixtySecondsHighestScore:"60",gameGoal:"",precisePopEmotionBubbles:"",accuracyChallenge:"",onlyClickCenterToPop:"",fastBubblesNeedHigherAccuracy:""},en:{title:"Bubble Pop",start:"Start Game",restart:"Restart",score:"Score",time:"Time",combo:"Combo",accuracy:"Accuracy",highScore:"High Score",rules:"Game Rules",close:"Close",hideRules:"Hide Rules",gameplay:"Gameplay",clickStartButton:'Click "Start Game" button',preciseBubblePop:"Precise Bubble Pop",computer:"Computer",preciseClickCenter:"Precisely click bubble center to pop",mobile:"Mobile",preciseTouchCenter:"Precisely touch bubble center to pop",highAccuracyRequired:"High accuracy required, clicking bubble edge is invalid",fastBubbles:"Fast bubbles",harderToPop:"Harder to pop, requires higher accuracy",slowBubbles:"Slow bubbles",easierToPop:"Relatively easier to pop",emotionBubbleScore:"Emotion Bubble Score",angryBubble:"Angry bubble",anxiousBubble:"Anxious bubble",depressedBubble:"Depressed bubble",stressedBubble:"Stressed bubble",irritatedBubble:"Irritated bubble",frustratedBubble:"Frustrated bubble",points:"points",specialBubbles:"Special Bubbles",bombBubble:"Bomb bubble",clearAllNearby:"Clear all nearby bubbles",goldenBubble:"Golden bubble",doubleScore:"Double score",ghostBubble:"Ghost bubble",clickTwice:"Need to click twice",chainBubble:"Chain bubble",clearSameType:"Clear same type bubbles",timeBubble:"Time bubble",add5Seconds:"Add 5 seconds",accuracySystem:"Accuracy System",above:"above",triggerPowerMode:"Trigger power mode",goodAccuracy:"Good accuracy",below:"below",needImproveAccuracy:"Need to improve accuracy",powerMode:"Power Mode",autoTrigger:"Auto trigger",powerModeEasier:"Easier to pop bubbles in power mode",last10Seconds:"Last 10 seconds then auto end",comboSystem:"Combo System",continuousPopExtraScore:"Continuous pop for extra score",timeLimit:"Time Limit",sixtySecondsHighestScore:"60 seconds to get highest score",gameGoal:"Game Goal",precisePopEmotionBubbles:"Precisely pop emotion bubbles, release inner pressure",accuracyChallenge:"Accuracy Challenge",onlyClickCenterToPop:"Only by clicking the center of the bubble can you pop it",fastBubblesNeedHigherAccuracy:"Fast bubbles require higher accuracy"},ja:{title:"",start:"",restart:"",score:"",time:"",combo:"",accuracy:"",highScore:"",rules:"",close:"",hideRules:"",gameplay:"",clickStartButton:"",preciseBubblePop:"",computer:"",preciseClickCenter:"",mobile:"",preciseTouchCenter:"",highAccuracyRequired:"",fastBubbles:"",harderToPop:"",slowBubbles:"",easierToPop:"",emotionBubbleScore:"",angryBubble:"",anxiousBubble:"",depressedBubble:"",stressedBubble:"",irritatedBubble:"",frustratedBubble:"",points:"",specialBubbles:"",bombBubble:"",clearAllNearby:"",goldenBubble:"",doubleScore:"",ghostBubble:"",clickTwice:"2",chainBubble:"",clearSameType:"",timeBubble:"",add5Seconds:"5",accuracySystem:"",above:"",triggerPowerMode:"",goodAccuracy:"",below:"",needImproveAccuracy:"",powerMode:"",autoTrigger:"",powerModeEasier:"",last10Seconds:"10",comboSystem:"",continuousPopExtraScore:"",timeLimit:"",sixtySecondsHighestScore:"60",gameGoal:"",precisePopEmotionBubbles:"",accuracyChallenge:"",onlyClickCenterToPop:"",fastBubblesNeedHigherAccuracy:""},ko:{title:" ",start:" ",restart:" ",score:"",time:"",combo:"",accuracy:"",highScore:" ",rules:" ",close:"",hideRules:" ",gameplay:" ",clickStartButton:"  ",preciseBubblePop:"  ",computer:"",preciseClickCenter:"    ",mobile:"",preciseTouchCenter:"    ",highAccuracyRequired:"  ,    ",fastBubbles:" ",harderToPop:" ,    ",slowBubbles:" ",easierToPop:"  ",emotionBubbleScore:"  ",angryBubble:" ",anxiousBubble:" ",depressedBubble:" ",stressedBubble:" ",irritatedBubble:" ",frustratedBubble:" ",points:"",specialBubbles:" ",bombBubble:" ",clearAllNearby:"   ",goldenBubble:" ",doubleScore:" ",ghostBubble:" ",clickTwice:"   ",chainBubble:" ",clearSameType:"   ",timeBubble:" ",add5Seconds:"5 ",accuracySystem:" ",above:"",triggerPowerMode:"  ",goodAccuracy:" ",below:"",needImproveAccuracy:"  ",powerMode:" ",autoTrigger:" ",powerModeEasier:"    ",last10Seconds:"10    ",comboSystem:" ",continuousPopExtraScore:"   ",timeLimit:" ",sixtySecondsHighestScore:"60    ",gameGoal:" ",precisePopEmotionBubbles:"      ",accuracyChallenge:" ",onlyClickCenterToPop:"     ",fastBubblesNeedHigherAccuracy:"     "},vi:{title:"Bong Bng N",start:"Bt u Tr Chi",restart:"Chi Li",score:"im",time:"Thi Gian",combo:"Combo",accuracy:" Chnh Xc",highScore:"im Cao Nht",rules:"Lut Chi",close:"ng",hideRules:"n Lut",gameplay:"Cch Chi",clickStartButton:'Nhp vo nt "Bt u Tr Chi"',preciseBubblePop:"Bong Bng N Chnh Xc",computer:"My tnh",preciseClickCenter:"Nhp chnh xc vo trung tm bong bng  n",mobile:"in thoi",preciseTouchCenter:"Chm chnh xc vo trung tm bong bng  n",highAccuracyRequired:"Cn  chnh xc cao, nhp vo cnh bong bng khng hiu qu",fastBubbles:"Bong bng nhanh",harderToPop:"Kh n hn, cn  chnh xc cao hn",slowBubbles:"Bong bng chm",easierToPop:"Tng i d n",emotionBubbleScore:"im Bong Bng Cm Xc",angryBubble:"Bong bng gin d",anxiousBubble:"Bong bng lo lng",depressedBubble:"Bong bng trm cm",stressedBubble:"Bong bng cng thng",irritatedBubble:"Bong bng kh chu",frustratedBubble:"Bong bng tht vng",points:"im",specialBubbles:"Bong Bng c Bit",bombBubble:"Bong bng bom",clearAllNearby:"Xa tt c bong bng gn ",goldenBubble:"Bong bng vng",doubleScore:"im gp i",ghostBubble:"Bong bng ma",clickTwice:"Cn nhp hai ln",chainBubble:"Bong bng chui",clearSameType:"Xa bong bng cng loi",timeBubble:"Bong bng thi gian",add5Seconds:"Thm 5 giy",accuracySystem:"H Thng Chnh Xc",above:"trn",triggerPowerMode:"Kch hot ch  nng lng",goodAccuracy:" chnh xc tt",below:"di",needImproveAccuracy:"Cn ci thin  chnh xc",powerMode:"Ch  Nng Lng",autoTrigger:"T ng kch hot",powerModeEasier:"D n bong bng hn trong ch  nng lng",last10Seconds:"Ko di 10 giy ri t ng kt thc",comboSystem:"H Thng Combo",continuousPopExtraScore:"N lin tc  c im thm",timeLimit:"Gii Hn Thi Gian",sixtySecondsHighestScore:"60 giy  t im cao nht",gameGoal:"Mc Tiu Tr Chi",precisePopEmotionBubbles:"N chnh xc bong bng cm xc, gii phng p lc bn trong",accuracyChallenge:"Th Thch  Chnh Xc",onlyClickCenterToPop:"Ch bng cch nhp vo trung tm bong bng mi c th n",fastBubblesNeedHigherAccuracy:"Bong bng nhanh cn  chnh xc cao hn"},th:{title:"",start:"",restart:"",score:"",time:"",combo:"",accuracy:"",highScore:"",rules:"",close:"",hideRules:"",gameplay:"",clickStartButton:' ""',preciseBubblePop:"",computer:"",preciseClickCenter:"",mobile:"",preciseTouchCenter:"",highAccuracyRequired:" ",fastBubbles:"",harderToPop:" ",slowBubbles:"",easierToPop:"",emotionBubbleScore:"",angryBubble:"",anxiousBubble:"",depressedBubble:"",stressedBubble:"",irritatedBubble:"",frustratedBubble:"",points:"",specialBubbles:"",bombBubble:"",clearAllNearby:"",goldenBubble:"",doubleScore:"",ghostBubble:"",clickTwice:"",chainBubble:"",clearSameType:"",timeBubble:"",add5Seconds:" 5 ",accuracySystem:"",above:"",triggerPowerMode:"",goodAccuracy:"",below:"",needImproveAccuracy:"",powerMode:"",autoTrigger:"",powerModeEasier:"",last10Seconds:" 10 ",comboSystem:"",continuousPopExtraScore:"",timeLimit:"",sixtySecondsHighestScore:"60 ",gameGoal:"",precisePopEmotionBubbles:" ",accuracyChallenge:"",onlyClickCenterToPop:"",fastBubblesNeedHigherAccuracy:""},la:{title:"Bulla Explodere",start:"Ludum Incipere",restart:"Iterum Incipere",score:"Puncta",time:"Tempus",combo:"Combo",accuracy:"Accuratio",highScore:"Puncta Maxima",rules:"Regulae Ludi",close:"Claudere",hideRules:"Regulae Occultare",gameplay:"Ludus",clickStartButton:'Clicca "Ludum Incipere" pugnum',preciseBubblePop:"Bulla Accurata Explodere",computer:"Computatrum",preciseClickCenter:"Clicca accurate centrum bullae ut explodat",mobile:"Mobile",preciseTouchCenter:"Tange accurate centrum bullae ut explodat",highAccuracyRequired:"Accuratio alta requiritur, cliccare marginem bullae invalidum est",fastBubbles:"Bullae veloces",harderToPop:"Difficilius explodere, accuratio altior requiritur",slowBubbles:"Bullae tardae",easierToPop:"Relativiter facilius explodere",emotionBubbleScore:"Puncta Bullae Emotionis",angryBubble:"Bulla irata",anxiousBubble:"Bulla anxia",depressedBubble:"Bulla depressa",stressedBubble:"Bulla pressa",irritatedBubble:"Bulla irritata",frustratedBubble:"Bulla frustrata",points:"puncta",specialBubbles:"Bullae Speciales",bombBubble:"Bulla bomba",clearAllNearby:"Clara omnes bullas proximas",goldenBubble:"Bulla aurea",doubleScore:"Puncta dupla",ghostBubble:"Bulla phantasma",clickTwice:"Opus est bis cliccare",chainBubble:"Bulla catena",clearSameType:"Clara bullas eiusdem generis",timeBubble:"Bulla temporis",add5Seconds:"Adde 5 secundis",accuracySystem:"Systema Accurationis",above:"supra",triggerPowerMode:"Activa modum potentiae",goodAccuracy:"Accuratio bona",below:"infra",needImproveAccuracy:"Opus est accuratio meliorare",powerMode:"Modus Potentiae",autoTrigger:"Auto activa",powerModeEasier:"Facilius explodere bullas in modo potentiae",last10Seconds:"Dura 10 secundis deinde auto finis",comboSystem:"Systema Combo",continuousPopExtraScore:"Explodere continuum pro punctis extra",timeLimit:"Finis Temporis",sixtySecondsHighestScore:"60 secundis pro punctis maximis",gameGoal:"Finis Ludi",precisePopEmotionBubbles:"Explodere accurate bullas emotionis, libera pressionem internam",accuracyChallenge:"Provocatio Accurationis",onlyClickCenterToPop:"Solum cliccare centrum bullae potest explodere",fastBubblesNeedHigherAccuracy:"Bullae veloces accuratio altior requiritur"},ms:{title:"Letup Buih",start:"Mulakan Permainan",restart:"Mulakan Semula",score:"Markah",time:"Masa",combo:"Combo",accuracy:"Ketepatan",highScore:"Markah Tertinggi",rules:"Peraturan Permainan",close:"Tutup",hideRules:"Sembunyikan Peraturan",gameplay:"Cara Bermain",clickStartButton:'Klik butang "Mulakan Permainan"',preciseBubblePop:"Letup Buih Tepat",computer:"Komputer",preciseClickCenter:"Klik tepat di tengah buih untuk meletup",mobile:"Mudah alih",preciseTouchCenter:"Sentuh tepat di tengah buih untuk meletup",highAccuracyRequired:"Ketepatan tinggi diperlukan, mengklik tepi buih tidak sah",fastBubbles:"Buih pantas",harderToPop:"Lebih sukar untuk meletup, memerlukan ketepatan lebih tinggi",slowBubbles:"Buih perlahan",easierToPop:"Relatif lebih mudah untuk meletup",emotionBubbleScore:"Markah Buih Emosi",angryBubble:"Buih marah",anxiousBubble:"Buih cemas",depressedBubble:"Buih tertekan",stressedBubble:"Buih tertekan",irritatedBubble:"Buih jengkel",frustratedBubble:"Buih kecewa",points:"markah",specialBubbles:"Buih Khas",bombBubble:"Buih bom",clearAllNearby:"Kosongkan semua buih berdekatan",goldenBubble:"Buih emas",doubleScore:"Markah berganda",ghostBubble:"Buih hantu",clickTwice:"Perlu klik dua kali",chainBubble:"Buih rantai",clearSameType:"Kosongkan buih jenis sama",timeBubble:"Buih masa",add5Seconds:"Tambah 5 saat",accuracySystem:"Sistem Ketepatan",above:"ke atas",triggerPowerMode:"Pencetus mod kuasa",goodAccuracy:"Ketepatan baik",below:"ke bawah",needImproveAccuracy:"Perlu tingkatkan ketepatan",powerMode:"Mod Kuasa",autoTrigger:"Pencetus automatik",powerModeEasier:"Lebih mudah meletup buih dalam mod kuasa",last10Seconds:"Bertahan 10 saat kemudian tamat automatik",comboSystem:"Sistem Combo",continuousPopExtraScore:"Letup berterusan untuk markah tambahan",timeLimit:"Had Masa",sixtySecondsHighestScore:"60 saat untuk markah tertinggi",gameGoal:"Matlamat Permainan",precisePopEmotionBubbles:"Letup tepat buih emosi, lepaskan tekanan dalaman",accuracyChallenge:"Cabaran Ketepatan",onlyClickCenterToPop:"Hanya dengan mengklik pusat buih boleh meletup",fastBubblesNeedHigherAccuracy:"Buih pantas memerlukan ketepatan lebih tinggi"}};return((Le=H[e])==null?void 0:Le[J])||H["zh-TW"][J]||J},[l,c]=m.useState(60),[u,h]=m.useState(0),[p,g]=m.useState(0),[y,k]=m.useState(!1),[j,T]=m.useState(0),[x,b]=m.useState(!1),[v,z]=m.useState(0),[D,P]=m.useState(0),[_,S]=m.useState(0),[R,E]=m.useState(!1),[A,B]=m.useState(0),[I,re]=m.useState([]),[Q,X]=m.useState([]);m.useEffect(()=>{const J=localStorage.getItem("bubblePopHighScore");J&&g(parseInt(J))},[]);const de=[{color:"#ff6b6b",emotion:"",points:10,name:""},{color:"#4ecdc4",emotion:"",points:15,name:""},{color:"#ffe66d",emotion:"",points:20,name:""},{color:"#a8e6cf",emotion:"",points:25,name:""},{color:"#ff8a80",emotion:"",points:30,name:""},{color:"#9575cd",emotion:"",points:35,name:""}],V=()=>{const J=["","","","",""];return J[Math.floor(Math.random()*J.length)]},[ee]=m.useState(V()),he=()=>{i(!0),s(0),c(60),h(0),re([]),X([]),z(0),P(0),S(0),E(!1),B(0)},ve=()=>{if(!n)return;const J=de[Math.floor(Math.random()*de.length)],H=Math.random()*80+10,Le=Math.random()*80+10,Y=Math.random();let ae;Y<.3?ae=Math.random()*10+15:Y<.6?ae=Math.random()*15+25:Y<.85?ae=Math.random()*20+40:ae=Math.random()*25+60;const Ie=Math.random();let xe="normal",_e=J.points,we=J.color,qe=J.emotion;if(Ie<.05)xe="bomb",_e=50,we="#ff4757",qe="",ae=Math.random()*15+45;else if(Ie<.1)xe="golden",_e=100,we="#ffa502",qe="",ae=Math.random()*20+50;else{if(Ie<.15)return xe="ghost",_e=30,we="#a4b0be",qe="",ae=Math.random()*10+20,{id:Date.now(),x:H,y:Le,size:ae,color:we,emotion:qe,points:_e,speed:Math.random()*3+2,opacity:.8+Math.random()*.2,type:xe,health:2};Ie<.2?(xe="chain",_e=40,we="#2ed573",qe="",ae=Math.random()*15+35):Ie<.25&&(xe="time",_e=25,we="#3742fa",qe="",ae=Math.random()*12+25)}const gt={id:Date.now(),x:H,y:Le,size:ae,color:we,emotion:qe,points:_e,speed:Math.random()*3+1.5,opacity:.8+Math.random()*.2,type:xe,chainId:xe==="chain"?Math.floor(Math.random()*1e3):void 0,timeBonus:xe==="time"?5:void 0};re(ht=>[...ht,gt])},be=J=>{const H=I.find(xe=>xe.id===J);if(!H)return;const Le=Math.floor(u/5)*5;let Y=H.points+Le;if(H.type==="bomb"){const xe=I.filter(_e=>_e.id!==J&&Math.sqrt(Ig(_e.x-H.x,2)+Ig(_e.y-H.y,2))<15);xe.forEach(_e=>{Y+=_e.points,h(we=>we+1)}),re(_e=>_e.filter(we=>we.id!==J&&!xe.find(qe=>qe.id===we.id)))}else if(H.type==="golden")Y*=2,re(xe=>xe.filter(_e=>_e.id!==J));else if(H.type==="ghost"){if(H.health&&H.health>1){re(xe=>xe.map(_e=>_e.id===J?We(ke({},_e),{health:_e.health-1}):_e));return}re(xe=>xe.filter(_e=>_e.id!==J))}else if(H.type==="chain"){const xe=I.filter(_e=>_e.id!==J&&_e.chainId===H.chainId);xe.forEach(_e=>{Y+=_e.points,h(we=>we+1)}),re(_e=>_e.filter(we=>we.id!==J&&!xe.find(qe=>qe.id===we.id)))}else H.type==="time"?(c(xe=>xe+(H.timeBonus||5)),re(xe=>xe.filter(_e=>_e.id!==J))):re(xe=>xe.filter(_e=>_e.id!==J));s(xe=>xe+Y),h(xe=>xe+1),T(3),u>=4&&(b(!0),Ce(),setTimeout(()=>b(!1),1e3));const ae=H.type==="bomb"?15:8,Ie=[];for(let xe=0;xe<ae;xe++){const _e=xe/ae*Math.PI*2,we=2+Math.random()*3;Ie.push({id:Date.now()+xe,x:H.x,y:H.y,vx:Math.cos(_e)*we,vy:Math.sin(_e)*we,color:H.color,life:1})}X(xe=>[...xe,...Ie])},te=()=>{i(!1),o>p&&(g(o),localStorage.setItem("bubblePopHighScore",o.toString()))};m.useEffect(()=>{if(!n)return;const J=setInterval(()=>{const H=.03+(60-l)*.001,Le=Math.min(.15,H*1.8);Math.random()<Le&&ve(),re(Y=>Y.map(ae=>We(ke({},ae),{y:ae.y-ae.speed*1.2,opacity:ae.opacity-.003,x:ae.x+(Math.random()-.5)*.4})).filter(ae=>ae.y>-10&&ae.opacity>.1)),X(Y=>Y.map(ae=>We(ke({},ae),{x:ae.x+ae.vx,y:ae.y+ae.vy,vy:ae.vy+.1,life:ae.life-.02})).filter(ae=>ae.life>0)),j>0?T(Y=>Y-.05):u>0&&h(0),A>0?B(Y=>Y-.05):R&&E(!1)},30);return()=>clearInterval(J)},[n]),m.useEffect(()=>{if(!n||l<=0)return;const J=setInterval(()=>{c(H=>H<=1?(te(),0):H-1)},1e3);return()=>clearInterval(J)},[n,l]),m.useEffect(()=>{},[n,I]);const[N,O]=m.useState(null),[oe,ge]=m.useState(!0);m.useEffect(()=>{if(typeof window!="undefined"&&window.AudioContext){const J=new AudioContext;O(J)}},[]);const je=()=>{if(!(!N||!oe))try{const J=N.createOscillator(),H=N.createGain();J.connect(H),H.connect(N.destination),J.type="sine",J.frequency.setValueAtTime(800,N.currentTime),J.frequency.exponentialRampToValueAtTime(200,N.currentTime+.1),H.gain.setValueAtTime(.3,N.currentTime),H.gain.exponentialRampToValueAtTime(.01,N.currentTime+.1),J.start(N.currentTime),J.stop(N.currentTime+.1)}catch(J){console.log(":",J)}},Ce=()=>{if(!(!N||!oe))try{const J=N.createOscillator(),H=N.createGain();J.connect(H),H.connect(N.destination),J.type="square",J.frequency.setValueAtTime(1e3,N.currentTime),J.frequency.exponentialRampToValueAtTime(400,N.currentTime+.2),H.gain.setValueAtTime(.2,N.currentTime),H.gain.exponentialRampToValueAtTime(.01,N.currentTime+.2),J.start(N.currentTime),J.stop(N.currentTime+.2)}catch(J){console.log(":",J)}},He=()=>{if(!(!N||!oe))try{const J=N.createOscillator(),H=N.createGain();J.connect(H),H.connect(N.destination),J.type="sawtooth",J.frequency.setValueAtTime(600,N.currentTime),J.frequency.exponentialRampToValueAtTime(1200,N.currentTime+.3),H.gain.setValueAtTime(.15,N.currentTime),H.gain.exponentialRampToValueAtTime(.01,N.currentTime+.3),J.start(N.currentTime),J.stop(N.currentTime+.3)}catch(J){console.log(":",J)}};return r.jsxs("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative",overflow:"auto",cursor:n?"pointer":"default",touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},onClick:J=>{J.preventDefault(),J.stopPropagation()},onMouseDown:J=>{J.preventDefault(),J.stopPropagation()},children:[r.jsx("style",{children:`
          @keyframes float {
            0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
            50% { transform: translate(-50%, -50%) translateY(-10px); }
          }
          @keyframes comboEffect {
            0% { 
              transform: translate(-50%, -50%) scale(0.5);
              opacity: 0;
            }
            50% { 
              transform: translate(-50%, -50%) scale(1.2);
              opacity: 1;
            }
            100% { 
              transform: translate(-50%, -50%) scale(1);
              opacity: 0;
            }
          }
          @keyframes powerMode {
            0% { 
              opacity: 0.7;
              textShadow: 0 0 5px #FF5722;
            }
            100% { 
              opacity: 1;
              textShadow: 0 0 15px #FF5722, 0 0 25px #FF5722;
            }
          }
          @keyframes popEffect {
            0% { 
              transform: translate(-50%, -50%) scale(1);
              opacity: 1;
            }
            50% { 
              transform: translate(-50%, -50%) scale(1.3);
              opacity: 0.8;
            }
            100% { 
              transform: translate(-50%, -50%) scale(0);
              opacity: 0;
            }
          }
        `}),r.jsx("button",{onClick:t,style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(20px, 4vw, 40px)",background:"#fff",border:"2px solid #9C27B0",borderRadius:"50%",width:"clamp(40px, 8vw, 50px)",height:"clamp(40px, 8vw, 50px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"clamp(1.2rem, 3vw, 1.5rem)",zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:""}),r.jsxs("div",{style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(80px, 16vw, 100px)",background:"rgba(255,255,255,0.9)",borderRadius:"15px",padding:"clamp(12px, 2.5vw, 16px)",zIndex:5,maxWidth:"180px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsxs("h3",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",margin:0,lineHeight:"1.2"},children:[" ",a("title")]}),r.jsx("button",{onClick:()=>k(!y),style:{background:"#9C27B0",color:"#fff",border:"none",borderRadius:"12px",padding:"2px 8px",fontSize:"clamp(0.6rem, 1.5vw, 0.7rem)",cursor:"pointer"},children:a(y?"hideRules":"rules")})]}),!y&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",gap:"clamp(4px, 1vw, 8px)",justifyContent:"center",flexWrap:"wrap",marginBottom:"6px"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)"},children:[a("score"),"",o]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)"},children:[a("time"),"",l,""]}),r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",color:u>=5?"#ff6b6b":u>=3?"#ffa502":"#333",fontWeight:u>=3?"bold":"normal"},children:[a("combo"),"",u]})]}),r.jsxs("div",{style:{display:"flex",gap:"clamp(4px, 1vw, 8px)",justifyContent:"center",flexWrap:"wrap",marginBottom:"6px"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",color:v>=80?"#4CAF50":v>=60?"#FF9800":"#F44336"},children:[a("accuracy"),"",v.toFixed(1),"%"]}),R&&r.jsx("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",color:"#FF5722",fontWeight:"bold",animation:"powerMode 0.5s ease-in-out infinite alternate"},children:""})]}),r.jsxs("div",{style:{display:"flex",gap:"clamp(4px, 1vw, 8px)",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs("div",{style:{fontSize:"clamp(0.6rem, 1.5vw, 0.75rem)"},children:["",I.length]}),r.jsxs("div",{style:{fontSize:"clamp(0.6rem, 1.5vw, 0.75rem)"},children:[a("highScore"),"",p]}),r.jsx("div",{style:{fontSize:"clamp(0.6rem, 1.5vw, 0.75rem)",color:I.some(J=>J.speed>=3)?"#ff6b6b":I.some(J=>J.speed>=2)?"#ffa502":"#4CAF50"},children:I.some(J=>J.speed>=3)?" ":I.some(J=>J.speed>=2)?" ":" "})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"clamp(4px, 1vw, 8px)",gap:"clamp(4px, 1vw, 8px)"},children:r.jsxs("button",{onClick:()=>ge(!oe),style:{background:oe?"#4CAF50":"#f44336",color:"white",border:"none",borderRadius:"8px",padding:"clamp(2px, 0.5vw, 4px) clamp(6px, 1.5vw, 8px)",fontSize:"clamp(0.5rem, 1.2vw, 0.6rem)",cursor:"pointer",display:"flex",alignItems:"center",gap:"2px"},children:[oe?"":""," ",a(oe?"soundOn":"soundOff")]})}),r.jsx("div",{style:{fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",color:"#9C27B0",fontWeight:"bold",marginTop:"6px",textAlign:"center"},children:ee}),!n&&r.jsx("button",{onClick:he,style:{background:"#9C27B0",color:"#fff",border:"none",borderRadius:"20px",padding:"clamp(5px, 1.2vw, 6px) clamp(12px, 2.5vw, 18px)",fontSize:"clamp(0.8rem, 2vw, 0.9rem)",fontWeight:"bold",marginTop:"8px",cursor:"pointer",transition:"all 0.3s ease"},children:a("start")})]}),y&&r.jsxs("div",{style:{maxHeight:"200px",overflowY:"auto",fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",lineHeight:"1.4"},children:[r.jsxs("h4",{style:{margin:"0 0 8px 0",color:"#9C27B0"},children:[a("gameplay"),""]}),r.jsxs("ul",{style:{margin:"0",paddingLeft:"15px"},children:[r.jsxs("li",{children:[r.jsx("strong",{children:a("start")}),"",a("clickStartButton")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("preciseBubblePop")}),"",r.jsx("br",{}),a("computer"),"",a("preciseClickCenter"),r.jsx("br",{}),a("mobile"),"",a("preciseTouchCenter"),r.jsx("br",{})," ",a("highAccuracyRequired"),r.jsx("br",{})," ",a("fastBubbles"),"",a("harderToPop"),r.jsx("br",{})," ",a("slowBubbles"),"",a("easierToPop")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("emotionBubbleScore")}),"",r.jsx("br",{})," ",a("angryBubble"),"10",a("points"),r.jsx("br",{})," ",a("anxiousBubble"),"15",a("points"),r.jsx("br",{})," ",a("depressedBubble"),"20",a("points"),r.jsx("br",{})," ",a("stressedBubble"),"25",a("points"),r.jsx("br",{})," ",a("irritatedBubble"),"30",a("points"),r.jsx("br",{})," ",a("frustratedBubble"),"35",a("points")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("specialBubbles")}),"",r.jsx("br",{})," ",a("bombBubble"),"50",a("points"),"",a("clearAllNearby"),r.jsx("br",{})," ",a("goldenBubble"),"100",a("points"),"",a("doubleScore"),r.jsx("br",{})," ",a("ghostBubble"),"30",a("points"),"",a("clickTwice"),r.jsx("br",{})," ",a("chainBubble"),"40",a("points"),"",a("clearSameType"),r.jsx("br",{})," ",a("timeBubble"),"25",a("points"),"",a("add5Seconds")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("accuracySystem")}),"",r.jsx("br",{})," 80%",a("above"),"",a("triggerPowerMode"),r.jsx("br",{})," 60-79%",a("goodAccuracy"),r.jsx("br",{})," 60%",a("below"),"",a("needImproveAccuracy")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("powerMode")}),"",r.jsx("br",{})," 80%",a("above"),a("autoTrigger"),r.jsx("br",{})," ",a("powerModeEasier"),r.jsx("br",{})," ",a("last10Seconds")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("comboSystem")}),"",a("continuousPopExtraScore")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("timeLimit")}),"",a("60SecondsHighestScore")]}),r.jsxs("li",{children:[r.jsx("strong",{children:a("gameGoal")}),"",a("precisePopEmotionBubbles"),""]})]})]})]}),I.map(J=>{const H=J.type==="bomb"?{animation:"float 2s ease-in-out infinite",boxShadow:"0 0 20px #ff4757"}:J.type==="golden"?{animation:"float 1.5s ease-in-out infinite",boxShadow:"0 0 25px #ffa502"}:J.type==="ghost"?{animation:"float 1s ease-in-out infinite",opacity:.6}:J.type==="chain"?{animation:"float 1.8s ease-in-out infinite",boxShadow:"0 0 15px #2ed573"}:J.type==="time"?{animation:"float 1.2s ease-in-out infinite",boxShadow:"0 0 18px #3742fa"}:{};return r.jsx("div",{style:ke({position:"absolute",left:`${J.x}%`,top:`${J.y}%`,transform:"translate(-50%, -50%)",width:`${J.size*1.8}px`,height:`${J.size*1.8}px`,background:`radial-gradient(circle at 30% 30%, ${J.color}40, ${J.color})`,borderRadius:"50%",border:`2px solid ${J.color}80`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:`${Math.max(12,J.size*.4)}px`,opacity:J.opacity,cursor:"pointer",transition:"all 0.2s ease",zIndex:20},H),onMouseEnter:Le=>{Le.currentTarget.style.transform="translate(-50%, -50%) scale(1.1)"},onMouseLeave:Le=>{Le.currentTarget.style.transform="translate(-50%, -50%) scale(1)"},onClick:Le=>{if(Le.preventDefault(),Le.stopPropagation(),console.log(":",J.id),n){const Y=Le.currentTarget;Y.style.animation="popEffect 0.4s ease-out forwards";const ae=Y.getBoundingClientRect(),Ie=ae.left+ae.width/2,xe=ae.top+ae.height/2;for(let _e=0;_e<12;_e++){const we=document.createElement("div");we.style.position="fixed",we.style.left=Ie+"px",we.style.top=xe+"px",we.style.width="6px",we.style.height="6px",we.style.background=J.color,we.style.borderRadius="50%",we.style.pointerEvents="none",we.style.zIndex="1000",we.style.boxShadow=`0 0 8px ${J.color}`,we.style.transition="all 0.6s ease",document.body.appendChild(we);const qe=_e*30*Math.PI/180,gt=60+Math.random()*40,ht=Ie+Math.cos(qe)*gt,St=xe+Math.sin(qe)*gt;setTimeout(()=>{we.style.left=ht+"px",we.style.top=St+"px",we.style.opacity="0",we.style.transform="scale(0)"},10),setTimeout(()=>{document.body.contains(we)&&document.body.removeChild(we)},600)}P(_e=>_e+1),S(_e=>_e+1),be(J.id),je(),v>=80&&!R&&(E(!0),B(10),He()),z(D>0?_/D*100:0)}},onTouchStart:Le=>{Le.preventDefault(),Le.stopPropagation(),console.log(":",J.id);const Y=Le.currentTarget;if(Y.style.transform="translate(-50%, -50%) scale(1.2)",Y.style.transition="transform 0.1s ease",setTimeout(()=>{Y.style.transform="translate(-50%, -50%) scale(1)"},100),n){console.log(":",J.id);const ae=Le.currentTarget;ae.style.animation="popEffect 0.4s ease-out forwards";const Ie=ae.getBoundingClientRect(),xe=Ie.left+Ie.width/2,_e=Ie.top+Ie.height/2;for(let we=0;we<12;we++){const qe=document.createElement("div");qe.style.position="fixed",qe.style.left=xe+"px",qe.style.top=_e+"px",qe.style.width="6px",qe.style.height="6px",qe.style.background=J.color,qe.style.borderRadius="50%",qe.style.pointerEvents="none",qe.style.zIndex="1000",qe.style.boxShadow=`0 0 8px ${J.color}`,qe.style.transition="all 0.6s ease",document.body.appendChild(qe);const gt=we*30*Math.PI/180,ht=60+Math.random()*40,St=xe+Math.cos(gt)*ht,_t=_e+Math.sin(gt)*ht;setTimeout(()=>{qe.style.left=St+"px",qe.style.top=_t+"px",qe.style.opacity="0",qe.style.transform="scale(0)"},10),setTimeout(()=>{document.body.contains(qe)&&document.body.removeChild(qe)},600)}P(we=>we+1),S(we=>we+1),be(J.id),je(),v>=80&&!R&&(E(!0),B(10),He()),z(D>0?_/D*100:0)}},children:J.emotion},J.id)}),Q.map(J=>r.jsx("div",{style:{position:"absolute",left:`${J.x}%`,top:`${J.y}%`,transform:"translate(-50%, -50%)",width:"4px",height:"4px",background:J.color,borderRadius:"50%",opacity:J.life,pointerEvents:"none"}},J.id)),x&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:"bold",color:"#ff6b6b",textShadow:"0 0 20px #ff6b6b",animation:"comboEffect 1s ease-out forwards",pointerEvents:"none",zIndex:1e3},children:["COMBO x",u,"!"]}),!n&&r.jsxs("div",{style:{position:"absolute",bottom:"clamp(20px, 4vw, 40px)",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",color:"#fff",padding:"clamp(8px, 2vw, 12px)",borderRadius:"10px",fontSize:"clamp(0.7rem, 1.8vw, 0.85rem)",textAlign:"center",zIndex:100},children:[" ",a("accuracyChallenge"),"",a("onlyClickCenterToPop"),"",r.jsx("br",{})," ",a("fastBubblesNeedHigherAccuracy"),""]}),!n&&o>0&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",textAlign:"center",zIndex:1001,minWidth:"clamp(250px, 50vw, 350px)"},children:[r.jsx("h2",{style:{fontSize:"clamp(1.5rem, 3.5vw, 2rem)",margin:"0 0 15px 0",color:"#9C27B0"},children:""}),r.jsxs("div",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",marginBottom:"10px"},children:["",o]}),r.jsxs("div",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",marginBottom:"20px",color:"#666"},children:["",p]}),r.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[r.jsx("button",{onClick:he,style:{background:"#9C27B0",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer"},children:""}),r.jsx("button",{onClick:t,style:{background:"#666",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer"},children:""})]})]})]})}function VV({onClose:t}){const{lang:e}=dt(),[n,i]=m.useState(0),[o,s]=m.useState(0),[a,l]=m.useState(!1),[c,u]=m.useState(60),[h,p]=m.useState(50),[g,y]=m.useState([]),[k,j]=m.useState(3),[T,x]=m.useState(1),[b,v]=m.useState(0),[z,D]=m.useState(!1),[P,_]=m.useState(!1),[S,R]=m.useState(!1),[E,A]=m.useState(!1),[B,I]=m.useState(!1),[re,Q]=m.useState({x:0,y:0}),X=N=>{var oe;const O={"zh-TW":{score:"",time:"",level:"",combo:"",title:"",rules:"",close:"",gameOver:"",controlMethod:"",useArrowKeysOrButtons:"   ",moveLeftRightToAvoid:"",gameObjective:"",avoidAllObstacles:"",successfulAvoidance:"5 + ",collisionPenalty:"10",scoringSystem:"",baseScore:" +5",comboBonus:" +1",levelUp:"100",speedIncrease:"",gameTime:"",sixtySecondsPerGame:"60",autoScoreWhenTimeUp:""},"zh-CN":{score:"",time:"",level:"",combo:"",title:"",rules:"",close:"",controlMethod:"",useArrowKeysOrButtons:"   ",moveLeftRightToAvoid:"",gameObjective:"",avoidAllObstacles:"",successfulAvoidance:"5 + ",collisionPenalty:"10",scoringSystem:"",baseScore:" +5",comboBonus:" +1",levelUp:"100",speedIncrease:"",gameTime:"",sixtySecondsPerGame:"60",autoScoreWhenTimeUp:""},en:{score:"Score",time:"Time",level:"Level",combo:"Combo",title:"Speed Racing",rules:"Game Rules",close:"Close",controlMethod:"Control Method",useArrowKeysOrButtons:"Use arrow keys   or screen buttons to control the race car",moveLeftRightToAvoid:"Move left and right to avoid obstacles",gameObjective:"Game Objective",avoidAllObstacles:"Avoid all obstacles (stones, cars, trucks)",successfulAvoidance:"Successfully avoid to get 5 points + combo bonus",collisionPenalty:"Colliding with obstacles deducts 10 points and resets combo",scoringSystem:"Scoring System",baseScore:"Base score: avoid obstacles +5 points",comboBonus:"Combo bonus: +1 point for each combo",levelUp:"Level up: gain one level every 100 points",speedIncrease:"Speed increase: the higher the level, the faster obstacles move",gameTime:"Game Time",sixtySecondsPerGame:"60 seconds per game",autoScoreWhenTimeUp:"Auto score when time is up"},ja:{score:"",time:"",level:"",combo:"",title:"",rules:"",close:"",controlMethod:"",useArrowKeysOrButtons:"   ",moveLeftRightToAvoid:"",gameObjective:"",avoidAllObstacles:"",successfulAvoidance:"5 + ",collisionPenalty:"10",scoringSystem:"",baseScore:" +5",comboBonus:" +1",levelUp:"1001",speedIncrease:"",gameTime:"",sixtySecondsPerGame:"60",autoScoreWhenTimeUp:""},ko:{score:"",time:"",level:"",combo:"",title:" ",rules:" ",close:"",controlMethod:" ",useArrowKeysOrButtons:"        ",moveLeftRightToAvoid:"   ",gameObjective:" ",avoidAllObstacles:" ",successfulAvoidance:"  5 +  ",collisionPenalty:"  10   ",scoringSystem:" ",baseScore:"   +5",comboBonus:"   +1",levelUp:" 100 1 ",speedIncrease:"     ",gameTime:" ",sixtySecondsPerGame:" 60",autoScoreWhenTimeUp:"    "},vi:{score:"im",time:"Thi Gian",level:"Cp ",combo:"Combo",title:"ua Xe Tc ",rules:"Lut Chi",close:"ng",controlMethod:"Phng Php iu Khin",useArrowKeysOrButtons:"S dng phm mi tn   hoc nt mn hnh  iu khin xe ua",moveLeftRightToAvoid:"Di chuyn tri phi  trnh chng ngi vt",gameObjective:"Mc Tiu Tr Chi",avoidAllObstacles:"Trnh tt c chng ngi vt (, xe hi, xe ti)",successfulAvoidance:"Trnh thnh cng c 5 im + phn thng combo",collisionPenalty:"Va chm vi chng ngi vt tr 10 im v reset combo",scoringSystem:"H Thng im",baseScore:"im c bn: trnh chng ngi vt +5 im",comboBonus:"Phn thng combo: +1 im cho mi combo",levelUp:"Tng cp: tng 1 cp mi 100 im",speedIncrease:"Tng tc : cp cng cao, chng ngi vt di chuyn cng nhanh",gameTime:"Thi Gian Tr Chi",sixtySecondsPerGame:"60 giy mi tr chi",autoScoreWhenTimeUp:"T ng tnh im khi ht thi gian"},th:{score:"",time:"",level:"",combo:"",title:"",rules:"",close:"",controlMethod:"",useArrowKeysOrButtons:"   ",moveLeftRightToAvoid:"",gameObjective:"",avoidAllObstacles:"",successfulAvoidance:" 5  + ",collisionPenalty:" 10 ",scoringSystem:"",baseScore:" +5 ",comboBonus:"+1 ",levelUp:" 1  100 ",speedIncrease:"",gameTime:"",sixtySecondsPerGame:"60 ",autoScoreWhenTimeUp:""},la:{score:"Puncta",time:"Tempus",level:"Gradus",combo:"Combo",title:"Cursus Velocitatis",rules:"Regulae Ludi",close:"Claudere",controlMethod:"Methodus Controllandi",useArrowKeysOrButtons:"Utere clavis sagittarum   vel pugnis scaenae ad currum regendum",moveLeftRightToAvoid:"Move sinistra dextraque ad impedimenta vitanda",gameObjective:"Finis Ludi",avoidAllObstacles:"Vita omnia impedimenta (lapides, currus, plaustra)",successfulAvoidance:"Vitando feliciter accipe 5 puncta + praemium combo",collisionPenalty:"Collidendo cum impedimentis minus 10 puncta et reset combo",scoringSystem:"Systema Punctandi",baseScore:"Puncta fundamentalia: vitando impedimenta +5 puncta",comboBonus:"Praemium combo: +1 punctum pro quaque combo",levelUp:"Gradus sursum: accipe unum gradum pro quaque 100 punctis",speedIncrease:"Auctio velocitatis: altior gradus, velocius impedimenta moventur",gameTime:"Tempus Ludi",sixtySecondsPerGame:"60 secundis pro quaque ludo",autoScoreWhenTimeUp:"Auto puncta quando tempus finitum est"},ms:{score:"Markah",time:"Masa",level:"Tahap",combo:"Combo",title:"Lumba Kereta Laju",rules:"Peraturan Permainan",close:"Tutup",controlMethod:"Kaedah Kawalan",useArrowKeysOrButtons:"Gunakan kekunci anak panah   atau butang skrin untuk mengawal kereta lumba",moveLeftRightToAvoid:"Gerakkan kiri kanan untuk mengelakkan halangan",gameObjective:"Objektif Permainan",avoidAllObstacles:"Elakkan semua halangan (batu, kereta, lori)",successfulAvoidance:"Berjaya elakkan dapat 5 markah + bonus combo",collisionPenalty:"Berlanggar dengan halangan tolak 10 markah dan reset combo",scoringSystem:"Sistem Markah",baseScore:"Markah asas: elakkan halangan +5 markah",comboBonus:"Bonus combo: +1 markah untuk setiap combo",levelUp:"Naik tahap: dapat 1 tahap setiap 100 markah",speedIncrease:"Tambah kelajuan: tahap lebih tinggi, halangan bergerak lebih pantas",gameTime:"Masa Permainan",sixtySecondsPerGame:"60 saat setiap permainan",autoScoreWhenTimeUp:"Markah automatik apabila masa habis"}};return((oe=O[e])==null?void 0:oe[N])||O["zh-TW"][N]||N};m.useEffect(()=>{const N=Md("racing");N&&s(N.highScore||0)},[]),m.useEffect(()=>{o>0&&Dd("racing",{highScore:o})},[o]);const de=()=>{i(0),u(60),p(50),y([]),j(3),x(1),v(0),l(!0)},V=()=>{l(!1),n>o&&s(n)},ee=N=>{a&&p(O=>{const oe=N==="left"?O-8:O+8;return Math.max(10,Math.min(90,oe))})},he=()=>{if(!a)return;const N=["rock","car","truck"],O=N[Math.floor(Math.random()*N.length)],oe=[15,50,85],je=oe[Math.floor(Math.random()*oe.length)]+(Math.random()-.5)*20;y(Ce=>[...Ce,{id:Date.now(),x:je,y:0,type:O}])},ve=(N,O)=>Math.abs(N-O)<20/2;m.useEffect(()=>{if(!a)return;const N=setInterval(()=>{u(O=>O<=.1?(V(),0):O-.1),Math.random()<.9+T*.15&&he(),y(O=>{const oe=O.map(Ce=>We(ke({},Ce),{y:Ce.y+k})).filter(Ce=>Ce.y<100);let ge=!1;return oe.filter(Ce=>{if(Ce.y>70&&Ce.y<85){if(ve(h,Ce.x))return ge||(v(0),i(He=>Math.max(0,He-10)),A(!0),R(!0),Q({x:h,y:75}),I(!0),setTimeout(()=>{A(!1),R(!1),I(!1)},800),ge=!0),!1;v(He=>He+1),i(He=>He+5+b),b>=5&&(D(!0),setTimeout(()=>D(!1),1e3))}return!0})}),n>T*100&&(x(O=>O+1),j(O=>Math.min(8,O+.5)))},100);return()=>clearInterval(N)},[a,k,T,h,b]),m.useEffect(()=>{const N=O=>{a&&(O.key==="ArrowLeft"||O.key==="a"?ee("left"):(O.key==="ArrowRight"||O.key==="d")&&ee("right"))};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[a]);const be=N=>{const O={rock:{background:"#8B4513",borderRadius:"50%"},car:{background:"#FF4444",borderRadius:"5px"},truck:{background:"#FF8800",borderRadius:"8px"}};return O[N]||O.rock},te=N=>{if(!a)return;N.preventDefault();const O=N.touches[0],oe=window.innerWidth;O.clientX<oe/2?ee("left"):ee("right")};return r.jsxs("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(180deg, #87CEEB 0%, #98FB98 100%)",position:"relative",overflow:"auto",fontFamily:"Arial, sans-serif",touchAction:"pan-y"},onTouchStart:te,children:[r.jsx("button",{onClick:t,style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(20px, 4vw, 40px)",background:"#fff",border:"2px solid #9C27B0",borderRadius:"50%",width:"clamp(40px, 8vw, 50px)",height:"clamp(40px, 8vw, 50px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"clamp(1.2rem, 3vw, 1.5rem)",zIndex:1e3,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:""}),r.jsxs("div",{style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(80px, 16vw, 100px)",background:"rgba(255,255,255,0.9)",padding:"clamp(8px, 1.5vw, 12px)",borderRadius:"10px",fontSize:"clamp(0.8rem, 2vw, 1rem)",zIndex:100},children:[r.jsxs("div",{children:[X("score"),": ",n]}),r.jsxs("div",{children:[X("time"),": ",c,"s"]}),r.jsxs("div",{children:[X("level"),": ",T]}),r.jsxs("div",{children:[X("combo"),": ",b]})]}),r.jsx("div",{style:{position:"absolute",bottom:"20%",left:"0",right:"0",height:"60%",background:"linear-gradient(90deg, #696969 0%, #A9A9A9 20%, #696969 40%, #A9A9A9 60%, #696969 80%, #A9A9A9 100%)",borderTop:"4px solid #FFD700",borderBottom:"4px solid #FFD700"}}),r.jsx("div",{style:{position:"absolute",bottom:"25%",left:`${h}%`,transform:"translateX(-50%)",width:"clamp(40px, 8vw, 60px)",height:"clamp(20px, 4vw, 30px)",background:E?"linear-gradient(45deg, #FF0000, #FF4444)":"linear-gradient(45deg, #FF4444, #FF6666)",borderRadius:"8px",border:E?"3px solid #FF0000":"2px solid #CC0000",zIndex:10,transition:"left 0.1s ease",animation:E?"collisionShake 0.5s ease-in-out":"none"},children:r.jsx("div",{style:{position:"absolute",top:"-8px",left:"50%",transform:"translateX(-50%)",width:"clamp(20px, 4vw, 30px)",height:"clamp(8px, 1.5vw, 12px)",background:"#444",borderRadius:"4px"}})}),g.map(N=>r.jsx("div",{style:We(ke({position:"absolute",top:`${N.y}%`,left:`${N.x}%`,transform:"translateX(-50%)",width:"clamp(30px, 6vw, 45px)",height:"clamp(15px, 3vw, 22px)"},be(N.type)),{zIndex:5})},N.id)),z&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:"bold",color:"#FFD700",textShadow:"0 0 20px #FFD700",animation:"comboEffect 1s ease-out forwards",pointerEvents:"none",zIndex:1e3},children:["COMBO x",b,"!"]}),S&&r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:"bold",color:"#FF0000",textShadow:"0 0 20px #FF0000",animation:"collisionEffect 0.5s ease-out forwards",pointerEvents:"none",zIndex:1e3},children:"BOOM!"}),B&&r.jsx("div",{style:{position:"absolute",left:`${re.x}%`,top:`${re.y}%`,transform:"translate(-50%, -50%)",width:"clamp(60px, 12vw, 80px)",height:"clamp(60px, 12vw, 80px)",animation:"explosionEffect 0.8s ease-out forwards",pointerEvents:"none",zIndex:999},children:r.jsx("div",{style:{width:"100%",height:"100%",background:"radial-gradient(circle, #FFD700 0%, #FF8800 30%, #FF4444 60%, #FF0000 100%)",borderRadius:"50%",boxShadow:"0 0 30px #FFD700, 0 0 60px #FF8800, 0 0 90px #FF4444"}})}),r.jsx("style",{children:`
          @keyframes collisionShake {
            0%, 100% { transform: translateX(-50%) translateY(0px); }
            25% { transform: translateX(-50%) translateY(-5px) translateX(-3px); }
            50% { transform: translateX(-50%) translateY(0px) translateX(3px); }
            75% { transform: translateX(-50%) translateY(-5px) translateX(-3px); }
          }
          @keyframes collisionEffect {
            0% { 
              transform: translate(-50%, -50%) scale(0.5);
              opacity: 0;
            }
            50% { 
              transform: translate(-50%, -50%) scale(1.2);
              opacity: 1;
            }
            100% { 
              transform: translate(-50%, -50%) scale(1);
              opacity: 0;
            }
          }
          @keyframes explosionEffect {
            0% { 
              transform: translate(-50%, -50%) scale(0.1);
              opacity: 1;
            }
            50% { 
              transform: translate(-50%, -50%) scale(1.5);
              opacity: 1;
            }
            100% { 
              transform: translate(-50%, -50%) scale(2);
              opacity: 0;
            }
          }
        `}),r.jsxs("div",{style:{position:"absolute",bottom:"clamp(10px, 2vw, 20px)",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"clamp(10px, 2vw, 20px)",zIndex:100},children:[r.jsx("button",{onClick:()=>ee("left"),style:{background:"#FF4444",color:"#fff",border:"none",borderRadius:"50%",width:"clamp(50px, 10vw, 70px)",height:"clamp(50px, 10vw, 70px)",fontSize:"clamp(1.5rem, 3vw, 2rem)",cursor:"pointer",fontWeight:"bold"},children:""}),r.jsx("button",{onClick:()=>ee("right"),style:{background:"#FF4444",color:"#fff",border:"none",borderRadius:"50%",width:"clamp(50px, 10vw, 70px)",height:"clamp(50px, 10vw, 70px)",fontSize:"clamp(1.5rem, 3vw, 2rem)",cursor:"pointer",fontWeight:"bold"},children:""})]}),!a&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",textAlign:"center",zIndex:1001},children:[r.jsx("h2",{style:{fontSize:"clamp(1.5rem, 3.5vw, 2rem)",margin:"0 0 15px 0",color:"#E91E63"},children:X("title")}),r.jsx("p",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",marginBottom:"20px",color:"#666"},children:""}),r.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[r.jsx("button",{onClick:de,style:{background:"#E91E63",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(10px, 2vw, 15px) clamp(20px, 4vw, 30px)",fontSize:"clamp(1rem, 2.5vw, 1.2rem)",cursor:"pointer",fontWeight:"bold"},children:X("start")}),r.jsx("button",{onClick:()=>_(!0),style:{background:"#666",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(10px, 2vw, 15px) clamp(20px, 4vw, 30px)",fontSize:"clamp(1rem, 2.5vw, 1.2rem)",cursor:"pointer"},children:X("rules")})]})]}),P&&r.jsx("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1002},children:r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",maxWidth:"clamp(300px, 80vw, 500px)",maxHeight:"clamp(400px, 80vh, 600px)",overflow:"auto"},children:[r.jsxs("h3",{style:{fontSize:"clamp(1.2rem, 3vw, 1.5rem)",margin:"0 0 15px 0",color:"#E91E63",textAlign:"center"},children:[X("title")," - ",X("rules")]}),r.jsxs("div",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",lineHeight:"1.6"},children:[r.jsx("p",{children:r.jsxs("strong",{children:[" ",X("controlMethod"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:X("useArrowKeysOrButtons")}),r.jsx("li",{children:X("moveLeftRightToAvoid")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",X("gameObjective"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:X("avoidAllObstacles")}),r.jsx("li",{children:X("successfulAvoidance")}),r.jsx("li",{children:X("collisionPenalty")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",X("scoringSystem"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:X("baseScore")}),r.jsx("li",{children:X("comboBonus")}),r.jsx("li",{children:X("levelUp")}),r.jsx("li",{children:X("speedIncrease")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",X("gameTime"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:X("sixtySecondsPerGame")}),r.jsx("li",{children:X("autoScoreWhenTimeUp")})]})]}),r.jsx("button",{onClick:()=>_(!1),style:{background:"#E91E63",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer",marginTop:"20px",width:"100%"},children:X("close")})]})}),!a&&n>0&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",textAlign:"center",zIndex:1001},children:[r.jsxs("h2",{style:{fontSize:"clamp(1.5rem, 3.5vw, 2rem)",margin:"0 0 15px 0",color:"#E91E63"},children:[X("gameOver"),""]}),r.jsxs("div",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",marginBottom:"10px"},children:[X("finalScore"),"",n]}),r.jsxs("div",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",marginBottom:"20px",color:"#666"},children:[X("highScore"),"",o]}),r.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[r.jsx("button",{onClick:de,style:{background:"#E91E63",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer"},children:X("restart")}),r.jsx("button",{onClick:t,style:{background:"#666",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer"},children:X("back")})]})]})]})}function UV({onClose:t}){const{lang:e}=dt(),[n,i]=m.useState(0),[o,s]=m.useState(0),[a,l]=m.useState(!1),[c,u]=m.useState(60),[h,p]=m.useState([]),[g,y]=m.useState(0),[k,j]=m.useState(!1),[T,x]=m.useState(null),[b,v]=m.useState(!0),[z,D]=m.useState(!1),P=B=>{var re;const I={"zh-TW":{score:"",time:"",combo:"",title:"",rules:"",close:"",gameOver:"",gameplay:"",clickMovingRhythmPoints:"",fourColorsCorrespondToDifferentAudio:"",redBlueGreenYellowFrequencies:"(440Hz)(523Hz)(659Hz)(784Hz)",accuracyScoring:"",perfect100ms:"Perfect (100ms)+10",good200ms:"Good (200ms)+5",ok300ms:"OK (300ms)+2",missOver300ms:"Miss (300ms)0",scoring:"",eachSuccessfulClickIncreasesCombo:"",combo5TimesTriggersEffect:"5",missingRhythmPointResetsCombo:"",soundControl:"",soundSwitchInTopRight:"",clickRhythmPointPlaysAudio:"",canTurnSoundOnOffAnytime:"/",gameTime:"",sixtySecondsPerGame:"60",autoScoreWhenTimeUp:"",clickRhythmPointsFollowMusic:""},"zh-CN":{score:"",time:"",combo:"",title:"",rules:"",close:"",gameplay:"",clickMovingRhythmPoints:"",fourColorsCorrespondToDifferentAudio:"",redBlueGreenYellowFrequencies:"(440Hz)(523Hz)(659Hz)(784Hz)",accuracyScoring:"",perfect100ms:"Perfect (100ms)+10",good200ms:"Good (200ms)+5",ok300ms:"OK (300ms)+2",missOver300ms:"Miss (300ms)0",scoring:"",eachSuccessfulClickIncreasesCombo:"",combo5TimesTriggersEffect:"5",missingRhythmPointResetsCombo:"",soundControl:"",soundSwitchInTopRight:"",clickRhythmPointPlaysAudio:"",canTurnSoundOnOffAnytime:"/",gameTime:"",sixtySecondsPerGame:"60",autoScoreWhenTimeUp:"",clickRhythmPointsFollowMusic:""},en:{score:"Score",time:"Time",combo:"Combo",title:"Music Rhythm",rules:"Game Rules",close:"Close",gameplay:"Gameplay",clickMovingRhythmPoints:"Click rhythm points moving from top to bottom",fourColorsCorrespondToDifferentAudio:"Four colors of rhythm points correspond to different audio",redBlueGreenYellowFrequencies:"Red (440Hz), Blue (523Hz), Green (659Hz), Yellow (784Hz)",accuracyScoring:"Accuracy Scoring",perfect100ms:"Perfect (within 100ms): +10 points",good200ms:"Good (within 200ms): +5 points",ok300ms:"OK (within 300ms): +2 points",missOver300ms:"Miss (over 300ms): 0 points",scoring:"Scoring",eachSuccessfulClickIncreasesCombo:"Each successful click increases combo count",combo5TimesTriggersEffect:"Combo 5 times or more triggers special effects",missingRhythmPointResetsCombo:"Missing rhythm point resets combo",soundControl:"Sound Control",soundSwitchInTopRight:"Sound switch control in top right corner",clickRhythmPointPlaysAudio:"Clicking rhythm points plays corresponding audio",canTurnSoundOnOffAnytime:"Can turn sound on/off anytime",gameTime:"Game Time",sixtySecondsPerGame:"60 seconds per game",autoScoreWhenTimeUp:"Auto score when time is up",clickRhythmPointsFollowMusic:"Click rhythm points, follow the music rhythm!"},ja:{score:"",time:"",combo:"",title:"",rules:"",close:"",gameplay:"",clickMovingRhythmPoints:"",fourColorsCorrespondToDifferentAudio:"4",redBlueGreenYellowFrequencies:"(440Hz)(523Hz)(659Hz)(784Hz)",accuracyScoring:"",perfect100ms:"Perfect (100ms)+10",good200ms:"Good (200ms)+5",ok300ms:"OK (300ms)+2",missOver300ms:"Miss (300ms)0",scoring:"",eachSuccessfulClickIncreasesCombo:"",combo5TimesTriggersEffect:"5",missingRhythmPointResetsCombo:"",soundControl:"",soundSwitchInTopRight:"",clickRhythmPointPlaysAudio:"",canTurnSoundOnOffAnytime:"/",gameTime:"",sixtySecondsPerGame:"60",autoScoreWhenTimeUp:"",clickRhythmPointsFollowMusic:""},ko:{score:"",time:"",combo:"",title:" ",rules:" ",close:"",gameplay:" ",clickMovingRhythmPoints:"     ",fourColorsCorrespondToDifferentAudio:"4      ",redBlueGreenYellowFrequencies:"(440Hz)(523Hz)(659Hz)(784Hz)",accuracyScoring:" ",perfect100ms:"Perfect (100ms )+10",good200ms:"Good (200ms )+5",ok300ms:"OK (300ms )+2",missOver300ms:"Miss (300ms )0",scoring:"",eachSuccessfulClickIncreasesCombo:"     ",combo5TimesTriggersEffect:" 5     ",missingRhythmPointResetsCombo:"    ",soundControl:" ",soundSwitchInTopRight:"   ",clickRhythmPointPlaysAudio:"      ",canTurnSoundOnOffAnytime:"  / ",gameTime:" ",sixtySecondsPerGame:" 60",autoScoreWhenTimeUp:"    ",clickRhythmPointsFollowMusic:"     !"},vi:{score:"im",time:"Thi Gian",combo:"Combo",title:"Nhp iu m Nhc",rules:"Lut Chi",close:"ng",gameplay:"Cch Chi",clickMovingRhythmPoints:"Nhp vo cc im nhp iu di chuyn t trn xung di",fourColorsCorrespondToDifferentAudio:"Bn mu ca im nhp iu tng ng vi m thanh khc nhau",redBlueGreenYellowFrequencies:" (440Hz), Xanh dng (523Hz), Xanh l (659Hz), Vng (784Hz)",accuracyScoring:"im  Chnh Xc",perfect100ms:"Perfect (trong 100ms): +10 im",good200ms:"Good (trong 200ms): +5 im",ok300ms:"OK (trong 300ms): +2 im",missOver300ms:"Miss (trn 300ms): 0 im",scoring:"im S",eachSuccessfulClickIncreasesCombo:"Mi ln nhp thnh cng tng s combo",combo5TimesTriggersEffect:"Combo 5 ln tr ln kch hot hiu ng c bit",missingRhythmPointResetsCombo:"B l im nhp iu reset combo",soundControl:"iu Khin m Thanh",soundSwitchInTopRight:"Cng tc m thanh  gc trn bn phi",clickRhythmPointPlaysAudio:"Nhp im nhp iu pht m thanh tng ng",canTurnSoundOnOffAnytime:"C th bt/tt m thanh bt c lc no",gameTime:"Thi Gian Tr Chi",sixtySecondsPerGame:"60 giy mi tr chi",autoScoreWhenTimeUp:"T ng tnh im khi ht thi gian",clickRhythmPointsFollowMusic:"Nhp vo im nhp iu, theo nhp iu m nhc!"},th:{score:"",time:"",combo:"",title:"",rules:"",close:"",gameplay:"",clickMovingRhythmPoints:"",fourColorsCorrespondToDifferentAudio:"",redBlueGreenYellowFrequencies:" (440Hz) (523Hz) (659Hz) (784Hz)",accuracyScoring:"",perfect100ms:"Perfect ( 100ms)+10 ",good200ms:"Good ( 200ms)+5 ",ok300ms:"OK ( 300ms)+2 ",missOver300ms:"Miss ( 300ms)0 ",scoring:"",eachSuccessfulClickIncreasesCombo:"",combo5TimesTriggersEffect:" 5 ",missingRhythmPointResetsCombo:"",soundControl:"",soundSwitchInTopRight:"",clickRhythmPointPlaysAudio:"",canTurnSoundOnOffAnytime:"/",gameTime:"",sixtySecondsPerGame:"60 ",autoScoreWhenTimeUp:"",clickRhythmPointsFollowMusic:"!"},la:{score:"Puncta",time:"Tempus",combo:"Combo",title:"Rhythmus Musicae",rules:"Regulae Ludi",close:"Claudere",gameplay:"Ludus",clickMovingRhythmPoints:"Clicca puncta rhythmi moventia de superiore ad inferiorem",fourColorsCorrespondToDifferentAudio:"Quattuor colores punctorum rhythmi correspondent diversis auditis",redBlueGreenYellowFrequencies:"Rubrum (440Hz), Caeruleum (523Hz), Viride (659Hz), Flavum (784Hz)",accuracyScoring:"Punctatio Accurationis",perfect100ms:"Perfect (intra 100ms): +10 puncta",good200ms:"Good (intra 200ms): +5 puncta",ok300ms:"OK (intra 300ms): +2 puncta",missOver300ms:"Miss (super 300ms): 0 puncta",scoring:"Punctatio",eachSuccessfulClickIncreasesCombo:"Quaelibet felix cliccatio auget numerum combo",combo5TimesTriggersEffect:"Combo 5 vicibus vel plus activat effectus speciales",missingRhythmPointResetsCombo:"Amittendo punctum rhythmi reset combo",soundControl:"Controllatio Sonorum",soundSwitchInTopRight:"Sonorum commutator in angulo superiore dextro",clickRhythmPointPlaysAudio:"Cliccando puncta rhythmi ludit auditum correspondentem",canTurnSoundOnOffAnytime:"Potest sonos aperire/claudere quandocumque",gameTime:"Tempus Ludi",sixtySecondsPerGame:"60 secundis pro quaque ludo",autoScoreWhenTimeUp:"Auto puncta quando tempus finitum est",clickRhythmPointsFollowMusic:"Puncta rhythmi preme et musicam sequere!"},ms:{score:"Markah",time:"Masa",combo:"Combo",title:"Irama Muzik",rules:"Peraturan Permainan",close:"Tutup",gameplay:"Cara Bermain",clickMovingRhythmPoints:"Klik titik irama yang bergerak dari atas ke bawah",fourColorsCorrespondToDifferentAudio:"Empat warna titik irama sepadan dengan audio berbeza",redBlueGreenYellowFrequencies:"Merah (440Hz), Biru (523Hz), Hijau (659Hz), Kuning (784Hz)",accuracyScoring:"Penilaian Ketepatan",perfect100ms:"Perfect (dalam 100ms): +10 markah",good200ms:"Good (dalam 200ms): +5 markah",ok300ms:"OK (dalam 300ms): +2 markah",missOver300ms:"Miss (melebihi 300ms): 0 markah",scoring:"Penilaian",eachSuccessfulClickIncreasesCombo:"Setiap klik berjaya menambah bilangan combo",combo5TimesTriggersEffect:"Combo 5 kali atau lebih mencetuskan kesan khas",missingRhythmPointResetsCombo:"Terlepas titik irama reset combo",soundControl:"Kawalan Bunyi",soundSwitchInTopRight:"Suis bunyi kawalan di sudut kanan atas",clickRhythmPointPlaysAudio:"Klik titik irama memainkan audio sepadan",canTurnSoundOnOffAnytime:"Boleh hidupkan/matikan bunyi bila-bila masa",gameTime:"Masa Permainan",sixtySecondsPerGame:"60 saat setiap permainan",autoScoreWhenTimeUp:"Markah automatik apabila masa habis",clickRhythmPointsFollowMusic:"Klik titik irama, ikut rentak muzik!"}};return((re=I[e])==null?void 0:re[B])||I["zh-TW"][B]||B};m.useEffect(()=>{const B=Md("rhythm");B&&s(B.highScore||0)},[]),m.useEffect(()=>{o>0&&Dd("rhythm",{highScore:o})},[o]),m.useEffect(()=>{typeof window!="undefined"&&window.AudioContext&&x(new AudioContext)},[]);const _=()=>{i(0),u(60),p([]),y(0),l(!0)},S=()=>{l(!1),n>o&&s(n)},R=()=>{if(!a)return;const B=["red","blue","green","yellow"],I=B[Math.floor(Math.random()*B.length)],re=Math.random()*80+10;p(Q=>[...Q,{id:Date.now(),x:re,y:-10,type:I,timing:Date.now()}])},E=B=>{const I=h.find(X=>X.id===B);if(!I)return;const re=Date.now()-I.timing;let Q=0;if(re<100?Q=10:re<200?Q=5:re<300?Q=2:Q=0,i(X=>X+Q),y(X=>X+1),g>=5&&(j(!0),setTimeout(()=>j(!1),1e3)),T&&b){const X=T.createOscillator(),de=T.createGain();X.connect(de),de.connect(T.destination);const V={red:440,blue:523,green:659,yellow:784};X.frequency.setValueAtTime(V[I.type],T.currentTime),X.type="sine",de.gain.setValueAtTime(.3,T.currentTime),de.gain.exponentialRampToValueAtTime(.01,T.currentTime+.1),X.start(T.currentTime),X.stop(T.currentTime+.1)}p(X=>X.filter(de=>de.id!==B))};m.useEffect(()=>{if(!a)return;const B=setInterval(()=>{u(I=>I<=1?(S(),0):I-1),Math.random()<.03&&R(),p(I=>{const re=I.map(Q=>We(ke({},Q),{y:Q.y+2})).filter(Q=>Q.y<110);return re.forEach(Q=>{Q.y>90&&(y(0),p(X=>X.filter(de=>de.id!==Q.id)))}),re})},50);return()=>clearInterval(B)},[a]);const A=B=>({red:"#FF4444",blue:"#4444FF",green:"#44FF44",yellow:"#FFFF44"})[B]||"#FF4444";return r.jsxs("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative",overflow:"hidden",fontFamily:"Arial, sans-serif"},children:[r.jsxs("div",{style:{position:"absolute",top:"clamp(20px, 4vw, 40px)",left:"clamp(80px, 16vw, 100px)",background:"rgba(255,255,255,0.9)",padding:"clamp(8px, 1.5vw, 12px)",borderRadius:"10px",fontSize:"clamp(0.8rem, 2vw, 1rem)",zIndex:100},children:[r.jsxs("div",{children:[P("score"),": ",n]}),r.jsxs("div",{children:[P("time"),": ",c,"s"]}),r.jsxs("div",{children:[P("combo"),": ",g]})]}),r.jsx("button",{onClick:()=>v(!b),style:{position:"absolute",top:"clamp(10px, 2vw, 20px)",right:"clamp(10px, 2vw, 20px)",background:b?"#4CAF50":"#f44336",color:"#fff",border:"none",borderRadius:"25px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.8rem, 2vw, 1rem)",cursor:"pointer",zIndex:100},children:b?"":""}),r.jsx("div",{style:{position:"absolute",bottom:"20%",left:"10%",right:"10%",height:"60%",background:"rgba(0,0,0,0.3)",borderRadius:"20px",border:"2px solid rgba(255,255,255,0.3)"}}),h.map(B=>r.jsx("div",{onClick:()=>E(B.id),style:{position:"absolute",bottom:`${B.y}%`,left:`${B.x}%`,transform:"translateX(-50%)",width:"clamp(40px, 8vw, 60px)",height:"clamp(40px, 8vw, 60px)",background:A(B.type),borderRadius:"50%",cursor:"pointer",zIndex:10,boxShadow:`0 0 20px ${A(B.type)}`,animation:"pulse 0.5s ease-in-out infinite alternate"}},B.id)),k&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:"bold",color:"#00BCD4",textShadow:"0 0 20px #00BCD4",animation:"comboEffect 1s ease-out forwards",pointerEvents:"none",zIndex:1e3},children:["COMBO x",g,"!"]}),!a&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",textAlign:"center",zIndex:1001},children:[r.jsx("h2",{style:{fontSize:"clamp(1.5rem, 3.5vw, 2rem)",margin:"0 0 15px 0",color:"#00BCD4"},children:P("title")}),r.jsx("p",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",marginBottom:"20px",color:"#666"},children:P("clickRhythmPointsFollowMusic")}),r.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[r.jsx("button",{onClick:_,style:{background:"#00BCD4",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(10px, 2vw, 15px) clamp(20px, 4vw, 30px)",fontSize:"clamp(1rem, 2.5vw, 1.2rem)",cursor:"pointer",fontWeight:"bold"},children:P("start")}),r.jsx("button",{onClick:()=>D(!0),style:{background:"#666",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(10px, 2vw, 15px) clamp(20px, 4vw, 30px)",fontSize:"clamp(1rem, 2.5vw, 1.2rem)",cursor:"pointer"},children:P("rules")})]})]}),z&&r.jsx("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1002},children:r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",maxWidth:"clamp(300px, 80vw, 500px)",maxHeight:"clamp(400px, 80vh, 600px)",overflow:"auto"},children:[r.jsxs("h3",{style:{fontSize:"clamp(1.2rem, 3vw, 1.5rem)",margin:"0 0 15px 0",color:"#00BCD4",textAlign:"center"},children:[P("rhythmGame")," - ",P("rules")]}),r.jsxs("div",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",lineHeight:"1.6"},children:[r.jsx("p",{children:r.jsxs("strong",{children:[" ",P("gameplay"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:P("clickMovingRhythmPoints")}),r.jsx("li",{children:P("fourColorsCorrespondToDifferentAudio")}),r.jsx("li",{children:P("redBlueGreenYellowFrequencies")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",P("accuracyScoring"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:P("perfect100ms")}),r.jsx("li",{children:P("good200ms")}),r.jsx("li",{children:P("ok300ms")}),r.jsx("li",{children:P("missOver300ms")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",P("scoring"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:P("eachSuccessfulClickIncreasesCombo")}),r.jsx("li",{children:P("combo5TimesTriggersEffect")}),r.jsx("li",{children:P("missingRhythmPointResetsCombo")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",P("soundControl"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:P("soundSwitchInTopRight")}),r.jsx("li",{children:P("clickRhythmPointPlaysAudio")}),r.jsx("li",{children:P("canTurnSoundOnOffAnytime")})]}),r.jsx("p",{children:r.jsxs("strong",{children:[" ",P("gameTime"),""]})}),r.jsxs("ul",{children:[r.jsx("li",{children:P("sixtySecondsPerGame")}),r.jsx("li",{children:P("autoScoreWhenTimeUp")})]})]}),r.jsx("button",{onClick:()=>D(!1),style:{background:"#00BCD4",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer",marginTop:"20px",width:"100%"},children:P("close")})]})}),!a&&n>0&&r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"clamp(20px, 4vw, 30px)",textAlign:"center",zIndex:1001},children:[r.jsxs("h2",{style:{fontSize:"clamp(1.5rem, 3.5vw, 2rem)",margin:"0 0 15px 0",color:"#00BCD4"},children:[P("gameOver"),""]}),r.jsxs("div",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",marginBottom:"10px"},children:[P("finalScore"),"",n]}),r.jsxs("div",{style:{fontSize:"clamp(0.9rem, 2vw, 1rem)",marginBottom:"20px",color:"#666"},children:[P("highScore"),"",o]}),r.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[r.jsx("button",{onClick:_,style:{background:"#00BCD4",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer"},children:P("restart")}),r.jsx("button",{onClick:t,style:{background:"#666",color:"#fff",border:"none",borderRadius:"15px",padding:"clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px)",fontSize:"clamp(0.9rem, 2vw, 1rem)",cursor:"pointer"},children:P("back")})]})]}),r.jsx("style",{children:`
        @keyframes pulse {
          0% { transform: translateX(-50%) scale(1); }
          100% { transform: translateX(-50%) scale(1.1); }
        }
        @keyframes comboEffect {
          0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
          50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
          100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }
      `})]})}const ZS={"zh-TW":{title:"",subtitle:"",subtitle2:"",backToHome:"",startAssessment:"",submitAssessment:"",cancelAssessment:"",closeAssessment:"",assessmentComplete:"",viewReport:"",closeReport:"",q1Title:"",q1Desc:"3",q2Title:"",q2Desc:"1",q3Title:"",q3Desc:"6",q4Title:"",q4Desc:"1",q5Title:"",q5Desc:"6",q6Title:"",q6Desc:"3",q7Title:"",q7Desc:"6",q8Title:"",q8Desc:"1",q9Title:"",q9Desc:"1",q10Title:"",q10Desc:"6",q11Title:"",q11Desc:"3",q12Title:"",q12Desc:"1",q13Title:"",q13Desc:"6",q14Title:"",q14Desc:"1",q15Title:"",q15Desc:"6",q16Title:"",q16Desc:"1",q17Title:"",q17Desc:"1",q18Title:"",q18Desc:"3",q19Title:"",q19Desc:"1",q20Title:"",q20Desc:"6",excellent:"",good:"",fair:"",poor:"",terrible:"",scoreLabel:"",resultLabel:"",descriptionLabel:"",recommendationsLabel:"",analysisLabel:"",privacyPolicy:"",terms:"/",dataDeletion:"",about:" Restarter",feedback:" "},"zh-CN":{title:"",subtitle:"",subtitle2:"",backToHome:"",startAssessment:"",submitAssessment:"",cancelAssessment:"",closeAssessment:"",assessmentComplete:"",viewReport:"",closeReport:"",q1Title:"",q1Desc:"3",q2Title:"",q2Desc:"1",q3Title:"",q3Desc:"6",q4Title:"",q4Desc:"1",q5Title:"",q5Desc:"6",q6Title:"",q6Desc:"3",q7Title:"",q7Desc:"6",q8Title:"",q8Desc:"1",q9Title:"",q9Desc:"1",q10Title:"",q10Desc:"6",q11Title:"",q11Desc:"3",q12Title:"",q12Desc:"1",q13Title:"",q13Desc:"6",q14Title:"",q14Desc:"1",q15Title:"",q15Desc:"6",q16Title:"",q16Desc:"1",q17Title:"",q17Desc:"1",q18Title:"",q18Desc:"3",q19Title:"",q19Desc:"1",q20Title:"",q20Desc:"6",excellent:"",good:"",fair:"",poor:"",terrible:"",scoreLabel:"",resultLabel:"",descriptionLabel:"",recommendationsLabel:"",analysisLabel:"",privacyPolicy:"",terms:"/",dataDeletion:"",about:" Restarter",feedback:" "},en:{title:"Social Integration Assessment",subtitle:"Assess your social integration and get professional advice",subtitle2:"Face challenges bravely and regularly monitor your social integration progress, every assessment is an opportunity for growth",backToHome:"Back",startAssessment:"Start Assessment",submitAssessment:"Submit Assessment",cancelAssessment:"Cancel",closeAssessment:"Close",assessmentComplete:"Assessment Complete",viewReport:"View Report",closeReport:"Close Report",q1Title:"Interpersonal Relationships",q1Desc:"In the past 3 months, how is your interaction and social ability with others? Including daily communication with colleagues, friends, and neighbors, as well as the ability to build relationships in new environments. Are you able to actively communicate with others, build trust relationships, and feel comfortable in social situations?",q2Title:"Employment Status",q2Desc:"In the past year, how is your job stability and development prospects? Including job satisfaction, salary benefits, career development opportunities, work environment adaptability, and clarity of future career planning. Are you satisfied with your current job and have clear career development goals?",q3Title:"Family Relationships",q3Desc:"In the past 6 months, how is your relationship and communication with family? Including relationship quality with spouse, children, parents or other family members, communication frequency and effectiveness, and family atmosphere harmony. Are you able to effectively handle family conflicts and provide emotional support to family members?",q4Title:"Future Confidence",q4Desc:"In the past year, how optimistic are you about the future and your planning? Including confidence in personal development, clarity of life goals, and positive attitude when facing challenges. Do you have clear plans for the future and believe you can achieve your goals?",q5Title:"Social Acceptance",q5Desc:"In the past 6 months, how accepted and recognized do you feel by society? Including community integration, social status recognition, and adaptation to social norms. Do you feel accepted by society and satisfied with your social role?",q6Title:"Emotional Management",q6Desc:"In the past 3 months, how well do you handle stress and negative emotions? Including emotional responses when facing setbacks, stress regulation methods, and awareness of mental health maintenance. Are you able to effectively manage negative emotions and stay calm under pressure?",q7Title:"Life Routine",q7Desc:"In the past year, how regular is your daily routine and lifestyle? Including daily schedule, eating habits, exercise frequency, and stability of life rhythm. Are you able to maintain healthy living habits and establish regular daily life?",q8Title:"Learning & Growth",q8Desc:"In the past year, how much have you invested in skill learning and personal growth? Including new skill learning, knowledge updates, self-improvement initiative, and investment in personal development. Do you continuously learn new knowledge and actively seek personal growth opportunities?",q9Title:"Financial Management",q9Desc:"In the past year, how is your financial planning and money management? Including income and expense management, saving habits, investment awareness, and planning for future financial security. Are you able to effectively manage personal finances and prepare for the future?",q10Title:"Health Status",q10Desc:"In the past 6 months, how is your physical and mental health? Including physical health condition, mental health status, healthcare awareness, and ability to prevent and handle health issues. Do you value health management and take active health maintenance measures?",q11Title:"Social Network",q11Desc:"In the past 3 months, how well do you build and maintain social relationships? Including number of friends, social activity participation, relationship quality, and breadth and depth of social network. Do you have a stable social circle and can build meaningful relationships with others?",q12Title:"Goal Setting",q12Desc:"In the past year, how well do you set and pursue personal goals? Including goal clarity, plan feasibility, execution ability, and assessment of goal achievement. Are you able to set clear goals and effectively execute plans?",q13Title:"Adaptability",q13Desc:"In the past 6 months, how well do you adapt to environmental changes and challenges? Including adaptation speed to new environments, flexibility in coping with changes, and ability to recover from setbacks. Are you able to quickly adapt to new environments and maintain stability in changes?",q14Title:"Responsibility",q14Desc:"In the past year, how responsible are you towards yourself and others? Including personal behavior responsibility, fulfillment of commitments to others, and awareness of social responsibility. Are you able to take personal responsibility and be responsible for others and society?",q15Title:"Self-Identity",q15Desc:"In the past 6 months, how strong is your sense of self-worth and identity? Including awareness of personal value, self-acceptance level, and satisfaction with personal identity. Do you have a clear understanding of yourself and can accept your strengths and weaknesses?",q16Title:"Community Participation",q16Desc:"In the past 3 years, how involved are you in community activities and public service? Including volunteer service participation, community activity contribution, and attention and participation in social welfare. Do you actively participate in community activities and contribute to society?",q17Title:"Career Development",q17Desc:"In the past year, how well have you performed in skill enhancement and career planning? Including professional skill development, career planning clarity, and grasp of career development opportunities. Do you continuously improve professional skills and have clear career development paths?",q18Title:"Conflict Resolution",q18Desc:"In the past 3 months, how well do you handle interpersonal conflicts and disagreements? Including conflict resolution skills, communication coordination ability, and wisdom in maintaining relationships. Are you able to effectively handle interpersonal conflicts and seek consensus in disagreements?",q19Title:"Time Management",q19Desc:"In the past year, how well do you manage time and prioritize tasks? Including time planning efficiency, task priority setting, and maintenance of work-life balance. Are you able to effectively manage time and maintain efficiency in multiple tasks?",q20Title:"Overall Satisfaction",q20Desc:"In the past 6 months, how satisfied are you with your overall life situation? Including overall evaluation of life quality, satisfaction with personal achievements, and optimism about future life prospects. Are you satisfied with your current life situation and hopeful about the future?",excellent:"Excellent",good:"Good",fair:"Fair",poor:"Needs Improvement",terrible:"Very Poor",scoreLabel:"Assessment Score",resultLabel:"Assessment Result",descriptionLabel:"Detailed Analysis",recommendationsLabel:"Improvement Suggestions",analysisLabel:"Professional Analysis",privacyPolicy:"Privacy Policy",terms:"Terms/Statement",dataDeletion:"Data Deletion Guide",about:" RestarterWho We Are",feedback:" FeedbackWe Want to Hear You"},ko:{title:"  ",subtitle:"     ",subtitle2:"        .    ",backToHome:"",startAssessment:" ",submitAssessment:" ",cancelAssessment:"",closeAssessment:"",assessmentComplete:" ",viewReport:" ",closeReport:" ",q1Title:"",q1Desc:" 3     ? , ,         .            ?",q2Title:" ",q2Desc:" 1     ?  ,  ,   ,   ,      .        ?",q3Title:" ",q3Desc:" 6     ? , ,       ,   ,     .           ?",q4Title:"  ",q4Desc:" 1     ?    ,    ,       .          ?",q5Title:" ",q5Desc:" 6      ?  ,    ,       .       ?",q6Title:" ",q6Desc:" 3      ?     ,   ,       .          ?",q7Title:" ",q7Desc:" 6    ?   , ,  ,     .          ?",q8Title:" ",q8Desc:" 1       ?   ,  ,    ,      .         ?",q9Title:" ",q9Desc:" 1      ?   ,  ,   ,       .           ?",q10Title:" ",q10Desc:" 6 ,    ?   ,   ,   ,        .         ?",q11Title:" ",q11Desc:" 3      ?  ,   ,  ,      .           ?",q12Title:" ",q12Desc:" 1      ?  ,   , ,      .        ?",q13Title:" ",q13Desc:" 6      ?     ,   ,     .          ?",q14Title:"",q14Desc:" 1       ?    ,    ,      .            ?",q15Title:" ",q15Desc:" 6      ?    ,   ,      .          ?",q16Title:" ",q16Desc:" 1       ?  ,   ,       .      ?",q17Title:" ",q17Desc:" 1        ?   ,   ,       .         ?",q18Title:"  ",q18Desc:" 3       ?   ,   ,     .          ?",q19Title:" ",q19Desc:" 1       ?   ,   ,      .         ?",q20Title:" ",q20Desc:" 6      ?     ,    ,        .         ?",excellent:" ",good:"",fair:"",poor:" ",terrible:" ",scoreLabel:" ",resultLabel:" ",descriptionLabel:" ",recommendationsLabel:" ",analysisLabel:" ",privacyPolicy:" ",terms:"/",dataDeletion:"  ",about:" Restarter ",feedback:"     "}};function qV(){const{lang:t}=dt();tt();const{isTestMode:e}=fs(),[n,i]=m.useState(0),o=ZS[t]||ZS["zh-TW"];m.useEffect(()=>{console.log("Language changed to:",t),i(x=>x+1)},[t]);const[s,a]=m.useState(!1),[l,c]=m.useState(!1),[u,h]=m.useState({q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:"",q20:""}),[p,g]=m.useState(null),y=x=>{const b={excellent:5,good:4,fair:3,poor:2,terrible:1},v=[b[x.q1]||3,b[x.q2]||3,b[x.q3]||3,b[x.q4]||3,b[x.q5]||3,b[x.q6]||3,b[x.q7]||3,b[x.q8]||3,b[x.q9]||3,b[x.q10]||3,b[x.q11]||3,b[x.q12]||3,b[x.q13]||3,b[x.q14]||3,b[x.q15]||3,b[x.q16]||3,b[x.q17]||3,b[x.q18]||3,b[x.q19]||3,b[x.q20]||3],D=v.reduce((R,E)=>R+E,0)/20,P={interpersonal:(v[0]+v[10]+v[17])/3,career:(v[1]+v[16])/2,family:v[2],emotional:(v[5]+v[14])/2,lifestyle:(v[6]+v[9]+v[18])/3,learning:(v[7]+v[11]+v[12])/3,financial:v[8],responsibility:v[13],community:v[15],satisfaction:v[19]},_=Object.entries(P).filter(([R,E])=>E>=4).map(([R,E])=>R),S=Object.entries(P).filter(([R,E])=>E<=2).map(([R,E])=>R);if(D>=4.5){const E=[{condition:_.includes("interpersonal")&&_.includes("career"),description:"",recommendations:["","","",""],analysis:""},{condition:_.includes("emotional")&&_.includes("family"),description:"",recommendations:["","","",""],analysis:""},{condition:_.includes("lifestyle")&&_.includes("learning"),description:"",recommendations:["","","",""],analysis:""},{condition:_.includes("financial")&&_.includes("responsibility"),description:"",recommendations:["","","",""],analysis:""},{condition:_.includes("community")&&_.includes("satisfaction"),description:"",recommendations:["","","",""],analysis:""}].find(A=>A.condition)||{description:`${_.length>0?_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}`,recommendations:["","","","","","",""],analysis:`20${_.length>0?_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}`};return{score:D,result:"",description:E.description,recommendations:E.recommendations,analysis:E.analysis}}else if(D>=3.5){const E=[{condition:S.includes("interpersonal")&&_.includes("career"),description:"",recommendations:["","","",""],analysis:""},{condition:S.includes("emotional")&&_.includes("family"),description:"",recommendations:["","","",""],analysis:""},{condition:S.includes("lifestyle")&&_.includes("learning"),description:"",recommendations:["","","",""],analysis:""},{condition:S.includes("financial")&&_.includes("responsibility"),description:"",recommendations:["","","",""],analysis:""},{condition:S.includes("community")&&_.includes("satisfaction"),description:"",recommendations:["","","",""],analysis:""}].find(A=>A.condition)||{description:`${_.length>0?_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}`,recommendations:["",S.length>0?`${S.join("")}`:"","","","","",""],analysis:`20${_.length>0?_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}${S.length>0?`${S.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join("")}`:""}`};return{score:D,result:"",description:E.description,recommendations:E.recommendations,analysis:E.analysis}}else if(D>=2.5){const E=[{condition:S.includes("interpersonal")&&S.includes("career"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("emotional")&&S.includes("family"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("lifestyle")&&S.includes("learning"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("financial")&&S.includes("responsibility"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("community")&&S.includes("satisfaction"),description:"",recommendations:["","","","",""],analysis:""}].find(A=>A.condition)||{description:`${S.length>0?S.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}${_.length>0?`${_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join("")}`:""}`,recommendations:["","","","",_.length>0?`${_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join("")}`:"","","","",""],analysis:`20${S.length>0?S.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}${S.length>0?`${S.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join("")}`:""}${_.length>0?`${_.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join("")}`:""}`};return{score:D,result:"",description:E.description,recommendations:E.recommendations,analysis:E.analysis}}else{const E=[{condition:S.includes("interpersonal")&&S.includes("emotional"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("career")&&S.includes("financial"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("family")&&S.includes("lifestyle"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("learning")&&S.includes("responsibility"),description:"",recommendations:["","","","",""],analysis:""},{condition:S.includes("community")&&S.includes("satisfaction"),description:"",recommendations:["","","","",""],analysis:""}].find(A=>A.condition)||{description:`${S.length>0?S.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}`,recommendations:["","","","","","","","","",""],analysis:`20${S.length>0?S.map(A=>({interpersonal:"",career:"",family:"",emotional:"",lifestyle:"",learning:"",financial:"",responsibility:"",community:"",satisfaction:""})[A]||A).join(""):""}`};return{score:D,result:"",description:E.description,recommendations:E.recommendations,analysis:E.analysis}}},k=()=>{if(!Object.values(u).every(z=>z!=="")){alert("");return}const b=y(u),v={score:b.score,result:b.result,description:b.description,recommendations:b.recommendations,analysis:b.analysis,details:{relationships:u.q1,employment:u.q2,family:u.q3,confidence:u.q4,acceptance:u.q5,emotional:u.q6,routine:u.q7,learning:u.q8,financial:u.q9,health:u.q10,social:u.q11,goals:u.q12,adaptability:u.q13,responsibility:u.q14,identity:u.q15,community:u.q16,career:u.q17,conflict:u.q18,time:u.q19,satisfaction:u.q20}};g(v),a(!1),c(!0)},j=[{key:"q1",title:o.q1Title,desc:o.q1Desc},{key:"q2",title:o.q2Title,desc:o.q2Desc},{key:"q3",title:o.q3Title,desc:o.q3Desc},{key:"q4",title:o.q4Title,desc:o.q4Desc},{key:"q5",title:o.q5Title,desc:o.q5Desc},{key:"q6",title:o.q6Title,desc:o.q6Desc},{key:"q7",title:o.q7Title,desc:o.q7Desc},{key:"q8",title:o.q8Title,desc:o.q8Desc},{key:"q9",title:o.q9Title,desc:o.q9Desc},{key:"q10",title:o.q10Title,desc:o.q10Desc},{key:"q11",title:o.q11Title,desc:o.q11Desc},{key:"q12",title:o.q12Title,desc:o.q12Desc},{key:"q13",title:o.q13Title,desc:o.q13Desc},{key:"q14",title:o.q14Title,desc:o.q14Desc},{key:"q15",title:o.q15Title,desc:o.q15Desc},{key:"q16",title:o.q16Title,desc:o.q16Desc},{key:"q17",title:o.q17Title,desc:o.q17Desc},{key:"q18",title:o.q18Title,desc:o.q18Desc},{key:"q19",title:o.q19Title,desc:o.q19Desc},{key:"q20",title:o.q20Title,desc:o.q20Desc}],T=[{value:"excellent",label:o.excellent},{value:"good",label:o.good},{value:"fair",label:o.fair},{value:"poor",label:o.poor},{value:"terrible",label:o.terrible}];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",display:"flex",flexDirection:"column"},children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"30px"},children:r.jsxs("h1",{style:{color:"white",fontSize:"24px",fontWeight:"700",margin:0,textAlign:"center"},children:[" ",o.title]})}),r.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"30px"},children:r.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"40px",maxWidth:"500px",width:"calc(100% - 80px)",margin:"0 40px",textAlign:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[r.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:""}),r.jsx("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#333",marginBottom:"16px"},children:o.title}),r.jsx("p",{style:{fontSize:"16px",color:"#666",lineHeight:"1.6",marginBottom:"20px"},children:o.subtitle}),r.jsx("p",{style:{fontSize:"14px",color:"#888",lineHeight:"1.5",marginBottom:"30px",fontStyle:"italic"},children:o.subtitle2}),r.jsx("button",{onClick:()=>a(!0),style:{background:"linear-gradient(135deg, #6B5BFF, #5A4FCF)",color:"white",border:"none",borderRadius:"16px",padding:"16px 32px",fontSize:"18px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 16px rgba(107, 91, 255, 0.3)",transition:"all 0.3s ease"},onMouseEnter:x=>{x.currentTarget.style.transform="translateY(-2px)",x.currentTarget.style.boxShadow="0 6px 20px rgba(107, 91, 255, 0.4)"},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 16px rgba(107, 91, 255, 0.3)"},children:o.startAssessment})]})}),s&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:r.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"30px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflowY:"auto",position:"relative"},children:[r.jsx("button",{onClick:()=>a(!1),style:{position:"absolute",top:"15px",right:"20px",background:"none",border:"none",fontSize:"24px",color:"#666",cursor:"pointer",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background="#f0f0f0",x.currentTarget.style.color="#333"},onMouseLeave:x=>{x.currentTarget.style.background="none",x.currentTarget.style.color="#666"},children:""}),r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",color:"#333",marginBottom:"20px",textAlign:"center",paddingRight:"40px"},children:o.title}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:j.map((x,b)=>r.jsxs("div",{style:{border:"2px solid #f0f0f0",borderRadius:"16px",padding:"20px",background:"#fafafa"},children:[r.jsxs("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#333",marginBottom:"8px"},children:[b+1,". ",x.title]}),r.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px"},children:x.desc}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:T.map(v=>r.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"8px",cursor:"pointer",background:u[x.key]===v.value?"#6B5BFF":"white",color:u[x.key]===v.value?"white":"#333",border:`2px solid ${u[x.key]===v.value?"#6B5BFF":"#ddd"}`,transition:"all 0.2s ease",fontSize:"13px"},children:[r.jsx("input",{type:"radio",name:x.key,value:v.value,checked:u[x.key]===v.value,onChange:z=>h(We(ke({},u),{[x.key]:z.target.value})),style:{marginRight:"10px"}}),v.label]},v.value))})]},x.key))}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"30px",justifyContent:"center"},children:[r.jsx("button",{onClick:()=>a(!1),style:{background:"#f0f0f0",color:"#666",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:o.cancelAssessment}),r.jsx("button",{onClick:k,style:{background:"linear-gradient(135deg, #6B5BFF, #5A4FCF)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:o.submitAssessment})]})]})}),l&&p&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:r.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"30px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflowY:"auto"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",color:"#333",marginBottom:"8px"},children:o.assessmentComplete})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #6B5BFF, #5A4FCF)",color:"white",borderRadius:"16px",padding:"24px",textAlign:"center"},children:[r.jsxs("div",{style:{fontSize:"36px",fontWeight:"700",marginBottom:"8px"},children:[p.score.toFixed(1),"/5.0"]}),r.jsx("div",{style:{fontSize:"20px",fontWeight:"600"},children:p.result})]}),r.jsxs("div",{style:{border:"2px solid #f0f0f0",borderRadius:"16px",padding:"20px",background:"#fafafa"},children:[r.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:o.descriptionLabel}),r.jsx("p",{style:{fontSize:"16px",color:"#666",lineHeight:"1.6"},children:p.description})]}),r.jsxs("div",{style:{border:"2px solid #f0f0f0",borderRadius:"16px",padding:"20px",background:"#fafafa"},children:[r.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:o.analysisLabel}),r.jsx("p",{style:{fontSize:"16px",color:"#666",lineHeight:"1.6"},children:p.analysis})]}),r.jsxs("div",{style:{border:"2px solid #FFE4E1",borderRadius:"16px",padding:"20px",background:"linear-gradient(135deg, #FFF5F5, #FFE4E1)",boxShadow:"0 4px 12px rgba(255, 182, 193, 0.2)"},children:[r.jsxs("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#D63384",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[" ",o.recommendationsLabel]}),r.jsx("ul",{style:{fontSize:"16px",color:"#666",lineHeight:"1.6",paddingLeft:"20px"},children:p.recommendations.map((x,b)=>r.jsx("li",{style:{marginBottom:"8px"},children:x},b))})]})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"},children:r.jsx("button",{onClick:()=>c(!1),style:{background:"linear-gradient(135deg, #6B5BFF, #5A4FCF)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:o.closeReport})})]})})]})}const HV=Ze(ir),eT={"zh-TW":{title:"",confirming:"...",success:"",error:"",invalidToken:"",networkError:"",redirecting:"..."},"zh-CN":{title:"",confirming:"...",success:"",error:"",invalidToken:"",networkError:"",redirecting:"..."},en:{title:"Confirm Registration",confirming:"Confirming registration...",success:"Registration successful!",error:"Confirmation failed",invalidToken:"Confirmation link is invalid or expired",networkError:"Network connection failed, please try again later",redirecting:"Redirecting to homepage..."}};function $V(){const t=tt(),[e]=P2(),{lang:n}=dt(),i=eT[n]||eT["zh-TW"],[o,s]=m.useState("confirming"),[a,l]=m.useState("");return m.useEffect(()=>{const c=e.get("token");if(!c){s("error"),l(i.invalidToken);return}C(this,null,function*(){var h,p;try{const y=yield(yield fetch(vu("/email-verification/confirm-registration"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:c})})).json();if(y.success){const{email:k,registrationData:j}=y,T=yield zb(HV,k,j.password);yield om(T.user,{displayName:j.nickname}),yield _d(kn(Ct,"profiles",T.user.uid),{nickname:j.nickname,email:k,avatar:"",gender:j.gender,country:j.country,region:j.region,age:j.age,interest:j.interest,eventType:j.eventType,improvement:j.improvement,createdAt:new Date,updatedAt:new Date}),s("success"),l(i.success),setTimeout(()=>{t("/")},3e3)}else s("error"),l(y.error||i.error)}catch(g){console.error(":",g),s("error"),(h=g==null?void 0:g.message)!=null&&h.includes("Failed to fetch")||(p=g==null?void 0:g.message)!=null&&p.includes("NetworkError")?l(i.networkError):l((g==null?void 0:g.message)||i.error)}})},[e,t,i]),r.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",textAlign:"center",maxWidth:"400px",width:"90%"},children:[r.jsxs("div",{style:{marginBottom:"24px"},children:[o==="confirming"&&r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),o==="success"&&r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),o==="error"&&r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),r.jsxs("h1",{style:{color:o==="success"?"#10b981":o==="error"?"#ef4444":"#6B5BFF",fontSize:"24px",fontWeight:"bold",marginBottom:"8px"},children:[o==="confirming"&&i.confirming,o==="success"&&i.success,o==="error"&&i.error]}),r.jsx("p",{style:{color:"#666",fontSize:"16px",lineHeight:"1.5"},children:a})]}),o==="success"&&r.jsx("div",{style:{background:"#f0f9ff",padding:"16px",borderRadius:"8px",border:"1px solid #0ea5e9",marginTop:"16px"},children:r.jsx("p",{style:{color:"#0c4a6e",fontSize:"14px"},children:i.redirecting})}),o==="error"&&r.jsx("button",{onClick:()=>t("/register"),style:{background:"linear-gradient(90deg, #6e8efb, #a777e3)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",marginTop:"16px"},children:""})]})})}const tT={"zh-TW":{title:"AI",subtitle:"RestarterAI",back:"",logout:"",sections:{intro:{title:"",content:"RestarterAI"},aiFeatures:{title:"AI",content:"AI"},dataUsage:{title:"",content:"AIAI"},limitations:{title:"",content:"AI"},accuracy:{title:"",content:"AIAIAI"},userRights:{title:"",content:"AIAI"},updates:{title:"",content:"AI"},contact:{title:"",content:"AI"}}},"zh-CN":{title:"AI",subtitle:"RestarterAI",back:"",logout:"",sections:{intro:{title:"",content:"RestarterAI"},aiFeatures:{title:"AI",content:"AI"},dataUsage:{title:"",content:"AIAI"},limitations:{title:"",content:"AI"},accuracy:{title:"",content:"AIAIAI"},userRights:{title:"",content:"AIAI"},updates:{title:"",content:"AI"},contact:{title:"",content:"AI"}}},en:{title:"AI Usage Statement",subtitle:"Information about AI features in Restarter",back:"Back",logout:"Logout",sections:{intro:{title:"Introduction",content:"Restarter uses artificial intelligence technology to provide personalized mental health support services. This statement aims to explain how we use AI technology and your rights and responsibilities when using these features."},aiFeatures:{title:"AI Features",content:"Our AI features include: intelligent conversations, emotion analysis, personalized recommendations, content generation, etc. These features are designed to providemental health support, not as a substitute for professional medical services."},dataUsage:{title:"Data Usage",content:"To provide better AI services, we may collect and analyze your interaction data with AI. All data is encrypted and strictly complies with privacy protection regulations."},limitations:{title:"Usage Limitations",content:"AI features are foruse only and should not be used as a substitute for professional medical advice. In emergency situations, please contact professional medical personnel or call emergency numbers immediately."},accuracy:{title:"Accuracy Statement",content:"While we strive to provide accurate AI responses, AI technology still has limitations. We recommend maintaining critical thinking about AI-provided suggestions."},userRights:{title:"User Rights",content:"You have the right to understand how AI processes your data, request correction or deletion of related data, and choose not to use AI features."},updates:{title:"Update Notifications",content:"We regularly update AI features and related policies. Important updates will be notified to users through in-app notifications or email."},contact:{title:"Contact Us",content:"If you have any questions or suggestions about AI features, please contact us through the feedback box or customer service system in the app."}}},ja:{title:"AI",subtitle:"RestarterAI",back:"",logout:"",sections:{intro:{title:"",content:"RestarterAI"},aiFeatures:{title:"AI",content:"AI"},dataUsage:{title:"",content:"AIAI"},limitations:{title:"",content:"AI"},accuracy:{title:"",content:"AIAIAI"},userRights:{title:"",content:"AIAI"},updates:{title:"",content:"AI"},contact:{title:"",content:"AI"}}},ko:{title:"AI  ",subtitle:"Restarter AI    ",back:"",logout:"",sections:{intro:{title:"",content:"Restarter          .   AI   ,            ."},aiFeatures:{title:"AI ",content:" AI   ,  ,  ,    .              ."},dataUsage:{title:" ",content:"  AI    AI      .        ."},limitations:{title:" ",content:"AI            .         ."},accuracy:{title:" ",content:" AI     , AI    . AI        ."},userRights:{title:" ",content:"AI     ,      , AI     ."},updates:{title:" ",content:"AI     .        ."},contact:{title:"",content:"AI               ."}}},th:{title:" AI",subtitle:" AI  Restarter",back:"",logout:"",sections:{intro:{title:"",content:"Restarter   AI "},aiFeatures:{title:" AI",content:" AI :       "},dataUsage:{title:"",content:" AI   AI "},limitations:{title:"",content:" AI   "},accuracy:{title:"",content:" AI   AI   AI "},userRights:{title:"",content:" AI    AI"},updates:{title:"",content:" AI  "},contact:{title:"",content:" AI "}}},vi:{title:"Tuyn b s dng AI",subtitle:"Thng tin v tnh nng AI trong Restarter",back:"Quay li",logout:"ng xut",sections:{intro:{title:"Gii thiu",content:"Restarter s dng cng ngh tr tu nhn to  cung cp dch v h tr sc khe tm thn c nhn ha. Tuyn b ny nhm gii thch cch chng ti s dng cng ngh AI v quyn li cng nh trch nhim ca bn khi s dng cc tnh nng ny."},aiFeatures:{title:"Tnh nng AI",content:"Cc tnh nng AI ca chng ti bao gm: hi thoi thng minh, phn tch cm xc,  xut c nhn ha, to ni dung, v.v. Nhng tnh nng ny c thit k  cung cp h tr sc khe tm thn b sung, khng phi l thay th cho dch v y t chuyn nghip."},dataUsage:{title:"S dng d liu",content:" cung cp dch v AI tt hn, chng ti c th thu thp v phn tch d liu tng tc ca bn vi AI. Tt c d liu u c m ha v tun th nghim ngt cc quy nh bo v quyn ring t."},limitations:{title:"Hn ch s dng",content:"Tnh nng AI ch dnh cho mc ch s dng b sung v khng nn c s dng nh mt thay th cho li khuyn y t chuyn nghip. Trong tnh hung khn cp, vui lng lin h nhn vin y t chuyn nghip hoc gi s in thoi khn cp ngay lp tc."},accuracy:{title:"Tuyn b v  chnh xc",content:"Mc d chng ti c gng cung cp phn hi AI chnh xc, nhng cng ngh AI vn c nhng hn ch. Chng ti khuyn ngh duy tr t duy phn bin v cc  xut do AI cung cp."},userRights:{title:"Quyn ca ngi dng",content:"Bn c quyn hiu cch AI x l d liu ca mnh, yu cu sa i hoc xa d liu lin quan, v chn khng s dng cc tnh nng AI."},updates:{title:"Thng bo cp nht",content:"Chng ti thng xuyn cp nht cc tnh nng AI v chnh sch lin quan. Nhng cp nht quan trng s c thng bo cho ngi dng thng qua thng bo trong ng dng hoc email."},contact:{title:"Lin h chng ti",content:"Nu bn c bt k cu hi hoc  xut no v tnh nng AI, vui lng lin h vi chng ti thng qua hp phn hi hoc h thng dch v khch hng trong ng dng."}}},ms:{title:"Penyata Penggunaan AI",subtitle:"Maklumat tentang ciri AI dalam Restarter",back:"Kembali",logout:"Log keluar",sections:{intro:{title:"Pengenalan",content:"Restarter menggunakan teknologi kecerdasan buatan untuk menyediakan perkhidmatan sokongan kesihatan mental yang diperibadikan. Penyata ini bertujuan untuk menjelaskan bagaimana kami menggunakan teknologi AI dan hak serta tanggungjawab anda semasa menggunakan ciri-ciri ini."},aiFeatures:{title:"Ciri AI",content:"Ciri AI kami termasuk: perbualan pintar, analisis emosi, cadangan diperibadikan, penjanaan kandungan, dll. Ciri-ciri ini direka untuk menyediakan sokongan kesihatan mental tambahan, bukan sebagai pengganti untuk perkhidmatan perubatan profesional."},dataUsage:{title:"Penggunaan Data",content:"Untuk menyediakan perkhidmatan AI yang lebih baik, kami mungkin mengumpul dan menganalisis data interaksi anda dengan AI. Semua data disulitkan dan mematuhi peraturan perlindungan privasi dengan ketat."},limitations:{title:"Batasan Penggunaan",content:"Ciri AI adalah untuk kegunaan tambahan sahaja dan tidak sepatutnya digunakan sebagai pengganti untuk nasihat perubatan profesional. Dalam situasi kecemasan, sila hubungi kakitangan perubatan profesional atau panggil nombor kecemasan dengan segera."},accuracy:{title:"Penyata Ketepatan",content:"Walaupun kami berusaha untuk menyediakan respons AI yang tepat, teknologi AI masih mempunyai batasan. Kami mengesyorkan mengekalkan pemikiran kritikal tentang cadangan yang disediakan oleh AI."},userRights:{title:"Hak Pengguna",content:"Anda mempunyai hak untuk memahami bagaimana AI memproses data anda, meminta pembetulan atau penghapusan data berkaitan, dan memilih untuk tidak menggunakan ciri AI."},updates:{title:"Pemberitahuan Kemas Kini",content:"Kami kerap mengemas kini ciri AI dan polisi berkaitan. Kemas kini penting akan diberitahu kepada pengguna melalui pemberitahuan dalam aplikasi atau e-mel."},contact:{title:"Hubungi Kami",content:"Jika anda mempunyai sebarang soalan atau cadangan tentang ciri AI, sila hubungi kami melalui kotak maklum balas atau sistem perkhidmatan pelanggan dalam aplikasi."}}},la:{title:"Declaratio Usus AI",subtitle:"Informatio de functionibus AI in Restarter",back:"Redire",logout:"Exire",sections:{intro:{title:"Introductio",content:"Restarter technologia intelligentiae artificialis utitur ad praebendum servitium auxilii sanitatis mentalis personalizatum. Haec declaratio intendit explicare quomodo technologiam AI utamur et iura tua ac responsabilitates cum his functionibus utaris."},aiFeatures:{title:"Functiones AI",content:"Functiones AI nostrae includunt: colloquia intelligentes, analysis emotionum, commendationes personalizatae, generatio contenti, etc. Hae functiones designatae sunt ad praebendum auxilium sanitatis mentalis supplementarium, non substitutum pro servitiis medicis professionalibus."},dataUsage:{title:"Usus Datorum",content:"Ad praebendum servitia AI meliora, possumus colligere et analysare data interactionis tuae cum AI. Omnia data encryptata sunt et stricte observant regulas protectionis privatae."},limitations:{title:"Limitationes Usus",content:"Functiones AI sunt ad usum supplementarium tantum et non debent uti ut substitutum pro consilio medico professionale. In circumstantiis urgentibus, quaeso contacta personalem medicum professionalem vel voca numerum urgentem statim."},accuracy:{title:"Declaratio Accuratiae",content:"Etsi conamur praebere responsiones AI accuratas, technologia AI adhuc habet limitationes. Commendamus conservare cogitationem criticam de commendationibus ab AI praebitis."},userRights:{title:"Iura Usuarii",content:"Habet ius intelligere quomodo AI processat data tua, petere correctionem vel deletionem datorum relatorum, et eligere non uti functionibus AI."},updates:{title:"Notificationes Renovationis",content:"Regulariter renovamus functiones AI et politicas relatas. Renovationes importantes notificabuntur usuariis per notificationes in app vel email."},contact:{title:"Contacta Nos",content:"Si habes quaestiones vel commendationes de functionibus AI, quaeso contacta nos per cistam feedback vel systema servitii clientis in app."}}}};function KV(){const t=tt(),{lang:e}=dt(),n=tT[e]||tT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content})]},i))})]}),r.jsx(gs,{})]})}const nT={"zh-TW":{title:"",subtitle:"Restarter",back:"",logout:"",sections:{intro:{title:"",content:"Restarter"},serviceScope:{title:"",content:"AI"},limitations:{title:"",content:"Restarter"},emergency:{title:"",content:"1)  2)  3) "},professionalHelp:{title:"",content:""},userResponsibility:{title:"",content:""},privacy:{title:"",content:""},contact:{title:"",content:""}}},"zh-CN":{title:"",subtitle:"Restarter",back:"",logout:"",sections:{intro:{title:"",content:"Restarter"},serviceScope:{title:"",content:"AI"},limitations:{title:"",content:"Restarter"},emergency:{title:"",content:"1)  2)  3) "},professionalHelp:{title:"",content:""},userResponsibility:{title:"",content:""},privacy:{title:"",content:""},contact:{title:"",content:""}}},en:{title:"Mental Health Disclaimer",subtitle:"Important statement about Restarter mental health support services",back:"Back",logout:"Logout",sections:{intro:{title:"Important Statement",content:"Restarter providesmental health support services, not professional psychological therapy or medical services. This platform is designed to help users with self-exploration and emotion management, but cannot replace professional mental health treatment."},serviceScope:{title:"Service Scope",content:"Our services include: emotion recording, AI conversation assistance, community support, self-reflection tools, etc. These features are designed for daily emotion management and mental health maintenance, not for handling serious mental health issues."},limitations:{title:"Service Limitations",content:"Restarter does not provide emergency psychological crisis intervention, professional diagnosis, or treatment services. If you are experiencing serious mental health issues, please seek professional medical help immediately."},emergency:{title:"Emergency Situations",content:"If you have suicidal thoughts, severe depression, acute anxiety, or other emergency mental health issues, please immediately: 1) Call emergency hotlines 2) Contact professional psychologists 3) Go to the nearest emergency room."},professionalHelp:{title:"Professional Help",content:"We strongly recommend seeking professional mental health services in the following situations: persistent depression or anxiety, post-traumatic stress disorder, personality disorders, substance abuse issues, etc."},userResponsibility:{title:"User Responsibility",content:"When using this platform, you are responsible for your own mental health condition. If you find symptoms worsening or new problems arising, please stop using immediately and seek professional help."},privacy:{title:"Privacy Protection",content:"We strictly protect your privacy, but please note: in emergency situations, we may share necessary information according to legal requirements to protect your safety."},contact:{title:"Contact Us",content:"If you have any questions or suggestions about our services, please contact us through the feedback box in the app. We will respond to your questions as soon as possible."}}},ja:{title:"",subtitle:"Restarter",back:"",logout:"",sections:{intro:{title:"",content:"Restarter"},serviceScope:{title:"",content:"AI"},limitations:{title:"",content:"Restarter"},emergency:{title:"",content:"1)  2)  3) "},professionalHelp:{title:"",content:""},userResponsibility:{title:"",content:""},privacy:{title:"",content:""},contact:{title:"",content:""}}},ko:{title:" ",subtitle:"Restarter      ",back:"",logout:"",sections:{intro:{title:" ",content:"Restarter     ,      .          ,       ."},serviceScope:{title:" ",content:"   , AI  ,  ,     .         ,       ."},limitations:{title:" ",content:"Restarter    ,       .          ."},emergency:{title:" ",content:" ,  ,         : 1)    2)    3)    ."},professionalHelp:{title:" ",content:"         :   ,    ,  ,    ."},userResponsibility:{title:" ",content:"         .           ."},privacy:{title:" ",content:"  ,               ."},contact:{title:"",content:"           .    ."}}},th:{title:"",subtitle:" Restarter",back:"",logout:"",sections:{intro:{title:"",content:"Restarter    "},serviceScope:{title:"",content:":   AI      "},limitations:{title:"",content:"Restarter     "},emergency:{title:"",content:"    : 1)  2)  3) "},professionalHelp:{title:"",content:":     "},userResponsibility:{title:"",content:"    "},privacy:{title:"",content:" :  "},contact:{title:"",content:"  "}}},vi:{title:"Tuyn b min tr sc khe tm thn",subtitle:"Tuyn b quan trng v dch v h tr sc khe tm thn ca Restarter",back:"Quay li",logout:"ng xut",sections:{intro:{title:"Tuyn b quan trng",content:"Restarter cung cp dch v h tr sc khe tm thn b sung, khng phi l liu php tm l chuyn nghip hoc dch v y t. Nn tng ny c thit k  gip ngi dng t khm ph v qun l cm xc, nhng khng th thay th iu tr sc khe tm thn chuyn nghip."},serviceScope:{title:"Phm vi dch v",content:"Dch v ca chng ti bao gm: ghi li cm xc, h tr hi thoi AI, h tr cng ng, cng c t phn nh, v.v. Nhng tnh nng ny c thit k  qun l cm xc hng ngy v duy tr sc khe tm thn, khng phi  x l cc vn  sc khe tm thn nghim trng."},limitations:{title:"Hn ch dch v",content:"Restarter khng cung cp can thip khng hong tm l khn cp, chn on chuyn nghip hoc dch v iu tr. Nu bn ang gp cc vn  sc khe tm thn nghim trng, vui lng tm kim s gip  y t chuyn nghip ngay lp tc."},emergency:{title:"Tnh hung khn cp",content:"Nu bn c  ngh t t, trm cm nghim trng, lo lng cp tnh hoc cc vn  sc khe tm thn khn cp khc, vui lng ngay lp tc: 1) Gi ng dy nng khn cp 2) Lin h nh tm l hc chuyn nghip 3) n phng cp cu gn nht."},professionalHelp:{title:"S gip  chuyn nghip",content:"Chng ti khuyn ngh mnh m tm kim dch v sc khe tm thn chuyn nghip trong cc tnh hung sau: trm cm hoc lo lng dai dng, ri lon cng thng sau chn thng, ri lon nhn cch, vn  lm dng cht, v.v."},userResponsibility:{title:"Trch nhim ca ngi dng",content:"Khi s dng nn tng ny, bn cn chu trch nhim v tnh trng sc khe tm thn ca mnh. Nu bn thy cc triu chng xu i hoc xut hin vn  mi, vui lng ngng s dng ngay lp tc v tm kim s gip  chuyn nghip."},privacy:{title:"Bo v quyn ring t",content:"Chng ti bo v quyn ring t ca bn mt cch nghim ngt, nhng vui lng lu : trong tnh hung khn cp, chng ti c th chia s thng tin cn thit theo yu cu php l  bo v s an ton ca bn."},contact:{title:"Lin h chng ti",content:"Nu bn c bt k cu hi hoc  xut no v dch v ca chng ti, vui lng lin h vi chng ti thng qua hp phn hi trong ng dng. Chng ti s tr li cu hi ca bn cng sm cng tt."}}},ms:{title:"Penafian Kesihatan Mental",subtitle:"Penyata penting tentang perkhidmatan sokongan kesihatan mental Restarter",back:"Kembali",logout:"Log keluar",sections:{intro:{title:"Penyata Penting",content:"Restarter menyediakan perkhidmatan sokongan kesihatan mental tambahan, bukan terapi psikologi profesional atau perkhidmatan perubatan. Platform ini direka untuk membantu pengguna dengan penerokaan diri dan pengurusan emosi, tetapi tidak boleh menggantikan rawatan kesihatan mental profesional."},serviceScope:{title:"Skop Perkhidmatan",content:"Perkhidmatan kami termasuk: rakaman emosi, bantuan perbualan AI, sokongan komuniti, alat refleksi diri, dll. Ciri-ciri ini direka untuk pengurusan emosi harian dan penyelenggaraan kesihatan mental, bukan untuk menangani isu kesihatan mental yang serius."},limitations:{title:"Batasan Perkhidmatan",content:"Restarter tidak menyediakan campur tangan krisis psikologi kecemasan, diagnosis profesional, atau perkhidmatan rawatan. Jika anda mengalami isu kesihatan mental yang serius, sila dapatkan bantuan perubatan profesional dengan segera."},emergency:{title:"Situasi Kecemasan",content:"Jika anda mempunyai pemikiran membunuh diri, kemurungan teruk, kebimbangan akut, atau isu kesihatan mental kecemasan lain, sila segera: 1) Panggil talian panas kecemasan 2) Hubungi ahli psikologi profesional 3) Pergi ke bilik kecemasan terdekat."},professionalHelp:{title:"Bantuan Profesional",content:"Kami sangat mengesyorkan mendapatkan perkhidmatan kesihatan mental profesional dalam situasi berikut: kemurungan atau kebimbangan berterusan, gangguan tekanan pasca trauma, gangguan personaliti, isu penyalahgunaan bahan, dll."},userResponsibility:{title:"Tanggungjawab Pengguna",content:"Apabila menggunakan platform ini, anda bertanggungjawab untuk keadaan kesihatan mental anda sendiri. Jika anda mendapati simptom bertambah teruk atau masalah baru timbul, sila berhenti menggunakan dengan segera dan dapatkan bantuan profesional."},privacy:{title:"Perlindungan Privasi",content:"Kami melindungi privasi anda dengan ketat, tetapi sila ambil perhatian: dalam situasi kecemasan, kami mungkin berkongsi maklumat yang diperlukan mengikut keperluan undang-undang untuk melindungi keselamatan anda."},contact:{title:"Hubungi Kami",content:"Jika anda mempunyai sebarang soalan atau cadangan tentang perkhidmatan kami, sila hubungi kami melalui kotak maklum balas dalam aplikasi. Kami akan menjawab soalan anda secepat mungkin."}}},la:{title:"Renuntiatio Salutis Mentalis",subtitle:"Declaratio magna de servitiis auxilii salutis mentalis Restarter",back:"Redire",logout:"Exire",sections:{intro:{title:"Declaratio Magna",content:"Restarter praebet servitia auxilii salutis mentalis supplementaria, non therapiam psychologicam professionalem vel servitia medica. Haec platforma designata est ad iuvandum usuarios cum exploratione sui et administratione emotionum, sed non potest substituere curationem salutis mentalis professionalem."},serviceScope:{title:"Scopus Servitii",content:"Servitia nostra includunt: recordationem emotionum, auxilium colloquii AI, sustentationem communitatis, instrumenta reflexionis sui, etc. Hae functiones designatae sunt ad administrationem emotionum quotidianam et sustentationem salutis mentalis, non ad tractandas quaestiones salutis mentalis graves."},limitations:{title:"Limitationes Servitii",content:"Restarter non praebet interventionem crisis psychologicae urgentis, diagnosis professionalem, vel servitia curationis. Si experiris quaestiones salutis mentalis graves, quaeso pete auxilium medicum professionalem statim."},emergency:{title:"Circumstantiae Urgentes",content:"Si habes cogitationes suicidales, depressionem gravem, anxietatem acutam, vel alias quaestiones salutis mentalis urgentes, quaeso statim: 1) Voca lineas calidas urgentes 2) Contacta psychologos professionales 3) I ad cubiculum urgentium proximum."},professionalHelp:{title:"Auxilium Professionale",content:"Valde commendamus petere servitia salutis mentalis professionalia in circumstantiis sequentibus: depressio vel anxietas persistens, perturbatio post-traumatica, perturbationes personalitatis, quaestiones abusus substantiarum, etc."},userResponsibility:{title:"Responsabilitas Usuarii",content:"Cum utaris hac platforma, es responsabilis pro conditione salutis mentalis tuae. Si invenis symptomata deteriorantia vel problemata nova oriuntur, quaeso desine uti statim et pete auxilium professionale."},privacy:{title:"Protectio Privatae",content:"Stricte protegitur privata tua, sed quaeso nota: in circumstantiis urgentibus, possumus communicare informationem necessariam secundum requisita legalia ad protegendum securitatem tuam."},contact:{title:"Contacta Nos",content:"Si habes quaestiones vel commendationes de servitiis nostris, quaeso contacta nos per cistam feedback in app. Respondebimus quaestionibus tuis quam celerrime."}}}};function GV(){const t=tt(),{lang:e}=dt(),n=nT[e]||nT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content})]},i))})]}),r.jsx(gs,{})]})}const iT={"zh-TW":{title:"Cookie",subtitle:"RestarterCookie",back:"",sections:{intro:{title:"Cookie",content:"CookieCookie"},purpose:{title:"Cookie",content:"Cookie"},types:{title:"Cookie",content:"CookieCookieCookieCookieCookie"},control:{title:"Cookie",content:"CookieCookie"},thirdParty:{title:"Cookie",content:"CookieCookie"},updates:{title:"",content:"Cookie"}}},"zh-CN":{title:"Cookie",subtitle:"RestarterCookie",back:"",sections:{intro:{title:"Cookie",content:"CookieCookie"},purpose:{title:"Cookie",content:"Cookie"},types:{title:"Cookie",content:"CookieCookieCookieCookieCookie"},control:{title:"Cookie",content:"CookieCookie"},thirdParty:{title:"Cookie",content:"CookieCookie"},updates:{title:"",content:"Cookie"}}},en:{title:"Cookie Policy",subtitle:"Information about Cookie usage in Restarter",back:"Back",sections:{intro:{title:"What are Cookies",content:"Cookies are small text files stored on your device to improve your browsing experience. When you visit our website, we may place cookies on your device."},purpose:{title:"Purpose of Cookies",content:"We use cookies to: remember your preferences, analyze website usage, provide personalized content, improve website performance, ensure security."},types:{title:"Types of Cookies",content:"We use the following types of cookies: essential cookies (basic website functions), performance cookies (usage analytics), functional cookies (preference memory), advertising cookies (personalized content)."},control:{title:"Controlling Cookies",content:"You can control cookies through browser settings. Most browsers allow you to block or delete cookies, but this may affect website functionality."},thirdParty:{title:"Third-party Cookies",content:"We may use third-party services such as analytics tools that may set their own cookies. We cannot control these third-party cookies."},updates:{title:"Policy Updates",content:"We may update this Cookie Policy. Important changes will be notified to users through website notifications or email."}}},ja:{title:"Cookie",subtitle:"RestarterCookie",back:"",sections:{intro:{title:"Cookie",content:"CookieCookie"},purpose:{title:"Cookie",content:"Cookie"},types:{title:"Cookie",content:"CookieCookieCookieCookieCookie"},control:{title:"Cookie",content:"CookieCookie"},thirdParty:{title:"Cookie",content:"CookieCookie"},updates:{title:"",content:"Cookie"}}},ko:{title:" ",subtitle:"Restarter    ",back:"",sections:{intro:{title:"",content:"         .         ."},purpose:{title:" ",content:"   :  ,   ,   ,   ,  ."},types:{title:" ",content:"   :  (  ),  ( ),  ( ),  ( )."},control:{title:" ",content:"      .             ."},thirdParty:{title:"3 ",content:"   3    ,      .  3    ."},updates:{title:" ",content:"     .        ."}}},th:{title:"",subtitle:" Restarter",back:"",sections:{intro:{title:"",content:"  "},purpose:{title:"",content:":     "},types:{title:"",content:":  ()  ()  ()  ()"},control:{title:"",content:"  "},thirdParty:{title:"",content:"    "},updates:{title:"",content:" "}}},vi:{title:"Chnh sch Cookie",subtitle:"Thng tin v vic s dng Cookie trong Restarter",back:"Quay li",sections:{intro:{title:"Cookie l g",content:"Cookie l cc tp vn bn nh c lu tr trn thit b ca bn  ci thin tri nghim duyt web. Khi bn truy cp trang web ca chng ti, chng ti c th t cookie trn thit b ca bn."},purpose:{title:"Mc ch ca Cookie",content:"Chng ti s dng cookie : ghi nh ty chn ca bn, phn tch vic s dng trang web, cung cp ni dung c nhn ha, ci thin hiu sut trang web, m bo bo mt."},types:{title:"Cc loi Cookie",content:"Chng ti s dng cc loi cookie sau: cookie cn thit (chc nng c bn ca trang web), cookie hiu sut (phn tch s dng), cookie chc nng (ghi nh ty chn), cookie qung co (ni dung c nhn ha)."},control:{title:"Kim sot Cookie",content:"Bn c th kim sot cookie thng qua ci t trnh duyt. Hu ht cc trnh duyt cho php bn chn hoc xa cookie, nhng iu ny c th nh hng n chc nng trang web."},thirdParty:{title:"Cookie ca bn th ba",content:"Chng ti c th s dng cc dch v bn th ba nh cng c phn tch c th t cookie ring ca h. Chng ti khng th kim sot cc cookie bn th ba ny."},updates:{title:"Cp nht chnh sch",content:"Chng ti c th cp nht chnh sch Cookie ny. Nhng thay i quan trng s c thng bo cho ngi dng thng qua thng bo trang web hoc email."}}},ms:{title:"Dasar Cookie",subtitle:"Maklumat tentang penggunaan Cookie dalam Restarter",back:"Kembali",sections:{intro:{title:"Apa itu Cookie",content:"Cookie adalah fail teks kecil yang disimpan pada peranti anda untuk meningkatkan pengalaman melayari. Apabila anda melawat laman web kami, kami mungkin meletakkan cookie pada peranti anda."},purpose:{title:"Tujuan Cookie",content:"Kami menggunakan cookie untuk: mengingati pilihan anda, menganalisis penggunaan laman web, menyediakan kandungan peribadi, meningkatkan prestasi laman web, memastikan keselamatan."},types:{title:"Jenis Cookie",content:"Kami menggunakan jenis cookie berikut: cookie penting (fungsi asas laman web), cookie prestasi (analisis penggunaan), cookie fungsi (ingatan pilihan), cookie iklan (kandungan peribadi)."},control:{title:"Mengawal Cookie",content:"Anda boleh mengawal cookie melalui tetapan pelayar. Kebanyakan pelayar membolehkan anda menyekat atau memadamkan cookie, tetapi ini mungkin menjejaskan fungsi laman web."},thirdParty:{title:"Cookie Pihak Ketiga",content:"Kami mungkin menggunakan perkhidmatan pihak ketiga seperti alat analisis yang mungkin menetapkan cookie sendiri. Kami tidak boleh mengawal cookie pihak ketiga ini."},updates:{title:"Kemas Kini Dasar",content:"Kami mungkin mengemas kini Dasar Cookie ini. Perubahan penting akan diberitahu kepada pengguna melalui pemberitahuan laman web atau e-mel."}}},la:{title:"Politica Cookie",subtitle:"Informatio de usu Cookie in Restarter",back:"Redire",sections:{intro:{title:"Quid sunt Cookie",content:"Cookie sunt parva texta documenta in tuo apparatu reposita ad meliorandum navigationis experientiam. Cum nostrum situm visitas, possumus cookie in tuo apparatu ponere."},purpose:{title:"Propositum Cookie",content:"Utimur cookie ad: meminisse electiones tuas, analysare usum situs, praebere contentum personalizatum, meliorare efficacitatem situs, securitatem praestare."},types:{title:"Typi Cookie",content:"Utimur sequentibus typis cookie: cookie essentiales (functiones basici situs), cookie efficacitatis (analysis usus), cookie functionales (memoria electionum), cookie publicitatis (contentum personalizatum)."},control:{title:"Controllare Cookie",content:"Potes controllare cookie per configurationes navigatoris. Plurimi navigatores permittunt te prohibere vel delere cookie, sed hoc potest afficere functiones situs."},thirdParty:{title:"Cookie Tertii Partis",content:"Possumus uti servitiis tertii partis sicut instrumenta analysi quae possunt ponere sua propria cookie. Non possumus controllare haec cookie tertii partis."},updates:{title:"Renovationes Politicae",content:"Possumus renovare hanc Politicam Cookie. Mutationes importantes notificabuntur usuariis per notificationes situs vel email."}}}};function QV(){const t=tt(),{lang:e}=dt(),n=iT[e]||iT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content})]},i))})]}),r.jsx(gs,{})]})}const rT={"zh-TW":{title:"",subtitle:"Restarter",back:"",sections:{intro:{title:"",content:"Restarter13"},ageLimit:{title:"",content:"1313"},parentalConsent:{title:"",content:"13"},dataProtection:{title:"",content:""},contact:{title:"",content:""}}},"zh-CN":{title:"",subtitle:"Restarter",back:"",sections:{intro:{title:"",content:"Restarter13"},ageLimit:{title:"",content:"1313"},parentalConsent:{title:"",content:"13"},dataProtection:{title:"",content:""},contact:{title:"",content:""}}},en:{title:"Children's Privacy",subtitle:"Restarter protection measures for children's privacy",back:"Back",sections:{intro:{title:"Children's Privacy Statement",content:"Restarter values children's privacy protection and strictly complies with relevant laws and regulations. We do not knowingly collect personal information from children under 13 unless we obtain explicit consent from parents or guardians."},ageLimit:{title:"Age Restrictions",content:"Our services are primarily intended for users aged 13 and above. Children under 13 must use our services under parental or guardian supervision."},parentalConsent:{title:"Parental Consent",content:"If we discover that we have collected information from children under 13, we will immediately delete the relevant data and notify parents. Parents have the right to request to view, modify, or delete their children's personal information."},dataProtection:{title:"Data Protection",content:"We implement additional protection measures for children's data, including encrypted storage, access restrictions, regular reviews, etc., to ensure children's privacy security."},contact:{title:"Contact Us",content:"If you have any questions about children's privacy protection, please contact us through the feedback box in the app. We will seriously handle every related request."}}},ja:{title:"",subtitle:"Restarter",back:"",sections:{intro:{title:"",content:"Restarter13"},ageLimit:{title:"",content:"1313"},parentalConsent:{title:"",content:"13"},dataProtection:{title:"",content:""},contact:{title:"",content:""}}},ko:{title:"  ",subtitle:"Restarter     ",back:"",sections:{intro:{title:"   ",content:"Restarter          .        13      ."},ageLimit:{title:" ",content:"   13    . 13           ."},parentalConsent:{title:" ",content:"13            .    , ,    ."},dataProtection:{title:" ",content:"    ,  ,           ."},contact:{title:"",content:"            .     ."}}},th:{title:"",subtitle:" Restarter",back:"",sections:{intro:{title:"",content:"Restarter   13  "},ageLimit:{title:"",content:" 13   13 "},parentalConsent:{title:"",content:" 13     "},dataProtection:{title:"",content:"     "},contact:{title:"",content:"  "}}},vi:{title:"Bo v quyn ring t tr em",subtitle:"Cc bin php bo v quyn ring t tr em ca Restarter",back:"Quay li",sections:{intro:{title:"Tuyn b bo v quyn ring t tr em",content:"Restarter coi trng vic bo v quyn ring t tr em v tun th nghim ngt cc lut php v quy nh lin quan. Chng ti khng c  thu thp thng tin c nhn ca tr em di 13 tui tr khi c s ng  r rng t cha m hoc ngi gim h."},ageLimit:{title:"Hn ch  tui",content:"Dch v ca chng ti ch yu dnh cho ngi dng t 13 tui tr ln. Tr em di 13 tui phi s dng dch v di s gim st ca cha m hoc ngi gim h."},parentalConsent:{title:"S ng  ca cha m",content:"Nu chng ti pht hin  thu thp thng tin t tr em di 13 tui, chng ti s ngay lp tc xa d liu lin quan v thng bo cho cha m. Cha m c quyn yu cu xem, sa i hoc xa thng tin c nhn ca con ci."},dataProtection:{title:"Bo v d liu",content:"Chng ti thc hin cc bin php bo v b sung cho d liu tr em, bao gm lu tr m ha, hn ch truy cp, nh gi nh k, v.v.,  m bo an ton quyn ring t tr em."},contact:{title:"Lin h chng ti",content:"Nu bn c bt k cu hi no v bo v quyn ring t tr em, vui lng lin h vi chng ti thng qua hp phn hi trong ng dng. Chng ti s x l nghim tc mi yu cu lin quan."}}},ms:{title:"Privasi Kanak-kanak",subtitle:"Langkah-langkah perlindungan privasi kanak-kanak Restarter",back:"Kembali",sections:{intro:{title:"Penyata Privasi Kanak-kanak",content:"Restarter menghargai perlindungan privasi kanak-kanak dan mematuhi undang-undang dan peraturan yang berkaitan dengan ketat. Kami tidak sengaja mengumpul maklumat peribadi kanak-kanak di bawah umur 13 tahun melainkan kami memperoleh persetujuan yang jelas daripada ibu bapa atau penjaga."},ageLimit:{title:"Sekatan Umur",content:"Perkhidmatan kami terutamanya bertujuan untuk pengguna berumur 13 tahun ke atas. Kanak-kanak di bawah umur 13 tahun mesti menggunakan perkhidmatan kami di bawah penyeliaan ibu bapa atau penjaga."},parentalConsent:{title:"Persetujuan Ibu Bapa",content:"Jika kami mendapati bahawa kami telah mengumpul maklumat daripada kanak-kanak di bawah umur 13 tahun, kami akan segera memadamkan data yang berkaitan dan memberitahu ibu bapa. Ibu bapa mempunyai hak untuk meminta melihat, mengubah suai, atau memadamkan maklumat peribadi anak-anak mereka."},dataProtection:{title:"Perlindungan Data",content:"Kami melaksanakan langkah-langkah perlindungan tambahan untuk data kanak-kanak, termasuk penyimpanan terenkripsi, sekatan akses, ulasan berkala, dll., untuk memastikan keselamatan privasi kanak-kanak."},contact:{title:"Hubungi Kami",content:"Jika anda mempunyai sebarang soalan tentang perlindungan privasi kanak-kanak, sila hubungi kami melalui kotak maklum balas dalam aplikasi. Kami akan menangani setiap permintaan yang berkaitan dengan serius."}}},la:{title:"Privata Puerorum",subtitle:"Restarter mensurae protectionis privatae puerorum",back:"Redire",sections:{intro:{title:"Declaratio Privatae Puerorum",content:"Restarter aestimat protectionem privatae puerorum et stricte observat leges et regulas pertinentes. Non scienter colligimus informationem personalem puerorum sub annis 13 nisi obtinemus consensum explicitum a parentibus vel tutoribus."},ageLimit:{title:"Limitationes Aetatis",content:"Servitia nostra principaliter intenduntur pro usuariis annorum 13 et supra. Pueri sub annis 13 debent uti servitiis nostris sub supervisione parentum vel tutorum."},parentalConsent:{title:"Consensus Parentum",content:"Si invenimus nos collegisse informationem a pueris sub annis 13, statim delere data relata et notificare parentes. Parentes habent ius petendi videre, mutare, vel delere informationem personalem filiorum suorum."},dataProtection:{title:"Protectio Datorum",content:"Implementamus mensuras protectionis additas pro datis puerorum, includentes repositorium encryptatum, limitationes accessus, revisiones regulares, etc., ad praestandum securitatem privatae puerorum."},contact:{title:"Contacta Nos",content:"Si habes quaestiones de protectione privatae puerorum, quaeso contacta nos per cistam feedback in app. Tractabimus omnem petitionem relatum serio."}}}};function YV(){const t=tt(),{lang:e}=dt(),n=rT[e]||rT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content})]},i))})]}),r.jsx(gs,{})]})}const oT={"zh-TW":{title:"",subtitle:"Restarter",back:"",sections:{scope:{title:"1. ",content:"Restarter"},crossBorder:{title:"2. ",content:"",items:["","",""]},compliance:{title:"3. ",content:"",items:["GDPRCCPA","",""]},dispute:{title:"4. ",content:""},contact:{title:"5. ",content:"",email:"legal@restarter.com"},updates:{title:"6. ",content:""}}},"zh-CN":{title:"",subtitle:"Restarter",back:"",sections:{scope:{title:"1. ",content:"Restarter"},crossBorder:{title:"2. ",content:"",items:["","",""]},compliance:{title:"3. ",content:"",items:["GDPRCCPA","",""]},dispute:{title:"4. ",content:""},contact:{title:"5. ",content:"",email:"legal@restarter.com"},updates:{title:"6. ",content:""}}},en:{title:"International Users Legal Statement",subtitle:"Legal applicability information for Restarter international users",back:"Back",sections:{scope:{title:"1. Scope of Application",content:"This statement applies to all international users of Restarter services, regardless of which country or region you are located in."},crossBorder:{title:"2. Cross-Border Data Transmission",content:"As our services may involve cross-border data transmission, we commit to:",items:["Comply with data protection laws of relevant countries","Implement appropriate security measures to protect your data","Obtain necessary legal authorization when required"]},compliance:{title:"3. Local Legal Compliance",content:"We strive to ensure that our services comply with applicable laws in your region, including but not limited to:",items:["Data protection regulations (such as GDPR, CCPA, etc.)","Consumer protection laws","Content regulation requirements"]},dispute:{title:"4. Dispute Resolution",content:"In the event of disputes, we will prioritize resolution through friendly negotiation. If negotiation fails, we will handle the matter according to relevant laws and our service terms."},contact:{title:"5. Contact Information",content:"If you have any questions about this statement, or need to understand the legal applicability in specific regions, please contact us through:",email:"Email: legal@restarter.com"},updates:{title:"6. Update Notifications",content:"We may update this statement based on legal changes or business needs. Important updates will be notified to users through in-app notifications or email."}}},ja:{title:"",subtitle:"Restarter",back:"",sections:{scope:{title:"1. ",content:"Restarter"},crossBorder:{title:"2. ",content:"",items:["","",""]},compliance:{title:"3. ",content:"",items:["GDPRCCPA","",""]},dispute:{title:"4. ",content:""},contact:{title:"5. ",content:"",email:"legal@restarter.com"},updates:{title:"6. ",content:""}}},ko:{title:"   ",subtitle:"Restarter      ",back:"",sections:{scope:{title:"1.  ",content:"       Restarter      ."},crossBorder:{title:"2.    ",content:"          :",items:["    ","     ","    "]},compliance:{title:"3.   ",content:"         ,     :",items:["  (GDPR, CCPA )"," ","  "]},dispute:{title:"4.  ",content:"  ,       .   ,       ."},contact:{title:"5.  ",content:"               :",email:": legal@restarter.com"},updates:{title:"6.  ",content:"         .        ."}}},th:{title:"",subtitle:" Restarter ",back:"",sections:{scope:{title:"1. ",content:" Restarter "},crossBorder:{title:"2. ",content:" :",items:["","",""]},compliance:{title:"3. ",content:" :",items:[" ( GDPR, CCPA )","",""]},dispute:{title:"4. ",content:"   "},contact:{title:"5. ",content:"  :",email:": legal@restarter.com"},updates:{title:"6. ",content:" "}}},vi:{title:"Tuyn b php l cho ngi dng quc t",subtitle:"Thng tin v kh nng p dng php l cho ngi dng Restarter quc t",back:"Quay li",sections:{scope:{title:"1. Phm vi p dng",content:"Tuyn b ny p dng cho tt c ngi dng quc t ca dch v Restarter, bt k bn  quc gia hoc khu vc no."},crossBorder:{title:"2. Truyn d liu xuyn bin gii",content:"V dch v ca chng ti c th lin quan n vic truyn d liu xuyn bin gii, chng ti cam kt:",items:["Tun th lut bo v d liu ca cc quc gia lin quan","Thc hin cc bin php bo mt ph hp  bo v d liu ca bn","C c y quyn php l cn thit khi cn thit"]},compliance:{title:"3. Tun th php lut a phng",content:"Chng ti n lc m bo dch v tun th lut php p dng trong khu vc ca bn, bao gm nhng khng gii hn :",items:["Quy nh bo v d liu (nh GDPR, CCPA, v.v.)","Lut bo v ngi tiu dng","Yu cu qun l ni dung"]},dispute:{title:"4. Gii quyt tranh chp",content:"Trong trng hp c tranh chp, chng ti s u tin gii quyt thng qua m phn thn thin. Nu m phn tht bi, chng ti s x l theo lut php lin quan v iu khon dch v ca chng ti."},contact:{title:"5. Thng tin lin h",content:"Nu bn c bt k cu hi no v tuyn b ny, hoc cn hiu v kh nng p dng php l  cc khu vc c th, vui lng lin h chng ti qua:",email:"Email: legal@restarter.com"},updates:{title:"6. Thng bo cp nht",content:"Chng ti c th cp nht tuyn b ny da trn thay i php l hoc nhu cu kinh doanh. Cc cp nht quan trng s c thng bo cho ngi dng thng qua thng bo trong ng dng hoc email."}}},ms:{title:"Penyata Undang-undang Pengguna Antarabangsa",subtitle:"Maklumat kebolehgunaan undang-undang untuk pengguna Restarter antarabangsa",back:"Kembali",sections:{scope:{title:"1. Skop Permohonan",content:"Penyata ini terpakai kepada semua pengguna antarabangsa perkhidmatan Restarter, tanpa mengira negara atau rantau mana anda berada."},crossBorder:{title:"2. Pemindahan Data Merentasi Sempadan",content:"Oleh kerana perkhidmatan kami mungkin melibatkan pemindahan data merentasi sempadan, kami berjanji untuk:",items:["Mematuhi undang-undang perlindungan data negara-negara yang berkaitan","Melaksanakan langkah-langkah keselamatan yang sesuai untuk melindungi data anda","Mendapatkan kebenaran undang-undang yang diperlukan apabila diperlukan"]},compliance:{title:"3. Pematuhan Undang-undang Tempatan",content:"Kami berusaha untuk memastikan perkhidmatan mematuhi undang-undang yang berkenaan di rantau anda, termasuk tetapi tidak terhad kepada:",items:["Peraturan perlindungan data (seperti GDPR, CCPA, dll.)","Undang-undang perlindungan pengguna","Keperluan pengawalseliaan kandungan"]},dispute:{title:"4. Penyelesaian Pertikaian",content:"Sekiranya berlaku pertikaian, kami akan mengutamakan penyelesaian melalui rundingan secara baik. Jika rundingan gagal, kami akan mengendalikan perkara mengikut undang-undang yang berkaitan dan terma perkhidmatan kami."},contact:{title:"5. Maklumat Perhubungan",content:"Jika anda mempunyai sebarang soalan tentang penyata ini, atau perlu memahami kebolehgunaan undang-undang di rantau tertentu, sila hubungi kami melalui:",email:"E-mel: legal@restarter.com"},updates:{title:"6. Pemberitahuan Kemas Kini",content:"Kami mungkin mengemas kini penyata ini berdasarkan perubahan undang-undang atau keperluan perniagaan. Kemas kini penting akan diberitahu kepada pengguna melalui pemberitahuan dalam aplikasi atau e-mel."}}},la:{title:"Declaratio Iuridica Usuarii Internationalis",subtitle:"Informatio de applicabilitate iuridica pro usuariis Restarter internationalibus",back:"Redire",sections:{scope:{title:"1. Scopum Applicationis",content:"Haec declaratio applicatur omnibus usuariis internationalibus servitiorum Restarter, quocumque in regione vel civitate sitis."},crossBorder:{title:"2. Transmissio Datorum Trans Fines",content:"Cum servitia nostra transmissionem datorum trans fines involvere possint, nos promittimus:",items:["Leges protectionis datorum civitatum pertinentium observare","Mensuras securitatis aptas implementare ad data tua protegenda","Auctoritatem iuridicam necessariam obtinere cum necesse est"]},compliance:{title:"3. Observantia Legis Localis",content:"Nos conamur ut servitia nostra legibus applicabilibus in regione tua conformia sint, includendo sed non limitando ad:",items:["Regulationes protectionis datorum (sicut GDPR, CCPA, etc.)","Leges protectionis consumptorum","Requisitiones regulationis contenti"]},dispute:{title:"4. Resolutio Controversiarum",content:"In casu controversiarum, nos controversias per negotiationem amicabilem resolvere praeferimus. Si negotiatio defecit, nos materiam secundum leges pertinentes et terminos servitiorum nostrorum tractabimus."},contact:{title:"5. Informatio Contactus",content:"Si quaestiones de hac declaratione habes, vel necesse est intellegere applicabilitatem iuridicam in regionibus specificis, quaeso nos contacta per:",email:"Epistula: legal@restarter.com"},updates:{title:"6. Notificationes Renovationis",content:"Nos hanc declarationem renovare possumus secundum mutationes iuridicas vel necessitates negotii. Renovationes importantes per notificationes in app vel epistulam usuariis notificabuntur."}}}},XV=()=>{const t=tt(),{lang:e}=dt(),n=oT[e]||oT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content}),o.items&&r.jsx("ul",{style:{color:"#333",fontSize:16,paddingLeft:20,marginTop:8},children:o.items.map((s,a)=>r.jsx("li",{style:{marginBottom:4},children:s},a))}),o.email&&r.jsx("p",{style:{color:"#6B5BFF",fontSize:16,fontWeight:600,marginTop:8},children:o.email})]},i))})]}),r.jsx(gs,{})]})},sT={"zh-TW":{title:"",subtitle:"Restarter",back:"",sections:{commitment:{title:"1. ",content:"Restarter"},encryption:{title:"2. ",content:"",items:["TLS","",""]},accessControl:{title:"3. ",content:"",items:["RBAC","MFA","",""]},infrastructure:{title:"4. ",content:"",items:["","","",""]},employees:{title:"5. ",content:"",items:["","",""]},incidentResponse:{title:"6. ",content:"",items:["","","",""]},thirdParty:{title:"7. ",content:""},reporting:{title:"8. ",content:"",email:"security@restarter.com"}}},"zh-CN":{title:"",subtitle:"Restarter",back:"",sections:{commitment:{title:"1. ",content:"Restarter"},encryption:{title:"2. ",content:"",items:["TLS","",""]},accessControl:{title:"3. ",content:"",items:["RBAC","MFA","",""]},infrastructure:{title:"4. ",content:"",items:["","","",""]},employees:{title:"5. ",content:"",items:["","",""]},incidentResponse:{title:"6. ",content:"",items:["","","",""]},thirdParty:{title:"7. ",content:""},reporting:{title:"8. ",content:"",email:"security@restarter.com"}}},en:{title:"Security Statement",subtitle:"Statement on Restarter data security and privacy protection",back:"Back",sections:{commitment:{title:"1. Data Security Commitment",content:"Restarter is committed to protecting your personal information and data security. We adopt industry-standard security measures to protect your data."},encryption:{title:"2. Data Encryption",content:"We use the following encryption technologies to protect your data:",items:["Transport Layer Security (TLS) encryption for all data transmission","Database-level encrypted storage","End-to-end encryption for sensitive information"]},accessControl:{title:"3. Access Control",content:"We implement strict data access controls:",items:["Role-based access control (RBAC)","Multi-factor authentication (MFA)","Regular security audits and monitoring","Principle of least privilege"]},infrastructure:{title:"4. Security Infrastructure",content:"Our infrastructure security measures include:",items:["Cloud service provider security certifications","Regular security vulnerability scanning","Intrusion detection and prevention systems","Disaster recovery and business continuity plans"]},employees:{title:"5. Employee Security",content:"We ensure all employees:",items:["Receive regular security training","Sign confidentiality agreements","Follow data protection best practices"]},incidentResponse:{title:"6. Security Incident Response",content:"In the event of a security incident, we will:",items:["Immediately activate emergency response procedures","Assess the scope of the incident","Timely notify affected users","Take remedial measures to prevent similar incidents"]},thirdParty:{title:"7. Third-Party Security",content:"We strictly review the security standards of third-party service providers to ensure they meet our security requirements."},reporting:{title:"8. Security Reporting",content:"If you discover security vulnerabilities or have security-related issues, please contact us immediately:",email:"Security email: security@restarter.com"}}},ja:{title:"",subtitle:"Restarter",back:"",sections:{commitment:{title:"1. ",content:"Restarter"},encryption:{title:"2. ",content:"",items:["Transport Layer SecurityTLS","",""]},access:{title:"3. ",content:"RBAC"},monitoring:{title:"4. ",content:""},incident:{title:"5. ",content:"72"},compliance:{title:"6. ",content:"GDPRCCPA"}}},ko:{title:" ",subtitle:"Restarter       ",back:"",sections:{commitment:{title:"1.   ",content:"Restarter       .  ,  ,          ."},encryption:{title:"2.  ",content:"       :",items:["    Transport Layer Security(TLS)","   ","   "]},access:{title:"3.  ",content:"   (RBAC)               ."},monitoring:{title:"4.  ",content:" ,  ,           ."},incident:{title:"5.   ",content:"   ,         72  ."},compliance:{title:"6. ",content:"GDPR, CCPA      ,         ."}}},th:{title:"",subtitle:" Restarter",back:"",sections:{commitment:{title:"1. ",content:"Restarter     "},encryption:{title:"2. ",content:":",items:["Transport Layer Security (TLS) ",""," end-to-end "]},access:{title:"3. ",content:"  Role-Based Access Control (RBAC)  "},monitoring:{title:"4. ",content:"    "},incident:{title:"5. ",content:"  72 "},compliance:{title:"6. ",content:"  GDPR, CCPA  "}}},vi:{title:"Tuyn b bo mt",subtitle:"Tuyn b v bo mt d liu v bo v quyn ring t ca Restarter",back:"Quay li",sections:{commitment:{title:"1. Cam kt bo mt d liu",content:"Restarter cam kt bo v thng tin c nhn v bo mt d liu ca bn. Chng ti s dng cc bin php bo mt theo tiu chun ngnh  bo v d liu ca bn, bao gm nhng khng gii hn  cng ngh m ha, kim sot truy cp v gim st bo mt."},encryption:{title:"2. M ha d liu",content:"Chng ti s dng cng ngh m ha nhiu lp  bo v d liu ca bn:",items:["Transport Layer Security (TLS)  m ha truyn d liu","Lu tr m ha cp  c s d liu","M ha end-to-end cho thng tin nhy cm"]},access:{title:"3. Kim sot truy cp",content:"Chng ti thc hin kim sot truy cp d liu nghim ngt, bao gm Kim sot truy cp da trn vai tr (RBAC) v xc thc a yu t, m bo ch nhn vin c y quyn mi c th truy cp d liu ca bn."},monitoring:{title:"4. Gim st bo mt",content:"Chng ti lin tc gim st bo mt h thng, bao gm pht hin bt thng, pht hin xm nhp v kim ton bo mt nh k,  m bo bo mt d liu ca bn."},incident:{title:"5. Phn ng s c bo mt",content:"Trong trng hp xy ra s c bo mt, chng ti s ngay lp tc kch hot cc th tc phn ng khn cp v thng bo cho ngi dng b nh hng trong vng 72 gi."},compliance:{title:"6. Tun th",content:"Chng ti tun th cc quy nh bo v d liu lin quan, bao gm GDPR, CCPA, v.v., v thng xuyn cp nht cc bin php bo mt  p ng cc yu cu php l mi nht."}}},ms:{title:"Penyata Keselamatan",subtitle:"Penyata mengenai Keselamatan Data dan Perlindungan Privasi Restarter",back:"Kembali",sections:{commitment:{title:"1. Komitmen Keselamatan Data",content:"Restarter komited untuk melindungi maklumat peribadi dan keselamatan data anda. Kami menggunakan langkah-langkah keselamatan standard industri untuk melindungi data anda, termasuk tetapi tidak terhad kepada teknologi penyulitan, kawalan akses, dan pemantauan keselamatan."},encryption:{title:"2. Penyulitan Data",content:"Kami menggunakan teknologi penyulitan berbilang lapisan untuk melindungi data anda:",items:["Transport Layer Security (TLS) untuk penyulitan penghantaran data","Penyimpanan tersulit peringkat pangkalan data","Penyulitan end-to-end untuk maklumat sensitif"]},access:{title:"3. Kawalan Akses",content:"Kami melaksanakan kawalan akses data yang ketat, termasuk Kawalan Akses Berasaskan Peranan (RBAC) dan pengesahan berbilang faktor, memastikan hanya kakitangan yang diberi kuasa dapat mengakses data anda."},monitoring:{title:"4. Pemantauan Keselamatan",content:"Kami sentiasa memantau keselamatan sistem, termasuk pengesanan anomali, pengesanan pencerobohan, dan audit keselamatan berkala, untuk memastikan keselamatan data anda."},incident:{title:"5. Tindak Balas Insiden Keselamatan",content:"Dalam kes insiden keselamatan, kami akan segera mengaktifkan prosedur tindak balas kecemasan dan memberitahu pengguna yang terjejas dalam tempoh 72 jam."},compliance:{title:"6. Pematuhan",content:"Kami mematuhi peraturan perlindungan data yang berkaitan, termasuk GDPR, CCPA, dll., dan mengemas kini langkah-langkah keselamatan secara berkala untuk memenuhi keperluan undang-undang terkini."}}},la:{title:"Declaratio Securitatis",subtitle:"Declaratio de Securitate Datorum et Protectione Privatae Restarter",back:"Redire",sections:{commitment:{title:"1. Promissio Securitatis Datorum",content:"Restarter promittit protegere informationem personalem et securitatem datorum tuorum. Nos utimur mensuris securitatis standard industriae ad protegenda data tua, includendo sed non limitando ad technologiam encryptionis, controlum accessus, et monitoring securitatis."},encryption:{title:"2. Encryptio Datorum",content:"Nos utimur technologia encryptionis multi-strata ad protegenda data tua:",items:["Transport Layer Security (TLS) pro encryptione transmissionis datorum","Repositorium encryptum nivelis database","Encryptio end-to-end pro informatione sensibili"]},access:{title:"3. Controlum Accessus",content:"Nos implementamus controla stricta accessus datorum, includendo Controlum Accessus Basatum in Rolam (RBAC) et authenticationem multi-factor, securos solum personalem auctorizatum posse accedere data tua."},monitoring:{title:"4. Monitoring Securitatis",content:"Nos continue monitamus securitatem systematis, includendo detectionem anomaliae, detectionem intrusionis, et auditum securitatis periodicum, ad securam securitatem datorum tuorum."},incident:{title:"5. Responsum Incidentis Securitatis",content:"In casu incidentis securitatis, nos immediate activabimus proceduras responsi urgentis et notificabimus usuarios affectatos intra 72 horas."},compliance:{title:"6. Observantia",content:"Nos observamus regulationes protectionis datorum pertinentes, includendo GDPR, CCPA, etc., et regulariter renovamus mensuras securitatis ad satisfaciendas requisitiones iuridicas recentissimas."}}}},JV=()=>{const t=tt(),{lang:e}=dt(),n=sT[e]||sT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content}),o.items&&r.jsx("ul",{style:{color:"#333",fontSize:16,paddingLeft:20,marginTop:8},children:o.items.map((s,a)=>r.jsx("li",{style:{marginBottom:4},children:s},a))}),o.email&&r.jsx("p",{style:{color:"#6B5BFF",fontSize:16,fontWeight:600,marginTop:8},children:o.email})]},i))})]}),r.jsx(gs,{})]})},aT={"zh-TW":{title:"",subtitle:"Restarter",back:"",sections:{overview:{title:"1. ",content:"Restarter"},types:{title:"2. ",content:"",items:["","","Cookie","",""]},methods:{title:"3. ",content:"",items:["","","",""]},timing:{title:"4. ",content:"30"},review:{title:"5. ",content:""},contact:{title:"6. ",content:"",email:"legal@restarter.com"}}},"zh-CN":{title:"",subtitle:"Restarter",back:"",sections:{overview:{title:"1. ",content:"Restarter"},types:{title:"2. ",content:"",items:["","","Cookie","",""]},methods:{title:"3. ",content:"",items:["","","",""]},timing:{title:"4. ",content:"30"},review:{title:"5. ",content:""},contact:{title:"6. ",content:"",email:"legal@restarter.com"}}},en:{title:"Update Notification Policy",subtitle:"Explanation regarding Restarter legal document update notifications",back:"Back",sections:{overview:{title:"1. Policy Overview",content:"This policy explains how Restarter notifies users about updates to legal documents. We are committed to maintaining transparency and ensuring users are promptly informed of important changes that may affect their rights and obligations."},types:{title:"2. Update Types",content:"We may update the following types of legal documents:",items:["Terms of Service","Privacy Policy","Cookie Policy","Children's Privacy Policy","Other Legal Statements"]},methods:{title:"3. Notification Methods",content:"We will notify users of important updates through the following methods:",items:["In-app notifications","Email notifications","Website announcements","Push notifications (where applicable)"]},timing:{title:"4. Notification Timing",content:"For significant changes, we will notify users at least 30 days before the effective date. For urgent security updates, we may notify immediately."},review:{title:"5. Review Rights",content:"Users have the right to review changes before they take effect. If you do not agree to the updates, you may stop using our services before the effective date."},contact:{title:"6. Contact Us",content:"If you have any questions about this policy or any legal document updates, please contact us through:",email:"Email: legal@restarter.com"}}},ja:{title:"",subtitle:"Restarter",back:"",sections:{overview:{title:"1. ",content:"Restarter"},types:{title:"2. ",content:"",items:["","","Cookie","",""]},methods:{title:"3. ",content:"",items:["","","",""]},timing:{title:"4. ",content:"30"},review:{title:"5. ",content:""},contact:{title:"6. ",content:"",email:"legal@restarter.com"}}},ko:{title:"  ",subtitle:"Restarter      ",back:"",sections:{overview:{title:"1.  ",content:"  Restarter        .                     ."},types:{title:"2.  ",content:"      :",items:[" "," "," ","  ","  "]},methods:{title:"3.  ",content:"      :",items:["  "," "," "," ( )"]},timing:{title:"4.  ",content:"  ,   30   .        ."},review:{title:"5.  ",content:"        .           ."},contact:{title:"6. ",content:"           :",email:": legal@restarter.com"}}},th:{title:"",subtitle:" Restarter",back:"",sections:{overview:{title:"1. ",content:" Restarter  "},types:{title:"2. ",content:":",items:["","","","",""]},methods:{title:"3. ",content:":",items:["","",""," ()"]},timing:{title:"4. ",content:"  30   "},review:{title:"5. ",content:"  "},contact:{title:"6. ",content:" :",email:": legal@restarter.com"}}},vi:{title:"Chnh sch thng bo cp nht",subtitle:"Gii thch v thng bo cp nht ti liu php l Restarter",back:"Quay li",sections:{overview:{title:"1. Tng quan chnh sch",content:"Chnh sch ny gii thch cch Restarter thng bo cho ngi dng v cc cp nht ti liu php l. Chng ti cam kt duy tr tnh minh bch v m bo ngi dng c thng bo kp thi v nhng thay i quan trng c th nh hng n quyn v ngha v ca h."},types:{title:"2. Loi cp nht",content:"Chng ti c th cp nht cc loi ti liu php l sau:",items:["iu khon dch v","Chnh sch bo mt","Chnh sch Cookie","Chnh sch bo mt tr em","Tuyn b php l khc"]},methods:{title:"3. Phng thc thng bo",content:"Chng ti s thng bo cho ngi dng v cc cp nht quan trng thng qua cc phng thc sau:",items:["Thng bo trong ng dng","Thng bo qua email","Thng bo trn trang web","Thng bo y (nu c)"]},timing:{title:"4. Thi gian thng bo",content:"i vi nhng thay i quan trng, chng ti s thng bo cho ngi dng t nht 30 ngy trc ngy c hiu lc. i vi cc cp nht bo mt khn cp, chng ti c th thng bo ngay lp tc."},review:{title:"5. Quyn xem xt",content:"Ngi dng c quyn xem xt cc thay i trc khi chng c hiu lc. Nu bn khng ng  vi cc cp nht, bn c th ngng s dng dch v ca chng ti trc ngy c hiu lc."},contact:{title:"6. Lin h chng ti",content:"Nu bn c bt k cu hi no v chnh sch ny hoc bt k cp nht ti liu php l no, vui lng lin h chng ti qua:",email:"Email: legal@restarter.com"}}},ms:{title:"Dasar Pemberitahuan Kemas Kini",subtitle:"Penjelasan mengenai pemberitahuan kemas kini dokumen undang-undang Restarter",back:"Kembali",sections:{overview:{title:"1. Gambaran Keseluruhan Dasar",content:"Dasar ini menerangkan bagaimana Restarter memberitahu pengguna tentang kemas kini dokumen undang-undang. Kami komited untuk mengekalkan ketelusan dan memastikan pengguna diberitahu dengan segera tentang perubahan penting yang mungkin menjejaskan hak dan obligasi mereka."},types:{title:"2. Jenis Kemas Kini",content:"Kami mungkin mengemas kini jenis dokumen undang-undang berikut:",items:["Terma Perkhidmatan","Dasar Privasi","Dasar Cookie","Dasar Privasi Kanak-kanak","Penyata Undang-undang Lain"]},methods:{title:"3. Kaedah Pemberitahuan",content:"Kami akan memberitahu pengguna tentang kemas kini penting melalui kaedah berikut:",items:["Pemberitahuan dalam aplikasi","Pemberitahuan e-mel","Pengumuman laman web","Pemberitahuan push (jika berkenaan)"]},timing:{title:"4. Masa Pemberitahuan",content:"Untuk perubahan penting, kami akan memberitahu pengguna sekurang-kurangnya 30 hari sebelum tarikh berkuat kuasa. Untuk kemas kini keselamatan yang mendesak, kami mungkin memberitahu dengan segera."},review:{title:"5. Hak Semakan",content:"Pengguna mempunyai hak untuk menyemak perubahan sebelum ia berkuat kuasa. Jika anda tidak bersetuju dengan kemas kini, anda boleh berhenti menggunakan perkhidmatan kami sebelum tarikh berkuat kuasa."},contact:{title:"6. Hubungi Kami",content:"Jika anda mempunyai sebarang soalan tentang dasar ini atau sebarang kemas kini dokumen undang-undang, sila hubungi kami melalui:",email:"E-mel: legal@restarter.com"}}},la:{title:"Politica Notificationis Renovationis",subtitle:"Explicatio de notificationibus renovationis documentorum iuridicorum Restarter",back:"Redire",sections:{overview:{title:"1. Conspectus Politicae",content:"Haec politica explicat quomodo Restarter notificat usuarios de renovationibus documentorum iuridicorum. Nos promittimus transparenciam conservare et usuarios prompte notificatos esse de mutationibus importantibus quae possunt afficere iura et obligationes eorum."},types:{title:"2. Typi Renovationis",content:"Nos possumus renovare sequentes typos documentorum iuridicorum:",items:["Termini Servitii","Politica Privatae","Politica Cookie","Politica Privatae Puerorum","Aliae Declarationes Iuridicae"]},methods:{title:"3. Methodi Notificationis",content:"Nos notificabimus usuarios de renovationibus importantibus per sequentes methodos:",items:["Notificationes in app","Notificationes epistulae","Annunciationes situs","Notificationes push (ubi applicabilia)"]},timing:{title:"4. Tempus Notificationis",content:"Pro mutationibus significantibus, nos notificabimus usuarios saltem 30 dies ante diem effectivum. Pro renovationibus securitatis urgentibus, nos possumus statim notificare."},review:{title:"5. Iura Revisionis",content:"Usuarii habent ius revisionis mutationum antequam effectivae fiant. Si non consentis renovationibus, potes desistere uti servitiis nostris ante diem effectivum."},contact:{title:"6. Contacta Nos",content:"Si quaestiones habes de hac politica vel quavis renovatione documentorum iuridicorum, quaeso nos contacta per:",email:"Epistula: legal@restarter.com"}}}},ZV=()=>{const t=tt(),{lang:e}=dt(),n=aT[e]||aT["zh-TW"];return r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[r.jsxs("div",{style:{maxWidth:800,margin:"0 auto",background:"rgba(255,255,255,0.95)",borderRadius:16,padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[r.jsx("button",{onClick:()=>t("/"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:n.back}),r.jsx("h1",{style:{margin:0,color:"#6B5BFF",fontSize:24,fontWeight:700},children:n.title}),r.jsx("div",{style:{width:80}})]}),r.jsx("p",{style:{color:"#666",fontSize:16,marginBottom:32,textAlign:"center",fontStyle:"italic"},children:n.subtitle}),r.jsx("div",{style:{lineHeight:1.6},children:Object.entries(n.sections).map(([i,o])=>r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{color:"#6B5BFF",fontSize:20,marginBottom:12,borderBottom:"2px solid #6B5BFF",paddingBottom:8},children:o.title}),r.jsx("p",{style:{color:"#333",fontSize:16,textAlign:"justify"},children:o.content}),o.items&&r.jsx("ul",{style:{color:"#333",fontSize:16,paddingLeft:20,marginTop:8},children:o.items.map((s,a)=>r.jsx("li",{style:{marginBottom:4},children:s},a))}),o.email&&r.jsx("p",{style:{color:"#6B5BFF",fontSize:16,fontWeight:600,marginTop:8},children:o.email}),o.phone&&r.jsx("p",{style:{color:"#6B5BFF",fontSize:16,fontWeight:600,marginTop:4},children:o.phone})]},i))})]}),r.jsx(gs,{})]})},e9=[{name:"",price:"NT$0",period:"",features:[" "," OpenAI API"," "," 15/"," : NT$0/"],highlight:!1,buttonText:"",buttonAction:"register"},{name:"",price:"NT$149",period:"/  NT$1490/",features:[" AI Token : 50K tokens/"," : 100/"," //AI: 30/"," : 300/"," Token "],highlight:!0,buttonText:"",buttonAction:"basic"},{name:"",price:"NT$249",period:"/  NT$2490/",features:[" AI Token : 100K tokens/"," : 300/"," //AI: 80/"," : 600/"," Token "],highlight:!1,buttonText:"",buttonAction:"advanced"},{name:"",price:"NT$349",period:"/  NT$3490/",features:[" AI Token : 200K tokens/"," : 800/"," //AI: 150/"," : 1000/"," Token "],highlight:!1,buttonText:"",buttonAction:"professional"},{name:"",price:"NT$499",period:"/  NT$4990/",features:[" AI Token : 500K tokens/"," : "," //AI: "," : ","  Token "],highlight:!1,buttonText:"",buttonAction:"unlimited"}],t9=["","/Apple Pay/Google Pay",""],n9=[{q:"",a:""},{q:"",a:"Apple PayGoogle Pay "},{q:"AI",a:"Token "},{q:"Token ",a:"Token "},{q:"",a:"AI Token"},{q:"",a:""}];function i9(){const t=tt(),n=Ze().currentUser;localStorage.getItem("lang");const[i,o]=m.useState(!1),[s,a]=m.useState(null),l=c=>{if(!n){o(!0);return}a(c),t(`/payment?plan=${c.buttonAction}`)};return r.jsxs("div",{style:{fontFamily:"-apple-system,BlinkMacSystemFont,sans-serif",background:"#f7f8fc",minHeight:"100vh",padding:"32px 0"},children:[r.jsx("button",{onClick:()=>t("/"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:" "}),r.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF22",padding:32},children:[r.jsx("h1",{style:{fontSize:36,fontWeight:900,letterSpacing:2,background:"linear-gradient(90deg,#6B5BFF,#00CFFF)",WebkitBackgroundClip:"text",color:"transparent",marginBottom:24,textAlign:"center"},children:"Restarter "}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:24,marginBottom:32},children:e9.map((c,u)=>r.jsxs("div",{style:{background:c.highlight?"linear-gradient(135deg, #f3f7ff 0%, #e8f4ff 100%)":"#fff",border:c.highlight?"2px solid #6B5BFF":"1px solid #e0e0e0",borderRadius:16,padding:24,position:"relative",boxShadow:c.highlight?"0 8px 32px #6B5BFF22":"0 4px 16px #0001",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>l(c),children:[c.highlight&&r.jsx("div",{style:{position:"absolute",top:-12,left:"50%",transform:"translateX(-50%)",background:"#6B5BFF",color:"#fff",padding:"4px 16px",borderRadius:12,fontSize:14,fontWeight:700},children:""}),r.jsx("h3",{style:{fontSize:24,fontWeight:800,color:c.highlight?"#6B5BFF":"#333",marginBottom:8,textAlign:"center"},children:c.name}),r.jsxs("div",{style:{textAlign:"center",marginBottom:20},children:[r.jsx("span",{style:{fontSize:32,fontWeight:900,color:c.highlight?"#6B5BFF":"#333"},children:c.price}),r.jsx("span",{style:{fontSize:16,color:"#666"},children:c.period})]}),r.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:c.features.map((h,p)=>r.jsx("li",{style:{marginBottom:12,fontSize:14,lineHeight:1.5,color:"#555",display:"flex",alignItems:"flex-start",gap:8},children:r.jsx("span",{style:{fontSize:16,marginTop:1},children:h})},p))}),r.jsx("button",{style:{width:"100%",background:c.highlight?"linear-gradient(90deg, #6B5BFF, #00CFFF)":"#f0f0f0",color:c.highlight?"#fff":"#666",border:"none",borderRadius:8,padding:"12px 0",fontSize:16,fontWeight:700,cursor:"pointer",marginTop:20,transition:"all 0.2s ease"},children:c.buttonText})]},c.name))}),r.jsx("h2",{style:{fontSize:24,fontWeight:800,margin:"32px 0 12px",color:"#6B5BFF"},children:""}),r.jsx("ol",{style:{fontSize:18,lineHeight:1.8,marginBottom:32,paddingLeft:24},children:t9.map((c,u)=>r.jsx("li",{children:c},u))}),r.jsx("h2",{style:{fontSize:24,fontWeight:800,margin:"32px 0 12px",color:"#6B5BFF"},children:""}),r.jsx("div",{style:{marginBottom:32},children:n9.map((c,u)=>r.jsxs("div",{style:{marginBottom:18},children:[r.jsx("div",{style:{fontWeight:700,fontSize:18,color:"#6B5BFF"},children:c.q}),r.jsx("div",{style:{fontSize:17,color:"#444",marginLeft:8,marginTop:2},children:c.a})]},u))}),r.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:32},children:r.jsx("button",{onClick:()=>t("/register"),style:{background:"#00CFFF",color:"#fff",fontWeight:700,fontSize:20,padding:"14px 38px",borderRadius:10,boxShadow:"0 2px 8px #00CFFF33",border:"none",cursor:"pointer",transition:"0.2s",position:"relative",zIndex:1e3,minHeight:"48px",minWidth:"200px",touchAction:"manipulation"},children:""})}),i&&r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:20,padding:32,boxShadow:"0 8px 32px rgba(0,0,0,0.2)",minWidth:380,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:48,marginBottom:16,color:"#6B5BFF"},children:""}),r.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#6B5BFF",marginBottom:12},children:" Restarter"}),r.jsx("div",{style:{fontSize:16,color:"#666",marginBottom:20,lineHeight:1.5},children:""}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9ff 0%, #e8f4ff 100%)",borderRadius:12,padding:16,marginBottom:24,border:"1px solid #e0e8ff"},children:[r.jsx("div",{style:{fontSize:14,color:"#6B5BFF",fontWeight:600,marginBottom:8},children:" "}),r.jsxs("div",{style:{fontSize:13,color:"#666",lineHeight:1.4},children:[" ",r.jsx("br",{})," ",r.jsx("br",{})," "]})]}),r.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[r.jsx("button",{onClick:()=>{o(!1),t("/register")},style:{background:"linear-gradient(135deg, #6B5BFF 0%, #00CFFF 100%)",color:"#fff",border:"none",borderRadius:12,padding:"12px 28px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 4px 12px #6B5BFF33",transition:"all 0.3s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 16px #6B5BFF44"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 12px #6B5BFF33"},children:" "}),r.jsx("button",{onClick:()=>o(!1),style:{background:"#f8f9ff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:12,padding:"12px 28px",fontWeight:600,fontSize:16,cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:c=>{c.currentTarget.style.background="#6B5BFF",c.currentTarget.style.color="#fff"},onMouseLeave:c=>{c.currentTarget.style.background="#f8f9ff",c.currentTarget.style.color="#6B5BFF"},children:" "})]})]})})]})]})}const lT={basic:{name:"",price:"NT$149",period:"/",features:[" AI Token : 50K tokens/"," : 100/"," //AI: 30/"," : 300/"],buttonAction:"basic"},advanced:{name:"",price:"NT$249",period:"/",features:[" AI Token : 100K tokens/"," : 300/"," //AI: 80/"," : 600/"],buttonAction:"advanced"},professional:{name:"",price:"NT$349",period:"/",features:[" AI Token : 200K tokens/"," : 800/"," //AI: 150/"," : 1000/"],buttonAction:"professional"},unlimited:{name:"",price:"NT$499",period:"/",features:[" AI Token : 500K tokens/"," : "," //AI: "," : "],buttonAction:"unlimited"}};function r9(){const t=tt(),[e]=P2(),i=Ze().currentUser,[o,s]=m.useState(null),[a,l]=m.useState("credit"),[c,u]=m.useState(!1),[h,p]=m.useState(!1);m.useEffect(()=>{const y=e.get("plan");y&&lT[y]?s(lT[y]):t("/plans")},[e,t]);const g=()=>C(this,null,function*(){if(!i){t("/login");return}u(!0);try{const k=yield(yield fetch("/api/subscription/payment-success",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.uid,plan:o.buttonAction,paymentMethod:a,transactionId:`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,amount:parseInt(o.price.replace("NT$","")),currency:"TWD"})})).json();if(k.success)u(!1),p(!0),setTimeout(()=>{t("/")},3e3);else throw new Error(k.error||"")}catch(y){console.error(":",y),u(!1),alert("")}});return o?r.jsxs("div",{style:{fontFamily:"-apple-system,BlinkMacSystemFont,sans-serif",background:"#f7f8fc",minHeight:"100vh",padding:"32px 0"},children:[r.jsx("button",{onClick:()=>t("/plans"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:" "}),r.jsxs("div",{style:{maxWidth:600,margin:"0 auto",background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF22",padding:32},children:[r.jsx("h1",{style:{fontSize:32,fontWeight:900,letterSpacing:2,background:"linear-gradient(90deg,#6B5BFF,#00CFFF)",WebkitBackgroundClip:"text",color:"transparent",marginBottom:24,textAlign:"center"},children:""}),r.jsxs("div",{style:{background:"#f8f9ff",borderRadius:12,padding:24,marginBottom:32},children:[r.jsx("h2",{style:{fontSize:20,fontWeight:700,color:"#6B5BFF",marginBottom:16},children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[r.jsx("span",{style:{fontSize:18,fontWeight:600},children:o.name}),r.jsxs("span",{style:{fontSize:24,fontWeight:900,color:"#6B5BFF"},children:[o.price,o.period]})]}),r.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:o.features.map((y,k)=>r.jsxs("li",{style:{marginBottom:8,fontSize:14,color:"#666"},children:[" ",y]},k))})]}),r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h2",{style:{fontSize:20,fontWeight:700,color:"#6B5BFF",marginBottom:16},children:""}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"payment",value:"credit",checked:a==="credit",onChange:y=>l(y.target.value),style:{width:18,height:18}}),r.jsx("span",{style:{fontSize:16},children:" "})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"payment",value:"apple",checked:a==="apple",onChange:y=>l(y.target.value),style:{width:18,height:18}}),r.jsx("span",{style:{fontSize:16},children:" Apple Pay"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"payment",value:"google",checked:a==="google",onChange:y=>l(y.target.value),style:{width:18,height:18}}),r.jsx("span",{style:{fontSize:16},children:" Google Pay"})]})]})]}),r.jsx("button",{onClick:g,disabled:c,style:{width:"100%",background:c?"#ccc":"linear-gradient(90deg,#6B5BFF,#00CFFF)",color:"#fff",border:"none",borderRadius:12,padding:"16px 0",fontSize:18,fontWeight:700,cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease"},children:c?"...":` ${o.price}`}),h&&r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#0008",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:32,boxShadow:"0 4px 24px #0002",minWidth:320,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),r.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#6B5BFF",marginBottom:8},children:""}),r.jsx("div",{style:{fontSize:16,color:"#666",marginBottom:16},children:"..."})]})})]})]}):r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:r.jsx("div",{children:"..."})})}const Bf={basic:{name:"",price:"NT$ 149",period:"/",features:[" AI Token : 50K tokens/"," : 100/"," //AI: 30/"," : 300/"," Token "],stripeLink:"https://buy.stripe.com/your_basic_monthly_link",paypalLink:"https://www.paypal.com/your_basic_monthly_link",ecpayLink:"https://payment.ecpay.com.tw/your_basic_monthly_link",newebpayLink:"https://ccore.newebpay.com/your_basic_monthly_link"},advanced:{name:"",price:"NT$ 249",period:"/",features:[" AI Token : 100K tokens/"," : 300/"," //AI: 80/"," : 600/"," Token "],stripeLink:"https://buy.stripe.com/your_advanced_monthly_link",paypalLink:"https://www.paypal.com/your_advanced_monthly_link",ecpayLink:"https://payment.ecpay.com.tw/your_advanced_monthly_link",newebpayLink:"https://ccore.newebpay.com/your_advanced_monthly_link"},professional:{name:"",price:"NT$ 349",period:"/",features:[" AI Token : 200K tokens/"," : 800/"," //AI: 150/"," : 1000/"," Token "],stripeLink:"https://buy.stripe.com/your_professional_monthly_link",paypalLink:"https://www.paypal.com/your_professional_monthly_link",ecpayLink:"https://payment.ecpay.com.tw/your_professional_monthly_link",newebpayLink:"https://ccore.newebpay.com/your_professional_monthly_link"},unlimited:{name:"",price:"NT$ 499",period:"/",features:[" AI Token : 500K tokens/"," : "," //AI: "," : ","  Token "],stripeLink:"https://buy.stripe.com/your_unlimited_monthly_link",paypalLink:"https://www.paypal.com/your_unlimited_monthly_link",ecpayLink:"https://payment.ecpay.com.tw/your_unlimited_monthly_link",newebpayLink:"https://ccore.newebpay.com/your_unlimited_monthly_link"}};function o9(){const t=tt(),n=Ze().currentUser,[i,o]=m.useState(!1),[s,a]=m.useState("basic"),[l,c]=m.useState("stripe"),[u,h]=m.useState(!1),[p,g]=m.useState(null);localStorage.getItem("lang");const y=()=>{if(!n){o(!0);return}const x=Bf[s],b=x[`${l}Link`];b&&!b.includes("your_")?k():alert(`

${x.name}
${l==="stripe"?"Stripe":l==="paypal"?"PayPal":l==="ecpay"?"":""}

 Emailsupport@restarter.com`)},k=()=>C(this,null,function*(){if(n)try{const x=`TXN_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b=yield fetch("/api/subscription/payment-success",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.uid,plan:s,paymentMethod:l,transactionId:x,amount:j(s),currency:"TWD"})});if(b.ok){const v=yield b.json();g(v),h(!0),setTimeout(()=>{t("/home")},3e3)}else alert("")}catch(x){console.error(":",x),alert("")}}),j=x=>({basic:149,advanced:249,professional:349,unlimited:499})[x]||0,T=x=>({basic:"",advanced:"",professional:"",unlimited:""})[x]||x;return r.jsxs("div",{style:{minHeight:"100vh",background:"#f7faff",padding:0,overflowY:"auto"},children:[r.jsx("button",{onClick:()=>t("/plans"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:" "}),r.jsx("div",{style:{maxWidth:900,margin:"0 auto",padding:"80px 24px 32px"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF11",padding:"32px 24px"},children:[r.jsx("h2",{style:{color:"#4B5BFF",fontWeight:900,fontSize:32,marginBottom:8,letterSpacing:2,textAlign:"center"},children:""}),r.jsx("p",{style:{color:"#666",fontSize:18,textAlign:"center",marginBottom:32},children:""}),r.jsx("div",{style:{display:"flex",gap:24,marginBottom:32,justifyContent:"center"},children:Object.entries(Bf).map(([x,b])=>r.jsxs("div",{onClick:()=>a(x),style:{background:s===x?"#6B5BFF":"#fff",color:s===x?"#fff":"#333",border:`2px solid ${s===x?"#6B5BFF":"#ddd"}`,borderRadius:12,padding:"24px",cursor:"pointer",minWidth:200,textAlign:"center",transition:"all 0.3s ease"},children:[r.jsx("div",{style:{fontWeight:700,fontSize:20,marginBottom:8},children:b.name}),r.jsxs("div",{style:{fontSize:32,fontWeight:900,marginBottom:4},children:[b.price,r.jsx("span",{style:{fontSize:16,fontWeight:400},children:b.period})]}),b.originalPrice&&r.jsx("div",{style:{fontSize:14,textDecoration:"line-through",opacity:.7,marginBottom:4},children:b.originalPrice}),b.discount&&r.jsx("div",{style:{fontSize:14,color:"#ff6b6b",fontWeight:700},children:b.discount})]},x))}),r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h3",{style:{color:"#333",fontWeight:700,fontSize:20,marginBottom:16},children:""}),r.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[{key:"stripe",name:"Stripe",icon:""},{key:"paypal",name:"PayPal",icon:""},{key:"ecpay",name:"",icon:""},{key:"newebpay",name:"",icon:""}].map(x=>r.jsxs("button",{onClick:()=>c(x.key),style:{background:l===x.key?"#6B5BFF":"#fff",color:l===x.key?"#fff":"#333",border:`2px solid ${l===x.key?"#6B5BFF":"#ddd"}`,borderRadius:8,padding:"12px 20px",cursor:"pointer",fontSize:16,fontWeight:600,transition:"all 0.3s ease"},children:[x.icon," ",x.name]},x.key))})]}),r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h3",{style:{color:"#333",fontWeight:700,fontSize:20,marginBottom:16},children:""}),r.jsx("div",{style:{display:"grid",gap:12},children:Bf[s].features.map((x,b)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[r.jsx("span",{style:{color:"#6B5BFF",fontSize:18},children:""}),r.jsx("span",{style:{color:"#333",fontSize:16},children:x})]},b))})]}),r.jsx("div",{style:{textAlign:"center",marginTop:24},children:r.jsx("button",{onClick:y,style:{background:"linear-gradient(90deg,#6B5BFF 60%,#23c6e6 100%)",color:"#fff",border:"none",borderRadius:12,fontWeight:900,fontSize:20,padding:"12px 48px",boxShadow:"0 2px 12px #6B5BFF33",letterSpacing:2,cursor:"pointer"},children:""})}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,marginTop:32},children:[r.jsx("button",{onClick:()=>t("/payment-info"),style:{background:"#fff",color:"#6B5BFF",border:"1.5px solid #6B5BFF",borderRadius:8,padding:"10px 32px",fontWeight:600,cursor:"pointer"},children:""}),r.jsx("button",{onClick:()=>t("/contact"),style:{background:"#fff",color:"#6B5BFF",border:"1.5px solid #6B5BFF",borderRadius:8,padding:"10px 32px",fontWeight:600,cursor:"pointer"},children:""})]})]})}),i&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"#fff",borderRadius:20,padding:32,maxWidth:450,textAlign:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.2)"},children:[r.jsx("div",{style:{fontSize:48,marginBottom:16,color:"#6B5BFF"},children:""}),r.jsx("h3",{style:{color:"#6B5BFF",fontWeight:700,fontSize:22,marginBottom:12},children:" Restarter"}),r.jsx("p",{style:{color:"#666",marginBottom:20,lineHeight:1.5,fontSize:16},children:""}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9ff 0%, #e8f4ff 100%)",borderRadius:12,padding:16,marginBottom:24,border:"1px solid #e0e8ff"},children:[r.jsx("div",{style:{fontSize:14,color:"#6B5BFF",fontWeight:600,marginBottom:8},children:" "}),r.jsxs("div",{style:{fontSize:13,color:"#666",lineHeight:1.4},children:[" ",r.jsx("br",{})," ",r.jsx("br",{})," "]})]}),r.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[r.jsx("button",{onClick:()=>t("/register"),style:{background:"linear-gradient(135deg, #6B5BFF 0%, #00CFFF 100%)",color:"#fff",border:"none",borderRadius:12,padding:"12px 28px",fontWeight:700,cursor:"pointer",fontSize:16,boxShadow:"0 4px 12px #6B5BFF33",transition:"all 0.3s ease"},onMouseEnter:x=>{x.currentTarget.style.transform="translateY(-2px)",x.currentTarget.style.boxShadow="0 6px 16px #6B5BFF44"},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 12px #6B5BFF33"},children:" "}),r.jsx("button",{onClick:()=>o(!1),style:{background:"#f8f9ff",color:"#6B5BFF",border:"2px solid #6B5BFF",borderRadius:12,padding:"12px 28px",fontWeight:600,cursor:"pointer",fontSize:16,transition:"all 0.3s ease"},onMouseEnter:x=>{x.currentTarget.style.background="#6B5BFF",x.currentTarget.style.color="#fff"},onMouseLeave:x=>{x.currentTarget.style.background="#f8f9ff",x.currentTarget.style.color="#6B5BFF"},children:" "})]})]})}),u&&p&&r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:r.jsxs("div",{style:{background:"#fff",borderRadius:20,padding:32,maxWidth:480,width:"90%",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[r.jsx("div",{style:{fontSize:64,marginBottom:16,color:"#52c41a"},children:""}),r.jsx("h2",{style:{fontSize:24,fontWeight:700,color:"#333",marginBottom:12},children:""}),r.jsx("p",{style:{fontSize:16,color:"#666",marginBottom:20,lineHeight:1.6},children:p.message}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f6ffed 0%, #d9f7be 100%)",borderRadius:12,padding:16,marginBottom:24,border:"1px solid #b7eb8f"},children:[r.jsx("div",{style:{fontSize:14,color:"#52c41a",fontWeight:600,marginBottom:8},children:" "}),r.jsxs("div",{style:{fontSize:13,color:"#666",lineHeight:1.4},children:[" ",T(s),r.jsx("br",{})," ",p.remainingDays," ",r.jsx("br",{})," AI Token",p.plan.limits.aiCostLimit,"K tokens",r.jsx("br",{}),"  AI "]})]}),r.jsx("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:r.jsx("button",{onClick:()=>t("/home"),style:{background:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)",color:"#fff",border:"none",borderRadius:12,padding:"14px 28px",fontSize:16,fontWeight:700,cursor:"pointer",flex:1,boxShadow:"0 4px 12px #52c41a33",transition:"all 0.3s ease"},onMouseEnter:x=>{x.currentTarget.style.transform="translateY(-2px)",x.currentTarget.style.boxShadow="0 6px 16px #52c41a44"},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 12px #52c41a33"},children:" "})}),r.jsx("div",{style:{marginTop:16,fontSize:14,color:"#888"},children:"3..."})]})})]})}function s9(){const t=tt(),n=Ze().currentUser;return localStorage.getItem("lang"),n?r.jsxs("div",{style:{minHeight:"100vh",background:"#f7faff",padding:0},children:[r.jsx("button",{onClick:()=>t("/"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:" "}),r.jsxs("div",{style:{maxWidth:500,margin:"0 auto",background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF11",padding:"32px 24px",marginTop:64,textAlign:"center"},children:[r.jsx("img",{src:n.photoURL||"/avatars/Derxl.png",alt:"avatar",style:{width:88,height:88,borderRadius:"50%",objectFit:"cover",border:"2px solid #ececff",background:"#eee",marginBottom:18}}),r.jsx("div",{style:{fontSize:24,fontWeight:900,color:"#6B5BFF",marginBottom:8},children:n.displayName||n.email||""}),r.jsx("div",{style:{fontSize:16,color:"#888",marginBottom:18},children:n.email}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:18,marginTop:24},children:[r.jsx("button",{onClick:()=>t("/CompleteProfile"),style:{background:"#00CFFF",color:"#fff",fontWeight:700,fontSize:18,padding:"10px 32px",borderRadius:10,boxShadow:"0 2px 8px #00CFFF33",border:"none",cursor:"pointer"},children:""}),r.jsx("button",{onClick:()=>t("/upgrade"),style:{background:"#6B5BFF",color:"#fff",fontWeight:700,fontSize:18,padding:"10px 32px",borderRadius:10,boxShadow:"0 2px 8px #6B5BFF33",border:"none",cursor:"pointer"},children:""})]})]})]}):r.jsx("div",{style:{minHeight:"100vh",background:"#f7faff",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:32,boxShadow:"0 4px 24px #0002",minWidth:320,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#6B5BFF",marginBottom:18},children:"/"}),r.jsx("button",{onClick:()=>t("/register"),style:{background:"#6B5BFF",color:"#fff",border:"none",borderRadius:8,padding:"8px 32px",fontWeight:700,fontSize:18,cursor:"pointer",marginTop:8},children:"/"})]})})}function a9(){const t=tt();return r.jsxs("div",{style:{minHeight:"100vh",background:"#f7faff",padding:0},children:[r.jsx("button",{onClick:()=>t("/upgrade"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:" "}),r.jsx("div",{style:{maxWidth:900,margin:"0 auto",padding:"80px 24px 32px"},children:r.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF11",padding:"32px 24px"},children:[r.jsx("h2",{style:{color:"#4B5BFF",fontWeight:900,fontSize:32,marginBottom:8,letterSpacing:2,textAlign:"center"},children:""}),r.jsx("p",{style:{color:"#666",fontSize:18,textAlign:"center",marginBottom:32},children:""}),r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h3",{style:{color:"#333",fontWeight:700,fontSize:20,marginBottom:16},children:""}),r.jsxs("div",{style:{display:"grid",gap:16},children:[r.jsxs("div",{style:{border:"1px solid #e0e7ff",borderRadius:12,padding:20},children:[r.jsx("h4",{style:{color:"#6B5BFF",fontWeight:700,fontSize:18,marginBottom:8},children:" Stripe"}),r.jsx("p",{style:{color:"#666",fontSize:16,lineHeight:1.6},children:" VisaMastercardAmerican Express "})]}),r.jsxs("div",{style:{border:"1px solid #e0e7ff",borderRadius:12,padding:20},children:[r.jsx("h4",{style:{color:"#6B5BFF",fontWeight:700,fontSize:18,marginBottom:8},children:" PayPal"}),r.jsx("p",{style:{color:"#666",fontSize:16,lineHeight:1.6},children:" PayPal "})]}),r.jsxs("div",{style:{border:"1px solid #e0e7ff",borderRadius:12,padding:20},children:[r.jsx("h4",{style:{color:"#6B5BFF",fontWeight:700,fontSize:18,marginBottom:8},children:" "}),r.jsx("p",{style:{color:"#666",fontSize:16,lineHeight:1.6},children:"ATM "})]}),r.jsxs("div",{style:{border:"1px solid #e0e7ff",borderRadius:12,padding:20},children:[r.jsx("h4",{style:{color:"#6B5BFF",fontWeight:700,fontSize:18,marginBottom:8},children:" "}),r.jsx("p",{style:{color:"#666",fontSize:16,lineHeight:1.6},children:"ATM "})]})]})]}),r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h3",{style:{color:"#333",fontWeight:700,fontSize:20,marginBottom:16},children:""}),r.jsxs("ol",{style:{fontSize:16,lineHeight:1.8,paddingLeft:24},children:[r.jsx("li",{children:""}),r.jsx("li",{children:"StripePayPal"}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""})]})]}),r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h3",{style:{color:"#333",fontWeight:700,fontSize:20,marginBottom:16},children:""}),r.jsxs("ul",{style:{fontSize:16,lineHeight:1.8,paddingLeft:24},children:[r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:""}),r.jsx("li",{children:"support@restarter.com"})]})]}),r.jsx("div",{style:{textAlign:"center",marginTop:32},children:r.jsx("button",{onClick:()=>t("/upgrade"),style:{background:"linear-gradient(90deg,#6B5BFF 60%,#23c6e6 100%)",color:"#fff",border:"none",borderRadius:12,fontWeight:900,fontSize:20,padding:"12px 48px",boxShadow:"0 2px 12px #6B5BFF33",letterSpacing:2,cursor:"pointer"},children:""})})]})})]})}function l9(){const t=tt();return r.jsxs("div",{style:{minHeight:"100vh",background:"#f7faff",padding:0},children:[r.jsx("button",{onClick:()=>t("/plans"),style:{position:"absolute",top:24,left:24,zIndex:10,background:"#fff",border:"1.5px solid #6B5BFF",color:"#6B5BFF",borderRadius:8,padding:"6px 18px",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 8px #0001"},children:" "}),r.jsxs("div",{style:{maxWidth:600,margin:"0 auto",background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #6B5BFF11",padding:"32px 24px",marginTop:64},children:[r.jsx("h2",{style:{color:"#4B5BFF",fontWeight:900,fontSize:32,marginBottom:24,letterSpacing:1},children:""}),r.jsx("div",{style:{fontSize:18,color:"#333",marginBottom:24,lineHeight:1.8},children:""}),r.jsxs("ul",{style:{fontSize:17,color:"#666",marginBottom:32,marginLeft:24},children:[r.jsxs("li",{children:["Email",r.jsx("span",{href:"mailto:support@restarter.app",style:{color:"#6B5BFF",textDecoration:"underline"},children:"support@restarter.app"})]}),r.jsxs("li",{children:["LINE ",r.jsx("span",{href:"https://line.me/R/ti/p/@restarter",target:"_blank",rel:"noopener noreferrer",style:{color:"#6B5BFF",textDecoration:"underline"},children:"@restarter"})]}),r.jsxs("li",{children:["Messenger",r.jsx("span",{href:"https://m.me/restarterapp",target:"_blank",rel:"noopener noreferrer",style:{color:"#6B5BFF",textDecoration:"underline"},children:"Restarter "})]}),r.jsxs("li",{children:["",r.jsx("span",{href:"https://forms.gle/xxxxxx",target:"_blank",rel:"noopener noreferrer",style:{color:"#6B5BFF",textDecoration:"underline"},children:""})]})]}),r.jsx("div",{style:{fontSize:16,color:"#888",marginTop:24},children:" 10:00-18:00"})]})]})}const H6=mn.createContext({isTestMode:!1,setIsTestMode:()=>{}}),fs=()=>mn.useContext(H6);function c9(){const{isMicOn:t}=yV();return t?r.jsx("div",{style:{position:"fixed",top:"12px",left:"50%",transform:"translateX(-50%)",zIndex:9999,background:"#ff6347",borderRadius:"50%",padding:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.35)",border:"2px solid white"},children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"white",children:r.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})})}):null}function u9(){const[t,e]=m.useState(null),[n,i]=m.useState(!0),[o,s]=m.useState(!1),a=Ze(ir);return m.useEffect(()=>{const l=ri(a,c=>{e(c),i(!1)});return()=>l()},[a]),n?r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"2rem"},children:"Loading..."}):r.jsx(wW,{children:r.jsx(fV,{children:r.jsx(bV,{children:r.jsx(NO,{children:r.jsx(UP,{children:r.jsxs(H6.Provider,{value:{isTestMode:o,setIsTestMode:s},children:[r.jsx(D6,{onTestModeChange:s}),r.jsx(c9,{}),r.jsx(gV,{children:r.jsxs(WP,{children:[r.jsx(et,{path:"/splash",element:r.jsx(qP,{})}),r.jsx(et,{path:"/terms",element:r.jsx(UO,{})}),r.jsx(et,{path:"/",element:r.jsx(oS,{})}),r.jsx(et,{path:"/home",element:r.jsx(oS,{})}),r.jsx(et,{path:"/register",element:r.jsx(jO,{})}),r.jsx(et,{path:"/confirm-registration",element:r.jsx($V,{})}),t&&r.jsx(et,{path:"/wall",element:r.jsx(CW,{})}),t&&r.jsx(et,{path:"/echo-box",element:r.jsx(EW,{})}),t&&r.jsx(et,{path:"/my-story",element:r.jsx(BW,{})}),t&&r.jsx(et,{path:"/chat",element:r.jsx(pO,{})}),t&&r.jsx(et,{path:"/friend",element:r.jsx(CO,{})}),t&&r.jsx(et,{path:"/inbox",element:r.jsx(EO,{})}),t&&r.jsx(et,{path:"/ai",element:r.jsx(AO,{})}),t&&r.jsx(et,{path:"/tts",element:r.jsx(ES,{})}),t&&r.jsx(et,{path:"/journal",element:r.jsx(vV,{})}),t&&r.jsx(et,{path:"/missions",element:r.jsx(PS,{})}),t&&r.jsx(et,{path:"/restart-missions",element:r.jsx(PS,{})}),t&&r.jsx(et,{path:"/pairtalk",element:r.jsx(WO,{})}),t&&r.jsx(et,{path:"/skillbox",element:r.jsx(LO,{})}),t&&r.jsx(et,{path:"/skillbox/:scenarioId",element:r.jsx(DS,{})}),t&&r.jsx(et,{path:"/practice",element:r.jsx(DS,{})}),t&&r.jsx(et,{path:"/realistic-tts",element:r.jsx(ES,{})}),t&&r.jsx(et,{path:"/storywall",element:r.jsx(dV,{})}),t&&r.jsx(et,{path:"/chatroom",element:r.jsx(wV,{})}),t&&r.jsx(et,{path:"/invites",element:r.jsx(xx,{})}),t&&r.jsx(et,{path:"/mylinks",element:r.jsx(yx,{})}),r.jsx(et,{path:"/about",element:r.jsx(TV,{})}),r.jsx(et,{path:"/feedback",element:r.jsx(jV,{})}),r.jsx(et,{path:"/admin/feedback",element:r.jsx(_V,{})}),r.jsx(et,{path:"/CompleteProfile",element:r.jsx(CV,{})}),r.jsx(et,{path:"/privacy-policy",element:r.jsx(EV,{})}),r.jsx(et,{path:"/data-deletion",element:r.jsx(BV,{})}),r.jsx(et,{path:"/HelpLab",element:r.jsx(zV,{})}),r.jsx(et,{path:"/emotion-release",element:r.jsx(DV,{})}),t&&r.jsx(et,{path:"/social-integration",element:r.jsx(qV,{})}),r.jsx(et,{path:"/ai-statement",element:r.jsx(KV,{})}),r.jsx(et,{path:"/mental-health-disclaimer",element:r.jsx(GV,{})}),r.jsx(et,{path:"/cookie-policy",element:r.jsx(QV,{})}),r.jsx(et,{path:"/children-privacy",element:r.jsx(YV,{})}),r.jsx(et,{path:"/international-users",element:r.jsx(XV,{})}),r.jsx(et,{path:"/security-statement",element:r.jsx(JV,{})}),r.jsx(et,{path:"/update-notification",element:r.jsx(ZV,{})}),r.jsx(et,{path:"/plans",element:r.jsx(i9,{})}),r.jsx(et,{path:"/payment",element:r.jsx(r9,{})}),r.jsx(et,{path:"/upgrade",element:r.jsx(o9,{})}),r.jsx(et,{path:"/profile",element:r.jsx(s9,{})}),r.jsx(et,{path:"/payment-info",element:r.jsx(a9,{})}),r.jsx(et,{path:"/contact",element:r.jsx(l9,{})}),!1]})})]})})})})})})}const d9=k2(document.getElementById("root"));d9.render(r.jsx(u9,{}))});export default h9();
